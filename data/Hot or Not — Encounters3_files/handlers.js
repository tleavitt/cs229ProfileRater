if(B.Ovl.Base=$class(B.Ovl.View,{name:"Ovl.Base",controllerType:null,controller:null,isClientside:!0,init:function(e){$super(this,arguments),this.controller=this.createController(e),this.controller instanceof B.HoN_v3.BaseAsyncController?(this.controller.on({"view-ready":this.render},this),this.controller.request()):this.render()},destroy:function(){this.controller.destroy(),this.controller=null,$super(this,arguments)},render:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el),this.jinbaRequest.timer_add({group:"usable"},+new Date-this.jinbaRequest.time_start),this.endStat()},createController:function(e){var t=new this.controllerType;return t.setOvlData&&t.setOvlData(e),t.setJinbaRequest&&t.setJinbaRequest(this.jinbaRequest),t}}),B.Captcha=new $class(B.Page,{name:"Captcha",init:function(){$e.on(".reset_check,* .reset_check",this.reload_capcha,this)},reload_capcha:function(){var e=$("check_code_img");if(!e)return!0;var t,s,i=$("checkcode");e.hasAttribute("data-src")?(t=e.getAttribute("data-src"),e.removeAttribute("data-src")):t=e.src,t=t.split("?"),s=t[1]?$r.fromQueryString(t[1]):{},e.src=$r.images_root+"/v2/-/-/i/blank.16.png",s.reload=1,s.rand=Math.random(),e.src=t[0]+"?"+$r.toQueryString(s),i.value="",i.focus()},enable:function(){var e=$el.up($("check_code_img"),".js-captcha-code"),t=$el.down(e,".js-captcha-input");t.disabled=!1}}),$u.cb=new $class(B.Page,{name:"cb",init:function(){$e.on(".jscb",this.click,this)},click:function(e){if("checkbox"==e.type)$el.tgl(e.parentNode,"checked",e.checked);else if("radio"==e.type){for(var t=0,s=e.form.elements[e.name];t<s.length;t++)$el.del(s[t].parentNode,"checked");$el.add(e.parentNode,"checked")}return!0}}),$u.progress||($u.progress=$class({el:null,pel:null,pel2:null,w:120,t:-1,tl:20,min_width:22,constructor:function(e){$config(this,e),this.update_fn=this.update.bind(this),this.tl&&this.start()},destroy:function(){clearTimeout(this.timer),this.el&&(this.el=this.pel=this.pel2=null)},clean:function(){this.el&&(this.el.removeChild(this.pel),this.el.removeChild(this.pel2)),$el.del(this.el,"progress_bar")},start:function(){$el.add(this.el,"progress_bar"),this.pel=$el.create("div"),this.pel2=$el.create("i"),this.el.appendChild(this.pel),this.el.appendChild(this.pel2),this.update()},update:function(){var e=++this.t,t=this.tl,s=e/t,i=(t-e)%60,o=this.w,n=this.pel,r=this.pel2,a=$u.tpl("{m}:{s}",{m:parseInt((t-e)/60),s:10>i?"0"+i:i});return e>t?(this.clean(),this.destroy()):(n.style.width=parseInt(s*o)+"px",r.style.width=parseInt(o-s*o)+"px",e>t/2?(n.innerHTML=a,r.innerHTML=""):(n.innerHTML="",r.innerHTML=a),this.timer=setTimeout(this.update_fn,1e3),void 0)},adjust:function(e){this.tl=e}})),B.Ovl.Unauth=new $class(B.Ovl.CloudView,{name:"Ovl.Unauth",type:"unauth",simple_close:!1,destroy:function(){window.location.reload()}}),B.Ovl.BillingJinbaIframes=new $class({name:"Ovl.BillingJinbaIframes",requests:null,constructor:function(){this.requests=[],B.on({"ovl:start-stat-iframes":this.start,"ovl:stat-iframes":this.stat,"ovl:finish-stat-iframes":this.finish},this)},start:function(){B.on("ovl:contentready",this.ovl_contentready,this)},finish:function(){B.un("ovl:contentready",this.ovl_contentready,this),this.abort()},stat:function(e,t,s){var i,o,n,r,a;if(this.requests.length&&this.abort(),i=$el.select(e,"iframe"),i.length)for(s||(s=new $s.Request("ovl/"+t,$s.TAG_OVL)),this.requests.push(s),n=0;n<i.length;n++)o=i[n],null===o.getAttribute("data-noui")?r=s:(r=new $s.Request("ovl/stats-iframe",$s.TAG_OVL),this.requests.push(r)),a=this.normalize_src(o),r.timer_start(o.src,{group:"iframe_load",src:a}),$e.add(o,"load",this.iframe_load.bind(this,r))},abort:function(){var e,t;for(t=0;t<this.requests.length;t++)e=this.requests[t],e.is_active()&&e.abort();this.requests=[]},ovl_contentready:function(e){this.stat(e,B.Ovl.cfg.type,B.Ovl.$s)},iframe_load:function(e,t){var s=$e.element(t);e.timer_stop(s.src),e.end()},normalize_src:function(e){var t,s=e.src,i=s.indexOf("?");return i>=0&&(s=s.substring(0,i)),t=e.getAttribute("data-type"),t&&(s&&(s+="?"),s+=t),s?s:"(empty)"}}),B.Ovl.Billing=$class(B.Ovl.View,{name:"Ovl.Billing",type:null,simple_close:!1,_init:function(e,t){return B.fire("silence:on"),"wait"in t?("redirect_url"in t&&(B.Ovl._t.url=t.redirect_url),this.pr_t=setTimeout(B.Ovl._t.request.bind(B.Ovl._t,null),2e3),void 0):("bill_onclose"in t&&(this.bill_onclose=t.bill_onclose),$super(this,arguments))},_destroy:function(e){B.fire("silence:off");var t=$super(this,arguments);return!t&&this.bill_onclose&&(e&&setTimeout(B.Ovl.open.bind(B.Ovl,{url:this.bill_onclose,type:"bill_onclose"}),0),this.bill_onclose=null),this.pr_t&&(clearTimeout(this.pr_t),this.pr_t=null),t},destroy:function(){B.un("ovl:next",this.prevent_double_click,this),$e.un(this.$e),$super(this,arguments)},init:function(e){if(e&&"credits"in e){var t=$("credits");t&&(t.innerHTML=e.credits)}if(e&&"credits_counter"in e){var t=$("credits_counter");t&&(t.innerHTML=e.credits_counter)}B.on("ovl:next",this.prevent_double_click,this),this.$e=$e.on({".js-close-hit":this.close_hit,".js-choose-another-pack":this.choose_another_pack},this)},close_hit:function(e){var t=$el.down(this._el,"form");"A"===e.nodeName?new $r(e.href):t&&new $r(t.action,{method:t.method||"get",params:$r.serialize(t)}),this.close()},prevent_double_click:function(){if(this._form){var e=$el.down(this._form,".js-single-click");e&&e.setAttribute("disabled","disabled")}},choose_another_pack:function(){this._form&&this._form.fcs&&(this._form.fcs.value=0,this.next())}}),B.Ovl.Payment=new $class(B.Ovl.Billing,{name:"Ovl.Payment",type:"payment",blocks:{payment_method:1,payment_section:1,wizard_details_common:1,wizard_details:1,wizard_extra:1,wizard_extra_title:1},tabs:{},active_tab:null,_wizard_el:null,burin_index:void 0,_init:function(){B.fire("ovl:start-stat-iframes"),$super(this,arguments)},init:function(e){$super(this,arguments),this._wizard_el=$("wizard"),this.init_burin_index(e.burin),this.$e=$e.on({".action":this.action},this),"tab_type"in e&&this.init_tab(e.tab_type),e.ChatUnblockerSuccess&&B.Ovl.close()},destroy:function(e){this.burin_index=null,this.burin_class_name=null,B.fire("ovl:finish-stat-iframes"),this.$r&&this.$r.abort(),$e.un(this.$e),this._wizard_el=null,this.destroy_tab(),this.$s=this.$r=null,$super(this,arguments),B.fire("ovl:payment_close",e)},init_burin_index:function(e){e&&(this.burin_index=e,this.burin_class_name="wizard-ab-test-"+this.burin_index,$el.add(this._wizard_el,this.burin_class_name))},init_tab:function(e){this.active_tab=this.tabs[e],this.active_tab&&(this.active_tab._init(this._wizard_el,$el.down(this._wizard_el,".js-payment-active-tab"),this.burin_index),this.$t=this.active_tab.on({submit:this.submit,ready:this.ready},this))},destroy_tab:function(){this.active_tab&&(this.active_tab.un(this.$t),this.active_tab._destroy(),this.active_tab=null)},action:function(e){this.$r=new $r(e.href,{ready:this.ready,error:this.error},this),this.wait(1)},submit:function(){this.wait(1)},ready:function(e){if(this.destroy_tab(),this.init_burin_index(e.burin),"blocks"in e){var t;for(var s in e.blocks)if(s in this.blocks&&(t=$(s))){if("payment_section"==s){var i=$u.tpl2el(e.blocks[s]);B.fire("ovl:stat-iframes",i,this.type),t.innerHTML="",t.appendChild(i);continue}t.innerHTML=e.blocks[s]}this.destroy_form(),this.init_form()}"extra_visible"in e&&$el.tgl(this._wizard_el,"wizard--extra",e.extra_visible),$el.del(this._wizard_el,"wizard--details"),"tab_type"in e&&this.init_tab(e.tab_type),this.wait(0)},error:function(){this.wait(0)},wait:function(e){$el.tgl(this._wizard_el,"wizard--loading",e)},register:function(e){e.type&&(this.tabs[e.type]=e)}}),!B.Controls.Select){switch(B.Controls.Select=$class(B.Controls.BaseControl,{name:"Controls.Select",label_el:null,value_el:null,reset_el:null,drop_direction:null,expanded:!1,disabled:!1,options:null,value:"",placeholder:"",click_in_progress:!1,init:function(){$super(this,arguments),this.label_el=this.get_element(this.wrap_el,"label"),this.value_el=this.get_element(this.wrap_el,"value"),this.options_el=this.get_element(this.wrap_el,"options"),this.reset_el=this.get_element(this.wrap_el,"reset"),this.drop_direction=this.wrap_el.getAttribute("data-drop-direction"),this.value_el&&(this.value=this.value_el.value,this.toggle_value()),this.label_el&&(this.placeholder=this.label_el.hasAttribute("data-placeholder")?this.label_el.getAttribute("data-placeholder"):this.label_el.innerHTML),$el.has(this.wrap_el,"autowidth")&&this.autowidth(),$e.add(this.focus_el,"click",this.on_click,this),$e.add(this.focus_el,"keydown",this.on_keydown,this),$e.add(this.focus_el,"keypress",this.on_keypress,this),this.reset_el&&$e.add(this.reset_el,"click",this.reset,this),this.init_options(),this.is_disabled()&&this.disable(),this.is_active()&&this.expand()},destroy:function(){this.destroy_options(),$e.del(this.focus_el,"click",this.on_click,this),$e.del(this.focus_el,"keydown",this.on_keydown,this),$e.del(this.focus_el,"keypress",this.on_keypress,this),this.reset_el&&$e.del(this.reset_el,"click",this.reset,this),this.label_el=this.value_el=this.options_el=reset_el=this.drop_direction=null,$super(this,arguments)},get_element:function(e,t){switch(t){case"focus":case"label":return $el.down(e,".select-label");case"options":return $el.down(e,".select-options");case"value":return $el.down(e,".select-value");case"reset":return $el.down(e,".js-control-reset")}},create_options:function(e){return new B.Controls.SelectOptions({wrap_el:e})},init_options:function(){this.options=this.create_options(this.options_el),this.options.on({change:this.change,click:this.options_click,mousedown:this.options_mousedown,mouseup:this.options_mouseup,updated:this.correct_options_position,"raw-search":this.options_raw_search},this)},destroy_options:function(){this.options&&(this.options.destroy(),this.options=null)},enable:function(){this.disabled&&(this.disabled=!1,this.toggle_disabled(!1))},disable:function(){this.disabled||(this.expanded&&this.collapse(),this.disabled=!0,this.toggle_disabled(!0),this.toggle_focus(!1))},is_disabled:function(){return $el.has(this.wrap_el,"disabled")},is_active:function(){return $el.has(this.wrap_el,"active")},focus:function(){this.disabled||this.click_in_progress||(this.focus_el&&this.focus_el.focus(),$super(this,arguments))},blur:function(){this.click_in_progress||($super(this,arguments),this.expanded&&this.collapse(),this.fire("blur"))},expand:function(){this.expanded||this.disabled||(this.correct_options_position(),this.toggle_active(!0),this.options.expand(this.value),this.expanded=!0)},collapse:function(){this.expanded&&(this.options.collapse(),this.toggle_active(!1),this.expanded=!1)},set_selected_by_index:function(e){var t=this.options.options[e];this.set_label(t.label||t.text),this.set_value(t.value)},change:function(e){this.value!==e.value&&(this.set_label(e.label),this.set_value(e.value),this.fire("change",e.value,this.options.index_by_option(e)))},set_value:function(e){this.value!=e&&(this.value=e,this.value_el&&(this.value_el.value=e,$e.fire(this.value_el,"change")),this.toggle_value())},make_label:function(e){return null===e||void 0===e?this.placeholder:e},set_label:function(e){this.label_el.innerHTML=this.make_label(e),$el.tgl(this.label_el,"placeholder",!e)},reset:function(){this.disabled||(this.set_value(""),this.set_label(),this.options.reset(),this.fire("reset"))},search:function(e){this.options.search(e)},autowidth:function(){this.toggle_active(!0);var e,t=this.wrap_el.cloneNode(!0),s=$el.create("div",{className:"hidden_container"});document.body.appendChild(s),s.appendChild(t),e=$el.down(t,".select-options").offsetWidth,document.body.removeChild(s),this.wrap_el.style.width=e+"px",this.toggle_active(!1)},correct_options_position:function(){switch(this.drop_direction){case"down":return this.toggle_drop_up(!1);case"up":return this.toggle_drop_up(!0)}this.toggle_drop_up(!1);var e=$el.viewport_height(),t=e+$el.scroll_top(),s=this.options_el.getBoundingClientRect().top+$el.scroll_top()+this.options_el.offsetHeight,i=t-s;this.toggle_drop_up(0>i)},get_top_el:function(){return this.label_el.getBoundingClientRect().top<=this.options_el.getBoundingClientRect().top?this.label_el:this.options_el},toggle_active:function(e){$el.tgl(this.wrap_el,"active",e)},toggle_drop_up:function(e){$el.tgl(this.options_el,"bc",!e),$el.tgl(this.options_el,"tc",e)},toggle_disabled:function(e){$el.tgl(this.wrap_el,"disabled",e)},toggle_value:function(){$el.tgl(this.wrap_el,"value",!!this.value)},options_click:function(){this.collapse()},options_mousedown:function(){this.click_in_progress=!0},options_mouseup:function(){this.click_in_progress=!1,this.focus()},options_raw_search:function(){this.fire("raw-search")},on_keydown:function(){var e=$e.key($e.e);switch(e){case 13:if(this.expanded)return this.options.enter(),this.collapse(),!1;break;case 27:if(this.expanded)return this.collapse(),!1;break;case 32:return this.expanded||this.expand(),!0;case 38:return this.options.up(this.value,this.expanded),!1;case 40:return this.options.down(this.value,this.expanded),!1}return!0},on_keypress:function(){var e=$e.key($e.e),t=0===$e.e.charCode,s=32==e;return!t||s?(this.search(String.fromCharCode(e)),!1):!0},on_click:function(){this.disabled||(this.expanded?this.collapse():this.expand())}}),B.Controls.SelectOptions_Base=$class($u.Observable,{name:"Controls.SelectOptions_Base",wrap_el:null,scroll_el:null,options_el:null,options:null,hovered_option:null,selected_option:null,selected_index:-1,letter_mode:null,expanded:!1,search_reset_t:null,search_str:"",scrollbar:null,constructor:function(e){$super(this,arguments),$config(this,e),this.init()},init:function(){this.options_el=$el.down(this.wrap_el,".options"),$el.down(this.wrap_el,".scroll")||B.Controls.Scrollbar.wrap_block(this.options_el),this.scroll_el=$el.down(this.wrap_el,".scroll"),this.options=this.get_options(),this.search_reset_t=new $t(this.search_reset,this,1200)},destroy:function(){this.search_reset_t.clear(),this.wrap_el=this.scroll_el=this.options=this.search_reset_t=null,this.options_el=null},get_option_text:function(e){return e.innerHTML},get_options:function(){for(var e,t,s,i=[],o=$el.select(this.options_el,".option"),n=0;n<o.length;n++)e=o[n],s=this.get_option_text(e),t={el:e,value:e.getAttribute("data-value"),text:s,text_lower:s.toLowerCase(),label:e.getAttribute("data-label")||s,disabled:$el.has(e,"disabled")},i.push(t);return i},set_options:function(e){this.options_el.innerHTML=e,this.options=this.get_options()},expand:function(e){this.collapse_transition&&(this.collapse_transition.clear(),this.collapse_cleanup()),this.expanded=!0,this.scrollbar=new B.Controls.Scrollbar(this.scroll_el),$e.add(this.wrap_el,"mouseover",this.on_mousemove,this),$e.add(this.wrap_el,"mousedown",this.on_mousedown,this);var t;t=e?this.option_by_value(e):this.option_by_class("hover"),t&&(this.hover(t),this.select(t),this.scroll_to(t)),this.render()},collapse:function(){this.hovered_option=this.selected_option=null,this.render(),$e.del(this.wrap_el,"mouseover",this.on_mousemove,this),$e.del(this.wrap_el,"mousedown",this.on_mousedown,this),this.collapse_transition=$u.transition.wait(this.wrap_el,this.collapse_cleanup,this),this.expanded=!1},collapse_cleanup:function(){this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=this.collapse_transition=null)},reset:function(){this.hovered_option=this.selected_option=null,this.render()},search:function(e){var t=e.toLowerCase();this.search_str+=t,this.letter_mode=null==this.letter_mode||this.letter_mode&&this.search_str[0]==t?!0:!1;var s,i,o=this.options,n=o.length;this.letter_mode?(s=this.selected_index+1,s=n>s?s:0,i=function(e,t){return e[0]==t[0]}):(s=this.selected_index,i=function(e,t){return 0===t.indexOf(e)}),s&&(o=o.slice(s).concat(o.slice(0,s)));for(var r=0;n>r;r++)if(i(this.search_str,o[r].text_lower)){this.search_done((s+r)%n);break}this.search_reset_t.set()},search_done:function(e){var t=this.options[e];this.selected_index=e,this.hover(t),this.select(t),this.render(),this.scroll_to(t),this.change(t)},search_reset:function(){this.letter_mode=null,this.search_str=""},enter:function(){this.hovered_option?this.change(this.hovered_option):this.fire("raw-search")},up:function(e,t){this[t?"move":"move_and_change"](e,-1)},down:function(e,t){this[t?"move":"move_and_change"](e,1)},shift_index:function(e,t){return e+=t,0>e&&(e=0),e>=this.options.length&&(e=this.options.length-1),e},find_next_option:function(e,t){var s;if(1==this.options.length)return s=this.options[0],s.disabled?null:s;e=this.shift_index(e,t);for(var i=t>0?this.options.length-1:0;;){if(s=this.options[e],!s.disabled)return s;if(e=this.shift_index(e,t),t>0){if(e>i)break}else if(i>e)break}},move:function(e,t){if(this.options.length){var s;s=this.hovered_option?this.index_by_option(this.hovered_option):e?this.index_by_option(this.option_by_value(e)):-1;var i=this.find_next_option(s,t);return i&&(this.hover(i),this.select(i),this.render(),this.scroll_to(i)),i}},move_and_change:function(e,t){var s=this.move(e,t);s&&this.change(s)},scroll_to:function(e){var t=$el.down(this.wrap_el,".scroll_"),s=t.scrollTop,i=s+t.offsetHeight,o=e.el.offsetTop,n=o+e.el.offsetHeight;s>o?t.scrollTop=o:n>i&&(t.scrollTop+=n-i)},option_by_value:function(e){for(var t,s=0;s<this.options.length;s++)if(t=this.options[s],t.value==e)return t},option_by_el:function(e){$el.has(e,"option")||(e=$el.up(e,".option"));for(var t,s=0;s<this.options.length;s++)if(t=this.options[s],t.el==e)return t},option_by_class:function(e){for(var t,s=0;s<this.options.length;s++)if(t=this.options[s],$el.has(t.el,e))return t},index_by_option:function(e){for(var t=0;t<this.options.length;t++)if(this.options[t]==e)return t;return-1},hover:function(e){e&&!e.disabled&&(this.hovered_option=e)},select:function(e){this.selected_option=e},click:function(e){this.fire("click",e)},change:function(e){this.fire("change",e)},render:function(){for(var e,t=0;t<this.options.length;t++)e=this.options[t],$el.tgl(e.el,"hover",e==this.hovered_option),$el.tgl(e.el,"selected",e==this.selected_option),$el.tgl(e.el,"disabled",e.disabled)},on_mousedown:function(){return $e.add(document.body,"mouseup",this.on_mouseup,this),this.fire("mousedown"),!0},on_mouseup:function(e){$e.del(document.body,"mouseup",this.on_mouseup,this),this.fire("mouseup");var t=this.option_by_el(e);return t&&(t.disabled||(this.change(t),this.click())),!0},on_mousemove:function(e){this.hover(this.option_by_el(e)),this.render()}}),B.Controls.SelectOptions_IE=$class(B.Controls.SelectOptions_Base,{name:"Controls.SelectItems_IE",expand:function(){$super(this,arguments),$e.add(this.wrap_el,"selectstart",this.on_selectstart,this)},collapse:function(){$e.del(this.wrap_el,"selectstart",this.on_selectstart,this),$super(this,arguments)},on_selectstart:function(){return!1}}),$u.ua){case"ie10":case"ie11":B.Controls.SelectOptions=B.Controls.SelectOptions_IE;break;default:B.Controls.SelectOptions=B.Controls.SelectOptions_Base}$c.register("select",B.Controls.Select)}if($u.IFramePreloader=$class({constructor:function(e,t,s){this.iframe=e,this.fn=t,this.ctx=s,$e.add(this.iframe,"load",this.iframe_onload,this)},destroy:function(){$e.del(this.iframe,"load",this.iframe_onload,this),this.fn=this.ctx=null},iframe_onload:function(){this.fn&&this.fn.call(this.ctx)}}),B.Ovl.Payment.Tab=$class($u.Observable,{name:null,type:"base",_container:null,_tab:null,_burin_index:null,constructor:function(){$super(this,arguments),B.Ovl.Payment.register(this)},_init:function(e,t,s){this._container=e,this._tab=t,this._burin_index=s,this.init()},_destroy:function(){this.destroy(),this._container=null,this._tab=null},ready:function(e){this.fire("ready",e)},init:function(){var e=$el.down(this._container,".js-iframe-with-loader");e&&($el.add(this._tab,"loading"),this.iframe_preloader=new $u.IFramePreloader(e,this.iframe_load,this))},destroy:function(){this.iframe_preloader&&(this.iframe_preloader.destroy(),this.iframe_preloader=null)},iframe_load:function(){$el.del(this._tab,"loading")}}),B.Ovl.Payment.GenericTab=new B.Ovl.Payment.Tab,B.Ovl.Payment.PackageTab=$class(B.Ovl.Payment.Tab,{name:"PackageTab",type:"package",_credit_pack_select:null,_package_form:null,_auto_top_up_checkbox:null,_init:function(e,t,s){switch(s){case 6:case 7:this.$e_b=$e.on({".js-payment-radio-button":function(){return this.update_payment_section("select"),!0}},this);break;default:var i=$("credit_pack");i&&(this._credit_pack_select=$c.get(i,"select"),this._credit_pack_select.on({change:this.update_payment_section.bind(this,"select")}))}this.el_form=$("package_form"),this._package_form=new $u.Form(this.el_form,{ready:this.ready},this),this._auto_top_up_checkbox=$("automatic_top_up"),this._auto_top_up_checkbox&&$e.add(this._auto_top_up_checkbox,"change",this.auto_top_up_change,this),$super(this,arguments)},_destroy:function(){switch(this._burin_index){case 6:case 7:$e.un(this.$e_b),this.$e_b=null;break;default:this._credit_pack_select=null}this._package_form.destroy(),this._package_form=this.el_form=null,this._auto_top_up_checkbox&&$e.del(this._auto_top_up_checkbox,"change",this._auto_top_up_checkbox,this),this._auto_top_up_checkbox=null,$super(this,arguments)},auto_top_up_change:function(e){$el.down(this.el_form,".js-payment-automatic-top-up-state").value=+e.checked,this.update_payment_section("checkbox")},update_payment_section:function(e){var t=$el.down(this.el_form,".js-payment-selector");t&&(t.value=e),this.submit()},ready:function(e){e.tab_type?this.fire("ready",e):B.Ovl.open(e)},submit:function(){this._package_form.submit(),this.fire("submit")}}),B.Ovl.Payment.GenericPackageTab=new B.Ovl.Payment.PackageTab,B.Ovl.Payment.CreditCard=new $class(B.Ovl.Payment.PackageTab,{name:"CreditCard",type:"cc",_auto_top_up_checkbox:null,init:function(){$super(this,arguments),this._auto_top_up_checkbox=$("automatic_top_up"),$e.add(this._auto_top_up_checkbox,"change",this.submit,this)},destroy:function(){$e.del(this._auto_top_up_checkbox,"change",this.submit,this),this._auto_top_up_checkbox=null,$super(this,arguments)}}),B.Ovl.Payment.Smart2Pay=new $class(B.Ovl.Payment.PackageTab,{name:"Smart2Pay",type:"s2p",origin:null,init:function(){$super(this,arguments),$e.add(window,"message",this.message,this);var e=$("s2p_form").action.match(/^([a-z][a-z0-9+-.]*:\/\/[^\/]+)/i);this.origin=e[1],this.submit_s2p_form()},destroy:function(){$e.del(window,"message",this.message,this),this.origin=null,$super(this,arguments)},submit_s2p_form:function(){$("s2p_iframe").style.display="",$("s2p_form_submit").click()},message:function(e){var t;if(e.origin&&e.data&&e.origin==this.origin&&(t=e.data.search("="))&&-1!=t){var s=e.data.substring(0,t),i=e.data.substring(t+1);switch(s){case"redirectURL":window.location=i}}}}),B.Ovl.Payment.PayPal=new $class(B.Ovl.Payment.PackageTab,{name:"PayPal",type:"pp",init:function(){$super(this,arguments),$r.loader.js("https://www.paypalobjects.com/js/external/dg.js",this.api_loaded,this)},api_loaded:function(){var e=$el.down(this._container,".ppbtnlnk");if(e){var t=$el.down(e,"img");t&&(t.onclick=null);var s=e.id;s||(s="ppbtnlnk"+(Math.random()+"").slice(2),e.id=s),new PAYPAL.apps.DGFlow({trigger:s,expType:"popup"})}}}),B.Ovl.Payment.PayPalNew=new $class(B.Ovl.Payment.PackageTab,{name:"PayPal",type:"pp-new",init:function(){$super(this,arguments),$r.loader.js("//www.paypalobjects.com/api/checkout.js",this.api_loaded,this)},api_loaded:function(){var e=$el.down(this._container,".ppbtnlnk");if(e){var t=$el.down(e,"img");t&&(t.onclick=null);var s=e.id;s||(s="ppbtnlnk"+(Math.random()+"").slice(2),e.id=s),paypal.checkout.setup(this.el_form.merchant_id.value,{button:[e.id],environment:this.el_form.environment.value})}}}),B.Ovl.Payment.Sms=new $class(B.Ovl.Payment.PackageTab,{name:"sms",type:"sms",init:function(){$super(this,arguments),this.$e=$e.on({".js-op-switch":this.activate_op,".js-op-submit":this.submit},this)},destroy:function(){$e.un(this.$e),$super(this,arguments)},activate_op:function(e){$el.del($("js-op-step2"),"blocked"),$el.del($el.down($el.up(e,".js-op-names"),".active"),"active"),$el.add(e.parentNode,"active"),$el.down(this.el_form,".js-payment-operator-id").value=e.getAttribute("data-op-id"),e.getAttribute("data-op-submit")&&this.submit()},submit:function(e){if(e){var t=$el.down(this.el_form,".js-payment-step-part").value=e.getAttribute("data-op-step");"step-pin"==t&&($el.down(this.el_form,".js-payment-pin-code").value=$("js-op-pin").value)}$super(this,arguments)}}),B.Ovl.PaymentResult=new $class(B.Ovl.View,{name:"Ovl.PaymentResult",type:"payment-result-ovl",reopen_url:null,init:function(){B.IM&&B.IM.opened||(this.reopen_url=$u.storage.getItem("bd_whatsnew_url"),B.on("ovl:close",this.reopen,this))},reopen:function(){B.un("ovl:close",this.reopen,this),this.reopen_url&&(B.Ovl.open({type:"whats-new-stickers",url:this.reopen_url}),$u.storage.removeItem("bd_whatsnew_url"),this.reopen_url=null)}}),$u.error_tpl='<div class="input-error">{text}</div>',$u.handle_errors=function(e,t,s,i){s=s||"input-error",i=i||$u.error_tpl;var o=$el.select(e,".input-error");if(t){for(var n,r,a,l=e.elements,_=0,c=l.length;c>_;_++)if(n=l[_],r=null,"hidden"!=n.type&&n.name&&!n.disabled){for(var u=0,p=o.length;p>u;u++)if(o[u].parentNode==n.parentNode){r=o[u];break}n.name in t?(a=$u.tpl2el(i,{text:t[n.name]}),a.className=s,r?n.parentNode.replaceChild(a,r):n.parentNode.insertBefore(a,n)):r&&$el.add(r,"hidden")}}else for(var _=0,c=o.length;c>_;_++)$el.add(o[_],"hidden")},$u.FormErrorHandler||($u.FormErrorHandler={},$u.FormErrorHandler.Abstract=$class({name:"FormErrorHandler.Abstract",error_els:null,form:null,on_handle_errors:null,on_clean_errors:null,scope:null,constructor:function(e,t){t&&$config(this,t),this.form=e,this.error_els={},this.init()},destroy:function(){this.on_handle_errors=this.on_clean_errors=this.scope=this.error_els=this.form=null},handle:function(e){this.configure(e);var t,s,i=e.errors,o=this.form.elements,n=o.length;for(t=0;n>t;t++)s=o[t],!s.name||s.disabled||"hidden"==s.type&&null===s.getAttribute("data-show-error")||(s.name in i?this.show(s,i[s.name]):this.error_els[s.name]&&this.hide(this.error_els[s.name]));this.on_handle_errors&&this.on_handle_errors.call(this.scope,e)},clean:function(){for(var e in this.error_els)this.hide(this.error_els[e]);this.on_clean_errors&&this.on_clean_errors.call(this.scope)},init:function(){},configure:function(){},show:function(){},hide:function(){}}),$u.FormErrorHandler.Classic=$class($u.FormErrorHandler.Abstract,{name:"FormErrorHandler.Classic",default_error_class_errno2:"input-hint",default_error_class:"input-error error",default_error_tpl:'<div class="input-error">{text}</div>',error_class:null,error_tpl:null,init:function(){var e,t,s,i,o=this.form.elements,n=$el.select(this.form,"."+this.default_error_class);for(e=0;e<n.length;e++)for(s=n[e],t=0;t<o.length;t++)i=o[t],s.parentNode==i.parentNode&&(this.error_els[i.name]=s)},configure:function(e){this.error_tpl=e.tpl||this.default_error_tpl,this.error_class=2==e.errno?this.default_error_class_errno2:this.default_error_class},show:function(e,t){var s=$u.tpl2el(this.error_tpl,{text:t}),i=this.error_els[e.name];if(s.className=this.error_class,i)e.parentNode.replaceChild(s,i);else{var o=e.nextSibling;o?e.parentNode.insertBefore(s,o):e.parentNode.appendChild(s)}this.error_els[e.name]=s},hide:function(e){$el.add(e,"hidden")}}),$u.FormErrorHandler.Modern=$class($u.FormErrorHandler.Abstract,{name:"FormErrorHandler.Modern",handle:function(e){var t=B.Captcha&&"checkcode"in e.errors;t&&B.Captcha.enable(),$super(this,arguments),t&&B.Captcha.reload_capcha()},show:function(e,t){var s=this.error_els[e.name];s||(s=this.error_els[e.name]={},s.row=$el.up(e,".js-error-wrap"),s.text=$el.down(s.row,".js-input-error")),$el.add(s.row,"error"),$el.del(s.row,"hidden"),s.text.innerHTML=t},hide:function(e){$el.del(e.row,"error")}})),$u.Form||($u.Form=$class({form:null,url:"",transport:null,error_handler:null,ready:null,error:null,scope:null,interactive:!1,constructor:function(e,t,s){return $u.FormFile&&"multipart/form-data"==e.enctype?new $u.FormFile(e,t,s):(this.form=e,this.scope=s,$config(this,t),this.init(),void 0)},init:function(){this.error_handler||(this.error_handler=new $u.FormErrorHandler.Classic(this.form)),$e.add(this.form,"submit",this.submit,this),$e.add(this.form,"reset",this.clean_errors,this)},destroy:function(){this.error_handler&&this.error_handler.destroy(),this.error_handler=null,this.transport instanceof $r&&this.transport.abort(),this.transport=null,$e.del(this.form,"submit",this.submit,this),$e.del(this.form,"reset",this.clean_errors,this),this.form=null,this.interactive=!1},submit:function(){if(this.form){if(this.interactive)return!1;var e=this.serialize();return this.validate(e)?(this.clean_errors(),$el.add(this.form,"el-loading"),this.on_submit?(this.on_submit.call(this.scope||this,this.form,this),!1):this.send(e)):!1}},serialize:function(){return $r.serialize(this.form)},validate:function(){return!0},send:function(e){if(this.form){var t=this.url||this.form.getAttribute("action");return this.transport=new $r(t,{method:this.form.method||"get",rand:!0,params:e,ready:this.receive,error:this.receive_error},this),this.interactive=!0,!1}},receive:function(e){if(this.form){if(this.interactive=!1,$el.del(this.form,"el-loading"),"errors"in e)return this.handle_errors(e);this.clean_errors(),this.ready&&this.ready.call(this.scope||this,e,this)}},clean_errors:function(){return this.error_handler.clean(),!0},handle_errors:function(e){this.error_handler.handle(e)},receive_error:function(){this.interactive=!1,$el.del(this.form,"el-loading"),this.error&&this.error.call(this.scope||this)}})),B.UplImportForm=$class($u.Form,{clean_errors:function(){var e=$el.down(this.form,".js-import-error");return this.errno3_el&&(this.form.removeChild(this.errno3_el),this.errno3_el=null),$el.del(this.form.parentNode.parentNode,"show_other"),e&&($el.del(e,"active"),$el.remove($el.down(e,".popover"))),$super(this,arguments)},serialize:function(){var e=$super(this,arguments);return e.size=180,e}}),B.ImportUpdater=$class({name:"ImportUpdater",url:"",transport:null,update_time:2e3,interactive:!1,items:null,count:0,_timer:0,update_fn:null,ready:function(){},scope:null,constructor:function(e){$config(this,e),this.items={},this.transport=new $r(this.url,{auto:!1,ready:this.receive},this),this.update_fn=this.update.bind(this)},destroy:function(){this.transport.abort(),clearTimeout(this._timer);for(var e in this.items)this.del(e)},add:function(e,t){this.items[e]=!0,this.count++,this.interactive||(this.interactive=!0,t?this.update():this.update_deffer())},del:function(e){delete this.items[e],this.count--,this.count||(this._timer=clearTimeout(this._timer),this.interactive=!1)},update_deffer:function(){this.interactive&&(this._timer=setTimeout(this.update_fn,this.update_time))},update:function(){var e=[];for(var t in this.items)e[e.length]=t;this.transport.request({ids:e.join(",")})},receive:function(e){this.ready.call(this.scope||this,e),this.update_deffer()}}),$u.Confirm||($u.Confirm=new $class(B.Page,{name:"$u.Confirm",el:null,_tpl:'<div class="popover-dynamic" style="top:{top}; left:{left}; right:{right};">		<div			class="popover {type}"		>			<b>{title}</b>				{msg}			<div class="alt">				<div class="btn btn--sm btn--grey">					<span class="btn-txt">{bn_text}</span>					<span class="b-link dConfirm-ok"></span>				</div>				<span class="alt-or">{or}</span>				<span class="p-link dConfirm-cancel">{cancel}</span>			</div>		</div>	</div>',x:0,y:0,ralign:!1,type:"",text:"",onOk:null,onCancel:null,scope:null,visible:!1,args:null,defaults:{x:0,y:0,ralign:!1,type:"",text:"",onOk:null,onCancel:null,scope:null,args:[]},init:function(){$e.on({".dConfirm-ok":this.ok,".dConfirm-cancel":this.cancel},this)},show:function(e){$config(this,e,this.defaults),this.el=$u.tpl2el(e.tpl||this._tpl,{type:this.type,top:this.y+"px",left:this.x+"px",title:e.text.title,bn_text:e.text.ok,or:e.text.or,cancel:e.text.cancel,msg:e.text.msg}),document.body.appendChild(this.el),this.visible=!0;
var t=$el.down(this.el,"input, button");t&&t.focus(),$e.on("__all__",this._onclick,this),B.on("app:statechange",this.hide,this),$u.escape.on(this.hide,this)},_onclick:function(){var e=$e.element($e.e);return $el.has(e,"popover")||$el.up(e,".popover")||this.hide(),!0},hide:function(){this.el&&($el.remove(this.el),$e.un("__all__",this._onclick,this),B.un("app:statechange",this.hide,this),$u.escape.un(this.hide),this.visible=!1)},ok:function(){this.onOk&&this.onOk.apply(this.scope,this.args),this.hide()},cancel:function(){this.hide(),this.onCancel&&this.onCancel.apply(this.scope,this.args)}})),$u.CU||($u.CU=$class({leave_str:"",unload_str:"",close_str:"",save_fn:null,scope:null,installed:!1,constructor:function(e){$config(this,e),this.beforeunload_=this.beforeunload.bind(this)},install:function(){this.installed||(this.installed=!0,this.leave_str&&$e.on("__any__",this.confirm,this),this.unload_str&&$e.add(window,"beforeunload",this.beforeunload_))},uninstall:function(){this.close_str&&$u.Confirm.hide(),this.installed=!1,$e.un("__any__",this.confirm,this),$e.del(window,"beforeunload",this.beforeunload_)},confirm:function(e){var t=$e.element(e);return("A"==t.nodeName||(t=$el.up(t,"a")))&&(this.uninstall(),confirm(this.leave_str))?(this.save_fn.call(this.scope,t),!0):!1},beforeunload:function(e){return e&&(e.returnValue=this.unload_str),this.unload_str},confirm_close:function(e){var t,s;e?(s=e.getBoundingClientRect(),t={x:s.left+s.width/2,y:s.top+s.height/2+$el.scroll_top()}):t=$e.pointerXY(e||$e.e),$u.Confirm.show({ralign:!0,x:t.x,y:t.y,type:"tr",text:this.close_str,onOk:this.save_fn,scope:this.scope})}})),$u.chkToggle=new $class(B.Page,{name:"$u.chkToggle",init:function(){$e.on({".chk":this.chk,".chk-all":this.chk_all,".chk-gr":this.chk_gr},this),this.t=new $t(this.update,this)},chk:function(e){return $el.tgl(e.parentNode,"checked"),this.fire_update(e.form,$el.up(e,".chk-w")),!0},chk_all:function(e){return this.set(e.form.elements,e.checked),this.fire_update(e.form),!0},chk_gr:function(e){return this.set($el.select($el.up(e,".chk-w"),"input"),e.checked),this.fire_update(e.form),!0},set:function(e,t){for(var s,i=0,o=t?$el.add:$el.del,n=0,r=e&&e.length;r>n;n++)if(s=e[n],"checkbox"!=s.type&&"radio"!=s.type||!($el.has(s,"chk")||$el.has(s,"chk-passive")||$el.has(s,"chk-gr"))||(void 0===t||s.disabled||(s.checked=t,o(s.parentNode,"checked")),!s.checked||$el.has(s,"chk-gr")||$el.has(s,"chk-passive")||i++),s.checked){var a=s.getAttribute("data-users-count");a&&(i+=+a)}return i},fire_update:function(e,t){this.t.set(0,e,t)},update:function(e,t){var s=$el.down(e,".js-chk-num"),i=s&&$el.down(e,".js-chk-needed"),o=$el.down(e,".chk-bn"),n=$el.select(e,".chk-submit"),r=this.set(e.elements);if(n.length)for(var a=0;a<n.length;a++)n[a].disabled=!r;if(!s){var l=$el.up(e,".ovl");l&&(s=$el.down(l,".js-chk-num"),i=$el.down(l,".js-chk-needed"))}if(s&&(s.innerHTML=r,i&&(r>=+i.innerHTML?$el.del:$el.add)(s.parentNode,"accent_orange")),o&&($el.tgl(o,"disabled",!r),$el.tgl(o,"tooltip-wrap",!r),o.disabled=!r),t){var _=$el.select(t,".chk"),r=0,c=0;if(!_.length)return;for(var a=0,u=_.length;u>a;a++)s=_[a],s.checked&&r++,c++;(0==r||r==c)&&(s=$el.down(t,".chk-gr"),s&&(s.checked=r==c))}}}),$fx.queue=$class({fx:null,fx_going:!1,fx_queue:[],fx_config:null,constructor:function(e){this.fx_config={onStart:this.fx_start,onEnd:this.fx_end,scope:this},$config(this.fx_config,e)},begin:function(){this.fx=new $fx.effect(this.fx_config)},add:function(e){this.fx.add(e)},commit:function(){this.fx.items.length&&(this.fx_going?this.fx_queue.push(this.fx):this.fx.start()),this.fx=null},rollback:function(){this.fx._timer&&this.fx.end(),this.fx=null},abort:function(){this.rollback(),this.fx_queue=[]},fx_start:function(){this.fx_going=!0},fx_end:function(){this.fx_going=!1,this.fx_queue.length&&(this.fx=this.fx_queue.shift(),this.fx.start(),this.fx=null)}}),B.ImportFx=$class($fx.queue,{name:"ImportFx",duration:300,constructor:function(){$super(this,arguments,{duration:this.duration})},queue:function(e,t){t.el=e,t.prop=t.prop||"height",this.add(new $fx.style(t))},loading_first:function(e){var t=$("sf_loading");this.queue(t.parentNode,{start:function(){this.from=0;var s=this.el.style;s.overflow="hidden",s.height=this.from+"px",t.appendChild(e),$el.add(this.el,"sf-show-loading"),this.to=this.el.scrollHeight},end:function(){var e=this.el.style;e.overflow="",e.height=""}})},loading_second:function(e){var t=$("sf_loading");this.queue(e,{start:function(){this.from=0;var s=this.el.style;s.overflow="hidden",s.height=this.from+"px",t.insertBefore(e,t.firstChild),this.to=this.el.scrollHeight},end:function(){var e=this.el.style;e.overflow="",e.height=""}})},show_errno3:function(e,t){var s=$("sf_again");this.queue(e,{start:function(){this.from=0;var t=this.el.style;t.overflow="hidden",t.height=this.from+"px",s.insertBefore(e,s.firstChild),this.to=this.el.scrollHeight},end:function(){var e=this.el.style;e.overflow="",e.height="",t&&t()}})},hide_errno3:function(e){this.queue(e,{start:function(){this.from=this.el.offsetHeight,this.to=0,this.el.style.overflow="hidden"},end:function(){this.el.parentNode.removeChild(this.el)}})},contacts_head_first:function(e){this.queue(e,{start:function(){this.from=0;var t=this.el.style;t.overflow="hidden",t.height=this.from+"px";var s=$("sf_cheads");s.childNodes.length?s.insertBefore(e,s.firstChild):s.appendChild(e),$el.add(this.el,"sf-show-loading"),this.to=this.el.scrollHeight},end:function(){var e=this.el.style;e.overflow="",e.height=""}})},contacts_head_second:function(e){this.queue(e,{start:function(){this.from=0;var t=this.el.style;t.overflow="hidden",t.height=this.from+"px";var s=$("sf_cheads");s.insertBefore(e,s.firstChild),this.to=this.el.scrollHeight},end:function(){var e=this.el.style;e.overflow="",e.height=""}})},del_loading:function(e){var t=$("sfl_"+e);this.queue(t,{start:function(){this.from=this.el.offsetHeight,this.to=0,this.el.style.overflow="hidden"},end:function(){this.el.parentNode.removeChild(this.el)}})},del_loading_last:function(){var e=$("sf_loading");this.queue(e.parentNode,{start:function(){this.from=this.el.offsetHeight,this.to=0;var e=this.el.style;e.overflow="hidden"},end:function(){e.innerHTML=""}})},open_form:function(e,t){t&&this.queue(t,{start:function(){this.from=this.el.offsetHeight,this.to=e&&e.offsetHeight||21;var t=this.el.style;t.overflow="hidden"},end:function(){var e=this.el.style;this.el.className="sf",e.overflow="",e.height="",t._form&&t._form.reset()}}),e&&this.queue(e,{start:function(){var e=$el.down(this.el,"form");if(e)try{var t=e.elements[0];"INPUT"==t.nodeName&&t.id&&"id_"==t.id.substring(0,3)&&B.Import&&(B.Import.visual.current.radio?B.Import.change_label(B.Import.visual.current.radio):B.Import.change_label(t))}catch(s){}this.from=this.el.offsetHeight;var i=this.el.style;i.overflow="hidden",i.height=this.from+"px",this.el.className="sf sf-open",this.to=this.el.scrollHeight},end:function(){var e=this.el.style;e.overflow="",e.height="";var t=$el.down(this.el,"form");if(t)try{var s=t.elements[0];B.Import&&B.Import.visual.current.radio&&(s=$(B.Import.visual.current.radioId)),"BUTTON"!=s.nodeName&&(s.click&&s.click()||s.focus())}catch(i){}}})},move_contacts_to_right:function(){var e=$("sf_pc");this.queue(e,{prop:"left",start:function(){this.from=-420,this.to=0;var e=this.el.style;e.left=this.from+"px",$el.del(document.body,"show_contacts_only")},end:function(){var e=this.el.style;e.left=""}})}}),B.ImportLinksKeeper||(B.ImportLinksKeeper=new $class({name:"ImportLinksKeeper",constructor:function(){this.social_provider_url=""},destroy:function(){this.social_provider_url=null},get_provider_url:function(){return this.social_provider_url}})),B.SocialProviders={},B.SocialProviders.FormProvider=$class({name:"SocialProviders.FormProvider",social_classes:["facebook","yahoo","windowslive","test","vk","orkut"],dform:null,old_handle_errors:null,old_receive:null,constructor:function(e){this.dform=e,this.old_receive=this.dform.receive,this.old_handle_errors=this.dform.handle_errors,this.dform.receive=this.receive.bind(this),this.dform.handle_errors=this.handle_errors.bind(this)},destroy:function(){this.dform.handle_errors=this.old_handle_errors,this.dform.receive=this.old_receive,this.on_error=this.old_receive=this.old_handle_errors=this.dform=null},receive:function(e){this.old_receive.call(this.dform,e),this.on_error=!1},handle_errors:function(e){this.on_error?this.on_error[0].call(this.on_error[1],e):this.old_handle_errors.call(this.dform,e)},open:function(e,t,s){this.on_error=[t,s];var i=$("sf_pf");if(i){$el.add(i,"social_"+e);for(var o in this.social_classes)$el.del(i,"social_"+this.social_classes[o])}var n=$("id_"+e);n&&(n.checked=!0);var r=$("scl_"+e+"_btn");s.dform.form&&s.dform.form.form_type&&r.setAttribute("data-form-type",s.dform.form.form_type.value),r&&r.click&&r.click(),r.removeAttribute("data-form-type")}}),B.SocialProviders.Form=$class({name:"SocialProviders.Form",scope:"",on_open:null,res:null,cache:{},dform:null,timer:null,login:null,password:null,password_field:null,old_validate:null,old_ready:null,popup_name:"auth",popup_period:500,popup:null,popup_interval:null,provider:!1,provider_stat_id:!1,constructor:function(e,t){this.dform=e,$config(this,t),this.old_validate=this.dform.validate,this.old_ready=this.dform.ready,this.dform.validate=this.validate.bind(this),this.dform.ready=this.ready.bind(this);var s=this.dform.form;this.login=$el.down(s,"#webmail_login"),this.password=$el.down(s,"#webmail_password_block"),this.password_field=$el.down(this.password,".input"),this.submit_btn=$el.down(s,".js-webmail-import-submit"),$e.on(".js-scl_btn-open_popup",this.open_popup,this),$e.add(this.login,"keyup",this.change,this),$e.add(this.login,"input",this.change,this),$e.add(this.login,"blur",this.change,this),this.timer=new $t(this.test_domain,this,250),this.test_domain()},destroy:function(){this.unhandle_import(),this.popup=null,this.dform.validate=this.old_validate,this.dform.ready=this.old_ready,this.timer.clear(),this.transport&&this.transport.abort(),$e.un(".js-scl_btn-open_popup",this.open_popup,this),$e.del(this.login,"keyup",this.change,this),$e.del(this.login,"input",this.change,this),$e.del(this.login,"blur",this.change,this),this.set_provider(!1),this.scope=this.on_open=this.old_validate=this.old_ready=this.dform=this.transport=this.timer=this.login=this.password=this.popup=null},change:function(){return this.timer.set(),!0},validate:function(){return this.old_validate.call(this.dform)?this.provider?(this.on_open.call(this.scope,this.provider),!1):!0:!1},ready:function(e){return 3==e.errno?(this.set_provider(e.provider),this.on_open.call(this.scope,this.provider),!1):(this.old_ready.apply(this.dform.scope||this.dform,arguments),void 0)},test_domain:function(){var e=this.login.value.toLowerCase().replace(/^\s+|\s+$/g,"");if(!e)return this.set_provider(!1),void 0;var t=e.split("@")[1]||"";if(""!=t){if(this.transport&&(this.transport.abort(),this.transport=null),t in this.cache){var s=this.cache[t];return this.set_provider(s.provider,s.dont_hide_password),void 0}this.transport=new $r(B.ImportLinksKeeper.get_provider_url(),{params:{q:t},ready:this.test_ready},this)}},test_ready:function(e){this.transport=null,this.cache[e.domain]={provider:e.provider,dont_hide_password:e.dont_hide_password},this.set_provider(e.provider,e.dont_hide_password)},set_provider:function(e,t){e!=this.provider&&($el.tgl(this.password,"hidden",!!e&&t!==!0),this.provider=e)},on_import:function(){this.unhandle_import()},unhandle_import:function(){this.popup_interval&&(B.un("import_auth",this.on_import),window.clearInterval(this.popup_interval),this.popup_interval=null)},open_popup:function(e){var t=e.getAttribute("data-url"),s=e.getAttribute("data-width"),i=e.getAttribute("data-height"),o=e.getAttribute("data-provider-id"),n=$el.up(e,"form"),r=e.getAttribute("data-form-type")||n&&n.form_type.value;return r&&(t+="&form_type="+r),e.removeAttribute("data-stat-message"),this.provider=o,this.provider_stat_id=e.getAttribute("data-numeric-provider-id"),this.unhandle_import(),this.popup=window.open(t,"auth","width="+s+",height="+i+",scrollbars=yes"),this.popup_interval=window.setInterval(this.watch_popup.bind(this),this.popup_period),B.on("import_auth",this.on_import,this),!1},watch_popup:function(){(!this.popup||this.popup.closed)&&this.on_popup_close()},on_popup_close:function(){this.unhandle_import()}}),B.SocialProviders.FormWithHeader=$class(B.SocialProviders.Form,{name:"SocialProviders.FormWithHeader",header:null,constructor:function(){$super(this,arguments),this.header=$el.down($("sft_webmail"),".sf-head"),$e.add(this.header,this.change,this),this.error_handler||(this.error_handler=new $u.FormErrorHandler.Classic(this.dform.form))},destroy:function(){$super(this,arguments),$e.del(this.header,this.change,this),this.header=null}}),B.ConnectForm=$class($u.Form,{submit:function(){return B.Footer&&B.Footer.reset_ssid(),$super(this,arguments)},validate:function(e){var t=!0;return($vars.Import&&$vars.Import.access_staff||$vars.Import2&&$vars.Import2.access_staff)&&(t=window.confirm("Connect?"),t&&(e.connect_confirmed=1)),t},receive:function(e){return $super(this,arguments),"ovl"in e?(B.Ovl.open(e.ovl),void 0):e.url?B.App.enabled&&e.state?(B.App.app_link(e.state,e.url),void 0):location.href=e.url:void 0}}),B.UploadImport=new $class(B.Page,{name:"UploadImport",url:"/photos/import/check.phtml",cancel_url:"/photos/import/cancel.phtml?share_session_id={id}",str:{},sort_order:null,social_provider_url:"",defaults:{complete_redirect:null},mr:null,form:null,dform:null,progress_bars:null,_import_forms:[],moreElement:void 0,sf_form:null,confirm_tpl:'<div class="popover lt">{html}</div>',soc_webmail_form:null,soc_provider:null,ovl_type:"upload-import",not_ready:!0,upload_cancel_inprogress:!1,init:function(){this.progress_bars={},this._import_forms=[],this.fx=new B.ImportFx,$e.on({".us-album, * .us-album":this.select_album,".sf-cancel":this.cancel_thread,".hide_confirm":this.hide_confirm,".sf-head":this.sf_open,".sf-cpl":this.change_label,".fb-more":this.more_photos},this),$config(this,$vars[this.name])},set_import_urls:function(){B.ImportLinksKeeper.social_provider_url=this.social_provider_url},_chk_prev:null,select_album:function(e){return this._chk_prev&&$el.del(this._chk_prev,"current"),$el.add(this._chk_prev=e,"current"),!0},destroy:function(){this._chk_prev=null,this.unload()},load_login:function(e){e&&$config(this,e.vars,this.defaults),B.UploadFbc.set_order(this.sort_order),this.set_import_urls(),B.Upload&&B.Upload.Overlay&&(B.Upload.Overlay.opened=!1),this.mr=new B.ImportUpdater({url:this.url,ready:this.ready,scope:this}),this.ovl=B.Ovl.v._el;var t=$el.select(this.ovl,"form");if(t.length){for(var s=null,i=null,o=0,n=t.length;n>o;o++)t[o]._dform=this._import_forms[this._import_forms.length]=new B.UplImportForm(t[o],{ready:this.add_thread,scope:this}),"sft_webmail_form"==t[o].id&&(s=t[o]._dform),"sft_social_form"==t[o].id&&(i=t[o]._dform);s&&i&&(this.soc_provider=new B.SocialProviders.FormProvider(i),this.soc_webmail_form=new B.SocialProviders.FormWithHeader(s,{scope:this,on_open:this.social_open})),this.form=t[0],this.cform=$el.down(this.ovl,".sf-open"),this._chk_prev=$el.down(this.form,".current"),this.load2(),i&&this.change_label($el.down(i,".sf-cpl"))}},load_results:function(){this.ovl=B.Ovl.v._el;var e=$el.select(this.ovl,"form");if(e.length){for(var t=0,s=e.length;s>t;t++)this._import_forms[this._import_forms.length]=new B.UplImportForm(e[t],{ready:this.finish_ready,error:this.finish_error,scope:this});this.form=e[0],this.cform=$el.down(this.ovl,".sf-open"),this.load2()}},load2:function(){this.cu=new $u.CU({unload_str:this.str.confirm_unload,close_str:this.str.confirm_abort,save_fn:this.abort,scope:this});try{this.form.elements[0].focus()}catch(e){}this.is_fbc&&(this.is_fbc=!1,this.form._dform.submit());var t=$el.down(B.Ovl.v&&B.Ovl.v._el,".js-connect-form");t&&(this.sf_form=new B.ConnectForm(t,{},this))},unload:function(){if(this.mr&&this.mr.count&&this.str.confirm_abort)return this.cu.confirm_close($el.down(B.Ovl.v._el,".js-ovl-close")),!0;this.not_ready&&(this.upload_cancel_inprogress=!0,B.fire("upload:cancel"),this.upload_cancel_inprogress=!1),this.not_ready=!0,this.soc_provider&&this.soc_provider.destroy(),this.soc_webmail_form&&this.soc_webmail_form.destroy(),this.soc_provider=this.soc_webmail_form=null,this.sf_form&&(this.sf_form.destroy(),this.sf_form=null);for(var e=0,t=this._import_forms.length;t>e;e++)this._import_forms[e]._dform=null,this._import_forms[e].destroy();this._import_forms=[],this.mr&&this.mr.destroy(),this.ovl=this.cu=this.mr=this.form=this._chk_prev=this.cform=null,this._sel_st=!0},abort:function(){for(var e in this.mr.items)this.del_thread(e);B.Ovl.close()},add_thread:function(e){e.tl&&(this.progress_bars[e.id]=this.get_progress_bar(this.form,e.tl),$el.down(this.form,".sf-cancel").rel=e.id),this.mr.add(e.id),this.cu_check(),$el.add(this.form,"do_upload")},get_progress_bar:function(e,t){var s=$el.down(e,".connect_bar");return new $u.progress({el:s,tl:t})},del_thread:function(e){e in this.progress_bars&&(this.progress_bars[e].clean(),this.progress_bars[e].destroy(),delete this.progress_bars[e]),this.mr.del(e),this.cu_check()},cancel_thread:function(e){var t=e.rel;t&&(new $r($u.tpl(this.cancel_url,{id:t})),this.del_thread(t),this.stop_progress())},cu_check:function(){this.mr&&this.mr.count?this.cu.install():this.cu.uninstall()},ready:function(e){this.not_ready=!1,"imports"in e&&($config(this,e.vars),this.show_contacts(e.imports,e.contacts,e.contacts_type)),"tls"in e&&this.adjust_timeleft(e.tls)},show_contacts:function(e,t,s){var i=!1;for(var o in e)if(o in this.mr.items){var n=e[o];B.fire("import:started",e[o].provider_name),i=!!n.errno,4==n.errno?setTimeout(function(e){return function(){B.Ovl.open({type:"cloud",html:e.error_text,destroy:function(){setTimeout(function(){B.fire("upload:end")},0)}})}}(n),0):n.errno&&this.show_errno3(this.form.elements[0],n.error_text),this.del_thread(o),this.stop_progress()}this.cu_check(),t&&(this.stop_progress(),"rating"==s?B.fire("import_contacts",t,i):B.Ovl.open({type:this.ovl_type,html:t,use_contacts_type:!0,contacts_type:s}))},stop_progress:function(){$el.del(this.form,"do_upload")},show_errno3:function(e,t){var s=$el.down(this.form,".js-import-error");s&&(s.appendChild($u.tpl2el(this.confirm_tpl,{html:t})),$el.add(s,"active"),$el.add(this.form.parentNode.parentNode,"show_other"))},adjust_timeleft:function(e){for(var t in e)t in this.progress_bars&&this.progress_bars[t].adjust(e[t])},finish_ready:function(e){if(2==e.errno)return this.finish_error(e);if(B.Upload&&B.Upload.Overlay&&e.photos){var t,s,i=e.photos;for(t in i)s=e.photos[t],s&&B.Upload.Overlay.draw(s);B.fire("upload:update")}e.App&&e.App.state&&B.App.app_link(e.App.state,e.App.page_url),this.full_stop(e)},full_stop:function(e){B.on("upload:updated",this.full_stop2,this),this.complete_redirect||B.fire("upload:update",e),B.fire("upload:end",this.complete_redirect)},full_stop2:function(){B.un("upload:updated",this.full_stop2,this),B.Ovl.close()},finish_error:function(e){var t=e&&e.html||"Unknown error";e&&("type"in e?B.Ovl.open({type:e.type,html:e.html}):B.Ovl.__open_err({html:t}))},hide_confirm:function(e){e=$el.up(e,".popover-toggle"),$el.del(e,"active"),$el.remove($el.down(e,".popover"))},request_more_photos:function(){this.moreElement=$e.element($e.e),new $r(this.moreElement.rev,{ready:this.more_photos_loaded},this)},more_photos_loaded:function(e){var t=this.moreElement.parentNode;$e.un(".fbp_alb_ph_more",this.request_more_photos,this),$el.remove(this.moreElement),t.innerHTML+=e.html},sf_open:function(e){e.blur();var t=$el.up(e,"div");this.fx.begin(),this.prepare_open_form(t),this.fx.commit()},prepare_open_form:function(e){var t=this.cform;e!=t&&(this.cform=e,this.form=$el.down(e,"form"),this.fx.open_form(e,t))},change_label:function(e){if(!e)return!1;var t=$("social_password_label");if(t&&(t.innerHTML=this.prov_labels[e.value]||this.def_labels.social_password),this.fbc_enabled)for(var s=B.Ovl.v._el,i=["facebook","gmail","yahoo","windowslive","test","vk","orkut"],o=e.id.substr(3),n=0;n<i.length;n++)$el[o==i[n]?"add":"del"](s,"social_"+i[n]);return!0},more_photos:function(e){for(var t=$el.select($el.up(e,".js-fbp-alb-ph"),".hidden img"),s=0,i=Math.min(100,t.length);i>s;s++)$el.del(t[s].parentNode,"hidden"),t[s].src=t[s].getAttribute("data-src"),t[s].removeAttribute("data-src");t.length<=100&&$el.add($el.up(e,".js-fbp-alb-ph-more"),"hidden")},social_open:function(e){this.soc_provider.open(e,this.soc_webmail_form.handle_errors,this.soc_webmail_form),this.provider=e}}),B.Controls.Timer||($u.ScaleDisplay=$class({gradientPattern_:null,gradientImage_:null,pixelRatio_:1,animStartTime_:null,animLabelBar_:null,animLabelDisplay_:null,canvas_:null,context_:null,labelContainer_:null,currentFrameCount_:null,idleTime_:0,GAP_ANGLE_:.4,canvasSupported_:$u.is_canvas_supported(),options:{size:100,reverse:!1,counterclockwise:!1,gradientImage:"",lineWidth:14,elementClassName:"",label:0,showLabel:!0,animationLength:0,percentComplete:0,barAnimation:!1,labelIncrement:!1,labelIncrementFrameSkip:3,labelEffectClass:null,labelEffectDelay:1,parentElement:null,style:null},constructor:function(e){this.options=$config({},$u.ScaleDisplay.prototype.options),this.update(e)},init:function(){this.checkOptions_(),this._paused=null,this.currentFrameCount_=0,this.pixelRatio_=window.devicePixelRatio?window.devicePixelRatio:1,this.canvasSupported_&&("#"==this.options.gradientImage[0]?(this.gradientPattern_=this.options.gradientImage,this.render(),this.options.autorun&&this.beginAnimation()):(this.onReady=function(){this.options.autorun&&(this.render(),this.beginAnimation())},this.gradientImage_=new Image,$e.add(this.gradientImage_,"load",this.onGradientLoaded_,this),this.gradientImage_.src=this.options.gradientImage))},destroy:function(){this.gradientImage_&&$e.del(this.gradientImage_,"load",this.onGradientLoaded_,this),this.gradientPattern_=this.gradientImage_=this.animStartTime_=this.canvas_=this.context_=this.labelContainer_=this.options=null},_setDefaults:function(){this.gradientPattern_=null,this.gradientImage_=null,this.pixelRatio_=1,this.animStartTime_=null,this.animLabelBar_=0,this.animLabelDisplay_=0,this.canvas_=null,this.context_=null,this.labelContainer_=null,this.currentFrameCount_=0},checkOptions_:function(){"string"==typeof this.options.parentElement&&(this.options.parentElement=$el.down(document,this.options.parentElement)),null===this.options.style&&(this.options.style=$u.ScaleDisplay.STYLES.LIGHT)},render:function(){if(!this.options.parentElement)throw"Attempt to render when no parent defined";this.canvas_=$el.create("canvas",{width:this.options.size*this.pixelRatio_,height:this.options.size*this.pixelRatio_,className:"scale-display "+this.options.elementClassName,style:"width: "+this.options.size+"px; height: "+this.options.size+"px;"}),this.options.parentElement.appendChild(this.canvas_),this.labelContainer_=$el.create("b",{className:"scale-value"}),this.options.parentElement.appendChild(this.labelContainer_),this.context_=this.canvas_.getContext("2d"),0===this.options.animationLength&&this.setUpStatic_()},update:function(e){this.options=$config(this.options,e),e&&this.checkOptions_()},setAnimationTimeLeft:function(e){var t=parseInt(this.options.animationLength,10),s=this.animationTimeLeft_+this.animStartTime_;this.options.animationLength=Math.round(t+e-s-this.idleTime_),this._paused||window.requestAnimationFrame(this.setUpNextFrame_.bind(this))},beginAnimation:function(){this.animLabelBar_=this.animLabelDisplay_=0,this.animStartTime_=null,this.draw_(0),window.requestAnimationFrame(this.setUpNextFrame_.bind(this))},start:function(){this._paused!==!0&&(this.idleTime_+=+new Date-this.animStopTime_,this._paused=!1,window.requestAnimationFrame(this.setUpNextFrame_.bind(this)))},stop:function(){this._paused||(this.animStopTime_=+new Date,this._paused=!0)},getStep_:function(e,t,s,i){return this.options.barAnimation(e,t,s,i)},getLabelStep_:function(e){return this.options.labelAnimation(e)},getGradient_:function(){if(!this.gradientPattern_){var e=this.gradientImage_,t=$el.create("canvas",{width:this.options.size*this.pixelRatio_,height:this.options.size*this.pixelRatio_}),s=t.getContext("2d");s.drawImage(e,0,0,e.width,e.height,0,0,this.options.size*this.pixelRatio_,this.options.size*this.pixelRatio_),this.gradientPattern_=this.context_.createPattern(t,"no-repeat")}return this.gradientPattern_},setUpStatic_:function(){this.animLabelBar_=this.animLabelDisplay_=0;var e=this.options.staticValue||this.options.label.toFixed(2),t=this.options.label.toFixed(2);e!==t?$el.add(this.labelContainer_,"no-dps"):$el.del(this.labelContainer_,"no-dps"),this.labelContainer_.innerHTML=$u.escapeHTML(this.options.showLabel?e:""),this.draw_(this.options.label)},draw_:function(e){var t=this.options,s=this.context_,i=t.size*this.pixelRatio_,o=t.size/2*this.pixelRatio_,n=o,r=t.noGap?0:this.GAP_ANGLE_,a=(t.size/2-t.lineWidth/2)*this.pixelRatio_,l=Math.PI+Math.PI/2-r,_=-Math.PI/2+r,c=(l-_)*(e/100),u=t.counterclockwise?l-c:_+c;s.clearRect(0,0,i,i),s.beginPath(),s.arc(o,n,a,_,l,!1),s.strokeStyle=this.options.style,s.lineWidth=t.lineWidth*this.pixelRatio_,s.lineCap="round",s.stroke(),s.beginPath(),t.counterclockwise?s.arc(o,n,a,u,l,!1):s.arc(o,n,a,_,u,!1),s.strokeStyle=this.getGradient_(),s.stroke()},setUpNextFrame_:function(e){var t=this.options;if(t){null==this.animStartTime_&&(this.animStartTime_=e);var s=e-this.animStartTime_-this.idleTime_,i=this.getStep_(s,t.percentComplete,t.label,t.animationLength),o=this.getLabelStep_(i);this.options.reverse&&(i=100-i),this.animationTimeLeft_=t.animationLength-e,s<t.animationLength&&(!t.percentComplete||s/t.animationLength<1-t.percentComplete/100)?(t.showLabel&&1===this.currentFrameCount_&&(this.labelContainer_.innerHTML=$u.escapeHTML(o)),this.currentFrameCount_=this.currentFrameCount_>=t.labelIncrementFrameSkip?1:++this.currentFrameCount_,this.draw_(i),this._paused||window.requestAnimationFrame(this.setUpNextFrame_.bind(this))):(this.setUpStatic_(),t.onAnimationReady&&t.onAnimationReady(this)),s>t.animationLength*t.labelEffectDelay&&"string"==typeof t.labelEffectClass&&$el.add(this.labelContainer_,t.labelEffectClass)}},onGradientLoaded_:function(){this.gradientPattern_=null,this.onReady&&this.onReady()},defaultTiming:function(e,t,s,i){return(e/=i)<1/2.75?7.5625*s*e*e+t:2/2.75>e?s*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?s*(7.5625*(e-=2.25/2.75)*e+.9375)+t:s*(7.5625*(e-=2.625/2.75)*e+.984375)+t},defaultLabelTiming:function(e,t,s,i){return s*Math.sqrt(1-(e=e/i-1)*e)+t},linearTiming:function(e,t,s,i){return t+s*(e/i)}}),$u.ScaleDisplay.STYLES={LIGHT:"#ccc",DARK:"#171A1F",TRANSPARENT:"transparent"},$u.ScaleDisplay.ANIMATION_TIMINGS={NONE:!1,LINEAR:$u.ScaleDisplay.prototype.linearTiming,BOUNCE:$u.ScaleDisplay.prototype.defaultTiming,EXPONENTIAL:$u.ScaleDisplay.prototype.defaultLabelTiming},B.Controls.Timer=$class(B.Controls.BaseControl,{name:"Controls.Timer",_display:null,_cfg:null,init:function(){$super(this,arguments),this._create_config(),this.restart()},destroy:function(){this._display&&this._display.destroy(),this._display=this._cfg=null,$super(this,arguments)},_create_config:function(){var e=this,t=this.config,s=t.timing_completion,i="true"===t.restart_infinite,o=i?function(t){if(t>99&&100>t&&(e._roundFinished=!0),e._roundFinished)return"";var s=e._display.options.animationLength;return e._to_time_str(Math.round(s*(1-t/100)))}:function(t){var s=e._display.options.animationLength;return e._to_time_str(Math.round(s*(1-t/100)))};return this._cfg={autorun:"false"!=t.autorun,autorestart:"true"===t.autorestart,barAnimation:$u.ScaleDisplay.ANIMATION_TIMINGS.LINEAR,labelAnimation:o,staticValue:"00:00",noGap:t.no_gap,size:t.size||100,lineWidth:t.line_width||10,label:100,gradientImage:t.background,percentComplete:s&&parseFloat(s)||0,animationLength:t.timing||2e4,style:$u.ScaleDisplay.STYLES[(t.style||"LIGHT").toUpperCase()],parentElement:this.wrap_el},t.bar_reverse&&(this._cfg.reverse=!0),this._cfg.autorestart&&(this._cfg.onAnimationReady=this._on_animtaion_end.bind(this)),this._cfg},restart:function(e){return $u.is_canvas_supported()?(this.clean(),e&&(this._cfg=$config(this._cfg,e)),this._display?this._display.update(this._cfg):this._display=new $u.ScaleDisplay(this._cfg),this._display.init(),this._display):void 0},stop:function(){this._display&&this._display.stop()},start:function(){this._display&&this._display.start()},clean:function(){this.wrap_el.innerHTML=""},_on_animtaion_end:function(){this._cfg.autorestart&&this.restart({autostart:!0})},_to_time_str:function(e){var t=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3);return(10>t?"0":"")+t+":"+(10>s?"0":"")+s},set_time_left:function(e){this._display&&this._display.setAnimationTimeLeft(e)}}),$c.register("timer",B.Controls.Timer,!0)),B.UploadImport.ovl_type="hon-upload-import",B.on("upload:update",function(e){if(B.fire("upload:updated"),e.photos){var t,s,i,o=[];for(s in e.photos)e.photos.hasOwnProperty(s)&&(i=e.photos[s],i.is_video?B.fire("import:video-imported"):(t={id:i.photo_id,entry_id:i.entry_id,url:i.tb_url,width:i.size.width,height:i.size.height},t.height==t.width&&(t.height=150,t.width=150),o.push(t),B.fire("import:uploaded",t)));B.fire("import:done_all",!0,o)}}),$e.un(".fb-more",B.UploadImport.more_photos,B.UploadImport),B.UploadImport.more_photos=function(e){var t=$el.up(e,".js-upload-import-more");e=$el.up(e,".js-upload-import-album");for(var s,i=$el.select(e,".hidden"),o=0,n=Math.min(100,i.length);n>o;o++)$el.del(i[o],"hidden"),s=$el.down(i[o],"img"),s.src=s.getAttribute("data-src"),s.removeAttribute("data-src");i.length<=100&&$el.add(t,"hidden"),$el.dom.fire("changed",e)},$e.on(".fb-more",B.UploadImport.more_photos,B.UploadImport),B.UploadImport.get_progress_bar=function(e,t){var s=$el.down(e,".scale"),i=$c.get(s,"timer");return i.restart({animationLength:1e3*t,autorun:!0}),i},B.UploadImport.adjust_timeleft=function(e){for(var t in e)t in this.progress_bars&&this.progress_bars[t].restart({animationTime:1e3*e[t]})},B.Ovl.UploadImport=new $class(B.Ovl.View,{name:"Ovl.UploadImport",type:"upload-import",simple_close:!1,use_contacts_type:!1,contacts_type:null,init:function(e){$super(this,arguments);var t;t=this.use_contacts_type?"album"==this.contacts_type?"load_login":"load_results":"load_login",B.UploadImport[t].call(B.UploadImport,e)},destroy:function(){B.UploadImport.upload_cancel_inprogress||B.UploadImport.unload(),this.use_contacts_type=!1,$super(this,arguments)}}),B.Ovl.UploadImportFbc=new $class(B.Ovl.View,{name:"Ovl.UploadImportFbc",type:"upload-import-fbc",simple_close:!1,init:function(e){$super(this,arguments),B.UploadImport.is_fbc=!0,B.UploadImport.load_login(e)},destroy:function(){return $super(this,arguments),B.UploadImport.upload_cancel_inprogress?void 0:B.UploadImport.unload()}}),B.Ovl.IMSendPhoto=new $class(B.Ovl.View,{name:"Ovl.IMSendPhoto",type:"im-send-photo",_is_upload_error:!1,init:function(e){$super(this,arguments),B.Upload.Overlay.state="process",B.Upload.Overlay.is_send_photo=!0,this._is_upload_error=!1,e.vars=e.vars||this.vars,B.Upload.Overlay.load(e),e.vars.autoclose&&(this.$u=B.Upload.Controller.on({state_changed:this.on_state_change},this)),this.fire_init(),this.$b=B.on("sendphoto:check",this.fire_init,this)},is_active:function(){return this.__active},on_state_change:function(e){switch(e){case"error":this._is_upload_error=!0;break;case"queue_complete":this._is_upload_error||this.close()}},destroy:function(){return this.send_photo(B.Upload.Overlay.files_done),$super(this,arguments),this.$u&&B.Upload.Controller.un(this.$u),this.$b&&B.un(this.$b),B.Upload.Overlay.unload()},fire_init:function(){B.fire("sendphoto:inited")},send_photo:function(e){var t,s=[];for(t in e)s.push(e[t]);s.length>0&&s[0].photo_id&&B.IM.fire("send_photo",s[0].photo_id)}}),B.Ovl.UploadChooseFilesBase=$class(B.Ovl.View,{name:"Ovl.UploadChooseFilesBase",type:null,init:function(e){$super(this,arguments),this.cfg=$clone(e.cfg),this.view=new B.UploadChooseFiles(this._get_view_config()),this.$e_view=this.view.on({inited:this._view_inited,choosen:this._files_choosen},this),"PHOTOS_OF_ME"==this.cfg.description_type&&this._load_photos_info()
},destroy:function(){this.view&&(this.view.un(this.$e_view),this.view.destroy(),this.view=null),this.$r&&(this.$r.abort(),this.$r=null),this._user_photos=null,$super(this,arguments)},_get_view_config:function(){var e={group_name:this.cfg.group_name};return this.cfg.open_from&&(e.open_from=this.cfg.open_from),this.cfg.source&&(e.source=this.cfg.source),e},_try_render:function(){var e=this.cfg.description_type;this.view.is_inited&&("PHOTOS_OF_ME"!=e||this._user_photos)&&this._render_ovl()},_render_ovl:function(){var e,t;e={POPUP_UPLOAD:{},HTMLBLOCK_UPLOAD:this.view.get_html()},$config(e.POPUP_UPLOAD,this._get_head()),t=$u.dust.render(this.ovl_template_name,e),this._render(t),this.view.set_wrap($el.down(this._el,".ovl-content")),this.view.bind_ui()},_get_gender:function(){throw"Call abstract _get_gender"},_get_head:function(){var e,t,s={},i=this.personGender,o=[];if("PHOTOS_OF_ME"==this.cfg.description_type&&(t=3-this._user_photos.length),!this.cfg.is_promo){switch(this.cfg.description_type){case"ADD_PHOTOS":s.TITLE_PHOTOS_OF_ME=!0;break;case"PHOTOS_OF_ME":1==t||2==t?s.TITLE_PHOTOS_OF_ME_MORE={num:t,photos:$l.get_num_dependent("photo",t)}:s.TITLE_PHOTOS_OF_ME=!0}return{HEADER_SIMPLE:s}}switch(s={PROMO_PHOTOS:{EMPTY_PHOTO:!0}},this.cfg.description_type){case"PHOTOS_OF_ME":if(1==t||2==t){s.TITLE_PHOTOS_OF_ME_MORE={num:t,photos:$l.get_num_dependent("photo",t)};for(var n=0;n<this._user_photos.length;n++)o.push({USER_PHOTO:{src:this._user_photos[n]}});e=o.concat([{EMPTY_PHOTO:!0},{EMPTY_PHOTO:!0}]),s.PROMO_PHOTOS=e.slice(0,3),s.TEXT_ME_BLOCK={},s.TEXT_ME_BLOCK[i==this._get_gender("MALE")?"MALE":"FEMALE"]={num:t,photos:$l.get_num_dependent("photo",t)}}else s.TITLE_PHOTOS_OF_ME=!0,s.TEXT_ME=!0;break;case"CHAT_BLOCKER":s.TITLE_PHOTOS_OF_ME=!0,s.TEXT_MESSENGER=!0;break;case"PROFILE_VISITORS":s.TITLE_PROFILE_VISITORS=!0,s.TEXT_WANT_TO_MEET_YOU=!0;break;case"WANT_TO_MEET_YOU":s.TITLE_WANT_TO_MEET_YOU=!0,s.TEXT_IMPROVE_RATING=!0;break;case"POPULARITY":s.TITLE_POPULARITY=!0,s.TEXT_BLOCK_RATING=!0}return{HEADER_PROMO:s}},_files_choosen:function(){B.Ovl.open({type:"upload_progress",group_name:this.cfg.group_name,source:this.cfg.source})},_load_photos_info:function(){throw"Call abstract _load_photos_info"},_set_photos_info:function(e){this._user_photos=e,this._try_render()},_view_inited:function(){this._try_render()}}),$u.Dropzone||($u.Dropzone=$class($u.Observable,{name:"Dropzone",constructor:function(e){this._body=document.body,this._wrap=e,$super(this,arguments),$e.add(this._wrap,"dragover",this._ondragover_wrap,this),$e.add(this._wrap,"dragleave",this._ondragleave_wrap,this),$e.add(this._wrap,"drop",this._ondrop_wrap,this),$e.add(this._body,"dragover",this._ondragover_body,this),$e.add(this._body,"dragleave",this._ondragleave_body,this),$e.add(this._body,"drop",this._ondrop_body,this)},destroy:function(){$e.del(this._body,"dragover",this._ondragover_body,this),$e.del(this._body,"dragleave",this._ondragleave_body,this),$e.del(this._body,"drop",this._ondrop_body,this),$e.del(this._wrap,"dragover",this._ondragover_wrap,this),$e.del(this._wrap,"dragleave",this._ondragleave_wrap,this),$e.del(this._wrap,"drop",this._ondrop_wrap,this),this._wrap=null,$super(this,arguments)},_get_files:function(e){var t=[];if(e)for(var s=0;s<e.length;s++)""!=e[s].type&&t.push(e[s]);return t},_ondragover_wrap:function(){return $e.stop($e.e),this.fire("dragover",!0),!1},_ondragleave_wrap:function(){return $e.stop($e.e),this.fire("dragleave",!0),!1},_ondrop_wrap:function(){var e;return $e.stop($e.e),this.fire("dragleave",!0),e=this._get_files($e.e.dataTransfer.files),e&&e.length&&this.fire("drop",e),!1},_ondragover_body:function(){return this.fire("dragover",!1),!1},_ondragleave_body:function(){return this.fire("dragleave",!1),!1},_ondrop_body:function(){var e;return this.fire("dragleave",!0),e=this._get_files($e.e.dataTransfer.files),e.length&&this.fire("drop",e),!1}})),B.UploadChooseFilesBase||(B.UploadChooseFilesBase=$class($u.Observable,{name:"UploadChooseFilesBase",dragover_class_name:"hover",is_inited:!1,_import_info:null,constructor:function(e){$super(this,arguments),this.cfg=e,this.bind_events(),this._upload_group=this._create_group(e.group_name),"inited"!=this._upload_group.state&&this._upload_group.on("inited",this._on_upload_group_inited,this),this._load_imports_info(this._load_imports_info_ready,this)},destroy:function(){$e.un(this.$e),this._destroy_group(),this.$e_dropzone&&(this._dropzone.un(this.$e_dropzone),this._dropzone.destroy(),this._dropzone=this.$e_dropzone=null),this._wrap=null,this._import_info=null,this.is_inited=null,$super(this,arguments)},bind_events:function(){this.$e=$e.on({".js-upload-select-files":this._on_click_select,".js-upload-import-button":this._on_click_upload_import},this)},get_html:function(){return this._render().outerHTML},set_wrap:function(e){this._wrap=e},bind_ui:function(){this._el_drop=$el.down(this._wrap,".js-upload-link"),this._dropzone=new $u.Dropzone(this._el_drop),this.$e_dropzone=this._dropzone.on({dragover:this._on_dragover,dragleave:this._on_dragleave,drop:this._on_drop},this)},_create_group:function(){"Call abstract _create_group"},_destroy_group:function(){"Call abstract _destroy_group"},_render:function(){var e,t,s;return t=this._getBlockData(),e=$u.dust.render("upload/block.upload",t),s=$u.tpl2el(e.toString())},_on_upload_group_inited:function(){this._upload_group.un("inited",this._on_upload_group_inited,this),this._check_components()},_check_components:function(){this.is_inited&&"inited"==this._upload_group.state&&this.fire("inited")},_load_imports_info:function(){throw"Call abstract _load_imports_info"},_set_imports_info:function(e){this._import_info=e},_load_imports_info_ready:function(e){this._upload_group.cfg.disable_import||(this._set_imports_info(e),this._wrap),this.is_inited=!0,this._check_components()},_render_import_block_html:function(){return $u.dust.render("upload/block.upload",this._getImportBlocksData(),"SITES_LIST")},_get_import_buttons_render_data:function(e){var t,s;e||(e=[]),t=[];for(var i=0;i<e.length;i++)s={},s[e[i].specific]={type:e[i].type,url:e[i].url,stat_event:e[i].stat_event,social_icon:e[i].social_icon,width:e[i].width,height:e[i].height,alt:e[i].alt,path:e[i].path},t.push(s);return t},_find_import_provider:function(e){for(var t,s=0;s<this._import_info.length;s++)if(e==this._import_info[s].type){t=this._import_info[s];break}return t},_toggle_drag_over:function(e){$el.tgl(this._el_drop,this.dragover_class_name,e)},_on_dragover:function(e){e&&this._toggle_drag_over(!0)},_on_dragleave:function(e){e&&this._toggle_drag_over(!1)},_on_drop:function(e){e.length&&this._upload_group.add(e)},_on_registered_file:function(){this._next_step()},_next_step:function(){this.fire("choosen")},_on_click_select:function(){this._upload_group.choose(this.cfg.source)},_on_click_upload_import:function(e){var t,s,i;t=+e.getAttribute("data-provider-type"),s=this._find_import_provider(t),s&&(i=$u.tpl("width={width},height={height}",s),window.open(s.url,"auth",i))},_getImportBlocksData:function(){return{SITE_ITEM:this._get_import_buttons_render_data(this._import_info),TITLE:!this.cfg.hide_title}},_getBlockData:function(){var e,t=this._upload_group.get_info();return e={UPLOAD:{UPLOAD_PHOTOS:!t.allow_video,UPLOAD_PHOTOS_AND_VIDEOS:t.allow_video,photos_limit:t.files_left,group_name:t.title,max_photo_filesize:t.allowed_filesize/1024/1024}},this._import_info&&(e.UPLOAD.HTMLBLOCK_IMPORT_BUTTONS=this._render_import_block_html()),e}})),function(){function e(e,s){return e.section(s.get(["UPLOAD"],!1),s,{block:t},{}).write(" ").section(s.get(["SITES_LIST"],!1),s,{block:r},{}).write(" ").section(s.get(["IFRAME_UPLOAD"],!1),s,{block:b},{}).write(" ").section(s.get(["PROFILE_GRID_UPLOAD"],!1),s,{block:E},{})}function t(e,t){return e.write(" <div ").section(t.get(["_OLD_UPLOAD"],!1),t,{block:s},{}).write('> <div class="js-upload-import-buttons"> ').reference("HTMLBLOCK_IMPORT_BUTTONS",t,["s"]).write(' </div> <div class="upload-area"> <div class="upload-control html5 js-upload-link"> <div class="btn btn--blue btn--social"> <i class="ico ico--lg ico--white ico--arrow-up-lg"> <span class="b-link js-uploader-choose js-upload-select-files" data-ovl-type="files" data-ovl-url="').reference("upload_wizard_url",t).write('" data-reg="add_photos/click_computer"></span> </i> <span class="btn-txt"> ').section(t.get(["UPLOAD_PHOTOS"],!1),t,{block:i},{}).write(" ").section(t.get(["UPLOAD_PHOTOS_AND_VIDEOS"],!1),t,{block:o},{}).write(' </span> <div class="loader loader--lg loader--white"><div class="loader_"></div></div> </div> <div class="lgrey">Or drag them into this area</div> </div> <div class="upload-control simple js-upload-classic-wrap"> ').reference("HTMLBLOCK_CLASSIC_UPLOAD",t,["s"]).write(" </div> </div> ").section(t.get(["LINK_BY_OTHER_SITE"],!1),t,{block:n},{}).write(' <p class="grey">We accept JPG and PNG file format.<br>The file size limit is ').reference("max_photo_filesize",t).write(" MB.</p> </div> ")}function s(e){return e.write(' class="old_upload"')}function i(e){return e.write("Upload photos from your computer")}function o(e){return e.write("Upload from your computer")}function n(e,t){return e.write(' <p><span class="p-link u-open js-ovl-open" data-ovl-type="files" data-ovl-url="').reference("upload_wizard_url",t).write('">Add photos from another website</span></p> ')}function r(e,t){return e.write(" ").section(t.get(["TITLE"],!1),t,{block:a},{}).write(' <div class="upload-sites"> ').section(t.get(["SITE_ITEM"],!1),t,{block:l},{}).write(" </div> ")}function a(e){return e.write('<p class="b large">Add your photos from:</p>')}function l(e,t){return e.write('<!-- --><div class="upload-site"> ').section(t.get(["_FBC_BUTTON"],!1),t,{block:_},{}).write(" ").section(t.get(["_OAUTH_BUTTON"],!1),t,{block:c},{}).write(" ").section(t.get(["_TEST_BUTTON"],!1),t,{block:u},{}).write(" ").section(t.get(["COMPUTER_BUTTON"],!1),t,{block:p},{}).write(" </div><!-- -->")}function _(e,t){return e.write(' <div href="').reference("url",t).write('" class="inline" data-reg="').reference("stat_event",t).write('"> <i class="ico ico--xxlg ico--color ico--').reference("social_icon",t).write('-xxlg"><span class="b-link js-upload-import-button" data-provider-type="').reference("type",t).write('"></span></i> <div class="b grey upload-site__txt">').reference("alt",t).write("</div> </div> ")}function c(e,t){return e.write(' <div href="').reference("url",t).write('" class="inline" data-reg="').reference("stat_event",t).write('"> <i class="ico ico--xxlg ico--color ico--').reference("social_icon",t).write('-xxlg"><span class="b-link js-upload-import-button" data-provider-type="').reference("type",t).write('"></span></i> <div class="b grey upload-site__txt">').reference("alt",t).write("</div> </div> ")}function u(e,t){return e.write(' <div href="').reference("url",t).write('" class="inline"> <i class="ico ico--xxlg ico--color ico--').reference("social_icon",t).write('-xxlg"></i> <div class="b grey upload-site__txt js-upload-import-button" data-provider-type="').reference("type",t).write('">').reference("path",t).write("</div> </div> ")}function p(e,t){return e.write(' <div class="inline"> <i class="ico ico--xxlg ico--color ico--from-computer-xxlg upload-control html5 js-upload-link"> <span class="b-link js-uploader-choose js-upload-select-files" data-ovl-type="files" data-reg="add_photos/click_computer"></span> </i> ').section(t.get(["IFRAME_UPLOAD"],!1),t,{block:d},{}).write(' <div class="b grey upload-site__txt">From your computer</div> </div> ')}function d(e,t){return e.write(' <form action="').reference("upload_url",t).write('" method="POST" enctype="multipart/form-data" target="" class="upload-control simple js-iframe-upload-form"> <label class="ico ico--xxlg ico--color ico--from-computer-xxlg classic-upload-btn js-iframe-uploader-button-wrap"> <input class="js-iframe-uploader-input" type="file" name="file"> </label> ').section(t.get(["HIDDEN_INPUT"],!1),t,{block:h},{}).write(" </form> ")}function h(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function b(e,t){return e.write(' <form action="').reference("upload_url",t).write('" method="POST" enctype="multipart/form-data" target="" class="js-iframe-upload-form"> <label class="btn btn--blue btn--social classic-upload-btn js-iframe-uploader-button-wrap"> <input class="js-iframe-uploader-input" type="file" name="file"> <i class="ico ico--lg ico--white ico--arrow-up-lg"><span class="b-link"></span></i> <span class="btn-txt">Upload photos from your computer</span> <div class="loader loader--lg loader--white"><div class="loader_"></div></div> </label> ').section(t.get(["HIDDEN_INPUT"],!1),t,{block:m},{}).write(" </form> ")}function m(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function E(e,t){return e.write(' <div class="profile-photo-import').section(t.get(["_OLD_UPLOAD"],!1),t,{block:f},{}).write('"> <div class="inline"> <p class="large">Add more photos to raise your popularity and get more matches!</p> <div class="js-upload-import-buttons">').reference("HTMLBLOCK_IMPORT_BUTTONS",t,["s"]).write('</div> </div><span class="middle"></span> </div> ')}function f(e){return e.write(" old-upload")}return $u.dust.register("upload/block.upload",e),e.s={UPLOAD:t,SITES_LIST:r,IFRAME_UPLOAD:b,PROFILE_GRID_UPLOAD:E},t.s={_OLD_UPLOAD:s,UPLOAD_PHOTOS:i,UPLOAD_PHOTOS_AND_VIDEOS:o,LINK_BY_OTHER_SITE:n},r.s={TITLE:a,SITE_ITEM:l},l.s={_FBC_BUTTON:_,_OAUTH_BUTTON:c,_TEST_BUTTON:u,COMPUTER_BUTTON:p},p.s={IFRAME_UPLOAD:d},d.s={HIDDEN_INPUT:h},b.s={HIDDEN_INPUT:m},E.s={_OLD_UPLOAD:f},e}(),$gpb.exists("badoo.bma.ExternalProviderType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderType=new $gpb.Enum("badoo.bma.ExternalProviderType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],t.UNKNOWN_EXTERNAL_PROVIDER_TYPE=0,t.EXTERNAL_PROVIDER_TYPE_FACEBOOK=1,t.EXTERNAL_PROVIDER_TYPE_VKONTAKTE=2,t.EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI=3,t.EXTERNAL_PROVIDER_TYPE_GOOGLE_PLUS=4,t.EXTERNAL_PROVIDER_TYPE_MYSPACE=5,t.EXTERNAL_PROVIDER_TYPE_HYVES=6,t.EXTERNAL_PROVIDER_TYPE_PHOTOBUCKET=7,t.EXTERNAL_PROVIDER_TYPE_YAHOO=8,t.EXTERNAL_PROVIDER_TYPE_GOOGLE=9,t.EXTERNAL_PROVIDER_TYPE_AOL=10,t.EXTERNAL_PROVIDER_TYPE_MSN=11,t.EXTERNAL_PROVIDER_TYPE_INSTAGRAM=12,t.EXTERNAL_PROVIDER_TYPE_YANDEX=13,t.EXTERNAL_PROVIDER_TYPE_LINKEDIN=14,t.EXTERNAL_PROVIDER_TYPE_TWITTER=15,t.EXTERNAL_PROVIDER_TYPE_PAYPAL=16,t.EXTERNAL_PROVIDER_TYPE_PHONEBOOK=17,t.EXTERNAL_PROVIDER_TYPE_EMAIL=18,t.EXTERNAL_PROVIDER_TYPE_HOT_OR_NOT=19,t.EXTERNAL_PROVIDER_TYPE_BADOO=20,t.EXTERNAL_PROVIDER_TYPE_FOURSQUARE=21,t.EXTERNAL_PROVIDER_TYPE_PINTEREST=22,t.EXTERNAL_PROVIDER_TYPE_YOUTUBE=23,t.EXTERNAL_PROVIDER_TYPE_HUGGLE=24,t.EXTERNAL_PROVIDER_TYPE_SWARM=25,t.EXTERNAL_PROVIDER_TYPE_CLIPBOARD=26}(),B.UploadChooseFiles||(B.UploadChooseFiles=$class(B.UploadChooseFilesBase,{name:"UploadChooseFiles",jinbaRequest:null,constructor:function(e,t){this.jinbaRequest=t,this.providers=this._get_providers(),$super(this,arguments)},destroy:function(){this.jinbaRequest=null,this.providersCacheToken&&(B.HoN_v3.Models.Cache.PhotosExternalProvidersCache.cancel(this.providersCacheToken),this.providersCacheToken=null,this._on_load_callback=this._on_load_ctx=null),$super(this,arguments)},_get_providers:function(){var e={},t=$p.ExternalProviderType;return e[t.UNKNOWN_EXTERNAL_PROVIDER_TYPE]={},e[t.EXTERNAL_PROVIDER_TYPE_FACEBOOK]={specific:"_FBC_BUTTON",social_icon:"facebook"},e[t.EXTERNAL_PROVIDER_TYPE_VKONTAKTE]={specific:"_OAUTH_BUTTON",social_icon:"vk"},e[t.EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI]={specific:"_OAUTH_BUTTON",social_icon:"odnoklassniki"},e[t.EXTERNAL_PROVIDER_TYPE_GOOGLE_PLUS]={specific:"_OAUTH_BUTTON",social_icon:"google"},e[t.EXTERNAL_PROVIDER_TYPE_MYSPACE]={},e[t.EXTERNAL_PROVIDER_TYPE_HYVES]={},e[t.EXTERNAL_PROVIDER_TYPE_PHOTOBUCKET]={},e[t.EXTERNAL_PROVIDER_TYPE_YAHOO]={},e[t.EXTERNAL_PROVIDER_TYPE_GOOGLE]={specific:"_OAUTH_BUTTON",social_icon:"google"},e[t.EXTERNAL_PROVIDER_TYPE_AOL]={},e[t.EXTERNAL_PROVIDER_TYPE_MSN]={},e[t.EXTERNAL_PROVIDER_TYPE_INSTAGRAM]={specific:"_OAUTH_BUTTON",social_icon:"instagram"},e[t.EXTERNAL_PROVIDER_TYPE_YANDEX]={},e[t.EXTERNAL_PROVIDER_TYPE_LINKEDIN]={specific:"_OAUTH_BUTTON",social_icon:"linkedin"},e[t.EXTERNAL_PROVIDER_TYPE_TWITTER]={specific:"_OAUTH_BUTTON",social_icon:"twitter"},e[t.EXTERNAL_PROVIDER_TYPE_PAYPAL]={},e[t.EXTERNAL_PROVIDER_TYPE_PHONEBOOK]={},e[t.EXTERNAL_PROVIDER_TYPE_EMAIL]={},e[t.EXTERNAL_PROVIDER_TYPE_HOT_OR_NOT]={},e[t.EXTERNAL_PROVIDER_TYPE_BADOO]={},e},_create_group:function(e){var t;return t=B.Upload2.Controller.get_group(e),this.$e_upload=t.on({registered:this._on_registered_file},this),t},_destroy_group:function(){this._upload_group.un(this.$e_upload),this.$e_upload=null},_load_imports_info:function(e,t){this._on_load_callback=e,this._on_load_ctx=t,this.providersCacheToken=B.HoN_v3.Models.Cache.PhotosExternalProvidersCache.fetch(this._ready_external_providers,this)},_ready_external_providers:function(e){var t,s,i,o,n=!1,r=e.getProviders(),a=[];if(this.providersCacheToken=null,!n){t=r.getProviders();for(var l=0;l<t.length;l++)s=t[l],i=this.providers[s.getType()],o={type:s.getType(),specific:i.specific,url:s.getAuthData().getOauthUrl(),width:600,height:400,social_icon:i.social_icon,alt:s.getDisplayName(),path:s.getDisplayName()},a.push(o)}this._on_load_callback.call(this._on_load_ctx,a),this._on_load_callback=this._on_load_ctx=null},_on_click_upload_import:function(){$super(this,arguments),this._load_imports_info(this._set_imports_info,this)}})),function(){function e(e,s){return e.section(s.get(["POPUP_UPLOAD"],!1),s,{block:t},{})}function t(e,t){return e.write(' <div class="ovl-body js-upload-photo"> ').section(t.get(["HEADER_PROMO"],!1),t,{block:s},{}).write(" ").section(t.get(["HEADER_SIMPLE"],!1),t,{block:k},{}).write(' <div class="ovl-content"> ').reference("HTMLBLOCK_UPLOAD",t,["s"]).write(' </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function s(e,t){return e.write(' <div class="ovl-promo"> <h1> ').section(t.get(["TITLE_PHOTOS_OF_ME"],!1),t,{block:i},{}).write(" ").section(t.get(["TITLE_PHOTOS_OF_ME_MORE"],!1),t,{block:o},{}).write(" ").section(t.get(["TITLE_PROFILE_VISITORS"],!1),t,{block:n},{}).write(" ").section(t.get(["TITLE_WANT_TO_MEET_YOU"],!1),t,{block:r},{}).write(" ").section(t.get(["TITLE_POPULARITY"],!1),t,{block:a},{}).write(' </h1> <p class="large"> ').section(t.get(["TEXT_ME"],!1),t,{block:l},{}).write(" ").section(t.get(["TEXT_ME_BLOCK"],!1),t,{block:_},{}).write(" ").section(t.get(["TEXT_WANT_TO_MEET_YOU"],!1),t,{block:p},{}).write(" ").section(t.get(["TEXT_IMPROVE_RATING"],!1),t,{block:d},{}).write(" ").section(t.get(["TEXT_BLOCK_RATING"],!1),t,{block:h},{}).write(" ").section(t.get(["TEXT_MESSENGER"],!1),t,{block:b},{}).write(" ").section(t.get(["TEXT_GAME"],!1),t,{block:m},{}).write(" ").section(t.get(["TEXT_PHOTO_GAME"],!1),t,{block:E},{}).write(" ").section(t.get(["TEXT_SHARE_AWARDS"],!1),t,{block:R},{}).write(" ").section(t.get(["TEXT_SPOTLIGHT"],!1),t,{block:S},{}).write(' </p> <div class="upload-photo-brick"> ').section(t.get(["PROMO_PHOTOS"],!1),t,{block:B},{}).write(" </div> </div> ")}function i(e){return e.write("Add photos of yourself")}function o(e,t){return e.write("You need to add <b>").reference("num",t).write(" more</b> ").reference("photos",t)}function n(e){return e.write("Add photos of yourself to get profile visitors")}function r(e){return e.write("Add photos of you")}function a(e){return e.write("You need to add some photos first!")}function l(e){return e.write("<b>Meet new people</b> in your area today - just upload your pictures...")}function _(e,t){return e.write(" ").section(t.get(["FEMALE"],!1),t,{block:c},{}).write(" ").section(t.get(["MALE"],!1),t,{block:u},{}).write(" ")}function c(e,t){return e.write("To view all her photos you must have at least 3 photos of you! You need to add <b>").reference("num",t).write(" more</b> ").reference("photos",t).write(".")}function u(e,t){return e.write("To view all his photos you must have at least 3 photos of you! You need to add <b>").reference("num",t).write(" more</b> ").reference("photos",t).write(".")}function p(e){return e.write("Add <b>photos of yourself</b> to get people nearby want to meet you!")}function d(e){return e.write("Add your <b>best photos</b> to get a great rating:")}function h(e){return e.write("Add <b>photos of yourself</b> to make your votes count.")}function b(e){return e.write("You need a profile photo to chat. Add some great photos of yourself.")}function m(e){return e.write("You need a profile photo to play the game. Add some great photos of yourself.")}function E(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:f},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:T},{}).write(" ")}function f(e,t){return e.write(" ").section(t.get(["ONE_PHOTO"],!1),t,{block:g},{}).write(" ").section(t.get(["MANY_PHOTOS"],!1),t,{block:v},{}).write(" ")}function g(e,t){return e.write("To see all of ").reference("user_name",t).write("'s photos, please add <b>just one more photo showing only you:</b></p>")}function v(e,t){return e.write("To see all of ").reference("user_name",t).write("'s photos, please add <b>").reference("num",t).write(" ").reference("photos",t).write(" showing only you:</b></p>")}function T(e,t){return e.write(" ").section(t.get(["ONE_PHOTO"],!1),t,{block:O},{}).write(" ").section(t.get(["MANY_PHOTOS"],!1),t,{block:y},{}).write(" ")}function O(e,t){return e.write("To see all of ").reference("user_name",t).write("'s photos, please add <b>just one more photo showing only you:</b></p>")}function y(e,t){return e.write("To see all of ").reference("user_name",t).write("'s photos, please add <b>").reference("num",t).write(" ").reference("photos",t).write(" showing only you:</b></p>")}function R(e){return e.write("You need a profile photo to share your award. Add some great photos of yourself.")}function S(e,t){return e.write(" ").section(t.get(["GUY"],!1),t,{block:w},{}).write(" ").section(t.get(["GIRL"],!1),t,{block:A},{}).write(" ").section(t.get(["ANY"],!1),t,{block:$},{}).write(" ")}function w(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:I},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:N},{}).write(" ")}function I(e,t){return e.reference("num",t).write(" ").reference("guys",t).write(" in ").reference("location",t).write(" could see you here, but you'll need to add a photo first.")}function N(e,t){return e.reference("num",t).write(" ").reference("guys",t).write(" in ").reference("location",t).write(" could see you here, but you'll need to add a photo first.")}function A(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:C},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:P},{}).write(" ")}function C(e,t){return e.reference("num",t).write(" ").reference("girls",t).write(" in ").reference("location",t).write(" could see you here, but you'll need to add a photo first.")}function P(e,t){return e.reference("num",t).write(" ").reference("girls",t).write(" in ").reference("location",t).write(" could see you here, but you'll need to add a photo first.")}function $(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:L},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:D},{}).write(" ")}function L(e,t){return e.reference("num",t).write(" ").reference("people",t).write(" in ").reference("location",t).write(" could see you here, but you'll need to add a photo first.")}function D(e,t){return e.reference("num",t).write(" ").reference("people",t).write(" in ").reference("location",t).write(" could see you here, but you'll need to add a photo first.")}function B(e,t){return e.write(" ").section(t.get(["USER_PHOTO"],!1),t,{block:M},{}).write(" ").section(t.get(["EMPTY_PHOTO"],!1),t,{block:U},{}).write(" ")}function M(e,t){return e.write(' <div class="brick brick--lg"> <div class="brick-img"> <img src="').reference("src",t).write('" alt=""> </div> </div> ')}function U(e){return e.write(' <div class="brick brick--lg brick--transparent disabled"> <i class="ico ico--lg ico--white ico--photo-up"></i> </div> ')}function k(e,t){return e.write(' <h2 class="ovl-header"> ').section(t.get(["TITLE_PHOTOS_OF_ME"],!1),t,{block:H},{}).write(" ").section(t.get(["TITLE_PHOTOS_OF_ME_MORE"],!1),t,{block:F},{}).write(" ").section(t.get(["TITLE_PRIVATE_PHOTOS"],!1),t,{block:V},{}).write(" </h2> ")}function H(e){return e.write("Add photos of yourself")}function F(e,t){return e.write("You need to add <b>").reference("num",t).write(" more</b> ").reference("photos",t)}function V(e){return e.write("Upload private photos")}return $u.dust.register("upload/popup.upload",e),e.s={POPUP_UPLOAD:t},t.s={HEADER_PROMO:s,HEADER_SIMPLE:k},s.s={TITLE_PHOTOS_OF_ME:i,TITLE_PHOTOS_OF_ME_MORE:o,TITLE_PROFILE_VISITORS:n,TITLE_WANT_TO_MEET_YOU:r,TITLE_POPULARITY:a,TEXT_ME:l,TEXT_ME_BLOCK:_,TEXT_WANT_TO_MEET_YOU:p,TEXT_IMPROVE_RATING:d,TEXT_BLOCK_RATING:h,TEXT_MESSENGER:b,TEXT_GAME:m,TEXT_PHOTO_GAME:E,TEXT_SHARE_AWARDS:R,TEXT_SPOTLIGHT:S,PROMO_PHOTOS:B},_.s={FEMALE:c,MALE:u},E.s={MALE:f,FEMALE:T},f.s={ONE_PHOTO:g,MANY_PHOTOS:v},T.s={ONE_PHOTO:O,MANY_PHOTOS:y},S.s={GUY:w,GIRL:A,ANY:$},w.s={MALE:I,FEMALE:N},A.s={MALE:C,FEMALE:P},$.s={MALE:L,FEMALE:D},B.s={USER_PHOTO:M,EMPTY_PHOTO:U},k.s={TITLE_PHOTOS_OF_ME:H,TITLE_PHOTOS_OF_ME_MORE:F,TITLE_PRIVATE_PHOTOS:V},e}(),$gpb.exists("badoo.bma.MessageType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.MessageType=new $gpb.Enum("badoo.bma.MessageType");t._values=[0,1,2,3,4,139,6,7,8,158,159,15,16,17,124,199,200,20,21,203,204,205,22,23,26,27,28,29,30,189,190,32,136,175,34,35,36,42,43,44,46,47,48,49,50,51,281,377,378,179,52,121,53,56,150,57,58,59,60,245,246,62,63,259,64,218,219,220,241,221,138,157,160,161,162,163,177,240,55,122,123,65,66,67,148,247,248,68,69,70,71,72,73,76,77,78,137,79,119,120,80,132,81,83,84,164,86,87,88,93,143,144,117,249,250,102,103,279,280,104,105,106,107,108,118,109,110,146,147,151,224,225,226,227,152,153,154,155,156,165,166,167,168,173,180,181,182,183,206,207,186,187,188,193,194,195,196,197,198,176,201,202,211,212,213,214,215,216,217,222,223,228,229,230,231,232,233,234,235,236,237,238,239,243,244,253,254,260,261,262,263,264,265,275,276,277,278,6001,287,288,289,290,291,292,293,294,295,296,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,319,320,321,322,323,324,325,326,327,328,329,330,334,335,337,338,339,340,341,342,343,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,369,370,371,372,373,374,375,376,379,380,381,382,383,384,385,387,386,388,389,390,391,392,393,394,395,396,397,398,399,400,401,402,403,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,419,420,421,422,423,424,425,426,427,428,429,430,431,432,433,434,435,436,437,438,439,440,441,442,443,444,445,450,451,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,479,480,481,482,483,484,485,486,487,6003,6004,10001,10002,10003,10004,10005,10006,10007,10008,10009,10010,10011],t.PING=0,t.CLIENT_SERVER_ERROR=1,t.SERVER_APP_STARTUP=2,t.CLIENT_STARTUP=3,t.SERVER_UPDATE_LOCATION=4,t.CLIENT_LOCATION_SERVICES=139,t.SERVER_GET_UPDATED_RESOURCES=6,t.SERVER_GET_RESOURCE=7,t.CLIENT_RESOURCE=8,t.CLIENT_NOTIFICATION=158,t.SERVER_NOTIFICATION_CONFIRMATION=159,t.SERVER_LOGIN_BY_PASSWORD=15,t.SERVER_LOGIN_BY_SESSION=16,t.CLIENT_LOGIN_SUCCESS=17,t.CLIENT_SESSION_FAILED=124,t.SERVER_UPDATE_SESSION=199,t.CLIENT_UPDATE_SESSION=200,t.CLIENT_LOGIN_FAILURE=20,t.SERVER_REGISTRATION=21,t.SERVER_CHECK_REGISTRATION_DATA=203,t.CLIENT_REGISTRATION_DATA_CORRECT=204,t.CLIENT_REGISTRATION_DATA_INCORRECT=205,t.CLIENT_REGISTRATION_FAILED=22,t.CLIENT_REGISTRATION_SUCCESS=23,t.SERVER_PASSWORD_REQUEST=26,t.CLIENT_PASSWORD_RESENT=27,t.CLIENT_PASSWORD_RESENT_FAILED=28,t.SERVER_SEARCH_LOCATIONS=29,t.CLIENT_LOCATIONS=30,t.SERVER_SEARCH_CITIES=189,t.CLIENT_FOUND_CITIES=190,t.SERVER_SAVE_LOCATION=32,t.CLIENT_CHANGE_HOST=136,t.SERVER_ACCESS_PROFILE=175,t.SERVER_GET_APP_SETTINGS=34,t.CLIENT_APP_SETTINGS=35,t.SERVER_SAVE_APP_SETTINGS=36,t.SERVER_RESET_PASSWORD=42,t.SERVER_DELETE_ACCOUNT=43,t.SERVER_SIGNOUT=44,t.CLIENT_PERSON=46,t.SERVER_GET_CITY_NAME=47,t.CLIENT_CITY_NAME=48,t.SERVER_GET_PICTURE=49,t.CLIENT_PICTURE=50,t.SERVER_GET_PERSON_PROFILE=51,t.SERVER_GET_PERSON_PROFILE_DATA=281,t.SERVER_GET_PERSON_PROFILE_EDIT_FORM=377,t.CLIENT_PERSON_PROFILE_EDIT_FORM=378,t.SERVER_GET_ENCOUNTERS_PROFILE=179,t.CLIENT_PERSON_PROFILE=52,t.SERVER_GET_PERSON_STATUS=121,t.CLIENT_PERSON_STATUS=53,t.SERVER_GET_PERSON=56,t.SERVER_VISITING_SOURCE=150,t.SERVER_GET_ALL_PEOPLE_FOLDERS=57,t.CLIENT_ALL_PEOPLE_FOLDERS=58,t.SERVER_GET_FOLDER_PEOPLE=59,t.CLIENT_FOLDER_PEOPLE=60,t.SERVER_GET_USER_LIST=245,t.CLIENT_USER_LIST=246,t.SERVER_REMOVE_PERSON_FROM_FOLDER=62,t.SERVER_ADD_PERSON_TO_FOLDER=63,t.SERVER_SECTION_USER_ACTION=259,t.SERVER_PHONEBOOK_CONTACTS=64,t.SERVER_CHECK_PHONEBOOK_CONTACTS=218,t.CLIENT_PHONEBOOK_LIST=219,t.SERVER_SAVE_PHONEBOOK_CONTACTS=220,t.SERVER_UPLOAD_PHONEBOOK=241,t.CLIENT_PHONEBOOK_CONTACTS_SAVED=221,t.CLIENT_PERSON_NOTICE=138,t.SERVER_REQUEST_PERSON_NOTICE=157,t.CLIENT_FOLDER_PEOPLE_NO_UPDATE=160,t.SERVER_FOLDER_VIEWED=161,t.SERVER_GET_PEOPLE_FOLDER=162,t.CLIENT_PEOPLE_FOLDER=163,t.CLIENT_FOLDER_PEOPLE_NO_UPDATE_FULL=177,t.CLIENT_FOLDER_PEOPLE_SERVER_BUSY=240,t.SERVER_SAVE_BASIC_INFO=55,t.CLIENT_USER_BASIC_INFO_SUCCESS=122,t.CLIENT_USER_BASIC_INFO_FAILED=123,t.SERVER_GET_LANGUAGES=65,t.CLIENT_LANGUAGES=66,t.SERVER_SAVE_PERSON_PROFILE=67,t.CLIENT_APP_FEATURE=148,t.SERVER_GET_TIW_IDEAS=247,t.CLIENT_TIW_IDEAS=248,t.SERVER_GET_REPORT_TYPES=68,t.CLIENT_REPORT_TYPES=69,t.SERVER_SEND_USER_REPORT=70,t.SERVER_FEEDBACK_LIST=71,t.CLIENT_FEEDBACK_LIST=72,t.SERVER_FEEDBACK_FORM=73,t.SERVER_GET_TERMS=76,t.CLIENT_TERMS=77,t.SERVER_SAVE_ENCOUNTER_SETTINGS=78,t.SERVER_GET_ENCOUNTER_SETTINGS=137,t.CLIENT_ENCOUNTER_SETTINGS=79,t.CLIENT_ENCOUNTER_SETTINGS_FAILED=119,t.CLIENT_ENCOUNTER_SETTINGS_SUCCESS=120,t.SERVER_ENCOUNTERS_VOTE=80,t.CLIENT_ENCOUNTERS_VOTE=132,t.SERVER_GET_ENCOUNTERS=81,t.CLIENT_NO_MORE_ENCOUNTERS=83,t.CLIENT_ENCOUNTERS=84,t.SERVER_SAVE_NEARBY_SETTINGS=164,t.SERVER_GET_ALBUM=86,t.CLIENT_ALBUM=87,t.SERVER_REQUEST_ALBUM_ACCESS=88,t.SERVER_UPLOAD_PHOTO=93,t.CLIENT_UPLOAD_PHOTO_SUCCESS=143,t.CLIENT_UPLOAD_PHOTO_FAILED=144,t.SERVER_DELETE_PHOTO=117,t.SERVER_REQUEST_ALBUM_ACCESS_LEVEL=249,t.CLIENT_ALBUM_ACCESS_LEVEL=250,t.SERVER_OPEN_CHAT=102,t.CLIENT_OPEN_CHAT=103,t.SERVER_GET_CHAT_MESSAGES=279,t.CLIENT_CHAT_MESSAGES=280,t.SERVER_SEND_CHAT_MESSAGE=104,t.CLIENT_CHAT_MESSAGE=105,t.SERVER_REQUEST_SMILEYS=106,t.CLIENT_SMILEYS=107,t.CLIENT_CHAT_MESSAGES_READ=108,t.SERVER_CHAT_MESSAGES_READ=118,t.SERVER_CHAT_IS_WRITING=109,t.CLIENT_CHAT_IS_WRITING=110,t.SERVER_COUNT=146,t.CLIENT_COUNT=147,t.CLIENT_CHAT_MESSAGE_RECEIVED=151,t.SERVER_PREPARE_FACEBOOK_PHOTOS=224,t.CLIENT_IMPORT_PHOTOS=225,t.SERVER_FACEBOOK_IMPORT_PHOTOS=226,t.CLIENT_IMPORT_DONE=227,t.SERVER_GET_PRODUCTS=152,t.CLIENT_PRODUCTS=153,t.SERVER_PURCHASE_RECEIPT=154,t.CLIENT_PURCHASE_SUCCESS=155,t.CLIENT_PURCHASE_FAILURE=156,t.SERVER_GET_PRODUCT_LIST=165,t.SERVER_PURCHASE_TRANSACTION=166,t.CLIENT_PURCHASE_TRANSACTION=167,t.CLIENT_PURCHASE_TRANSACTION_FAILED=168,t.CLIENT_PURCHASE_RECEIPT=173,t.SERVER_GET_PRODUCT_TERMS=180,t.CLIENT_PRODUCT_TERMS=181,t.SERVER_GET_PAYMENT_SETTINGS=182,t.CLIENT_PAYMENT_SETTINGS=183,t.SERVER_ACCESS_FEATURE=206,t.CLIENT_ACCESS_FEATURE=207,t.SERVER_FEATURE_CONFIGURE=186,t.CLIENT_FEATURE_CONFIGURE=187,t.CLIENT_TAPJOY_EVENT=188,t.SERVER_SPP_UNSUBSCRIBE=193,t.CLIENT_SPP_UNSUBSCRIBE=194,t.SERVER_UNSUBSCRIBE_CREDITS_AUTO_TOPUP=195,t.CLIENT_UNSUBSCRIBE_CREDITS_AUTO_TOPUP=196,t.SERVER_REMOVE_STORED_CC=197,t.CLIENT_REMOVE_STORED_CC=198,t.CLIENT_USER_DATA_INCOMPLETE=176,t.SERVER_GET_USER_CREDITS=201,t.CLIENT_USER_CREDITS=202,t.SERVER_GET_USER_COUNTRY=211,t.CLIENT_USER_COUNTRY=212,t.CLIENT_NO_USER_COUNTRY=213,t.SERVER_PROMO_INVITE_CLICK=214,t.CLIENT_REQUIRE_REGISTRATION=215,t.SERVER_GET_TRACKING_PIXEL=216,t.CLIENT_TRACKING_PIXEL=217,t.SERVER_GET_INVITE_DATA=222,t.CLIENT_INVITE_DATA=223,t.SERVER_CHANGE_PASSWORD=228,t.CLIENT_CHANGE_PASSWORD=229,t.SERVER_SET_LOCALE=230,t.SERVER_INTERESTS_GROUPS_GET=231,t.CLIENT_INTERESTS_GROUPS=232,t.SERVER_INTERESTS_GET=233,t.CLIENT_INTERESTS=234,t.SERVER_INTERESTS_SUGGEST=235,t.SERVER_INTERESTS_UPDATE=236,t.CLIENT_INTERESTS_UPDATE=237,t.SERVER_INTERESTS_CREATE=238,t.CLIENT_INTERESTS_CREATE=239,t.SERVER_ANALYTICS_EVENT=243,t.CLIENT_ANALYTICS_EVENT=244,t.SERVER_SPP_PURCHASE_STATISTIC=253,t.CLIENT_SPP_PURCHASE_STATISTIC=254,t.SERVER_USER_VERIFIED_GET=260,t.CLIENT_USER_VERIFIED_GET=261,t.SERVER_USER_VERIFY=262,t.CLIENT_USER_VERIFY=263,t.SERVER_USER_REMOVE_VERIFY=264,t.CLIENT_USER_REMOVE_VERIFY=265,t.SERVER_GET_IMPORT_PHOTO_LIST=275,t.CLIENT_IMPORT_PREPARE_SUCCESS=276,t.CLIENT_IMPORT_PREPARE_QUEUED=277,t.SERVER_APP_STATS=278,t.CLIENT_SERVER_TEST_ERROR=6001,t.SERVER_GET_OWN_PHOTO_RATING=287,t.CLIENT_GET_OWN_PHOTO_RATING=288,t.SERVER_GET_PHOTOS_TO_RATE=289,t.CLIENT_GET_PHOTOS_TO_RATE=290,t.SERVER_RATE_PHOTO=291,t.CLIENT_RATE_PHOTO_SUCCESS=292,t.CLIENT_RATE_PHOTO_FAILURE=293,t.SERVER_GET_PHOTO_RATING_CONFIGURATION=294,t.CLIENT_GET_PHOTO_RATING_CONFIGURATION=295,t.SERVER_GET_PHOTO_RATING_SCREEN=296,t.SERVER_GET_MULTIPLE_ALBUMS=298,t.CLIENT_GET_MULTIPLE_ALBUMS=299,t.CLIENT_SPOTLIGHT_META_DATA=300,t.SERVER_GET_FRIENDS_IMPORT_PROVIDERS=301,t.CLIENT_GET_FRIENDS_IMPORT_PROVIDERS=302,t.SERVER_START_FRIENDS_IMPORT=303,t.CLIENT_FRIENDS_IMPORT=304,t.SERVER_CHECK_FRIENDS_IMPORT=305,t.SERVER_FINISH_FRIENDS_IMPORT=306,t.CLIENT_FINISH_FRIENDS_IMPORT_SUCCESS=307,t.CLIENT_FINISH_FRIENDS_IMPORT_FAILED=308,t.SERVER_GET_CITY=309,t.CLIENT_CITY=310,t.CLIENT_CITY_NOT_FOUND=311,t.SERVER_INIT_SPOTLIGHT=312,t.SERVER_STOP_SPOTLIGHT=313,t.CLIENT_INIT_SPOTLIGHT_SUCCESS=314,t.CLIENT_INIT_SPOTLIGHT_ERROR=315,t.CLIENT_INIT_SPOTLIGHT_ERROR_TEMPORARY=316,t.CLIENT_SPOTLIGHT_COMMAND=317,t.SERVER_GET_SOCIAL_FRIENDS_CONNECTIONS=319,t.CLIENT_SOCIAL_FRIENDS_CONNECTIONS=320,t.SERVER_GET_GROW_SOCIAL_NETWORK=321,t.CLIENT_GROW_SOCIAL_NETWORK=322,t.SERVER_CONNECT_ALL_CONTACTS=323,t.CLIENT_CONNECT_ALL_CONTACTS=324,t.SERVER_SELECT_FRIENDS=325,t.CLIENT_SELECT_FRIENDS=326,t.SERVER_RESET_TRUSTED_NETWORK=327,t.CLIENT_RESET_TRUSTED_NETWORK=328,t.SERVER_IMAGE_ACTION=329,t.CLIENT_IMAGE_ACTION=330,t.SERVER_GET_RATE_MESSAGE=334,t.CLIENT_GET_RATE_MESSAGE=335,t.CLIENT_DELETE_ACCOUNT_SUCCESS=337,t.SERVER_GET_DELETE_ACCOUNT_INFO=338,t.CLIENT_DELETE_ACCOUNT_INFO=339,t.SERVER_GET_CAPTCHA=340,t.CLIENT_GET_CAPTCHA=341,t.SERVER_CAPTCHA_ATTEMPT=342,t.CLIENT_CAPTCHA_ATTEMPT=343,t.SERVER_GET_MODERATED_PHOTOS=352,t.CLIENT_MODERATED_PHOTOS=353,t.SERVER_ACKNOWLEDGE_MODERATED_PHOTOS=354,t.CLIENT_ACKNOWLEDGE_MODERATED_PHOTOS=355,t.SERVER_GET_AWARD=356,t.CLIENT_AWARD=357,t.SERVER_GET_SOCIAL_SHARING_PROVIDERS=358,t.CLIENT_SOCIAL_SHARING_PROVIDERS=359,t.CLIENT_CHAT_SETTINGS=360,t.CLIENT_SYSTEM_NOTIFICATION=361,t.SERVER_GET_EXTERNAL_PROVIDERS=362,t.CLIENT_EXTERNAL_PROVIDERS=363,t.SERVER_START_EXTERNAL_PROVIDER_IMPORT=364,t.CLIENT_EXTERNAL_PROVIDER_IMPORT_PROGRESS=365,t.SERVER_CHECK_EXTERNAL_PROVIDER_IMPORT_PROGRESS=366,t.SERVER_FINISH_EXTERNAL_PROVIDER_IMPORT=367,t.CLIENT_EXTERNAL_PROVIDER_IMPORT_RESULT=369,t.SERVER_LOGIN_BY_EXTERNAL_PROVIDER=370,t.SERVER_GET_PROFILE_SCORE=371,t.CLIENT_PROFILE_SCORE=372,t.SERVER_DELETE_CHAT_MESSAGE=373,t.CLIENT_DELETE_CHAT_MESSAGE_RESULT=374,t.SERVER_BACKGROUND_REQUEST=375,t.SERVER_LINK_EXTERNAL_PROVIDER=376,t.CLIENT_COMMON_SETTINGS=379,t.SERVER_GET_PRODUCT_LIST_WITH_EXTERNAL_PROVIDERS=380,t.CLIENT_SEO_INFO=381,t.SERVER_GET_COMET_CONFIG=382,t.CLIENT_COMET_CONFIG=383,t.SERVER_GET_CREDITS_FEATURE_LIST=384,t.CLIENT_CREDITS_FEATURE_LIST=385,t.CLIENT_ACKNOWLEDGE_COMMAND=387,t.SERVER_GET_DEV_FEATURE=386,t.CLIENT_DEV_FEATURE=388,t.SERVER_UPDATE_LOCATION_DESCRIPTION=389,t.SERVER_CHANGE_EMAIL=390,t.CLIENT_EMAIL_CHANGED=391,t.SERVER_ORDER_ALBUM_PHOTOS=392,t.SERVER_GET_SECRET_COMMENTS=393,t.SERVER_ADD_SECRET_COMMENT=394,t.CLIENT_SECRET_COMMENTS=395,t.SERVER_GET_WHATS_NEW=396,t.CLIENT_WHATS_NEW=397,t.SERVER_GET_COMMON_SETTINGS=398,t.SERVER_GET_DELETE_ACCOUNT_ALTERNATIVES=399,t.CLIENT_DELETE_ACCOUNT_ALTERNATIVES=400,t.SERVER_DELETE_ACCOUNT_ALTERNATIVE=401,t.SERVER_PROMO_ACCEPTED=402,t.SERVER_GET_USER=403,t.CLIENT_USER=404,t.SERVER_SAVE_USER=405,t.SERVER_GET_CAPTCHA_BY_CONTEXT=406,t.CLIENT_CAPTCHA_SETTINGS=407,t.SERVER_SUBMIT_REFERRAL_CODE=408,t.CLIENT_REFERRAL_CODE_RESULT=409,t.SERVER_GET_COUNTRIES=410,t.CLIENT_COUNTRIES_LIST=411,t.SERVER_GET_REGIONS=412,t.CLIENT_REGIONS_LIST=413,t.SERVER_GET_CITIES=414,t.CLIENT_CITIES_LIST=415,t.SERVER_GET_USER_LIST_WITH_SETTINGS=416,t.SERVER_COMMON_PLACES_UPDATE=417,t.SERVER_GET_POPULARITY=418,t.CLIENT_POPULARITY=419,t.SERVER_SAVE_SEARCH_SETTINGS_AND_GET_USER_LIST=420,t.SERVER_GET_SEARCH_DISTANCES=421,t.CLIENT_SEARCH_DISTANCES=422,t.SERVER_GET_PUSH_LIST=423,t.CLIENT_PUSH_INFO_LIST=424,t.SERVER_PHOTO_LIKE=425,t.SERVER_MOVE_PHOTO=426,t.SERVER_GET_SOCIAL_LIKE_PROVIDERS=427,t.CLIENT_SOCIAL_LIKE_PROVIDERS=428,t.SERVER_HELP_CENTER_GET_SECTION_LIST=429,t.CLIENT_HELP_CENTER_SECTION_LIST=430,t.SERVER_HELP_CENTER_GET_QUESTION=431,t.CLIENT_HELP_CENTER_QUESTION=432,t.SERVER_DELETE_SECRET_COMMENT=433,t.SERVER_REPORT_SECRET_COMMENT=434,t.SERVER_RATE_SECRET_COMMENTS=435,t.SERVER_SUBSCRIBE_TO_SECRET_COMMENTS=436,t.CLIENT_SECRET_COMMENT_ADDED=437,t.EXPERIMENTAL_CLIENT_MESSAGE_CHECKER_CONFIG=438,t.EXPERIMENTAL_SERVER_MESSAGE_CHECKER_STATS=439,t.CLIENT_INAPP_NOTIFICATION=440,t.SERVER_GET_STICKER_PACKS=441,t.CLIENT_STICKER_PACKS=442,t.SERVER_GET_GIFT_PRODUCT_LIST=443,t.CLIENT_GIFT_PRODUCT_LIST=444,t.SERVER_PURCHASED_GIFT_ACTION=445,t.SERVER_SURVEY_SUBMIT=450,t.CLIENT_SURVEY_SUCCESS=451,t.CLIENT_SURVEY_FAILURE=452,t.SERVER_GET_COMMON_PLACES=453,t.CLIENT_COMMON_PLACES=454,t.CLIENT_COMMON_SETTINGS_CHANGED=455,t.SERVER_VIP_UNSUBSCRIBE=456,t.CLIENT_VIP_UNSUBSCRIBE=457,t.SERVER_GET_PAID_VIP_PROMO=458,t.CLIENT_PAID_VIP_PROMO=459,t.SERVER_GET_NEXT_PROMO_BLOCKS=460,t.CLIENT_NEXT_PROMO_BLOCKS=461,t.SERVER_RESEND_CONFIRMATION_EMAIL=462,t.SERVER_CONFIRM_YES_EMAIL_SENT=463,t.SERVER_PAYMENT_UNSUBSCRIBE=464,t.SERVER_GET_FEATURED_ON_PHOTO_OF_THE_DAY=465,t.SERVER_GET_PLACES_SECTIONS=466,t.CLIENT_PLACES_SECTIONS=467,t.SERVER_OPEN_MESSENGER=468,t.CLIENT_OPEN_MESSENGER=469,t.SERVER_GET_PROMOTED_VIDEO=470,t.CLIENT_PROMOTED_VIDEO=471,t.SERVER_GET_SPP_PROMO=472,t.CLIENT_SPP_PROMO=473,t.SERVER_DETECT_LOCATION=474,t.SERVER_GET_RADAR_INFO=475,t.CLIENT_RADAR_INFO=476,t.SERVER_AB_TEST_HIT=477,t.SERVER_GET_CREDITS_PROMO=478,t.CLIENT_CREDITS_PROMO=479,t.SERVER_UNITED_FRIENDS_ACTION=480,t.SERVER_GET_EXTERNAL_PROVIDER_IMPORTED_DATA=481,t.CLIENT_EXTERNAL_PROVIDER_IMPORTED_DATA=482,t.CLIENT_UNSUBSCRIBE_ALTERNATIVE=483,t.SERVER_GET_USERS=484,t.CLIENT_USERS=485,t.CLIENT_FLOATING_BUTTON_CONFIG=486,t.SERVER_VIBEE_QUIT=487,t.SERVER_REQUEST=6003,t.CLIENT_RESPONSE=6004,t.EXPERIMENTAL_SERVER_GET_POPULARITY=10001,t.EXPERIMENTAL_CLIENT_POPULARITY=10002,t.EXPERIMENTAL_SERVER_GIFT_ACTION=10003,t.EXPERIMENTAL_SERVER_GET_RUSH_HOUR=10004,t.EXPERIMENTAL_RUSH_HOUR_CONFIG=10005,t.EXPERIMENTAL_SERVER_GET_GIFTS_PRODUCTS=10006,t.EXPERIMENTAL_CLIENT_GIFTS_PRODUCTS=10007,t.EXPERIMENTAL_SERVER_GET_STICKERS_PACKS=10008,t.EXPERIMENTAL_CLIENT_STICKERS_PACKS=10009,t.EXPERIMENTAL_SERVER_GET_LIVE_PHOTOS=10010,t.EXPERIMENTAL_CLIENT_LIVE_PHOTOS=10011
}(),$gpb.exists("badoo.bma.AlbumType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AlbumType=new $gpb.Enum("badoo.bma.AlbumType");t._values=[1,2,3,4,5,6,7,8],t.ALBUM_TYPE_WITH_ID=1,t.ALBUM_TYPE_PHOTOS_OF_ME=2,t.ALBUM_TYPE_OTHER_PHOTOS=3,t.ALBUM_TYPE_PRIVATE_PHOTOS=4,t.ALBUM_TYPE_SPOTLIGHT_PHOTOS=5,t.ALBUM_TYPE_MY_RATING=6,t.ALBUM_TYPE_ENCOUNTERS=7,t.ALBUM_TYPE_CHAT_RECENT=8}(),$gpb.exists("badoo.bma.PhotoSize","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoSize=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoSize",t.prototype._descriptor={fields:{width:{type:5,number:1,label:1},height:{type:5,number:2,label:1}}}}(),$gpb.exists("badoo.bma.ServerGetAlbum","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetAlbum=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetAlbum",t.prototype._descriptor={fields:{count:{type:5,number:4,label:1},album_type:{type:14,type_name:"badoo.bma.AlbumType",number:5,label:1},album_id:{type:9,number:2,label:1},large_size:{type:11,type_name:"badoo.bma.PhotoSize",number:7,label:1},offset:{type:5,number:3,label:1},person_id:{type:9,number:1,label:1},preview_size:{type:11,type_name:"badoo.bma.PhotoSize",number:6,label:1},highlight_new:{type:8,number:8,label:1}}}}(),$gpb.exists("badoo.bma.ClientEncounters","message")||($gpb.exists("badoo.bma.RushHourConfig","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RushHourConfig=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RushHourConfig",t.prototype._descriptor={fields:{likes_total:{type:5,number:2,label:1},promo_started:{type:8,number:1,label:1},time_left:{type:5,number:5,label:1},likes_left:{type:5,number:4,label:1},time_total:{type:5,number:3,label:1}}}}(),$gpb.exists("badoo.bma.VotingQuota","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VotingQuota=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VotingQuota",t.prototype._descriptor={fields:{yes_votes_quota:{type:5,number:1,label:1},no_votes_quota:{type:5,number:2,label:1}}}}(),$gpb.exists("badoo.bma.SearchResult","message")||($gpb.exists("badoo.bma.PromoBlock","message")||($gpb.exists("badoo.bma.ActionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ActionType=new $gpb.Enum("badoo.bma.ActionType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,27,28,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,10001,10002],t.NO_ACTION=0,t.NOTIFY=1,t.UPLOAD_PHOTO=2,t.COMPLETE_PROFILE=3,t.PAYMENT_REQUIRED=4,t.SIGNIN=5,t.SUPER_POWERS=6,t.DISPLAY=7,t.READ_MESSAGES=8,t.SPEND_CREDITS=9,t.OPEN_ENCOUNTERS=10,t.OPEN_PEOPLE_NEARBY=11,t.OPEN_CONTACTS=12,t.VERIFY_MYSELF=13,t.OPEN_VERIFY_SETTINGS=14,t.RATE_MORE_PHOTOS=15,t.OPEN_PRIVACY_SETTINGS=16,t.OPEN_ENCOUNTERS_SETTINGS=17,t.OPEN_YOUR_RATING=18,t.GROW_YOUR_NETWORK=19,t.TRY_LATER=20,t.CONNECT_ALL_FRIENDS=21,t.SELECT_FRIENDS=22,t.BUILD_YOUR_NETWORK=23,t.UPGRADE=24,t.VOTE_ENCOUNTER_YES=25,t.CONNECT_FACEBOOK=27,t.ACKNOWLEDGE_MODERATED_PHOTOS=28,t.LAUNCH_WEB=30,t.OPEN_MESSAGES=31,t.OPEN_MY_PHOTOS=32,t.SHARE_PROFILE_SCORE=33,t.OPEN_AWARD=34,t.CONNECT_TWITTER=35,t.OPEN_SPP=36,t.RATE_YOUR_FRIENDS=37,t.OPEN_ACCOUNT_SETTINGS=38,t.CONNECT_PHONEBOOK=39,t.SHOW_BMA_PROMO=40,t.UPLOAD_FACEBOOK_PHOTOS=41,t.IMPORT_WORK_AND_EDUCATION=42,t.WRITE_SECRET_COMMENT=43,t.OPEN_PHOTO_OF_THE_DAY_FOLDER=44,t.ACTION_TYPE_SHARE_COMMON_PLACE=45,t.PAID_VIP=46,t.UPLOAD_EXTERNAL_PHOTOS=47,t.IMPORT_PLACES=48,t.SHOW_MY_PROFILE_SCORE=49,t.SHOW_PROMOTED_VIDEO=50,t.SHARE_PROMOTED_VIDEO=51,t.SHARE_PROFILE=52,t.SHARE_PHOTO=53,t.ADD_INTERESTS=54,t.OPEN_PLACES=55,t.ENABLE_PUBLIC_PROFILE=56,t.ACTION_TYPE_EMAIL_US=57,t.OPEN_OFFERWALL=58,t.ACTION_TYPE_REQUEST_SYSTEM_PERMISSION=59,t.ACTION_TYPE_ACCEPT_PROMO=60,t.EXPERIMENTAL_OPEN_POPULARITY=10001,t.EXPERIMENTAL_OPEN_CRUSH_ON_FRIENDS=10002}(),$gpb.exists("badoo.bma.PromoBlockType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBlockType=new $gpb.Enum("badoo.bma.PromoBlockType");t._values=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,10001,10002,10003,10004],t.PROMO_BLOCK_TYPE_RISEUP=1,t.PROMO_BLOCK_TYPE_RISEUP_2=2,t.PROMO_BLOCK_TYPE_SPECIAL_DELIVERY=3,t.PROMO_BLOCK_TYPE_CHAT_WITH_NEWBIES=4,t.PROMO_BLOCK_TYPE_CHAT_WITH_TIRED=5,t.PROMO_BLOCK_TYPE_FAVOURITES=6,t.PROMO_BLOCK_TYPE_LIKED_YOU=7,t.PROMO_BLOCK_TYPE_SPP=8,t.PROMO_BLOCK_TYPE_SPOTLIGHT=9,t.PROMO_BLOCK_TYPE_EXTRA_SHOWS=10,t.PROMO_BLOCK_TYPE_EXTRA_SHOWS_2=11,t.PROMO_BLOCK_TYPE_ADD_PHOTO=12,t.PROMO_BLOCK_TYPE_ADD_MORE_PHOTOS=13,t.PROMO_BLOCK_TYPE_FIND_FRIENDS=14,t.PROMO_BLOCK_TYPE_DOWNLOAD_MOBILE=15,t.PROMO_BLOCK_TYPE_SPECIAL_DELIVERY_2=16,t.PROMO_BLOCK_TYPE_BOOST=17,t.PROMO_BLOCK_TYPE_PHOTO_OF_THE_DAY=18,t.PROMO_BLOCK_TYPE_ADD_MORE_EXTERNAL_PHOTOS=19,t.PROMO_BLOCK_TYPE_INSTAGRAM=20,t.PROMO_BLOCK_TYPE_VIDEO=21,t.PROMO_BLOCK_TYPE_STICKERS=22,t.PROMO_BLOCK_TYPE_MY_PROFILE_SCORE=23,t.PROMO_BLOCK_TYPE_GIFT=24,t.PROMO_BLOCK_TYPE_ADD_INTERESTS=25,t.PROMO_BLOCK_TYPE_SECRET_COMMENTS=26,t.PROMO_BLOCK_TYPE_EXCLUSIVE_ATTENTION=27,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_LOCATION=28,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_TN=29,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_BUMPED=30,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_INTERESTS=31,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_PRIVATE_PHOTOS=32,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_MORE_PHOTOS=33,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_CHAT=34,t.PROMO_BLOCK_TYPE_GAME_UNDO=35,t.PROMO_BLOCK_TYPE_CUSTOMIZE_PROFILE=36,t.PROMO_BLOCK_TYPE_VIEW_OTHERS_INVISIBLY=37,t.PROMO_BLOCK_TYPE_MOST_BEAUTIFUL_ENCOUNTERS=38,t.PROMO_BLOCK_TYPE_FACEBOOK_AD=39,t.PROMO_BLOCK_TYPE_TOP_CHAT=40,t.PROMO_BLOCK_TYPE_DOUBLE_CREDITS=41,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_RISEUP=10001,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_EXTRA_SHOWS=10002,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_SPOTLIGHT=10003,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_LIVE_PHOTOS=10004}(),$gpb.exists("badoo.bma.GoalProgress","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.GoalProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GoalProgress",t.prototype._descriptor={fields:{progress:{type:5,number:2,label:2},goal:{type:5,number:1,label:2}}}}(),$gpb.exists("badoo.bma.ApplicationFeaturePicture","message")||($gpb.exists("badoo.bma.OnlineStatus","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.OnlineStatus=new $gpb.Enum("badoo.bma.OnlineStatus");t._values=[1,2,3,4],t.ONLINE=1,t.IDLE=2,t.OFFLINE=3,t.STATUS_UNKNOWN=4}(),$gpb.exists("badoo.bma.NotificationBadgeType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.NotificationBadgeType=new $gpb.Enum("badoo.bma.NotificationBadgeType");t._values=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],t.NOTIFICATION_BADGE_TYPE_EMPTY=1,t.NOTIFICATION_BADGE_TYPE_TEXT=2,t.NOTIFICATION_BADGE_TYPE_FAVOURITES=3,t.NOTIFICATION_BADGE_TYPE_MUTUAL=4,t.NOTIFICATION_BADGE_TYPE_RISE_UP=5,t.NOTIFICATION_BADGE_TYPE_SPOTLIGHT=6,t.NOTIFICATION_BADGE_TYPE_EXTRA_SHOWS=7,t.NOTIFICATION_BADGE_TYPE_SPP=8,t.NOTIFICATION_BADGE_TYPE_CREDITS=9,t.NOTIFICATION_BADGE_TYPE_PHONEBOOK=10,t.NOTIFICATION_BADGE_TYPE_AWARD=11,t.NOTIFICATION_BADGE_TYPE_FREE=12,t.NOTIFICATION_BADGE_TYPE_ONLINE=13,t.NOTIFICATION_BADGE_TYPE_SECRET_COMMENT=14,t.NOTIFICATION_BADGE_TYPE_FIRST_IN_PLACE=15,t.NOTIFICATION_BADGE_TYPE_PIN=16}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ApplicationFeaturePicture=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ApplicationFeaturePicture",t.prototype._descriptor={fields:{photo_count:{type:5,number:3,label:1},photo_id:{type:9,number:7,label:1},name:{type:9,number:4,label:1},online_status:{type:14,type_name:"badoo.bma.OnlineStatus",number:2,label:1},online_status_text:{type:9,number:5,label:1},display_images:{type:9,number:1,label:2},badge_type:{type:14,type_name:"badoo.bma.NotificationBadgeType",number:6,label:1}}}}()),$gpb.exists("badoo.bma.PromoBlockPosition","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBlockPosition=new $gpb.Enum("badoo.bma.PromoBlockPosition");t._values=[0,1,2,3,4,5,6,7,10001],t.PROMO_BLOCK_POSITION_UNSPECIFIED=0,t.PROMO_BLOCK_POSITION_IN_LIST=1,t.PROMO_BLOCK_POSITION_HORIZONTAL=2,t.PROMO_BLOCK_POSITION_GRID=3,t.PROMO_BLOCK_POSITION_IN_LIST_TOPMOST=4,t.PROMO_BLOCK_POSITION_INITIAL_CHAT_SCREEN=5,t.PROMO_BLOCK_POSITION_CHAT_BLOCKED_FORM=6,t.PROMO_BLOCK_POSITION_CREDITS_PROMO=7,t.EXPERIMENTAL_PROMO_BLOCK_POSITION_AWARDS_PAGE=10001}(),$gpb.exists("badoo.bma.PaymentProductType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PaymentProductType=new $gpb.Enum("badoo.bma.PaymentProductType");t._values=[1,2,3,4,5,6,7,10,11,12,13,14,15,16],t.PAYMENT_PRODUCT_TYPE_SPP=1,t.PAYMENT_PRODUCT_TYPE_SPOTLIGHT=2,t.PAYMENT_PRODUCT_TYPE_CHAT_QUOTA=3,t.PAYMENT_PRODUCT_TYPE_VOTE_QUOTA=4,t.PAYMENT_PRODUCT_TYPE_GIFT=5,t.PAYMENT_PRODUCT_TYPE_EXTRA_SHOWS=6,t.PAYMENT_PRODUCT_TYPE_RISEUP=7,t.PAYMENT_PRODUCT_TYPE_HON_SUBSCRIPTION=10,t.PAYMENT_PRODUCT_TYPE_MATCH_EXTENSION=11,t.PAYMENT_PRODUCT_TYPE_CONTACTS_FOR_CREDITS=12,t.PAYMENT_PRODUCT_TYPE_CREDITS=13,t.PAYMENT_PRODUCT_TYPE_STICKER_PACK=14,t.PAYMENT_PRODUCT_TYPE_VIP=15,t.PAYMENT_PRODUCT_TYPE_EXCLUSIVE_ATTENTION=16}(),$gpb.exists("badoo.bma.RedirectPage","message")||($gpb.exists("badoo.bma.ClientSource","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientSource=new $gpb.Enum("badoo.bma.ClientSource");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,10001,10002,10003,10004],t.CLIENT_SOURCE_UNSPECIFIED=0,t.CLIENT_SOURCE_ENCOUNTERS=1,t.CLIENT_SOURCE_PEOPLE_NEARBY=2,t.CLIENT_SOURCE_WANT_TO_MEET_YOU=3,t.CLIENT_SOURCE_MUTUAL_ATTRACTIONS=4,t.CLIENT_SOURCE_SPOTLIGHT=5,t.CLIENT_SOURCE_FANS=6,t.CLIENT_SOURCE_PHOTO_RATING=7,t.CLIENT_SOURCE_MY_PROFILE=8,t.CLIENT_SOURCE_OTHER_PROFILE=9,t.CLIENT_SOURCE_CHAT=10,t.CLIENT_SOURCE_CHAT_QUOTA=11,t.CLIENT_SOURCE_VERY_POPULAR_BANNER=12,t.CLIENT_SOURCE_TRUSTED_NETWORK_CHAT_BLOCK=13,t.CLIENT_SOURCE_TRUSTED_NETWORK_SETTINGS=14,t.CLIENT_SOURCE_BUILD_YOUR_NETWORK=15,t.CLIENT_SOURCE_GROW_YOUR_NETWORK=16,t.CLIENT_SOURCE_OAUTH_PROVIDER=17,t.CLIENT_SOURCE_SERVER_NOTIFICATION=18,t.CLIENT_SOURCE_OFFERWALL=19,t.CLIENT_SOURCE_PROFILE_SCORE=20,t.CLIENT_SOURCE_CONTACT_IMPORT=21,t.CLIENT_SOURCE_VISITORS=22,t.CLIENT_SOURCE_FAVOURITES=23,t.CLIENT_SOURCE_BLOCKED_USERS=24,t.CLIENT_SOURCE_SETTINGS=25,t.CLIENT_SOURCE_MESSAGES=26,t.CLIENT_SOURCE_SUPER_POWERS=27,t.CLIENT_SOURCE_OTHER_PROFILE_PHOTOS=28,t.CLIENT_SOURCE_FRIENDS=29,t.CLIENT_SOURCE_YOU_WANT_TO_MEET=30,t.CLIENT_SOURCE_AWARDS=31,t.CLIENT_SOURCE_POPULARITY=32,t.CLIENT_SOURCE_HOME_SCREEN=33,t.CLIENT_SOURCE_MENU=34,t.CLIENT_SOURCE_SPP_PROMO=35,t.CLIENT_SOURCE_PROFILE_SEARCH=36,t.CLIENT_SOURCE_LOCAL_HOT=37,t.CLIENT_SOURCE_SHARED_FRIENDS=38,t.CLIENT_SOURCE_REACTIVATION_INVITES=39,t.CLIENT_SOURCE_MY_PHOTOS=40,t.CLIENT_SOURCE_NOTIFICATION_SETTINGS=41,t.CLIENT_SOURCE_FORGOT_PASSWORD=42,t.CLIENT_SOURCE_CREDITS=43,t.CLIENT_SOURCE_RATED_ME=44,t.CLIENT_SOURCE_CLIENT_NOTIFICATION=45,t.CLIENT_SOURCE_FRIEND_JOINED_NOTIFICATION=46,t.CLIENT_SOURCE_PUSH_NOTIFICATION=47,t.CLIENT_SOURCE_PROMOTED_VIDEOS=48,t.CLIENT_SOURCE_FRIENDS_OF_FRIENDS=49,t.CLIENT_SOURCE_UNIVERSITY_HOT_LIST=50,t.CLIENT_SOURCE_FRIENDS_HOT_LIST=51,t.CLIENT_SOURCE_JUMP_THE_QUEUE_INVITES=52,t.CLIENT_SOURCE_VERIFICATION=53,t.CLIENT_SOURCE_RATE_YOUR_FRIENDS=54,t.CLIENT_SOURCE_ENCOUNTERS_SHARE_PROFILE_BUTTON=55,t.CLIENT_SOURCE_INVITE_PHONEBOOK_SPLASH=56,t.CLIENT_SOURCE_INVITE_PHONEBOOK_FOOTER=57,t.CLIENT_SOURCE_HOTTEST_FRIENDS=58,t.CLIENT_SOURCE_TWITTER_PROMO=59,t.CLIENT_SOURCE_REWIND=60,t.CLIENT_SOURCE_INTERESTS=61,t.CLIENT_SOURCE_PHOTO_OF_THE_DAY=62,t.CLIENT_SOURCE_FOOTER=63,t.CLIENT_SOURCE_ENCOUNTERS_HEADER=64,t.CLIENT_SOURCE_PROFILE_HEADER=65,t.CLIENT_SOURCE_USER_MENU=66,t.CLIENT_SOURCE_SPOTLIGHT_REMINDER=67,t.CLIENT_SOURCE_PEOPLE_IN_COMMON_PLACE=68,t.CLIENT_SOURCE_UPLOAD_PHOTO=69,t.CLIENT_SOURCE_AWARD=70,t.CLIENT_SOURCE_EXTERNAL_WEB=71,t.CLIENT_SOURCE_EMBEDDED_WEB=72,t.CLIENT_SOURCE_APP_STORE=73,t.CLIENT_SOURCE_FAVOURITED_YOU=74,t.CLIENT_SOURCE_GIFTS=75,t.CLIENT_SOURCE_MOBILE=76,t.CLIENT_SOURCE_EXTRA_SHOWS_REMINDER=77,t.CLIENT_SOURCE_PAID_VIP=78,t.CLIENT_SOURCE_RISE_UP_REMINDER=79,t.CLIENT_SOURCE_PHOTO_OF_THE_DAY_NOTIFICATION=80,t.CLIENT_SOURCE_RATE_APP=81,t.CLIENT_SOURCE_LIKE_APP=82,t.CLIENT_SOURCE_MY_PROFILE_PHOTO_GRID=83,t.CLIENT_SOURCE_FACEBOOK_PROMO=84,t.CLIENT_SOURCE_MESSENGER=85,t.CLIENT_SOURCE_BUMBLE_VIBEE=86,t.CLIENT_SOURCE_PLACES=87,t.CLIENT_SOURCE_NEW_SOCIAL_PHOTOS_NOTIFICATION=88,t.CLIENT_SOURCE_CHAT_INITIAL_SCREEN=89,t.CLIENT_SOURCE_UNITED_FRIENDS=90,t.CLIENT_SOURCE_FLOATING_BUTTON=91,t.CLIENT_SOURCE_ONBOARDING_SCREEN=92,t.EXPERIMENTAL_CLIENT_SOURCE_POPULARITY=10001,t.EXPERIMENTAL_CLIENT_SOURCE_PAYMENTS=10002,t.EXPERIMENTAL_CLIENT_SOURCE_LIVE_PHOTOS=10003,t.EXPERIMENTAL_CLIENT_SOURCE_LIVE_PHOTOS_PROFILE=10004}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.RedirectPage=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RedirectPage",t.prototype._descriptor={fields:{user_id:{type:9,number:2,label:1},common_place_id:{type:9,number:5,label:1},section_id:{type:9,number:6,label:1},redirect_page:{type_name:"badoo.bma.ClientSource",number:1,label:1,type:14,options:{"default":"CLIENT_SOURCE_UNSPECIFIED"}},token:{type:9,number:3,label:1},award_id:{type:9,number:4,label:1},highlight_new:{type:8,number:7,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBlock=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromoBlock",t.prototype._descriptor={fields:{other_action:{type:14,type_name:"badoo.bma.ActionType",number:9,label:1},credits_cost:{type:9,number:18,label:1},promo_block_type:{type:14,type_name:"badoo.bma.PromoBlockType",number:12,label:1},image_id:{type:9,number:1,label:3},goal_progress:{type:11,type_name:"badoo.bma.GoalProgress",number:15,label:1},pictures:{type:11,type_name:"badoo.bma.ApplicationFeaturePicture",number:10,label:3},other_text:{type:9,number:8,label:1},promo_block_position:{type_name:"badoo.bma.PromoBlockPosition",number:13,label:1,type:14,options:{"default":"PROMO_BLOCK_POSITION_UNSPECIFIED"}},mssg:{type:9,number:2,label:1},id:{type:9,number:4,label:1},header:{type:9,number:5,label:1},cancel_text:{type:9,number:6,label:1},url:{type:9,number:17,label:1},ok_action:{type:14,type_name:"badoo.bma.ActionType",number:7,label:1},action:{type:9,number:3,label:1},ok_payment_product_type:{type:14,type_name:"badoo.bma.PaymentProductType",number:11,label:1},action_provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:14,label:1},redirect_page:{type:11,type_name:"badoo.bma.RedirectPage",number:19,label:1},counter:{type:5,number:16,label:1}}}}()),$gpb.exists("badoo.bma.Album","message")||($gpb.exists("badoo.bma.RatedPhoto","message")||($gpb.exists("badoo.bma.PhotoRating","message")||($gpb.exists("badoo.bma.PhotoRateType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoRateType=new $gpb.Enum("badoo.bma.PhotoRateType");t._values=[0,1,2,3,4,5,6,11,12,13,14,15,21,22,23,24,25],t.UNKNOWN_PHOTO_RATE_TYPE=0,t.PHOTO_RATE_TYPE_EXCELLENT=1,t.PHOTO_RATE_TYPE_GOOD=2,t.PHOTO_RATE_TYPE_OK=3,t.PHOTO_RATE_TYPE_BAD=4,t.PHOTO_RATE_TYPE_BLOCKED=5,t.PHOTO_RATE_TYPE_CALCULATING=6,t.PHOTO_RATE_TYPE_STAR_ONE=11,t.PHOTO_RATE_TYPE_STAR_TWO=12,t.PHOTO_RATE_TYPE_STAR_THREE=13,t.PHOTO_RATE_TYPE_STAR_FOUR=14,t.PHOTO_RATE_TYPE_STAR_FIVE=15,t.PHOTO_RATE_TYPE_STAR_UNKNOWN=21,t.PHOTO_RATE_TYPE_STAR_PENDING=22,t.PHOTO_RATE_TYPE_STAR_OTHER=23,t.PHOTO_RATE_TYPE_STAR_PRIVATE=24,t.PHOTO_RATE_TYPE_STAR_NOT_PERSONAL=25}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoRating=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoRating",t.prototype._descriptor={fields:{display_rating:{type:9,number:2,label:1},rating:{type:5,number:1,label:1},rate_type:{type_name:"badoo.bma.PhotoRateType",number:4,label:1,type:14,options:{"default":"UNKNOWN_PHOTO_RATE_TYPE"}},rate_action_message:{type:9,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.RatedPhoto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RatedPhoto",t.prototype._descriptor={fields:{rating:{type:11,type_name:"badoo.bma.PhotoRating",number:3,label:1},small_photo_id:{type:9,number:1,label:1},blocked:{type:8,number:2,label:1}}}}()),$gpb.exists("badoo.bma.Photo","message")||($gpb.exists("badoo.bma.Point","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Point=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Point",t.prototype._descriptor={fields:{y:{type:5,number:2,label:1},x:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.EmbeddedVideo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.EmbeddedVideo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.EmbeddedVideo",t.prototype._descriptor={fields:{url:{type:9,number:1,label:1},is_pending_moderation:{type:8,number:3,label:1},is_processing:{type:8,number:2,label:1}}}}(),$gpb.exists("badoo.bma.FeatureType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FeatureType=new $gpb.Enum("badoo.bma.FeatureType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,68,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,10001,10002,10003,10004,10005,10006,10007,10008],t.UNKNOWN_FEATURE_TYPE=0,t.ALLOW_VIEW_PHOTOS=1,t.ALLOW_OPEN_CHAT=2,t.ALLOW_VIEW_MESSAGE_DETAILS=3,t.ALLOW_VIEW_PERSONAL_INFO=4,t.ALLOW_ADD_FAVOURITE=5,t.ALLOW_OPEN_MESSAGES=6,t.ALLOW_OPEN_FRIENDS=7,t.ALLOW_OPEN_FAVOURITES=8,t.ALLOW_OPEN_VISITORS=9,t.ALLOW_OPEN_PEOPLE_NEARBY=10,t.ALLOW_OPEN_ENCOUNTERS=11,t.ALLOW_OPEN_YOU_WANT=12,t.ALLOW_OPEN_WANT_YOU=13,t.ALLOW_OPEN_MUTUALS=14,t.ALLOW_ENCOUNTERS_VOTE=15,t.ALLOW_EDIT_PROFILE=16,t.ALLOW_BLOCK_USER=17,t.ALLOW_SEND_CHAT=18,t.ALLOW_SUPER_POWERS=19,t.ALLOW_LOAD_PEOPLE_NEARBY=20,t.ALLOW_LOAD_WANT_YOU=21,t.ALLOW_VIEW_CHAT_DELIVERY=22,t.ALLOW_OPEN_BLOCKED=23,t.ALLOW_INVITE_EMAIL=24,t.ALLOW_INVITE_PHONE=25,t.ALLOW_REGISTER_GENDER_PREF=26,t.ALLOW_SUPER_POWERS_RENEW=27,t.ALLOW_RISEUP=28,t.ALLOW_EDIT_LOCATION=29,t.ALLOW_CHAT_SPECIAL_DELIVERY=30,t.ALLOW_ENCOUNTERS_PROFILE=31,t.ALLOW_PRIORITY_SHOWS=32,t.ALLOW_REPORT_ABUSE=33,t.ALLOW_LOAD_SPOTLIGHT=34,t.ALLOW_ADD_TO_SPOTLIGHT=35,t.ALLOW_SHOW_CREDITS=36,t.ALLOW_MANAGE_PAYMENTS=37,t.ALLOW_TOPUP=38,t.ALLOW_INTERESTS=39,t.ALLOW_AMOBEE=40,t.ALLOW_FIKSU=41,t.ALLOW_OPEN_MATCHES=42,t.ALLOW_ADD_WANT_YOU=43,t.ALLOW_ADD_MUTUAL=44,t.ALLOW_ADD_YOU_WANT=45,t.ALLOW_OPEN_WANT_YOU_PROFILE=46,t.ALLOW_LOAD_YOU_WANT=47,t.ALLOW_BBM_INVITES=48,t.ALLOW_LOAD_FANS=49,t.ALLOW_LOAD_FAVORITES=50,t.ALLOW_LOAD_FRIENDS=51,t.ALLOW_ADD_FANS=52,t.ALLOW_ADD_FAVORITES=53,t.ALLOW_ADD_FRIENDS=54,t.ALLOW_ADD_VISITORS_TODAY=55,t.ALLOW_LOAD_VISITORS_MONTH=56,t.ALLOW_SPP_ONLY_CHAT=57,t.ALLOW_VERIFY=58,t.ALLOW_VIEW_FAVOURITES=59,t.ALLOW_SEND_GIFTS=60,t.ALLOW_PHOTO_RATING=61,t.ALLOW_ONLINE_STATUS_ACTION=62,t.ALLOW_RATE_IN_PHOTO_RATING=63,t.ALLOW_SOCIAL=64,t.ALLOW_LOAD_SOCIAL_NETWORK=65,t.ALLOW_AUTO_TOPUP=68,t.ALLOW_MULTIMEDIA=70,t.ALLOW_CREDITS_REWARDS=72,t.ALLOW_LOCATION_SHARING=73,t.ALLOW_AWARDS=74,t.ALLOW_PROFILE_RATING=75,t.ALLOW_VIRAL_FLOW=76,t.ALLOW_PROFILE_SEARCH=77,t.ALLOW_OPEN_FACEBOOK_INVITES=78,t.ALLOW_OPEN_LOCAL_HOT=79,t.ALLOW_ADD_TO_LOCAL_HOT=80,t.ALLOW_PROMOTED_VIDEOS=81,t.ALLOW_LOAD_VISITORS_WEEK=82,t.ALLOW_ADD_PEOPLE_NEARBY=83,t.ALLOW_FRIENDS_OF_FRIENDS=84,t.ALLOW_OPEN_SOCIAL_FRIEND_CONNECTION=85,t.ALLOW_LOAD_LOCAL_HOT=86,t.ALLOW_OPEN_UNIVERSITY_HOT_LIST=87,t.ALLOW_LOAD_UNIVERSITY_HOT_LIST=88,t.ALLOW_OPEN_FRIENDS_HOT_LIST=89,t.ALLOW_LOAD_FRIENDS_HOT_LIST=90,t.ALLOW_JUMP_THE_QUEUE_INVITES=91,t.ALLOW_BUMPED_INTO=92,t.ALLOW_EXTEND_MATCH=93,t.ALLOW_INVITE_PHONEBOOK=94,t.ALLOW_SHARED_FRIENDS=95,t.ALLOW_PROFILE_SHARING=96,t.ALLOW_HOTTEST_FRIENDS=97,t.ALLOW_RUSH_HOUR=98,t.ALLOW_SECRET_COMMENTS=99,t.ALLOW_REWIND=100,t.ALLOW_LOAD_FAVOURITED_YOU=101,t.ALLOW_COMMON_PLACES=102,t.ALLOW_POPULARITY=103,t.ALLOW_OPEN_MOBILE_APP_PROMO=104,t.ALLOW_SUPER_POWERS_TRIAL=105,t.ALLOW_UPLOAD_VIDEO=106,t.ALLOW_VIEW_FACEBOOK_PHOTOS=107,t.ALLOW_CONTACTS_FOR_CREDITS=108,t.ALLOW_PRIVATE_PHOTOS=109,t.ALLOW_SMILE=110,t.ALLOW_STICKERS=111,t.ALLOW_UNLOCK_STICKER_PACK=112,t.ALLOW_GIFTS=113,t.ALLOW_LOAD_POPULARITY=114,t.ALLOW_OPEN_COMMON_PLACE=115,t.ALLOW_ADD_TO_SPOTLIGHT_FOR_FREE=116,t.ALLOW_SEARCH_LOCATION_CHANGE=117,t.ALLOW_PAID_VIP=118,t.ALLOW_PAID_VIP_RENEW=119,t.ALLOW_PHOTO_OF_THE_DAY=120,t.ALLOW_EXTENDED_SEARCH=121,t.ALLOW_BUMBLE_VIBEE=122,t.ALLOW_ADD_TO_SPOTLIGHT_FOR_SHARING=123,t.ALLOW_QUICK_CHECKIN_TOOL=124,t.ALLOW_UNITED_FRIENDS=125,t.ALLOW_EXPERIMENTAL_POPULARITY=10001,t.ALLOW_EXPERIMENTAL_PAYMENTS=10002,t.ALLOW_EXPERIMENTAL_RUSH_HOUR=10003,t.ALLOW_EXPERIMENTAL_GIFTS=10004,t.ALLOW_EXPERIMENTAL_STICKERS=10005,t.ALLOW_EXPERIMENTAL_CRUSH_ON_FRIENDS=10006,t.ALLOW_EXPERIMENTAL_VIEW_PHOTOS_IN_PROFILES=10007,t.ALLOW_EXPERIMENTAL_VIEW_MY_CHANCES=10008}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Photo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Photo",t.prototype._descriptor={fields:{rating:{type:11,type_name:"badoo.bma.PhotoRating",number:7,label:1},large_url:{type:9,number:3,label:1},is_pending_moderation:{type:8,number:17,label:1},is_new:{type:8,number:20,label:1},can_set_as_profile_photo:{type:8,number:8,label:1},is_liked:{type:8,number:13,label:1},is_photo_of_me:{type:8,number:9,label:1},square_face_url:{type:9,number:12,label:1},preview_url:{type:9,number:2,label:1},large_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:4,label:1},face_bottom_right:{type:11,type_name:"badoo.bma.Point",number:6,label:1},video:{type:11,type_name:"badoo.bma.EmbeddedVideo",number:14,label:1},moderation_message:{type:9,number:19,label:1},is_removed_by_moderation:{type:8,number:18,label:1},external_provider_source:{type:14,type_name:"badoo.bma.ExternalProviderType",number:15,label:1},face_top_left:{type:11,type_name:"badoo.bma.Point",number:5,label:1},id:{type:9,number:1,label:1},restriction_feature:{type:14,type_name:"badoo.bma.FeatureType",number:16,label:1},is_profile_photo:{type:8,number:10,label:1}}}}()),$gpb.exists("badoo.bma.AlbumAccessLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AlbumAccessLevel=new $gpb.Enum("badoo.bma.AlbumAccessLevel");t._values=[1,2,3,4,5],t.MUST_CHAT_FIRST=1,t.CAN_REQUEST=2,t.ALREADY_REQUESTED=3,t.ACCESS_GRANTED=4,t.MUST_GO_NATIVE=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Album=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Album",t.prototype._descriptor={fields:{allow_edit:{type:8,number:12,label:1},requires_moderation:{type:8,number:11,label:1},preview_image_id:{type:9,number:5,label:1},uid:{type:9,number:1,label:2},date_modified:{type:3,number:2,label:1},accessable:{type:8,number:9,label:2},is_upload_forbidden:{type:8,number:15,label:1},photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:17,label:3},instruction:{type:9,number:14,label:1},album_type:{type:14,type_name:"badoo.bma.AlbumType",number:19,label:1},access_type:{type:5,number:8,label:1},preview_photo_ids:{type:9,number:6,label:3},photo_rating:{type:11,type_name:"badoo.bma.RatedPhoto",number:16,label:3},photos:{type:11,type_name:"badoo.bma.Photo",number:18,label:3},owner_id:{type:9,number:4,label:2},adult:{type:8,number:10,label:2},count_of_photos:{type:5,number:13,label:1},large_photo_ids:{type:9,number:7,label:3},caption:{type:9,number:21,label:1},access_level:{type:14,type_name:"badoo.bma.AlbumAccessLevel",number:20,label:1},name:{type:9,number:3,label:2}}}}()),$gpb.exists("badoo.bma.SocialSharingProvider","message")||($gpb.exists("badoo.bma.FriendsImportProvider","message")||($gpb.exists("badoo.bma.FriendsImportAuthData","message")||($gpb.exists("badoo.bma.FriendsImportAuthType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportAuthType=new $gpb.Enum("badoo.bma.FriendsImportAuthType");t._values=[1,2,3],t.AUTH_TYPE_PASSWORD=1,t.AUTH_TYPE_OAUTH=2,t.AUTH_TYPE_CONTACTS=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportAuthData=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FriendsImportAuthData",t.prototype._descriptor={fields:{oauth_url:{type:9,number:2,label:1},type:{type:14,type_name:"badoo.bma.FriendsImportAuthType",number:1,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportProvider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FriendsImportProvider",t.prototype._descriptor={fields:{auth_data:{type:11,type_name:"badoo.bma.FriendsImportAuthData",number:3,label:1},logo_url:{type:9,number:5,label:1},display_name:{type:9,number:2,label:1},id:{type:9,number:1,label:1},name:{type:9,number:4,label:1}}}}()),$gpb.exists("badoo.bma.Tag","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Tag=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Tag",t.prototype._descriptor={fields:{position:{type:11,type_name:"badoo.bma.Point",number:1,label:1},uid:{type:9,number:2,label:1}}}}(),$gpb.exists("badoo.bma.ExternalProvider","message")||($gpb.exists("badoo.bma.ExternalProviderAuthData","message")||($gpb.exists("badoo.bma.ExternalProviderAuthType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderAuthType=new $gpb.Enum("badoo.bma.ExternalProviderAuthType");t._values=[0,1,2,3],t.UNKNOWN_EXTERNAL_PROVIDER_AUTH_TYPE=0,t.EXTERNAL_PROVIDER_AUTH_TYPE_PASSWORD=1,t.EXTERNAL_PROVIDER_AUTH_TYPE_OAUTH=2,t.EXTERNAL_PROVIDER_AUTH_TYPE_CONTACTS=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderAuthData=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProviderAuthData",t.prototype._descriptor={fields:{app_secret:{type:9,number:5,label:1},type:{type_name:"badoo.bma.ExternalProviderAuthType",number:1,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_PROVIDER_AUTH_TYPE"}},oauth_url:{type:9,number:2,label:1},app_key:{type:9,number:4,label:1},app_id:{type:9,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProvider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProvider",t.prototype._descriptor={fields:{display_name:{type:9,number:2,label:1},write_permissions:{type:9,number:7,label:3},profile_photo:{type:11,type_name:"badoo.bma.Photo",number:8,label:1},auth_data:{type:11,type_name:"badoo.bma.ExternalProviderAuthData",number:5,label:1},cache_available:{type:8,number:9,label:1},id:{type:9,number:1,label:1},logo_url:{type:9,number:3,label:1},type:{type_name:"badoo.bma.ExternalProviderType",number:4,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_PROVIDER_TYPE"}},read_permissions:{type:9,number:6,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialSharingProvider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialSharingProvider",t.prototype._descriptor={fields:{sharing_images:{type:9,number:4,label:3},provider_details:{type:11,type_name:"badoo.bma.FriendsImportProvider",number:3,label:1},sharing_url:{type:9,number:2,label:1},tags:{type:11,type_name:"badoo.bma.Tag",number:7,label:3},sharing_description:{type:9,number:1,label:1},external_provider_details:{type:11,type_name:"badoo.bma.ExternalProvider",number:5,label:1},display_images:{type:9,number:6,label:3},display_string:{type:9,number:9,label:3},sharing_videos:{type:9,number:8,label:3}}}}()),$gpb.exists("badoo.bma.SecretComment","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SecretComment=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SecretComment",t.prototype._descriptor={fields:{comment:{type:9,number:2,label:1},can_report:{type:8,options:{"default":"false"},number:7,label:1},icon_id:{type:5,number:1,label:1},comment_id:{type:9,number:3,label:1},is_new:{type:8,options:{"default":"false"},number:4,label:1},is_reported:{type:8,options:{"default":"false"},number:6,label:1},can_delete:{type:8,options:{"default":"false"},number:8,label:1},date:{type:9,number:5,label:1}}}}(),$gpb.exists("badoo.bma.PhonebookContact","message")||($gpb.exists("badoo.bma.PhonebookContactDetail","message")||($gpb.exists("badoo.bma.PhonebookContactType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhonebookContactType=new $gpb.Enum("badoo.bma.PhonebookContactType");t._values=[1,2,3,4,5,6,7,8,9,10,11],t.HOME_NUMBERS=1,t.WORK_NUMBERS=2,t.MOBILE_NUMBERS=3,t.OTHER_NUMBERS=4,t.WORK_EMAILS=5,t.HOME_EMAILS=6,t.OTHER_EMAILS=7,t.IMPORT_EMAILS=8,t.FACEBOOK_ID=9,t.ODNOKLASSNIKI_ID=10,t.VKONTAKTE_ID=11}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhonebookContactDetail=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhonebookContactDetail",t.prototype._descriptor={fields:{contact:{type:9,number:1,label:2},type:{type:14,type_name:"badoo.bma.PhonebookContactType",number:2,label:2},can_receive_sms:{type:8,number:3,label:1}}}}()),$gpb.exists("badoo.bma.SexType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SexType=new $gpb.Enum("badoo.bma.SexType");t._values=[1,2,3],t.MALE=1,t.FEMALE=2,t.UNKNOWN=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhonebookContact=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhonebookContact",t.prototype._descriptor={fields:{phonebook_id:{type:9,number:3,label:1},checked:{type:8,number:5,label:1},description:{type:9,number:8,label:1},contacts:{type:11,type_name:"badoo.bma.PhonebookContactDetail",number:2,label:3},gender:{type:14,type_name:"badoo.bma.SexType",number:9,label:1},disabled:{type:8,number:6,label:1},user_id:{type:9,number:7,label:1},photo_url:{type:9,number:4,label:1},name:{type:9,number:1,label:2}}}}()),$gpb.exists("badoo.bma.VoteResultType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VoteResultType=new $gpb.Enum("badoo.bma.VoteResultType");t._values=[1,2,3,4,5,6],t.NONE=1,t.YES=2,t.NO=3,t.MAYBE=4,t.SKIP=5,t.BROKEN=6}(),$gpb.exists("badoo.bma.PersonStatus","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PersonStatus=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PersonStatus",t.prototype._descriptor={fields:{distance:{type:5,number:5,label:1},distance_long:{type:9,number:7,label:1},uid:{type:9,number:1,label:2},last_active:{type:5,number:4,label:2},date_modified:{type:3,number:2,label:1},on_site:{type:8,number:6,label:1},is_newbie:{type:8,number:12,label:1},longitude:{type:1,number:13,label:1},active_long:{type:9,number:9,label:1},online:{type:14,type_name:"badoo.bma.OnlineStatus",number:3,label:2},latitude:{type:1,number:14,label:1},is_hot:{type:8,number:11,label:1},location_known:{type:8,number:15,label:1},distance_short:{type:9,number:8,label:1},riseup:{type:8,number:10,label:1}}}}(),$gpb.exists("badoo.bma.PersonProfile","message")||($gpb.exists("badoo.bma.Person","message")||($gpb.exists("badoo.bma.PopularityLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PopularityLevel=new $gpb.Enum("badoo.bma.PopularityLevel");
t._values=[10,20,30,40,50],t.POPULARITY_LEVEL_VERY_LOW=10,t.POPULARITY_LEVEL_LOW=20,t.POPULARITY_LEVEL_AVERAGE=30,t.POPULARITY_LEVEL_HIGH=40,t.POPULARITY_LEVEL_VERY_HIGH=50}(),$gpb.exists("badoo.bma.ExperimentalPopularityLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalPopularityLevel=new $gpb.Enum("badoo.bma.ExperimentalPopularityLevel");t._values=[10,20,30,40,50],t.EXPERIMENTAL_POPULARITY_LEVEL_VERY_LOW=10,t.EXPERIMENTAL_POPULARITY_LEVEL_LOW=20,t.EXPERIMENTAL_POPULARITY_LEVEL_AVERAGE=30,t.EXPERIMENTAL_POPULARITY_LEVEL_HIGH=40,t.EXPERIMENTAL_POPULARITY_LEVEL_VERY_HIGH=50}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Person=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Person",t.prototype._descriptor={fields:{preview_image_id:{type:9,number:9,label:2},uid:{type:9,number:1,label:2},visible:{type:8,number:14,label:2},number_of_photos:{type:5,number:10,label:2},verified_user:{type:8,number:19,label:1},popularity_level:{type:14,type_name:"badoo.bma.PopularityLevel",number:23,label:1},blocked:{type:8,number:17,label:2},has_spp:{type:8,number:25,label:1},has_riseup:{type:8,number:27,label:1},popularity_visitors_month:{type:5,number:31,label:1},deleted:{type:8,number:12,label:2},location:{type:5,number:8,label:2},experimental_popularity_level:{type:14,type_name:"badoo.bma.ExperimentalPopularityLevel",number:10001,label:1},experimental_available_credits:{type:5,number:10002,label:1},popularity_pnb_place:{type:5,number:29,label:1},friend:{type:8,number:15,label:2},has_paid_vip:{type:8,number:26,label:1},favourite:{type:8,number:16,label:2},age:{type:5,number:5,label:2},personal_album_id:{type:9,number:11,label:2},name:{type:9,number:3,label:2},date_modified:{type:3,number:2,label:1},dob:{type:9,number:6,label:2},gender:{type:14,type_name:"badoo.bma.SexType",number:4,label:2},celebrity:{type:8,number:20,label:1},has_mobile_app:{type:8,number:22,label:1},profile_visited:{type:8,number:18,label:2},pending:{type:8,number:13,label:2},wish:{type:9,number:7,label:2},popularity_visitors_today:{type:5,number:30,label:1},available_credits:{type:5,number:24,label:1},last_riseup_time_message:{type:9,number:28,label:1},match:{type:8,number:21,label:1}}}}()),$gpb.exists("badoo.bma.ProfileScore","message")||($gpb.exists("badoo.bma.SocialFriendsConnectionsBlock","message")||($gpb.exists("badoo.bma.SocialConnectionStatus","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialConnectionStatus=new $gpb.Enum("badoo.bma.SocialConnectionStatus");t._values=[1,2,3,4,5,6],t.SOCIAL_CONNECTION_STATUS_SEARCHING=1,t.SOCIAL_CONNECTION_STATUS_NO_CONNECTION=2,t.SOCIAL_CONNECTION_STATUS_NOT_AVAILABLE=3,t.SOCIAL_CONNECTION_STATUS_FOUND=4,t.SOCIAL_CONNECTION_STATUS_UNKNOWN=5,t.SOCIAL_CONNECTION_STATUS_POSSIBLE_CONNECTION=6}(),$gpb.exists("badoo.bma.CircleDescription","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CircleDescription=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CircleDescription",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},number:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.PromoActionsBlock","message")||($gpb.exists("badoo.bma.Button","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Button=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Button",t.prototype._descriptor={fields:{action_text:{type:9,number:1,label:2},required_action:{type:14,type_name:"badoo.bma.ActionType",number:2,label:2}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoActionsBlock=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromoActionsBlock",t.prototype._descriptor={fields:{promo_text:{type:9,number:1,label:1},possible_actions:{type:11,type_name:"badoo.bma.Button",number:4,label:3},promo_explain_text:{type:9,number:3,label:1},promo_explain_anchor:{type:9,number:2,label:1}}}}()),$gpb.exists("badoo.bma.ApplicationFeature","message")||($gpb.exists("badoo.bma.PromoType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoType=new $gpb.Enum("badoo.bma.PromoType");t._values=[1,2,4,5,6,7,8],t.PROMO_TYPE_RISEUP_TO_THE_TOP=1,t.PROMO_TYPE_CHAT_SPECIAL_DELIVERY=2,t.PROMO_TYPE_ENCOUNTERS_POPULARITY_BOOST=4,t.PROMO_TYPE_UPLOAD_MORE_PHOTOS=5,t.PROMO_TYPE_CHAT_FIRST=6,t.PROMO_TYPE_READ_FIRST=7,t.PROMO_TYPE_CHAT_POPULAR=8}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ApplicationFeature=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ApplicationFeature",t.prototype._descriptor={fields:{display_message:{type:9,number:4,label:1},experimental_other_text:{type:9,number:10001,label:1},product_type:{type:14,type_name:"badoo.bma.PaymentProductType",number:7,label:1},display_action:{type:9,number:6,label:1},required_action:{type:14,type_name:"badoo.bma.ActionType",number:3,label:1},goal_progress:{type:11,type_name:"badoo.bma.GoalProgress",number:11,label:1},display_title:{type:9,number:5,label:1},promo_type:{type:14,type_name:"badoo.bma.PromoType",number:13,label:1},enabled:{type:8,number:2,label:2},feature:{type_name:"badoo.bma.FeatureType",number:1,label:1,type:14,options:{"default":"UNKNOWN_FEATURE_TYPE"}},experimental_gender:{type:14,type_name:"badoo.bma.SexType",number:10002,label:1},credits_for_product:{type:14,type_name:"badoo.bma.PaymentProductType",number:16,label:1},display_images:{type:11,type_name:"badoo.bma.ApplicationFeaturePicture",number:8,label:3},display_comment:{type:9,number:10,label:1},block_reason_id:{type:9,number:9,label:1},display_number:{type:5,number:12,label:1},url:{type:9,number:15,label:1},payment_amount:{type:5,number:14,label:1},experimental_request_ids:{type:9,number:10003,label:1}}}}()),$gpb.exists("badoo.bma.SocialFriendsConnection","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialFriendsConnection=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialFriendsConnection",t.prototype._descriptor={fields:{friends:{type:11,type_name:"badoo.bma.PhonebookContact",number:1,label:3},first_connection_provider_url:{type:9,number:2,label:3},feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:3,label:1},is_new:{type:8,number:4,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialFriendsConnectionsBlock=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialFriendsConnectionsBlock",t.prototype._descriptor={fields:{status:{type:14,type_name:"badoo.bma.SocialConnectionStatus",number:6,label:1},providers_more:{type:11,type_name:"badoo.bma.FriendsImportProvider",number:4,label:3},circles:{type:11,type_name:"badoo.bma.CircleDescription",number:8,label:3},connections_block_title:{type:9,number:9,label:1},phonebook_import_legal_notice_title:{type:9,number:11,label:1},legal_text:{type:9,number:10,label:1},promo_action_block:{type:11,type_name:"badoo.bma.PromoActionsBlock",number:7,label:1},feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:16,label:1},providers_block_title:{type:9,number:5,label:1},connections:{type:11,type_name:"badoo.bma.SocialFriendsConnection",number:2,label:3},phonebook_import_legal_notice_message:{type:9,number:12,label:1},providers_main:{type:11,type_name:"badoo.bma.FriendsImportProvider",number:3,label:3},more_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:15,label:3},total:{type:5,number:1,label:1},more_connections:{type:11,type_name:"badoo.bma.SocialFriendsConnection",number:13,label:3},main_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:14,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileScore=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ProfileScore",t.prototype._descriptor={fields:{award_images:{type:9,number:3,label:3},sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:4,label:3},description:{type:9,number:6,label:1},social_friends_connection_block:{type:11,type_name:"badoo.bma.SocialFriendsConnectionsBlock",number:8,label:1},title:{type:9,number:5,label:1},score:{type:5,number:7,label:1},promo_block:{type:11,type_name:"badoo.bma.PromoBlock",number:2,label:1},uid:{type:9,number:1,label:1}}}}()),$gpb.exists("badoo.bma.ClientFacebookFriend","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientFacebookFriend=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientFacebookFriend",t.prototype._descriptor={fields:{pic_square:{type:9,number:4,label:1},gender:{type:14,type_name:"badoo.bma.SexType",number:3,label:2},user_id:{type:9,number:5,label:1},uid:{type:3,number:1,label:2},name:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.Hashtable","message")||($gpb.exists("badoo.bma.KeyValue","message")||($gpb.exists("badoo.bma.Object","message")||($gpb.exists("badoo.bma.ObjectType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ObjectType=new $gpb.Enum("badoo.bma.ObjectType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,20,21,22,23,26,27,28,30,31,33,34,36,37,38,39,40,41,42,43,44,45,46,47,49,50,51,52,53,54,61,62,63,65,66,67,68,69,70,71,72,73,74,78,80,81,82,83,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101,104,106,107,109,110,111,113,114,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,146,147,148,149,150,151,152,156,157,158,159,160,161,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,184,185,186,187,188,189,200,201,202,203,208,209,210,211,212,213,214,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,10001,10002,10003,10004,10005,10006,10007],t.TYPE_NULL=0,t.TYPE_INTEGER=1,t.TYPE_DOUBLE=2,t.TYPE_FLOAT=3,t.TYPE_BOOLEAN=4,t.TYPE_STRING=5,t.TYPE_SHORT=6,t.TYPE_LONG=7,t.TYPE_CHARACTER=8,t.TYPE_BYTE=9,t.TYPE_VECTOR=10,t.TYPE_ARRAY=11,t.TYPE_HASHTABLE=12,t.TYPE_BYTE_ARRAY=13,t.TYPE_MESSAGE=20,t.TYPE_SERVER_APP_STARTUP=21,t.TYPE_CLIENT_STARTUP=22,t.TYPE_SERVER_UPDATE_LOCATION=23,t.TYPE_CLIENT_RESOURCE=26,t.TYPE_SERVER_LOGIN_BY_PASSWORD=27,t.TYPE_FORM_FAILURE=28,t.TYPE_APP_SETTINGS=30,t.TYPE_LANGUAGE=31,t.TYPE_TUPLE=33,t.TYPE_MODIFIED_OBJECT=34,t.TYPE_PERSON=36,t.TYPE_PERSON_PROFILE=37,t.TYPE_PERSON_STATUS=38,t.TYPE_CLIENT_PICTURE=39,t.TYPE_PEOPLE_FOLDER=40,t.TYPE_SERVER_GET_FOLDER_PEOPLE=41,t.TYPE_CLIENT_FOLDER_PEOPLE=42,t.TYPE_SERVER_FOLDER_ACTION=43,t.TYPE_SERVER_SEND_USER_REPORT=44,t.TYPE_SERVER_FEEDBACK_FORM=45,t.TYPE_SEARCH_SETTINGS=46,t.TYPE_SERVER_ENCOUNTERS_VOTE=47,t.TYPE_SERVER_GET_ENCOUNTERS=49,t.TYPE_NO_MORE_SEARCH_RESULTS=50,t.TYPE_CLIENT_ENCOUNTERS=51,t.TYPE_ALBUM=52,t.TYPE_SERVER_REQUEST_ALBUM_ACCESS=53,t.TYPE_SERVER_UPLOAD_PHOTO=54,t.TYPE_CHAT_INSTANCE=61,t.TYPE_CHAT_MESSAGE=62,t.TYPE_CHAT_IS_WRITING=63,t.TYPE_SERVER_REQUEST_PICTURE=65,t.TYPE_CLIENT_LOGIN_SUCCESS=66,t.TYPE_PHONEBOOK_CONTACT=67,t.TYPE_SMILEY=68,t.TYPE_USER_REPORT_TYPE=69,t.TYPE_CLIENT_OPEN_CHAT=70,t.TYPE_SERVER_GET_CITY_NAME=71,t.TYPE_CLIENT_CITY_NAME=72,t.TYPE_SERVER_OPEN_CHAT=73,t.TYPE_SERVER_ERROR_MESSAGE=74,t.TYPE_SERVER_GET_ALBUM=78,t.TYPE_SAVE_PROFILE=80,t.TYPE_CLIENT_VOTE_RESPONSE=81,t.TYPE_SEARCH_SETTINGS_FAILURE=82,t.TYPE_SEARCH_SETTINGS_CONTEXT=83,t.TYPE_COUNT_DATA=86,t.TYPE_APPLICATION_FEATURE=87,t.TYPE_SERVER_GET_PERSON_PROFILE=88,t.TYPE_PROFILE_VISITING_SOURCE=89,t.TYPE_CHAT_MESSAGE_RECEIVED=90,t.TYPE_FEATURE_PRODUCT_LIST=91,t.TYPE_PURCHASE_RECEIPT=92,t.TYPE_CLIENT_UPLOAD_PHOTO=93,t.TYPE_FOLDER_REQUEST=94,t.TYPE_CLIENT_NOTIFICATION=95,t.TYPE_PRODUCT_REQUEST=96,t.TYPE_PURCHASE_TRANSACTION_SETUP=97,t.TYPE_PURCHASE_TRANSACTION=98,t.TYPE_PURCHASE_TRANSACTION_FAILED=99,t.TYPE_PEOPLE_FOLDER_REQUEST=101,t.TYPE_CLIENT_PURCHASE_RECEIPT=104,t.TYPE_PROMO_BLOCK=106,t.TYPE_CLIENT_USER_DATA_INCOMPLETE=107,t.TYPE_PROVIDER_PRODUCT_ID=109,t.TYPE_PRODUCT_TERMS=110,t.TYPE_PAYMENT_SETTINGS=111,t.TYPE_FEATURE_PRE_PURCHASE_INFO=113,t.TYPE_CITIES=114,t.TYPE_COUNTRY=117,t.TYPE_TRACKING_CODE_SELECT=118,t.TYPE_CHECK_PHONEBOOK=119,t.TYPE_PHONEBOOK_CONTACTLIST=120,t.TYPE_PHONEBOOK_CONTACT_DETAIL=121,t.TYPE_INVITE_DATA=122,t.TYPE_SERVER_PREPARE_FACEBOOK_PHOTOS=123,t.TYPE_CLIENT_IMPORT_PHOTOS=124,t.TYPE_SERVER_FACEBOOK_IMPORT_PHOTOS=125,t.TYPE_GROUP=126,t.TYPE_INTEREST=127,t.TYPE_INTERESTS_GROUPS=128,t.TYPE_CLIENT_INTERESTS=129,t.TYPE_SERVER_INTERESTS_GET=130,t.TYPE_INTERESTS_UPDATE=131,t.TYPE_ANALYTICS_EVENT=133,t.TYPE_SERVER_GET_USER_LIST=134,t.TYPE_CLIENT_USER_LIST=135,t.TYPE_CLIENT_CHANGE_HOST=136,t.TYPE_TIW_IDEAS=137,t.TYPE_SERVER_GET_TIW_IDEAS=138,t.TYPE_SERVER_REQUEST_ALBUM_ACCESS_LEVEL=139,t.TYPE_ALBUM_ACCESS=140,t.TYPE_SPP_PURCHASE_STATISTIC=141,t.TYPE_SERVER_SECTION_USER_ACTION=146,t.TYPE_SERVER_USER_VERIFIED_GET=147,t.TYPE_CLIENT_USER_VERIFIED_GET=148,t.TYPE_SERVER_USER_VERIFY=149,t.TYPE_CLIENT_USER_VERIFY=150,t.TYPE_SERVER_USER_REMOVE_VERIFY=151,t.TYPE_CLIENT_USER_REMOVE_VERIFY=152,t.TYPE_SERVER_GET_IMPORT_PHOTO_LIST=156,t.TYPE_CLIENT_IMPORT_PREPARE_SUCCESS=157,t.TYPE_SERVER_APP_STATS=158,t.TYPE_SERVER_GET_CHAT_MESSAGES=159,t.TYPE_CLIENT_CHAT_MESSAGES=160,t.TYPE_CLIENT_SERVER_TEST_ERROR=161,t.TYPE_SERVER_GET_PHOTOS_TO_RATE=166,t.TYPE_CLIENT_GET_PHOTOS_TO_RATE=167,t.TYPE_SERVER_RATE_PHOTO=168,t.TYPE_CLIENT_RATE_PHOTO_SUCCESS=169,t.TYPE_CLIENT_GET_PHOTO_RATING_CONFIGURATION=170,t.TYPE_CLIENT_GET_OWN_PHOTO_RATING=171,t.TYPE_CLIENT_SPOTLIGHT_META_DATA=172,t.TYPE_SERVER_GET_FRIENDS_IMPORT_PROVIDERS=173,t.TYPE_CLIENT_GET_FRIENDS_IMPORT_PROVIDERS=174,t.TYPE_SERVER_START_FRIENDS_IMPORT=175,t.TYPE_CLIENT_FRIENDS_IMPORT=176,t.TYPE_SERVER_CHECK_FRIENDS_IMPORT=177,t.TYPE_SERVER_FINISH_FRIENDS_IMPORT=178,t.TYPE_SERVER_GET_CITY=179,t.TYPE_CITY=180,t.TYPE_SERVER_INIT_SPOTLIGHT=181,t.TYPE_SPOTLIGHT_COMMAND=182,t.TYPE_SERVER_GET_SOCIAL_FRIENDS_CONNECTIONS=184,t.TYPE_SOCIAL_FRIENDS_CONNECTIONS_BLOCK=185,t.TYPE_CLIENT_GROW_SOCIAL_NETWORK=186,t.TYPE_CLIENT_CONNECT_ALL_CONTACTS=187,t.TYPE_CLIENT_SELECT_FRIENDS=188,t.TYPE_CLIENT_RESET_TRUSTED_NETWORK=189,t.TYPE_SERVER_SELECT_FRIENDS=200,t.TYPE_SERVER_CONNECT_ALL_CONTACTS=201,t.TYPE_SERVER_IMAGE_ACTION=202,t.TYPE_CLIENT_IMAGE_ACTION=203,t.TYPE_CLIENT_GET_RATE_MESSAGE=208,t.TYPE_SERVER_DELETE_ACCOUNT=209,t.TYPE_CLIENT_DELETE_ACCOUNT_INFO=210,t.TYPE_SERVER_GET_CAPTCHA=211,t.TYPE_CLIENT_GET_CAPTCHA=212,t.TYPE_SERVER_CAPTCHA_ATTEMPT=213,t.TYPE_CLIENT_CAPTCHA_ATTEMPT=214,t.TYPE_CLIENT_MODERATED_PHOTOS=219,t.TYPE_SERVER_GET_AWARD=220,t.TYPE_AWARD=221,t.TYPE_CLIENT_SOCIAL_SHARING_PROVIDERS=222,t.TYPE_SERVER_GET_SOCIAL_SHARING_PROVIDERS=223,t.TYPE_CHAT_SETTINGS=224,t.TYPE_SYSTEM_NOTIFICATION=225,t.TYPE_PERSON_NOTICE=226,t.TYPE_SERVER_GET_EXTERNAL_PROVIDERS=227,t.TYPE_EXTERNAL_PROVIDERS=228,t.TYPE_SERVER_START_EXTERNAL_PROVIDER_IMPORT=229,t.TYPE_EXTERNAL_PROVIDER_IMPORT_PROGRESS=230,t.TYPE_SERVER_CHECK_EXTERNAL_PROVIDER_IMPORT_PROGRESS=231,t.TYPE_SERVER_FINISH_EXTERNAL_PROVIDER_IMPORT=232,t.TYPE_EXTERNAL_PROVIDER_IMPORT_RESULT=233,t.TYPE_EXTERNAL_PROVIDER_SECURITY_CREDENTIALS=234,t.TYPE_SERVER_GET_PROFILE_SCORE=235,t.TYPE_PROFILE_SCORE=236,t.TYPE_DELETE_CHAT_MESSAGE=237,t.TYPE_DELETE_CHAT_MESSAGE_RESULT=238,t.TYPE_SERVER_UPDATE_SESSION=239,t.TYPE_SERVER_REGISTRATION=240,t.TYPE_SERVER_PERSON_PROFILE_EDIT_FORM=241,t.TYPE_USER_BASIC_INFO=242,t.TYPE_CLIENT_REPORT_TYPES=243,t.TYPE_CLIENT_FEEDBACK_LIST=244,t.TYPE_SERVER_CHANGE_PASSWORD=245,t.TYPE_CLIENT_PERSON_PROFILE_EDIT_FORM=246,t.TYPE_CLIENT_COMMON_SETTINGS=247,t.TYPE_S_E_O_INFO=248,t.TYPE_COMET_CONFIGURATION=249,t.TYPE_CREDITS_FEATURE_LIST=250,t.TYPE_PING=251,t.TYPE_GEO_LOCATION=252,t.TYPE_DEV_FEATURE=253,t.TYPE_SERVER_GET_DEV_FEATURE=254,t.TYPE_CLIENT_LANGUAGES=255,t.TYPE_SERVER_CHANGE_EMAIL=256,t.TYPE_SERVER_GET_LANGUAGES=257,t.TYPE_SERVER_GET_SECRET_COMMENTS=258,t.TYPE_SERVER_ADD_SECRET_COMMENT=259,t.TYPE_CLIENT_SECRET_COMMENTS=260,t.TYPE_CLIENT_WHATS_NEW=261,t.TYPE_CLIENT_DELETE_ACCOUNT_ALTERNATIVES=262,t.TYPE_USER=263,t.TYPE_SERVER_GET_USER=264,t.TYPE_SERVER_GET_CAPTCHA_BY_CONTEXT=265,t.TYPE_CLIENT_CAPTCHA_SETTINGS=266,t.TYPE_SERVER_SUBMIT_REFERRAL_CODE=267,t.TYPE_CLIENT_REFERRAL_CODE_RESULT=268,t.TYPE_CLIENT_COUNTRIES=269,t.TYPE_CLIENT_REGIONS=270,t.TYPE_SERVER_GET_CITIES=271,t.TYPE_CLIENT_CITIES=272,t.TYPE_SERVER_GET_REGIONS=273,t.TYPE_SERVER_COMMON_PLACES_UPDATE=274,t.TYPE_POPULARITY_PAGE=275,t.TYPE_SERVER_GET_SEARCH_DISTANCES=276,t.TYPE_SEARCH_DISTANCES=277,t.TYPE_PUSH_INFO_LIST=278,t.TYPE_SERVER_SEARCH_LOCATIONS=279,t.TYPE_CLIENT_LOCATIONS=280,t.TYPE_SERVER_PHOTO_LIKE=281,t.TYPE_SERVER_MOVE_PHOTO=282,t.TYPE_HELP_CENTER_SECTION_LIST=283,t.TYPE_SERVER_HELP_CENTER_GET_QUESTION=284,t.TYPE_HELP_CENTER_QUESTION=285,t.TYPE_SERVER_GET_SOCIAL_LIKE_PROVIDERS=286,t.TYPE_CLIENT_SOCIAL_LIKE_PROVIDERS=287,t.TYPE_SERVER_DELETE_SECRET_COMMENT=288,t.TYPE_SERVER_REPORT_SECRET_COMMENT=289,t.TYPE_SERVER_RATE_SECRET_COMMENTS=290,t.TYPE_SERVER_SUBSCRIBE_TO_SECRET_COMMENTS=291,t.TYPE_CLIENT_SECRET_COMMENT_ADDED=292,t.TYPE_EXPERIMENTAL_MESSAGE_CHECKER_CONFIG=293,t.TYPE_EXPERIMENTAL_MESSAGE_CHECKER_STATS=294,t.TYPE_IN_APP_NOTIFICATION_INFO=295,t.TYPE_CLIENT_STICKER_PACKS=296,t.TYPE_GIFT_PRODUCT_LIST=297,t.TYPE_PURCHASED_GIFT_ACTION=298,t.TYPE_SERVER_HELP_CENTER_GET_SECTION_LIST=299,t.TYPE_SURVEY_RESULT=300,t.TYPE_SURVEY_SUCCESS=301,t.TYPE_SERVER_GET_COMMON_PLACES=302,t.TYPE_CLIENT_COMMON_PLACES=303,t.TYPE_CLIENT_PAID_VIP_PROMO=304,t.TYPE_SERVER_GET_NEXT_PROMO_BLOCKS=305,t.TYPE_CLIENT_NEXT_PROMO_BLOCKS=306,t.TYPE_SERVER_GET_PLACES_SECTIONS=307,t.TYPE_CLIENT_PLACES_SECTIONS=308,t.TYPE_SERVER_OPEN_MESSENGER=309,t.TYPE_CLIENT_OPEN_MESSENGER=310,t.TYPE_SERVER_GET_PROMOTED_VIDEO=311,t.TYPE_CLIENT_PROMOTED_VIDEO=312,t.TYPE_CLIENT_SPP_PROMO=313,t.TYPE_SERVER_PAYMENT_UNSUBSCRIBE=314,t.TYPE_SERVER_SAVE_USER=315,t.TYPE_SERVER_GET_RADAR_INFO=316,t.TYPE_CLIENT_RADAR_INFO=317,t.TYPE_A_B_TEST=318,t.TYPE_CLIENT_CREDITS_PROMO=319,t.TYPE_SERVER_GET_GIFT_PRODUCT_LIST=320,t.TYPE_SERVER_UNITED_FRIENDS_ACTION=321,t.TYPE_SERVER_GET_EXTERNAL_PROVIDER_IMPORTED_DATA=322,t.TYPE_EXTERNAL_PROVIDER_IMPORTED_DATA=323,t.TYPE_CLIENT_UNSUBSCRIBE_ALTERNATIVE=324,t.TYPE_SERVER_GET_USERS=325,t.TYPE_CLIENT_USERS=326,t.TYPE_CLIENT_FLOATING_BUTTON_CONFIG=327,t.TYPE_EXPERIMENTAL_POPULARITY_PAGE=10001,t.TYPE_EXPERIMENTAL_SERVER_GIFT_ACTION=10002,t.TYPE_EXPERIMENTAL_RUSH_HOUR_CONFIG=10003,t.TYPE_EXPERIMENTAL_GIFTS_PRODUCTS=10004,t.TYPE_EXPERIMENTAL_STICKERS_PACKS=10005,t.TYPE_EXPERIMENTAL_SERVER_GET_LIVE_PHOTOS=10006,t.TYPE_EXPERIMENTAL_CLIENT_LIVE_PHOTOS=10007}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Object=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Object",t.prototype._descriptor={fields:{object_type:{type:14,type_name:"badoo.bma.ObjectType",number:1,label:2},value:{type:12,number:2,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.KeyValue=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.KeyValue",t.prototype._descriptor={fields:{key:{type:11,type_name:"badoo.bma.Object",number:1,label:2},value:{type:11,type_name:"badoo.bma.Object",number:2,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.Hashtable=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Hashtable",t.prototype._descriptor={fields:{mappings:{type:11,type_name:"badoo.bma.KeyValue",number:1,label:3}}}}()),$gpb.exists("badoo.bma.ProfileField","message")||($gpb.exists("badoo.bma.ProfileOptionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileOptionType=new $gpb.Enum("badoo.bma.ProfileOptionType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,10001,10002,10003,10004],t.UNKNOWN_PROFILE_OPTION_TYPE=0,t.PROFILE_OPTION_TYPE_LOCATION=1,t.PROFILE_OPTION_TYPE_ABOUT_ME=2,t.PROFILE_OPTION_TYPE_RELATIONSHIP=3,t.PROFILE_OPTION_TYPE_SEXUALITY=4,t.PROFILE_OPTION_TYPE_APPEARANCE=5,t.PROFILE_OPTION_TYPE_LIVING=6,t.PROFILE_OPTION_TYPE_CHILDREN=7,t.PROFILE_OPTION_TYPE_SMOKING=8,t.PROFILE_OPTION_TYPE_DRINKING=9,t.PROFILE_OPTION_TYPE_EDUCATION=10,t.PROFILE_OPTION_TYPE_LANGUAGES=11,t.PROFILE_OPTION_TYPE_WORK=12,t.PROFILE_OPTION_TYPE_APPEARANCE_HEIGHT=13,t.PROFILE_OPTION_TYPE_APPEARANCE_WEIGHT=14,t.PROFILE_OPTION_TYPE_APPEARANCE_BODY_TYPE=15,t.PROFILE_OPTION_TYPE_APPEARANCE_EYE_COLOR=16,t.PROFILE_OPTION_TYPE_APPEARANCE_HAIR_COLOR=17,t.PROFILE_OPTION_TYPE_WORK_JOB=18,t.PROFILE_OPTION_TYPE_WORK_COMPANY=19,t.PROFILE_OPTION_TYPE_WORK_INCOME=20,t.PROFILE_OPTION_TYPE_INTERESTED_IN=21,t.PROFILE_OPTION_TYPE_WORK_GENERAL=22,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_INSTITUTION=10001,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_GRADUATION_YEAR=10002,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_PROFESSION=10003,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_COMPANY_NAME=10004}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileField=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ProfileField",t.prototype._descriptor={fields:{name:{type:9,number:3,label:1},value:{type:9,number:6,label:1},id:{type:9,number:1,label:1},type:{type_name:"badoo.bma.ProfileOptionType",number:2,label:1,type:14,options:{"default":"UNKNOWN_PROFILE_OPTION_TYPE"}},display_value:{type:9,number:4,label:2},required_action:{type:14,type_name:"badoo.bma.ActionType",number:5,label:1}}}}()),$gpb.exists("badoo.bma.BumpedInto","message")||($gpb.exists("badoo.bma.GeoLocation","message")||($gpb.exists("badoo.bma.PhysicalActivity","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhysicalActivity=new $gpb.Enum("badoo.bma.PhysicalActivity");t._values=[0,1,2,3,4,5,7,8],t.PHYSICAL_ACTIVITY_IN_VEHICLE=0,t.PHYSICAL_ACTIVITY_ON_BICYCLE=1,t.PHYSICAL_ACTIVITY_ON_FOOT=2,t.PHYSICAL_ACTIVITY_STILL=3,t.PHYSICAL_ACTIVITY_UNKNOWN=4,t.PHYSICAL_ACTIVITY_TILTING=5,t.PHYSICAL_ACTIVITY_WALKING=7,t.PHYSICAL_ACTIVITY_RUNNING=8}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.GeoLocation=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GeoLocation",t.prototype._descriptor={fields:{longitude_precise:{type:1,number:4,label:1},description:{type:9,number:9,label:1},floor:{type:5,number:15,label:1},timestamp:{type:3,number:10,label:1},altitude:{type:2,number:13,label:1},is_agps:{type:8,number:6,label:1},latitude_precise:{type:1,number:5,label:1},altitude_accuracy:{type:5,number:14,label:1},source:{type:9,number:1,label:1},longitude:{type:2,number:2,label:1},activity:{type:14,type_name:"badoo.bma.PhysicalActivity",number:12,label:1},is_wifi_enabled:{type:8,number:17,label:1},latitude:{type:2,number:3,label:1},accuracy:{type:5,number:8,label:1},speed:{type:2,number:16,label:1},display_image:{type:9,number:11,label:1},uuid:{type:9,number:7,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.BumpedInto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.BumpedInto",t.prototype._descriptor={fields:{date:{type:9,number:1,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:2,label:1}}}}()),$gpb.exists("badoo.bma.Interest","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Interest=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Interest",t.prototype._descriptor={fields:{name:{type:9,number:2,label:2},is_matched:{type:8,number:4,label:1},is_rejected:{type:8,number:6,label:1},is_hidden:{type:8,number:5,label:1},group_id:{type:5,number:3,label:1},interest_id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Language","message")||($gpb.exists("badoo.bma.LanguageLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.LanguageLevel=new $gpb.Enum("badoo.bma.LanguageLevel");t._values=[0,1,2,3,4],t.LANGUAGE_LEVEL_NONE=0,t.LANGUAGE_LEVEL_LOW=1,t.LANGUAGE_LEVEL_AVERAGE=2,t.LANGUAGE_LEVEL_FLUENT=3,t.LANGUAGE_LEVEL_NATIVE=4}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Language=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Language",t.prototype._descriptor={fields:{uid:{type:5,number:1,label:2},name:{type:9,number:2,label:2},level:{type_name:"badoo.bma.LanguageLevel",number:3,label:1,type:14,options:{"default":"LANGUAGE_LEVEL_NONE"}}}}}()),$gpb.exists("badoo.bma.CreditsRewards","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CreditsRewards=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CreditsRewards",t.prototype._descriptor={fields:{circles:{type:11,type_name:"badoo.bma.CircleDescription",number:3,label:3},current_index:{type:5,number:2,label:1},description:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ClientProfileOption","message")||($gpb.exists("badoo.bma.InputTypes","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InputTypes=new $gpb.Enum("badoo.bma.InputTypes");t._values=[1,2,3,4,5,6,7,8,9],t.TEXT=1,t.SELECT=2,t.COMBINED=3,t.LANGUAGES=4,t.CHECKBOX=5,t.LOCATION_CHOOSER=6,t.DATE_PICKER=7,t.DESCRIPTION=8,t.HINT=9}(),$gpb.exists("badoo.bma.ClientProfileOptionValue","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientProfileOptionValue=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientProfileOptionValue",t.prototype._descriptor={fields:{display_value:{type:9,number:2,label:1},value:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Tuple","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Tuple=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Tuple",t.prototype._descriptor={fields:{key:{type:11,type_name:"badoo.bma.Object",number:1,label:2},value:{type:11,type_name:"badoo.bma.Object",number:2,label:2}}}}(),$gpb.exists("badoo.bma.InputFormatTypes","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InputFormatTypes=new $gpb.Enum("badoo.bma.InputFormatTypes");t._values=[1,2],t.ALPHANUMERIC=1,t.NUMERIC=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientProfileOption=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientProfileOption",t.prototype._descriptor={fields:{input_parts:{type:11,type_name:"badoo.bma.ClientProfileOption",number:6,label:3},current_option_id:{type:9,number:8,label:1},checked:{type:8,number:13,label:1},name:{type:9,number:2,label:2},hint:{type:9,number:15,label:1},display_value:{type:9,number:3,label:2},input_type:{type:14,type_name:"badoo.bma.InputTypes",number:4,label:1},possible_values:{type:11,type_name:"badoo.bma.ClientProfileOptionValue",number:18,label:3},if_master_value:{type:9,number:12,label:3},disabled:{type:8,number:14,label:1},max_chars:{type:5,number:5,label:1},options:{type:11,type_name:"badoo.bma.Tuple",number:7,label:3},if_master_id:{type:9,number:11,label:1},help_text:{type:9,number:9,label:1},min_chars:{type:5,number:10,label:1},type:{type_name:"badoo.bma.ProfileOptionType",number:17,label:1,type:14,options:{"default":"UNKNOWN_PROFILE_OPTION_TYPE"}},id:{type:9,number:1,label:1},format_type:{type:14,type_name:"badoo.bma.InputFormatTypes",number:16,label:1}}}}()),$gpb.exists("badoo.bma.Award","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Award=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Award",t.prototype._descriptor={fields:{award_images:{type:9,number:3,label:3},title_short:{type:9,number:12,label:1},description:{type:9,number:7,label:1},title:{type:9,number:6,label:1},secret_award:{type:8,number:10,label:1},sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:4,label:3},award_id:{type:9,number:1,label:1},progress:{type:5,number:8,label:1},promo_block:{type:11,type_name:"badoo.bma.PromoBlock",number:2,label:1},shared:{type:8,number:9,label:1},profile_rating:{type:5,number:11,label:1},thumbnail:{type:9,number:5,label:1}}}}(),$gpb.exists("badoo.bma.ReceivedGifts","message")||($gpb.exists("badoo.bma.PurchasedGift","message")||($gpb.exists("badoo.bma.GiftProduct","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.GiftProduct=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GiftProduct",t.prototype._descriptor={fields:{large_url:{type:9,number:3,label:1},thumb_url:{type:9,number:2,label:1},cost:{type:5,number:4,label:1},product_id:{type:5,number:1,label:1},section_ids:{type:5,number:5,label:3}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PurchasedGift=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PurchasedGift",t.prototype._descriptor={fields:{purchase_id:{type:9,number:1,label:1},box_large_url:{type:9,number:13,label:1},gift:{type:11,type_name:"badoo.bma.GiftProduct",number:3,label:1},timestamp:{type:3,number:2,label:1},from_user_name:{type:9,number:7,label:1},is_boxed:{type:8,number:11,label:1},box_thumb_url:{type:9,number:12,label:1},text:{type:9,number:4,label:1},from_user_preview_photo:{type:9,number:8,label:1},from_user_id:{type:9,number:6,label:1},to_user_id:{type:9,number:10,label:1},is_private:{type:8,number:5,label:1},from_user_is_deleted:{type:8,number:9,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ReceivedGifts=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ReceivedGifts",t.prototype._descriptor={fields:{gifts:{type:11,type_name:"badoo.bma.PurchasedGift",number:1,label:3},suggested_gift:{type:11,type_name:"badoo.bma.GiftProduct",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ExperimentalExternalInterest","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalExternalInterest=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalExternalInterest",t.prototype._descriptor={fields:{picture_url:{type:9,number:2,label:1},title:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.SocialNetworkInfo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialNetworkInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialNetworkInfo",t.prototype._descriptor={fields:{url:{type:9,number:2,label:1},handle:{type:9,number:3,label:1},external_provider:{type:11,type_name:"badoo.bma.ExternalProvider",number:1,label:1}}}}(),$gpb.exists("badoo.bma.Popularity","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Popularity=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Popularity",t.prototype._descriptor={fields:{sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:3,label:3},sharing_images:{type:9,number:2,label:3},display_value:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ClientUserVerifiedGet","message")||($gpb.exists("badoo.bma.UserVerificationMethodStatus","message")||($gpb.exists("badoo.bma.UserVerificationMethodType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UserVerificationMethodType=new $gpb.Enum("badoo.bma.UserVerificationMethodType");t._values=[1,2,3,101,102,103,104],t.VERIFY_SOURCE_PHONE_NUMBER=1,t.VERIFY_SOURCE_SPP=2,t.VERIFY_SOURCE_EXTERNAL_PROVIDER=3,t.VERIFY_SOURCE_FACEBOOK=101,t.VERIFY_SOURCE_TWITTER=102,t.VERIFY_SOURCE_GPLUS=103,t.VERIFY_SOURCE_VKONTAKTE=104}(),$gpb.exists("badoo.bma.PhoneNumberVerificationType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhoneNumberVerificationType=new $gpb.Enum("badoo.bma.PhoneNumberVerificationType");
t._values=[1,2,3],t.PHONE_NUMBER_VERIFICATION_TYPE_LINK=1,t.PHONE_NUMBER_VERIFICATION_TYPE_SMS_PIN=2,t.PHONE_NUMBER_VERIFICATION_TYPE_PHONE_CALL=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UserVerificationMethodStatus=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UserVerificationMethodStatus",t.prototype._descriptor={fields:{display_message:{type:9,number:3,label:1},name:{type:9,number:2,label:1},is_confirmed:{type:8,number:6,label:1},type:{type:14,type_name:"badoo.bma.UserVerificationMethodType",number:1,label:2},pin_length:{type:5,number:9,label:1},verification_data:{type:9,number:4,label:1},phone_number_verification_type:{type:14,type_name:"badoo.bma.PhoneNumberVerificationType",number:10,label:1},allow_unlink:{type:8,options:{"default":"true"},number:8,label:1},external_provider_data:{type:11,type_name:"badoo.bma.ExternalProvider",number:7,label:1},is_connected:{type:8,number:5,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientUserVerifiedGet=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientUserVerifiedGet",t.prototype._descriptor={fields:{display_message:{type:9,number:1,label:1},is_verified:{type:8,number:3,label:1},methods:{type:11,type_name:"badoo.bma.UserVerificationMethodStatus",number:2,label:3}}}}()),$gpb.exists("badoo.bma.ExperimentalGift","message")||($gpb.exists("badoo.bma.ExperimentalGiftAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalGiftAction=new $gpb.Enum("badoo.bma.ExperimentalGiftAction");t._values=[1,2,3],t.GIFT_ACTION_DELETE=1,t.GIFT_ACTION_HIDE=2,t.GIFT_ACTION_REMOVE_TEXT=3}(),$gpb.exists("badoo.bma.ExperimentalGiftType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalGiftType=new $gpb.Enum("badoo.bma.ExperimentalGiftType");t._values=[1,2],t.GIFT_TYPE_DEFAULT=1,t.GIFT_TYPE_PHOTO=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalGift=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalGift",t.prototype._descriptor={fields:{date_ticks:{type:3,number:14,label:1},is_sender_deleted:{type:8,number:7,label:1},sender_name:{type:9,number:10,label:1},text:{type:9,number:6,label:1},sender_uid:{type:9,number:9,label:1},allowed_actions:{type:14,type_name:"badoo.bma.ExperimentalGiftAction",number:3,label:3},date:{type:9,number:4,label:1},large_image_url:{type:9,number:13,label:1},image_url:{type:9,number:8,label:1},sender_photo_url:{type:9,number:11,label:1},is_hidden:{type:8,number:2,label:1},type:{type:14,type_name:"badoo.bma.ExperimentalGiftType",number:5,label:1},id:{type:9,number:1,label:1},recipient_uid:{type:9,number:12,label:1}}}}()),$gpb.exists("badoo.bma.CommonPlace","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonPlace=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CommonPlace",t.prototype._descriptor={fields:{category:{type:9,number:9,label:1},distance:{type:9,number:12,label:1},title:{type:9,number:2,label:1},sort_value:{type:5,number:15,label:1},icon_url:{type:9,number:4,label:1},last_visited_time:{type:3,number:8,label:1},badge_new_people:{type:9,number:14,label:1},large_icon_url:{type:9,number:16,label:1},disabled:{type:8,number:5,label:1},image_url:{type:9,number:3,label:1},people_count:{type:5,number:6,label:1},address:{type:9,number:11,label:1},accent_color:{type:5,number:7,label:1},address_full:{type:9,number:17,label:1},id:{type:9,number:10,label:2},location:{type:11,type_name:"badoo.bma.GeoLocation",number:13,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PersonProfile=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PersonProfile",t.prototype._descriptor={fields:{profile_image_id:{type:9,number:3,label:1},uid:{type:9,number:1,label:2},album_ids:{type:9,number:4,label:3},common_places_import_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:62,label:3},personal_information_source:{type:11,type_name:"badoo.bma.ExternalProvider",number:46,label:1},vote_hint:{type:9,number:54,label:1},secret_comment_count:{type:5,number:51,label:1},large_image_id:{type:9,number:11,label:1},profile_score:{type:11,type_name:"badoo.bma.ProfileScore",number:43,label:1},facebook_friends:{type:11,type_name:"badoo.bma.ClientFacebookFriend",number:34,label:3},encrypted_uid:{type:9,number:53,label:1},promo_banner:{type:11,type_name:"badoo.bma.PromoBlock",number:67,label:1},allow_edit_gender:{type:8,number:10,label:1},city:{type:9,number:32,label:1},allow_edit_dob:{type:8,number:25,label:1},vote_result:{type:14,type_name:"badoo.bma.VoteResultType",number:9,label:2},friends_in_common:{type:5,number:30,label:1},secret_comment_preview:{type:11,type_name:"badoo.bma.SecretComment",number:59,label:3},show_referral_code_request:{type:8,number:55,label:1},things_in_common:{type:5,number:28,label:1},vibee_number:{type:9,number:68,label:1},voting_enabled:{type:8,number:12,label:1},languages:{type:11,type_name:"badoo.bma.Hashtable",number:7,label:1},fans:{type:11,type_name:"badoo.bma.Person",number:40,label:3},chat_allowed:{type:8,number:21,label:1},bumped_into_places:{type:11,type_name:"badoo.bma.BumpedInto",number:57,label:3},allow_edit_name:{type:8,number:45,label:1},show_common_interests:{type:8,number:17,label:1},is_secret_comments_enabled:{type:8,number:60,label:1},email:{type:9,number:14,label:1},profile_url:{type:9,number:42,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:69,label:1},interests:{type:11,type_name:"badoo.bma.Interest",number:18,label:3},allow_smile:{type:8,number:58,label:1},common_interest_message:{type:9,number:22,label:1},spoken_language:{type:11,type_name:"badoo.bma.Language",number:47,label:3},interests_message:{type:9,number:19,label:1},account_confirmed:{type:8,number:15,label:1},places_in_common_total:{type:5,number:64,label:1},credits_rewards:{type:11,type_name:"badoo.bma.CreditsRewards",number:35,label:1},profile_options:{type:11,type_name:"badoo.bma.ClientProfileOption",number:13,label:3},phone:{type:9,number:16,label:1},personal_info:{type:11,type_name:"badoo.bma.Hashtable",number:6,label:1},age_message:{type:9,number:39,label:1},awards:{type:11,type_name:"badoo.bma.Award",number:36,label:3},received_gifts:{type:11,type_name:"badoo.bma.ReceivedGifts",number:63,label:1},things_in_common_title:{type:9,number:27,label:1},experimental_external_interests:{type:11,type_name:"badoo.bma.ExperimentalExternalInterest",number:10001,label:3},hottest_friends:{type:11,type_name:"badoo.bma.Person",number:50,label:3},percentage_complete:{type:5,number:5,label:2},friends_connections:{type:11,type_name:"badoo.bma.SocialFriendsConnectionsBlock",number:26,label:1},experimental_university_name:{type:9,number:10002,label:1},video_count:{type:5,number:61,label:1},profile_rating:{type:11,type_name:"badoo.bma.Award",number:37,label:1},interests_in_common:{type:5,number:29,label:1},social_networks:{type:11,type_name:"badoo.bma.SocialNetworkInfo",number:41,label:3},date_modified:{type:3,number:2,label:1},country:{type:9,number:33,label:1},add_to_favourites_allowed:{type:8,number:20,label:1},popularity:{type:11,type_name:"badoo.bma.Popularity",number:44,label:1},experimental_gift_teaser_url:{type:9,number:10004,label:1},allow_send_gift:{type:8,number:66,label:1},verified_information:{type:11,type_name:"badoo.bma.ClientUserVerifiedGet",number:24,label:1},profile_field:{type:11,type_name:"badoo.bma.ProfileField",number:48,label:3},their_vote_on_you:{type:14,type_name:"badoo.bma.VoteResultType",number:8,label:2},places_in_common:{type:11,type_name:"badoo.bma.CommonPlace",number:56,label:3},match_message:{type:9,number:38,label:1},allow_share:{type:8,number:52,label:1},experimental_gifts:{type:11,type_name:"badoo.bma.ExperimentalGift",number:10003,label:3},credits:{type:9,number:23,label:1},bumped_into:{type:11,type_name:"badoo.bma.BumpedInto",number:49,label:1},is_match:{type:5,number:31,label:1},is_inapp_promo_partner:{type:8,number:65,label:1}}}}()),$gpb.exists("badoo.bma.SearchResultType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchResultType=new $gpb.Enum("badoo.bma.SearchResultType");t._values=[0,1,2],t.UNKNOWN_SEARCH_RESULT_TYPE=0,t.SEARCH_RESULT_TYPE_USER=1,t.SEARCH_RESULT_TYPE_EXTERNAL_CONTACT=2}(),$gpb.exists("badoo.bma.User","message")||($gpb.exists("badoo.bma.UnitedFriends","message")||($gpb.exists("badoo.bma.UnitedFriendsState","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsState=new $gpb.Enum("badoo.bma.UnitedFriendsState");t._values=[1,2,3,4],t.UNITED_FRIENDS_STATE_NOT_CONNECTED=1,t.UNITED_FRIENDS_STATE_SEARCHING=2,t.UNITED_FRIENDS_STATE_READY=3,t.UNITED_FRIENDS_STATE_CONNECTION_EXPIRED=4}(),$gpb.exists("badoo.bma.UnitedFriendsSection","message")||($gpb.exists("badoo.bma.UnitedFriend","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriend=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriend",t.prototype._descriptor={fields:{external_provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1},preview_photo_url:{type:9,number:1,label:1},user_id:{type:9,number:3,label:1},name:{type:9,number:4,label:1}}}}(),$gpb.exists("badoo.bma.UnitedFriendsSectionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsSectionType=new $gpb.Enum("badoo.bma.UnitedFriendsSectionType");t._values=[1,2,3],t.UNITED_FRIENDS_SECTION_REGISTERED=1,t.UNITED_FRIENDS_SECTION_UNREGISTERED=2,t.UNITED_FRIENDS_SECTION_HOTTEST=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsSection=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriendsSection",t.prototype._descriptor={fields:{total_count:{type:5,number:3,label:1},friends:{type:11,type_name:"badoo.bma.UnitedFriend",number:4,label:3},name:{type:9,number:2,label:1},type:{type:14,type_name:"badoo.bma.UnitedFriendsSectionType",number:1,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriends=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriends",t.prototype._descriptor={fields:{total_count:{type:5,number:2,label:1},state:{type:14,type_name:"badoo.bma.UnitedFriendsState",number:1,label:1},sections:{type:11,type_name:"badoo.bma.UnitedFriendsSection",number:4,label:3},connection_provider:{type:11,type_name:"badoo.bma.ExternalProvider",number:3,label:1}}}}()),$gpb.exists("badoo.bma.Country","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Country=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Country",t.prototype._descriptor={fields:{id:{type:5,number:1,label:2},name:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.Region","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Region=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Region",t.prototype._descriptor={fields:{id:{type:5,number:1,label:1},name:{type:9,number:2,label:1}}}}(),$gpb.exists("badoo.bma.City","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.City=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.City",t.prototype._descriptor={fields:{latitude:{type:1,number:4,label:1},id:{type:5,number:1,label:2},longitude:{type:1,number:3,label:1},name:{type:9,number:2,label:2}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.User=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.User",t.prototype._descriptor={fields:{profile_fields:{type:11,type_name:"badoo.bma.ProfileField",number:490,label:3},allow_send_gift:{type:8,number:731,label:1},profile_score:{type:11,type_name:"badoo.bma.ProfileScore",number:470,label:1},profile_score_numeric:{type:5,number:471,label:1},pre_match_time_left:{type:11,type_name:"badoo.bma.GoalProgress",number:590,label:1},match_date:{type:3,number:581,label:1},has_paid_vip:{type:8,number:302,label:1},popularity_pnb_place:{type:5,number:691,label:1},allow_smile:{type:8,number:730,label:1},account_confirmed:{type:8,number:40,label:1},allow_chat:{type:8,number:660,label:1},my_vote:{type:14,type_name:"badoo.bma.VoteResultType",number:550,label:1},name:{type:9,number:200,label:1},gender:{type:14,type_name:"badoo.bma.SexType",number:230,label:1},wish:{type:9,number:360,label:1},bumped_into:{type:11,type_name:"badoo.bma.BumpedInto",number:430,label:1},places_in_common:{type:11,type_name:"badoo.bma.CommonPlace",number:511,label:3},is_newbie:{type:8,number:240,label:1},is_conversation:{type:8,number:630,label:1},allow_add_to_favourites:{type:8,number:650,label:1},secret_comment_count:{type:5,number:740,label:1},popularity_level:{type:14,type_name:"badoo.bma.PopularityLevel",number:690,label:1},came_from_text:{type:9,number:761,label:1},has_riseup:{type:8,number:303,label:1},profile_complete_percent:{type:5,number:50,label:1},is_unread:{type:8,number:280,label:1},email:{type:9,number:10,label:1},is_highlighted:{type:8,number:790,label:1},credits_rewards:{type:11,type_name:"badoo.bma.CreditsRewards",number:110,label:1},bumped_into_places:{type:11,type_name:"badoo.bma.BumpedInto",number:431,label:3},credits:{type:5,number:30,label:1},sort_timestamp:{type:3,number:830,label:1},awards:{type:11,type_name:"badoo.bma.Award",number:440,label:3},user_id:{type:9,number:1,label:2},is_blocked:{type:8,number:600,label:1},secret_comment_preview:{type:11,type_name:"badoo.bma.SecretComment",number:741,label:3},vote_sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:720,label:3},interests_in_common:{type:5,number:410,label:1},united_friends:{type:11,type_name:"badoo.bma.UnitedFriends",number:800,label:1},country:{type:11,type_name:"badoo.bma.Country",number:91,label:1},region:{type:11,type_name:"badoo.bma.Region",number:92,label:1},personal_info_source:{type:11,type_name:"badoo.bma.ExternalProvider",number:320,label:1},is_removed:{type:8,number:810,label:1},has_bumped_into_places:{type:8,number:432,label:1},allow_voting:{type:8,number:670,label:1},is_hot:{type:8,number:260,label:1},is_extended_match:{type:8,number:300,label:1},experimental_whats_my_chances:{type:9,number:10001,label:1},last_riseup_time_message:{type:9,number:304,label:1},last_active:{type:3,number:780,label:1},last_active_string:{type:9,number:781,label:1},unread_messages_count:{type:5,number:640,label:1},online_status_text:{type:9,number:331,label:1},common_places_import_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:513,label:3},distance_short:{type:9,number:540,label:1},has_mobile_app:{type:8,number:680,label:1},city:{type:11,type_name:"badoo.bma.City",number:93,label:1},friends_in_common:{type:5,number:510,label:1},update_timestamp:{type:3,number:820,label:1},allow_edit_name:{type:8,number:80,label:1},is_secret_comments_enabled:{type:8,number:742,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:90,label:1},interests:{type:11,type_name:"badoo.bma.Interest",number:420,label:3},photo_count:{type:5,number:310,label:1},online_status:{type:14,type_name:"badoo.bma.OnlineStatus",number:330,label:1},is_invisible:{type:8,number:270,label:1},places_in_common_total:{type:5,number:512,label:1},is_favourite:{type:8,number:610,label:1},phone:{type:9,number:20,label:1},received_gifts:{type:11,type_name:"badoo.bma.ReceivedGifts",number:750,label:1},albums:{type:11,type_name:"badoo.bma.Album",number:370,label:3},distance:{type:5,number:520,label:1},video_count:{type:5,number:311,label:1},is_deleted:{type:8,number:250,label:1},interests_total:{type:5,number:400,label:1},social_networks:{type:11,type_name:"badoo.bma.SocialNetworkInfo",number:460,label:3},is_verified:{type:8,number:290,label:1},is_match:{type:8,number:580,label:1},vote_sharing_promo:{type:11,type_name:"badoo.bma.PromoBlock",number:710,label:1},display_message:{type:9,number:700,label:1},distance_long:{type:9,number:530,label:1},is_friend:{type:8,number:620,label:1},user_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1},vote_hint:{type:9,number:681,label:1},profile_photo:{type:11,type_name:"badoo.bma.Photo",number:340,label:1},came_from:{type:14,type_name:"badoo.bma.ClientSource",number:760,label:1},allow_edit_gender:{type:8,number:70,label:1},has_spp:{type:8,number:301,label:1},allow_edit_dob:{type:8,number:60,label:1},popularity_visitors_month:{type:5,number:693,label:1},spoken_languages:{type:11,type_name:"badoo.bma.Language",number:480,label:3},allow_sharing:{type:8,number:770,label:1},friends_connections:{type:11,type_name:"badoo.bma.SocialFriendsConnectionsBlock",number:500,label:1},dob:{type:9,number:220,label:1},their_vote:{type:14,type_name:"badoo.bma.VoteResultType",number:560,label:1},age:{type:5,number:210,label:1},popularity:{type:11,type_name:"badoo.bma.Popularity",number:350,label:1},verified_information:{type:11,type_name:"badoo.bma.ClientUserVerifiedGet",number:100,label:1},match_message:{type:9,number:570,label:1},popularity_visitors_today:{type:5,number:692,label:1},is_inapp_promo_partner:{type:8,number:762,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchResult=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchResult",t.prototype._descriptor={fields:{sharing_promo:{type:11,type_name:"badoo.bma.PromoBlock",number:14,label:1},secret_comment_count:{type:5,number:51,label:1},large_image_id:{type:9,number:4,label:1},images:{type:9,number:5,label:3},album:{type:11,type_name:"badoo.bma.Album",number:10,label:1},sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:12,label:3},friends_in_common:{type:5,number:8,label:1},secret_comment_preview:{type:11,type_name:"badoo.bma.SecretComment",number:52,label:3},external_contact:{type:11,type_name:"badoo.bma.PhonebookContact",number:17,label:1},my_vote:{type:14,type_name:"badoo.bma.VoteResultType",number:15,label:1},person_status:{type:11,type_name:"badoo.bma.PersonStatus",number:2,label:1},person_profile:{type:11,type_name:"badoo.bma.PersonProfile",number:21,label:1},has_user_voted:{type:8,number:3,label:1},type:{type:14,type_name:"badoo.bma.SearchResultType",number:18,label:1},interests:{type:11,type_name:"badoo.bma.Interest",number:6,label:3},show_contact_import_promo_banner:{type:8,number:22,label:1},photos:{type:11,type_name:"badoo.bma.Photo",number:7,label:3},user:{type:11,type_name:"badoo.bma.User",number:24,label:1},hottest_friends:{type:5,number:23,label:1},bumped_into:{type:8,number:19,label:1},interests_in_common:{type:5,number:11,label:1},social_networks:{type:11,type_name:"badoo.bma.SocialNetworkInfo",number:20,label:3},is_secret_comments_enabled:{type:8,number:53,label:1},last_friend:{type:8,number:13,label:1},person:{type:11,type_name:"badoo.bma.Person",number:1,label:1},match_message:{type:9,number:16,label:1},profile_rating:{type:5,number:9,label:1}}}}()),$gpb.exists("badoo.bma.SearchType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchType=new $gpb.Enum("badoo.bma.SearchType");t._values=[1,2,3],t.ENCOUNTERS=1,t.NEARBY=2,t.SAVE_WISH=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientEncounters=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientEncounters",t.prototype._descriptor={fields:{rush_hour_config:{type:11,type_name:"badoo.bma.RushHourConfig",number:5,label:1},quota:{type:11,type_name:"badoo.bma.VotingQuota",number:4,label:1},results:{type:11,type_name:"badoo.bma.SearchResult",number:1,label:3},search_context:{type:14,type_name:"badoo.bma.SearchType",number:2,label:1},offset:{type:5,number:3,label:1},promo_banner:{type:11,type_name:"badoo.bma.PromoBlock",number:6,label:1}}}}()),$gpb.exists("badoo.bma.SearchSettings","message")||($gpb.exists("badoo.bma.SearchDistances","message")||($gpb.exists("badoo.bma.Unit","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Unit=new $gpb.Enum("badoo.bma.Unit");t._values=[0,1,2],t.UNIT_UNKNOWN=0,t.UNIT_METRIC=1,t.UNIT_IMPERIAL=2}(),$gpb.exists("badoo.bma.SearchArea","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchArea=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchArea",t.prototype._descriptor={fields:{maximal:{type:8,number:4,label:1},area_id:{type:9,number:1,label:1},radius:{type:5,number:2,label:1},minimal:{type:8,number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchDistances=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchDistances",t.prototype._descriptor={fields:{unit_type:{type:14,type_name:"badoo.bma.Unit",number:1,label:1},area:{type:11,type_name:"badoo.bma.SearchArea",number:2,label:3}}}}()),$gpb.exists("badoo.bma.TiwIdea","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.TiwIdea=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.TiwIdea",t.prototype._descriptor={fields:{tiw_phrase:{type:9,number:2,label:1},tiw_phrase_id:{type:5,number:1,label:1},show_interested_in:{type:8,number:3,label:1}}}}(),$gpb.exists("badoo.bma.SearchSettingsAgeOption","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchSettingsAgeOption=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchSettingsAgeOption",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},age_option_id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Slider","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Slider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Slider",t.prototype._descriptor={fields:{min_range:{type:5,number:4,label:1},max_value:{type:5,number:2,label:1},min_value:{type:5,number:1,label:1},is_left_adjustable:{type:8,number:5,label:1},unit_type:{type_name:"badoo.bma.Unit",number:6,label:1,type:14,options:{"default":"UNIT_UNKNOWN"}},step:{type:5,number:3,label:1}}}}(),$gpb.exists("badoo.bma.FolderTypes","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FolderTypes=new $gpb.Enum("badoo.bma.FolderTypes");t._values=[-1,0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25,26],t.UNSPECIFIED_FOLDER=-1,t.ALL_MESSAGES=0,t.UNREAD_MESSAGES=2,t.FRIENDS=3,t.FAVOURITES=4,t.MUTUAL_ATTRACTIONS=5,t.WANT_TO_MEET_YOU=6,t.YOU_WANT_TO_MEET=7,t.PROFILE_VISITORS=8,t.BLOCKED=9,t.NEARBY_PEOPLE=10,t.PRIVATE_ALBUM_ACCESS=11,t.NEARBY_PEOPLE_2=12,t.SPOTLIGHT=13,t.NEARBY_PEOPLE_3=14,t.MATCHES=15,t.NEARBY_PEOPLE_4=16,t.RATED_ME=17,t.HON_MESSAGES=18,t.PROFILE_SEARCH=20,t.LOCAL_HOT=21,t.UNIVERSITY_HOT_LIST=22,t.FRIENDS_HOT_LIST=23,t.COMMON_PLACE=24,t.NEARBY_PEOPLE_WEB=25,t.PHOTO_OF_THE_DAY=26}(),$gpb.exists("badoo.bma.ExtendedSearchSettings","message")||($gpb.exists("badoo.bma.ExtendedSearchFilter","message")||($gpb.exists("badoo.bma.ExtendedSearchOption","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExtendedSearchOption=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExtendedSearchOption",t.prototype._descriptor={fields:{display_text:{type:9,number:3,label:1},selected:{type:8,number:2,label:1},id:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.SelectType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SelectType=new $gpb.Enum("badoo.bma.SelectType");t._values=[1,2,3],t.SELECT_SINGLE=1,t.SELECT_MULTIPLE=2,t.SELECT_RANGE=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExtendedSearchFilter=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExtendedSearchFilter",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},additional_options:{type:11,type_name:"badoo.bma.ExtendedSearchOption",number:5,label:3},select_type:{type:14,type_name:"badoo.bma.SelectType",number:3,label:1},id:{type:9,number:1,label:1},options:{type:11,type_name:"badoo.bma.ExtendedSearchOption",number:4,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExtendedSearchSettings=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExtendedSearchSettings",t.prototype._descriptor={fields:{selected_filters_order:{type:9,number:2,label:3},filters:{type:11,type_name:"badoo.bma.ExtendedSearchFilter",number:1,label:3}}}}()),$gpb.exists("badoo.bma.UserFieldFilter","message")||($gpb.exists("badoo.bma.UserField","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UserField=new $gpb.Enum("badoo.bma.UserField");t._values=[10,20,30,40,50,60,70,80,90,91,92,93,100,110,200,210,220,230,240,250,260,270,280,290,300,301,302,303,304,310,311,320,330,331,340,350,360,370,400,410,420,430,431,432,440,460,470,471,480,490,500,510,511,512,513,520,530,540,550,560,570,580,581,590,600,610,620,630,640,650,660,670,680,681,690,691,692,693,700,710,720,730,731,740,741,742,750,760,761,762,770,780,781,790,800,10001],t.USER_FIELD_EMAIL=10,t.USER_FIELD_PHONE=20,t.USER_FIELD_CREDITS=30,t.USER_FIELD_ACCOUNT_CONFIRMED=40,t.USER_FIELD_PROFILE_COMPLETE_PERCENT=50,t.USER_FIELD_ALLOW_EDIT_DOB=60,t.USER_FIELD_ALLOW_EDIT_GENDER=70,t.USER_FIELD_ALLOW_EDIT_NAME=80,t.USER_FIELD_LOCATION=90,t.USER_FIELD_COUNTRY=91,t.USER_FIELD_REGION=92,t.USER_FIELD_CITY=93,t.USER_FIELD_VERIFIED_INFORMATION=100,t.USER_FIELD_CREDITS_REWARDS=110,t.USER_FIELD_NAME=200,t.USER_FIELD_AGE=210,t.USER_FIELD_DOB=220,t.USER_FIELD_GENDER=230,t.USER_FIELD_IS_NEWBIE=240,t.USER_FIELD_IS_DELETED=250,t.USER_FIELD_IS_HOT=260,t.USER_FIELD_IS_INVISIBLE=270,t.USER_FIELD_IS_UNREAD=280,t.USER_FIELD_IS_VERIFIED=290,t.USER_FIELD_IS_EXTENDED_MATCH=300,t.USER_FIELD_HAS_SPP=301,t.USER_FIELD_HAS_PAID_VIP=302,t.USER_FIELD_HAS_RISEUP=303,t.USER_FIELD_LAST_RISEUP_TIME_MESSAGE=304,t.USER_FIELD_PHOTO_COUNT=310,t.USER_FIELD_VIDEO_COUNT=311,t.USER_FIELD_PERSONAL_INFO_SOURCE=320,t.USER_FIELD_ONLINE_STATUS=330,t.USER_FIELD_ONLINE_STATUS_TEXT=331,t.USER_FIELD_PROFILE_PHOTO=340,t.USER_FIELD_POPULARITY=350,t.USER_FIELD_WISH=360,t.USER_FIELD_ALBUMS=370,t.USER_FIELD_INTERESTS_TOTAL=400,t.USER_FIELD_INTERESTS_IN_COMMON=410,t.USER_FIELD_INTERESTS=420,t.USER_FIELD_BUMPED_INTO=430,t.USER_FIELD_BUMPED_INTO_PLACES=431,t.USER_FIELD_HAS_BUMPED_INTO_PLACES=432,t.USER_FIELD_AWARDS=440,t.USER_FIELD_SOCIAL_NETWORKS=460,t.USER_FIELD_PROFILE_SCORE=470,t.USER_FIELD_PROFILE_SCORE_NUMERIC=471,t.USER_FIELD_SPOKEN_LANGUAGES=480,t.USER_FIELD_PROFILE_FIELDS=490,t.USER_FIELD_FRIENDS_CONNECTIONS=500,t.USER_FIELD_FRIENDS_IN_COMMON=510,t.USER_FIELD_PLACES_IN_COMMON=511,t.USER_FIELD_PLACES_IN_COMMON_TOTAL=512,t.USER_FIELD_COMMON_PLACES_IMPORT_PROVIDERS=513,t.USER_FIELD_DISTANCE=520,t.USER_FIELD_DISTANCE_SHORT=530,t.USER_FIELD_DISTANCE_LONG=540,t.USER_FIELD_MY_VOTE=550,t.USER_FIELD_THEIR_VOTE=560,t.USER_FIELD_MATCH_MESSAGE=570,t.USER_FIELD_IS_MATCH=580,t.USER_FIELD_MATCH_DATE=581,t.USER_FIELD_PRE_MATCH_TIME_LEFT=590,t.USER_FIELD_IS_BLOCKED=600,t.USER_FIELD_IS_FAVOURITE=610,t.USER_FIELD_IS_FRIEND=620,t.USER_FIELD_IS_CONVERSATION=630,t.USER_FIELD_UNREAD_MESSAGES_COUNT=640,t.USER_FIELD_ALLOW_ADD_TO_FAVOURITES=650,t.USER_FIELD_ALLOW_CHAT=660,t.USER_FIELD_ALLOW_VOTING=670,t.USER_FIELD_HAS_MOBILE_APP=680,t.USER_FIELD_VOTE_HINT=681,t.USER_FIELD_POPULARITY_LEVEL=690,t.USER_FIELD_POPULARITY_PNB_PLACE=691,t.USER_FIELD_POPULARITY_VISITORS_TODAY=692,t.USER_FIELD_POPULARITY_VISITORS_MONTH=693,t.USER_FIELD_DISPLAY_MESSAGE=700,t.USER_FIELD_VOTE_SHARING_PROMO=710,t.USER_FIELD_VOTE_SHARING_PROVIDERS=720,t.USER_FIELD_ALLOW_SMILE=730,t.USER_FIELD_ALLOW_SEND_GIFT=731,t.USER_FIELD_SECRET_COMMENT_COUNT=740,t.USER_FIELD_SECRET_COMMENT_PREVIEW=741,t.USER_FIELD_IS_SECRET_COMMENT_ENABLED=742,t.USER_FIELD_RECEIVED_GIFTS=750,t.USER_FIELD_CAME_FROM=760,t.USER_FIELD_CAME_FROM_TEXT=761,t.USER_FIELD_IS_INAPP_PROMO_PARTNER=762,t.USER_FIELD_ALLOW_SHARING=770,t.USER_FIELD_LAST_ACTIVE=780,t.USER_FIELD_LAST_ACTIVE_STRING=781,t.USER_FIELD_IS_HIGHLIGHTED=790,t.USER_FIELD_UNITED_FRIENDS=800,t.EXPERIMENTAL_USER_WHATS_MY_CHANCES=10001}(),$gpb.exists("badoo.bma.ServerInterestsGet","message")||($gpb.exists("badoo.bma.InterestSortOrder","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InterestSortOrder=new $gpb.Enum("badoo.bma.InterestSortOrder");t._values=[1,2,3],t.POPULAR=1,t.MOST_POPULAR=2,t.RANDOM=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerInterestsGet=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerInterestsGet",t.prototype._descriptor={fields:{user_id:{type:9,number:1,label:1},group_id:{type:5,number:2,label:1},limit:{type:5,number:4,label:1},order:{type:14,type_name:"badoo.bma.InterestSortOrder",number:5,label:1},offset:{type:5,number:3,label:1}}}}()),$gpb.exists("badoo.bma.UnitedFriendsFilter","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsFilter=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriendsFilter",t.prototype._descriptor={fields:{count:{type:5,number:2,label:1},section_type:{type:14,type_name:"badoo.bma.UnitedFriendsSectionType",number:3,label:1},offset:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.PhotoSizeSpec","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoSizeSpec=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoSizeSpec",t.prototype._descriptor={fields:{large_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:2,label:1},preview_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:1,label:1},square_face_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UserFieldFilter=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UserFieldFilter",t.prototype._descriptor={fields:{request_albums:{type:11,type_name:"badoo.bma.ServerGetAlbum",number:20,label:3},projection:{type:14,type_name:"badoo.bma.UserField",number:10,label:3},request_interests:{type:11,type_name:"badoo.bma.ServerInterestsGet",number:30,label:1},common_place_count:{type:5,number:50,label:1},united_friends_filter:{type:11,type_name:"badoo.bma.UnitedFriendsFilter",number:60,label:3},profile_photo_size:{type:11,type_name:"badoo.bma.PhotoSizeSpec",number:40,label:1}}}}()),$gpb.exists("badoo.bma.UserListFilter","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UserListFilter=new $gpb.Enum("badoo.bma.UserListFilter");t._values=[0,1,2,3,4,5,6,7],t.LIST_FILTER_ONLINE=0,t.LIST_FILTER_NEW=1,t.LIST_FILTER_UNREAD=2,t.LIST_FILTER_CONVERSATIONS=3,t.LIST_FILTER_ACTIVE_USERS=4,t.LIST_FILTER_NEARBY=5,t.LIST_FILTER_FAVOURITES=6,t.LIST_FILTER_MATCHED=7}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchSettings=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchSettings",t.prototype._descriptor={fields:{distances:{type:11,type_name:"badoo.bma.SearchDistances",number:24,label:1},area_id:{type:9,number:23,label:1},cased_location_name:{type:9,number:25,label:1},number:{type:5,number:6,label:1},to_age:{type:5,number:5,label:1},location_id:{type:5,number:8,label:1},bumble_vibee_enabled:{type:8,number:27,label:1},current_distance_to:{type:5,number:22,label:1},location_name:{type:9,number:10,label:1},from_age:{type:5,number:4,label:1},current_age_option:{type:5,number:17,label:1},current_distance_from:{type:5,number:21,label:1},tiw_phrase_id:{type:5,number:15,label:1},tiw_ideas:{type:11,type_name:"badoo.bma.TiwIdea",number:14,label:3},nearby_age_range:{type:11,type_name:"badoo.bma.SearchSettingsAgeOption",number:16,label:3},distance_slider:{type:11,type_name:"badoo.bma.Slider",number:20,label:1},vote_on_celebrities:{type:8,number:19,label:1},wish_options_deprecated:{type:9,number:7,label:3},previously_saved:{type:8,number:9,label:1},folder_id:{type:14,type_name:"badoo.bma.FolderTypes",number:12,label:1},extended_search_settings:{type:11,type_name:"badoo.bma.ExtendedSearchSettings",number:26,label:1},min_age_range:{type:5,number:18,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:28,label:1},context_type:{type:14,type_name:"badoo.bma.SearchType",number:1,label:2},wish:{type:9,number:2,label:1},filter:{type:14,type_name:"badoo.bma.UserListFilter",number:13,label:3},gender:{type:14,type_name:"badoo.bma.SexType",number:3,label:3},is_custom_tiw_allowed:{type:8,number:11,label:1}}}
}()),$gpb.exists("badoo.bma.SearchSettingsContext","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchSettingsContext=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchSettingsContext",t.prototype._descriptor={fields:{search_response_context:{type:14,type_name:"badoo.bma.SearchType",number:1,label:2}}}}(),B.Ovl.UploadChooseFiles=new $class(B.Ovl.UploadChooseFilesBase,{name:"Ovl.UploadChooseFiles",type:"choose_files",simple_close:!1,ovl_template_name:"upload/popup.upload",destroy:function(){this.$p_get_album&&(this.$p_get_album.abort(),this.$p_get_album=null),$super(this,arguments)},_get_gender:function(e){var t={MALE:1,FEMALE:2};return t[e]},_load_photos_info:function(){var e=$p.MessageType,t=(new $p.ServerGetAlbum).setPersonId(B.Session.getUserId()).setAlbumType($p.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME).setPreviewSize((new $p.PhotoSize).setWidth(180).setHeight(180));this.$p_get_album=new $gpb.Rpc(e.SERVER_GET_ALBUM,t).on(e.CLIENT_ALBUM,this._photos_info_loaded,this).request()},_photos_info_loaded:function(e,t){this.$p_get_album=null;var s,i=[];if(!e){s=t.getPhotos()||[];for(var o=0;o<s.length;o++)s[o].getIsPhotoOfMe()&&i.push(s[o].getPreviewUrl())}this._set_photos_info(i)}}),B.Ovl.UploadProgressBase=$class(B.Ovl.View,{name:"Ovl.UploadProgressBase",type:null,init:function(e){return this.view=new B.UploadProgress({group_name:e.group_name}),this.close_after_complete=e.close_after_complete,this.upload_group=B.Upload2.Controller.get_group(e.group_name),e.source&&(this.source=e.source),this._isUploadComplete()&&this.close_after_complete?(this.unbindUploadEvents(),"close"):($super(this,arguments),this.$e_upload_group=this.upload_group.on({registered:this._update_counter,progress:this._update_counter,queue_completed:this._queue_completed},this),this.$e=$e.on({".js-upload-process-select-files":this._on_click_select},this),this._render_ovl(),void 0)},unbindUploadEvents:function(){this.$e_upload_group&&(this.upload_group.un(this.$e_upload_group),this.$e_upload_group=null,$e.un(this.$e),this.$e=null),this.view.destroy(),this.view=null},destroy:function(){this.close_after_complete=null,this.unbindUploadEvents(),this.upload_group=null,$super(this,arguments)},_isUploadComplete:function(){return 100===this.view.upload_group.get_totals_percent()},_update_counter:function(){this.total_percent.innerHTML=this.view.upload_group.get_totals_percent()},_queue_completed:function(){this._update_counter(),this.close_after_complete&&this.close()},_render_ovl:function(){var e,t,s;t=this.view.upload_group.get_info(),e={UPLOAD_PROGRESS:{PROGRESS_HEADER:!0,SOCIAL_METER_HEADER:!1,STANDART_HEADER:!1,SHARE_SESSION:"",PHOTO_LIST:{ALBUM:{PHOTOS:{HTML_PROGRESS_VIEW:this.view.get_html()}}},BTN_ADD_MORE:t.allow_add_more,BTN_CONTINUE:!0}},s=$u.dust.render("upload/popup.upload-process",e),this._render(s),this.view.set_wrap($el.down(this._el,".js-photo-list")),this.view.bind_ui(),this.view.render_file_list(),this.total_percent=$("u_percent")},_on_click_select:function(){this.view.upload_group.choose(this.source)}}),B.UploadProgressBase||(B.UploadProgressBase=$class($u.Observable,{name:"UploadProgressBase",AUTO_SCROLL_DEBOUNCE_TIMEOUT:500,AUTO_SCROLL_DURATION:200,run_auto_scroll:null,scrollable:null,constructor:function(e){$super(this,arguments),this.cfg=e,this._files={},this.upload_group=B.Upload2.Controller.get_group(this.cfg.group_name),this._fetch_files(),this.$e_upload=this.upload_group.on({readed:this._on_file_readed,registered:this._on_registered,cancel_one:this._on_cancel_one,started:this._upload_started,progress:this._upload_progress,error:this._upload_error,ready:this._upload_ready,photo_removed:this._photo_removed},this),this._previews_images=[],this.run_auto_scroll=$t.debounce(this.auto_scroll,this.AUTO_SCROLL_DEBOUNCE_TIMEOUT,this)},destroy:function(){this.$e&&($e.un(this.$e),this.$e=null),this.upload_group.un(this.$e_upload),this.upload_group=this.$e_upload=null,this._files=this.cfg=this._wrap=null;for(var e=0;e<this._previews_images.length;e++)$e.del(this._previews_images[e],"load",this._on_photo_img_load,this);this._previews_images=null,this.run_auto_scroll.clear(),this.scrollable&&this.scrollable.scrollbar.stop_scroll(),this.scrollable=this.run_auto_scroll=null,$super(this,arguments)},get_html:function(){var e=this.upload_group.get_info(),t=$u.tpl2el($u.dust.render("upload/popup.upload-process",null,"_PROGRESS_VIEW"));return $el.add(t,"js-photo-list"),e.allow_remove_uploaded_file&&$el.add(t,"enable-remove-after-upload"),t.outerHTML},set_wrap:function(e){this._wrap=e},bind_ui:function(){this.$e=$e.on({".js-upload-process-remove":this._on_click_remove,".js-upload-retry":this._on_click_retry},this)},render_file_list:function(){for(var e in this._files)this._draw_file(e)},_fetch_files:function(){var e=this.upload_group.get_files();for(var t in e)e[t]._seen||this._add_file_item(t,e[t])},_add_file_item:function(e,t){t._seen=!0,this._files[e]={file_in_group:t}},_render_preview:function(e){var t,s;t=this._files[e],t&&(s=new Image,s._container=$el.down(t.el,".js-photo-container"),$e.add(s,"load",this._on_photo_img_load,this),s.src=t.file_in_group.data_uri,this._previews_images.push(s))},_on_photo_img_load:function(e){$el.dom.append(e._container,e),e._container=null,e.naturalHeight>e.naturalWidth&&$el.add($el.up(e,".js-photo-wrap"),"upload-photo--vertical")},_on_file_readed:function(e){this._render_preview(e)},_on_registered:function(e){this._add_file_item(e,this.upload_group.get_file(e)),this._draw_file(e)},_on_cancel_one:function(e){$el.remove(this._files[e].el),this._files[e].el=null,delete this._files[e]},_upload_started:function(e){this._files[e]&&($el.del(this._files[e].el,"inqueue"),$el.add(this._files[e].el,"loading"))},_upload_ready:function(e){this._files[e]&&($el.del(this._files[e].el,"loading"),$el.add(this._files[e].el,"ready"))},_upload_progress:function(e,t){if(this._files[e]){var s=this._files[e];$el.down(s.el,".js-progress-bar").style.width=t+"%"}},_upload_error:function(e,t){var s,i,o=this._files[e];o&&(i=o.el,s=this._get_error_info(e,t),$el.del(i,"loading"),$el.del(i,"inqueue"),$el.add(i,"tooltip-wrap"),$el.add(i,s.css_class),$el.down(i,".js-photo-error-message")&&($el.down(i,".js-photo-error-message").innerHTML=s.text))},_photo_removed:function(e){$el.remove(this._files[e].el),this._files[e].el=null,delete this._files[e],this.scrollable.redraw_now()},_get_error_info:function(e,t){var s={code:t};switch(t){case this.upload_group._uploader.ERROR_BAD_FORMAT:s.css_class="fatal";break;case this.upload_group._uploader.ERROR_TOO_LARGE:s.css_class="fatal";break;case this.upload_group._uploader.ERROR_TRANSPORT_ERROR:s.css_class="error";break;case this.upload_group._uploader.ERROR_UPLOAD_ERROR:s.css_class="fatal";break;case this.upload_group._uploader.ERROR_PHOTO_UPLOAD_SMALL:s.css_class="fatal";break;case this.upload_group._uploader.ERROR_INVALID:default:s.css_class="fatal"}return s.text=this.upload_group.get_error_text(e,t),s},_draw_file:function(e){var t,s,i=this._files[e],o=i.file_in_group,n=o.file,r=this.upload_group.get_info(),a=!!this.upload_group._files[e]._upload_data;i.el||(t={photo_id:e,_READY:100==n.percent&&a,_LOADING:n.percent>0&&n.percent<100||100==n.percent&&!a,_INQUEUE:0==n.percent&&!n._upload_error_code,ACTION_DELETE:r.allow_remove,ACTION_PRIVATE:r.allow_make_private&&B.Features.getFeature($p.FeatureType.ALLOW_PRIVATE_PHOTOS).getEnabled()},i.el=$u.tpl2el($u.dust.render("upload/popup.upload-process",t,"PHOTO_UPLOAD")),n._upload_error&&(s=this._get_error_info(e,n._upload_error_code),$el.add(i.el,"tooltip-wrap"),$el.add(i.el,s.css_class),$el.down(i.el,".js-photo-error-message").innerHTML=s.text),$el.dom.append(this._wrap,i.el),o.data_uri?this._render_preview(e):this.upload_group.read(e),this.run_auto_scroll())},auto_scroll:function(){this.scrollable||(this.scrollable=$c.get($el.up(this._wrap,".js-photo-list-scroll"),"scrollable")),this.scrollable.redraw_now(),this.scrollable.scrollbar.scroll_to_position("bottom",{duration:this.AUTO_SCROLL_DURATION})},_on_click_retry:function(e){e=$el.up(e,".js-photo-wrap");var t=e.getAttribute("data-photo-id");$el.del(e,"error"),$el.del(e,"fatal"),this.upload_group.retry(t)},_on_click_remove:function(e){var t=$el.up(e,".js-photo-wrap"),s=+t.getAttribute("data-photo-id");this.upload_group.remove(s),$el.add(t,"upload-photo--deleting")}})),$gpb.exists("badoo.bma.ServerMovePhoto","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerMovePhoto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerMovePhoto",t.prototype._descriptor={fields:{destination_album_id:{type:9,number:2,label:1},source_photo_id:{type:9,number:1,label:1},destination_album_type:{type:14,type_name:"badoo.bma.AlbumType",number:3,label:1}}}}(),B.HoN_v3.PhotoManager||(B.HoN_v3.PhotoManager=new $class($u.Observable,{move:function(e,t){var s=(new $p.ServerMovePhoto).setSourcePhotoId(e).setDestinationAlbumType(t);new $gpb.Rpc($p.MessageType.SERVER_MOVE_PHOTO,s).on($p.MessageType.CLIENT_ALBUM,this.onPhotoMoved.bind(this,e)).request()},onPhotoMoved:function(e,t,s){return t?(this.fire("move:error"),void 0):(this.fire("move:success",e,s),void 0)}})),function(){function e(e,s){return e.section(s.get(["UPLOAD_PROGRESS"],!1),s,{block:t},{}).write(" ").section(s.get(["PHOTO_UPLOAD"],!1),s,{block:u},{}).write(" ").section(s.get(["_PROGRESS_VIEW"],!1),s,{block:g},{})}function t(e,t){return e.write(' <div class="ovl-body"> <h2 class="ovl-header"> ').section(t.get(["PROGRESS_HEADER"],!1),t,{block:s},{}).write(" ").section(t.get(["SOCIAL_METER_HEADER"],!1),t,{block:i},{}).write(" ").section(t.get(["STANDART_HEADER"],!1),t,{block:o},{}).write(" </h2> ").section(t.get(["PHOTO_LIST"],!1),t,{block:n},{}).write(' <div class="ovl-buttons"> ').section(t.get(["BTN_ADD_MORE"],!1),t,{block:l},{}).write(" ").section(t.get(["BTN_CONTINUE"],!1),t,{block:_},{}).write(" ").section(t.get(["SHARE_SESSION"],!1),t,{block:c},{}).write(' </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div><span class="middle"></span> ')}function s(e){return e.write('Uploading: <b id="u_percent">0</b>%')}function i(e){return e.write("Photos of you and friends")}function o(e){return e.write("Choose photos to upload")}function n(e,t){return e.write(' <div class="ovl-content"> <div class="ovl-scroll upload-photos-wrapper js-photo-list-scroll" data-control-type="scrollable"> <div class="ovl-scroll_ js-scroller"> ').section(t.get(["ALBUM"],!1),t,{block:r},{}).write(" </div> </div> </div> ")}function r(e,t){return e.write(' <div class="upload-album"> ').section(t.get(["PHOTOS"],!1),t,{block:a},{}).write(" </div> ")}function a(e,t){return e.reference("HTML_PROGRESS_VIEW",t,["s"])}function l(e){return e.write(' <div class="btn btn--blue"> <span class="btn-txt">Add more photos</span> <span class="b-link js-upload-process-select-files"></span> </div> ')}function _(e){return e.write(' <div class="btn btn--white"> <span class="btn-txt">Continue</span> <span class="b-link js-ovl-close"></span> </div> ')}function c(e,t){return e.write(' <input type="hidden" name="share_session_id" value="').reference("share_session_id",t).write('"> ')}function u(e,t){return e.write(' <div class="upload-photo js-photo-wrap').section(t.get(["_READY"],!1),t,{block:p},{}).section(t.get(["_LOADING"],!1),t,{block:d},{}).section(t.get(["_INQUEUE"],!1),t,{block:h},{}).section(t.get(["_ERROR"],!1),t,{block:b},{}).section(t.get(["_FATAL"],!1),t,{block:m},{}).write('" data-photo-id="').reference("photo_id",t).write('"> <div class="upload-photo__photo js-photo-container"></div> <div class="upload-photo__progress"> <div class="upload-photo__progress_ js-progress-bar"></div> </div> <div class="upload-photo__retry"> <div class="btn btn--sm btn--transparent btn--ico"> <i class="icon ico--white ico--refresh"> <span class="b-link js-upload-retry"></span> </i> </div> </div> <div class="upload-photo__fatal"> <div class="brick brick--sm brick--yellow" data-control-type="tooltip"> <i class="ico ico--attention"></i> <div class="tooltip"> <span class="tooltip-txt js-photo-error-message">').reference("error_text",t).write('</span> </div> </div> </div> <div class="upload-photo__actions"> ').section(t.get(["ACTION_PRIVATE"],!1),t,{block:E},{}).write(" ").section(t.get(["ACTION_DELETE"],!1),t,{block:f},{}).write(" </div> </div> ")}function p(e){return e.write(" ready")}function d(e){return e.write(" loading")}function h(e){return e.write(" inqueue")}function b(e){return e.write(" error")}function m(e){return e.write(" fatal")}function E(e){return e.write(' <div class="upload-photo__action upload-photo__action--private js-wrap js-upload-process-move-button"> <div class="btn btn--sm btn--transparent btn--ico tooltip-wrap show" data-control-type="tooltip"> <i class="ico ico--white ico--unlock"><span class="b-link js-upload-process-private js-toggle" data-jst-class="is-shown"></span></i> <div class="tooltip"> <span class="tooltip-txt">Make photo private</span> </div> </div> <div class="btn btn--sm btn--transparent btn--ico active tooltip-wrap hidden" data-control-type="tooltip"> <i class="ico ico--white ico--lock"><span class="b-link js-upload-process-public js-toggle" data-jst-class="is-shown"></span></i> <div class="tooltip"> <span class="tooltip-txt">Make photo public</span> </div> </div> <span class="blocker"></span> </div> ')}function f(e){return e.write(' <div class="upload-photo__action upload-photo__action--delete"> <div class="btn btn--sm btn--transparent btn--ico tooltip-wrap" data-control-type="tooltip"> <i class="icon ico--white ico--trash"><span class="b-link js-upload-process-remove"></span></i> <div class="tooltip"> <span class="tooltip-txt">Remove photo</span> </div> </div> </div> ')}function g(e){return e.write(' <div class="upload-album__photos"></div> ')}return $u.dust.register("upload/popup.upload-process",e),e.s={UPLOAD_PROGRESS:t,PHOTO_UPLOAD:u,_PROGRESS_VIEW:g},t.s={PROGRESS_HEADER:s,SOCIAL_METER_HEADER:i,STANDART_HEADER:o,PHOTO_LIST:n,BTN_ADD_MORE:l,BTN_CONTINUE:_,SHARE_SESSION:c},n.s={ALBUM:r},r.s={PHOTOS:a},u.s={_READY:p,_LOADING:d,_INQUEUE:h,_ERROR:b,_FATAL:m,ACTION_PRIVATE:E,ACTION_DELETE:f},e}(),B.UploadProgress||(B.UploadProgress=$class(B.UploadProgressBase,{constructor:function(){$super(this,arguments),this.$pm=B.HoN_v3.PhotoManager.on({"move:success":this.onMoveSuccess,"move:error":this.onMoveError},this)},destroy:function(){this.$e2&&($e.un(this.$e2),this.$e2=null),B.HoN_v3.PhotoManager.un(this.$pm),$super(this,arguments)},bind_ui:function(){$super(this,arguments),this.$e2=$e.on({".js-upload-process-private":this.onClickPrivate,".js-upload-process-public":this.onClickPublic},this)},getPhotoId:function(e){var t=+$el.up(e,".js-photo-wrap").getAttribute("data-photo-id");return this.upload_group.get_file(t)._upload_data.photo_id},getPhotoWrap:function(e){for(var t=$el.select(this._wrap,".js-photo-wrap"),s=0;s<t.length;s++){var i=+t[s].getAttribute("data-photo-id"),o=this.upload_group.get_file(i)._upload_data;if(o&&o.photo_id==e)return t[s]}},lockMoveButton:function(e,t){var s=this.getPhotoWrap(e);if(s){var i=$el.down(s,".js-upload-process-move-button");$el.tgl(i,"waiting",t)}},onClickPrivate:function(e){var t=this.getPhotoId(e);this.lockMoveButton(t,!0),B.HoN_v3.PhotoManager.move(t,$p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS)},onClickPublic:function(e){var t=this.getPhotoId(e);this.lockMoveButton(t,!0),B.HoN_v3.PhotoManager.move(t,$p.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME)},onMoveSuccess:function(e){this.lockMoveButton(e,!1)},onMoveError:function(e){this.lockMoveButton(e,!1)}})),B.Ovl.UploadProgress=new $class(B.Ovl.UploadProgressBase,{name:"Ovl.UploadProgress",type:"upload_progress",simple_close:!1}),!B.Controls.DataList){switch(B.Controls.DataListOptions=$class(B.Controls.SelectOptions,{name:"Controls.DataListOptions",url:"",transport:null,request_timer:null,cache:null,constructor:function(){$super(this,arguments),this.request_timer=new $t(this.try_request,this,250),this.cache={"":{q:"",locations:this.options_el.innerHTML,default_item:!0}}},destroy:function(){this.destroy_transport(),this.request_timer.clear(),this.request_timer=this.cache=null,$super(this,arguments)},destroy_transport:function(){this.transport&&(this.transport.abort(),this.transport=null)},collapse:function(){this.request_timer.clear(),$super(this,arguments)},get_option_text:function(e){return e.innerText||e.textContent},reset:function(){this.ready(this.cache[""],!0)},set_options:function(e){this.cache[""].locations=e,$super(this,arguments),this.reset()},select:function(){},search:function(e){var t=e.length<2;return t?(this.ready(this.cache[""]),void 0):(this.search_str=e,this.request_timer.set(),void 0)},move_and_change:function(e,t){this.move(e,t)},try_request:function(){var e=this.cache[this.search_str];e?this.ready(e):(this.destroy_transport(),this.request(this.search_str))},request:function(e){this.transport=new $r(this.url,{auto:!1,ready:this.ready,error:this.error},this),this.transport.request({q:e})},ready:function(e,t){this.cache[e.q]=e;var s=!1;this.expanded&&(this.collapse(),s=!0),this.options_el.innerHTML=e.locations,this.options=this.get_options(),s&&this.expand(),t||this.fire("updated",this.options.length,e.default_item)},error:function(){}}),B.Controls.DataList=$class(B.Controls.Select,{name:"Controls.DataList",input_el:null,expand_if_empty:!0,init:function(){this.input_el=this.get_element(this.wrap_el,"input"),$super(this,arguments),this.options.on({updated:this.options_updated},this),this.toggle_default(!this.value),$e.add(this.input_el,"input",this.input_change,this)},destroy:function(){$e.del(this.input_el,"input",this.input_change,this),this.input_el=null,$super(this,arguments)},reset:function(){$super(this,arguments),this.toggle_empty(!1),this.toggle_default(!0),this.toggle_can_reset(!1)},toggle_disabled:function(e){$super(this,arguments),this.input_el.disabled=e},get_element:function(e,t){switch(t){case"input":case"focus":case"label":return $el.down(e,".input");case"options":return $el.down(e,".datalist");case"value":for(var s=$el.select(e,"input"),i=0;i<s.length;i++)if("hidden"==s[i].type)return s[i];break;case"hint":return $el.down(e,".datalist-hint")}return $super(this,arguments)},create_options:function(e){return new B.Controls.DataListOptions({wrap_el:e,url:this.wrap_el.getAttribute("data-url")})},set_label:function(e){this.input_el.value=this.make_label(e)},autowidth:function(){},on_keydown:function(){var e=$e.key($e.e);switch(e){case 32:return!0;case 38:return this.expanded?$super(this,arguments):(this.expand(),!1);case 40:return this.expanded?$super(this,arguments):(this.expand(),!1)}return $super(this,arguments)},on_keypress:function(){return!0},search:function(){$super(this,arguments),this.toggle_can_reset(!!this.input_el.value)},input_change:function(e){this.search(e.value),this.value&&(this.set_value(""),this.fire("change",null,-1))},options_updated:function(e,t){this.after_search(!!e),this.toggle_empty(!e),this.toggle_default(t),this.fire("options_updated",e)},after_search:function(e){this.expand_if_empty?this.expanded||this.expand():this.expanded?e||this.collapse():e&&this.expand()},toggle_empty:function(e){$el.tgl(this.wrap_el,"empty",e)},toggle_default:function(e){$el.tgl(this.wrap_el,"default",e)},toggle_can_reset:function(e){$el.tgl(this.wrap_el,"reset",e)}}),$u.ua){case"ie10":case"ie11":B.Controls.DataList=$class(B.Controls.DataList,{name:"Controls.DataList_IE10_IE11",_skip_input_change:!1,_blur_t:0,init:function(){this._skip_input_change=!0,$super(this,arguments),setTimeout(this._input_event_hack.bind(this),250)},destroy:function(){this._reset_blur_t(),$super(this,arguments)},focus:function(){$super(this,arguments),this.input_el.placeholder&&(this._skip_input_change=!0)},blur:function(){$super(this,arguments),this._reset_blur_t()},input_change:function(){return this._skip_input_change?(this._skip_input_change=!1,void 0):(this._reset_blur_t(),this._blur_t=setTimeout(function(e,t){e(this,t),this._reset_blur_t()}.bind(this,$super,arguments),50),void 0)},_reset_blur_t:function(){this._blur_t&&clearTimeout(this._blur_t),this._blur_t=0},_input_event_hack:function(){this._skip_input_change=!1}})}$c.register("data-list",B.Controls.DataList)}B.Controls.LocationList||(B.Controls.LocationList=$class(B.Controls.DataList,{name:"Controls.LocationList",global_collapse_time:0,local_collpase_time:0,hint_el:null,supress_expand:!1,init:function(){this.hint_el=this.get_element(this.wrap_el,"hint"),$super(this,arguments),B.on("hack:loc-ovl:done",this.on_ovl_done,this),B.on("hack:loc-ovl:closed",this.on_ovl_closed,this),this.hint_el&&this.hint_el.getAttribute("data-value")&&$e.add(this.hint_el,"click",this.hint_click,this)},destroy:function(){this.hint_el&&(this.hint_el.getAttribute("data-value")&&$e.del(this.hint_el,"click",this.hint_click,this),this.hint_el=null),B.un("hack:loc-ovl:done",this.on_ovl_done,this),B.un("hack:loc-ovl:closed",this.on_ovl_closed,this),$super(this,arguments)},set_options:function(e){this.options.set_options(e)},set_hint:function(e){this.hint_el.innerHTML=e},get_element:function(e,t){switch(t){case"hint":var s=$el.down(e,".js-location-list-hint");if(s)return s}return $super(this,arguments)},focus:function(){$super(this,arguments),$el.select_all(this.input_el)},collapse:function(){var e=+new Date;B.Controls.LocationList.global_collapse_time=e,this.local_collpase_time=e,this.supress_expand=!1,$super(this,arguments)},on_ovl_done:function(e,t){this.local_collpase_time==B.Controls.LocationList.global_collapse_time&&(this.input_el.focus(),this.change({value:e,text:t,label:t}),this.search(t),this.supress_expand=!0)},on_ovl_closed:function(){this.local_collpase_time==B.Controls.LocationList.global_collapse_time&&this.input_el.focus()},after_search:function(){return this.supress_expand?(this.supress_expand=!1,void 0):($super(this,arguments),void 0)},hint_click:function(e){this.change({value:e.getAttribute("data-value"),label:e.getAttribute("data-label")})}}),$c.register("location-list",B.Controls.LocationList)),B.Controls.PasswordStrength||($u.PasswordStrength=$class({target:null,msg_target:null,min_chars:5,messages:["js_pw_info","js_pw_toshort","js_pw_weak","js_pw_medium","js_pw_strong"],character_classes:[/[a-z]/,/[A-Z]/,/\d/,/\s/,/[-!"#$%&'()*+,.\/:;<=>?@[\\\]_`{|}~]/,/[^a-zA-Z\d\s-!"#$%&'()*+,.\/:;<=>?@[\\\]_`{|}~]/],constructor:function(e){$config(this,e),this.target&&this.msg_target&&(this.target.value&&this.test(),$e.add(this.target,"keyup",this.test,this))},destroy:function(){this.target&&this.msg_target&&$e.del(this.target,"keyup",this.test,this)},test:function(){var e=this.character_classes,t=this.target.value,s=1;if(t.length<this.min_chars)s=t?1:0;else{for(var i=0,o=e.length;o>i;i++)e[i].test(t)&&s++;s=s>4?4:s}this.msg_target.className=this.messages[s]}}),B.Controls.PasswordStrength=$class(B.Controls.BaseControl,{name:"Controls.PasswordStrength",ps:null,init:function(){$super(this,arguments),this.ps=new $u.PasswordStrength({target:this.wrap_el,msg_target:this.get_element(this.wrap_el,"messages")})},destroy:function(){this.ps&&(this.ps.destroy(),this.ps=null),$super(this,arguments)},get_element:function(e,t){switch(t){case"focus":case"label":return $el.down(e,".input");case"messages":return $("js-password-strength-messages")}}}),$c.register("password-strength",B.Controls.PasswordStrength)),B.Ovl.HoN_v3=new $class(B.Ovl.View,{name:"Ovl.HoN_v3",type:"hon-v3"}),function(){function e(e,n){return e.section(n.get(["SCORE_SHARED"],!1),n,{block:t},{}).write(" ").section(n.get(["HOT_LIST_SHARED"],!1),n,{block:s},{}).write(" ").section(n.get(["INTEREST_ADDED"],!1),n,{block:i},{}).write(" ").section(n.get(["ABUSE_REPORTED"],!1),n,{block:o},{}).write(" ").section(n.get(["ABUSE_BLOCKED"],!1),n,{block:a},{}).write(" ").section(n.get(["ABUSE_UNBLOCKED"],!1),n,{block:c},{}).write(" ").section(n.get(["PHOTO_REPORTED"],!1),n,{block:d},{}).write(" ").section(n.get(["DEFAULT_PHOTO"],!1),n,{block:h},{}).write(" ").section(n.get(["SETTINGS_SOCIAL_CONNECTED"],!1),n,{block:b},{}).write(" ").section(n.get(["SETTINGS_SOCIAL_DISCONNECTED"],!1),n,{block:f},{}).write(" ").section(n.get(["SETTINGS_SOCIAL_ERROR"],!1),n,{block:T},{}).write(" ").section(n.get(["VERIFIED"],!1),n,{block:O},{}).write(" ").section(n.get(["DONE"],!1),n,{block:S},{}).write(" ").section(n.get(["SENT"],!1),n,{block:N},{}).write(" ").section(n.get(["CONGRATULATIONS"],!1),n,{block:A},{}).write(" ").section(n.get(["PRIVATE_PHOTOS"],!1),n,{block:C},{}).write(" ").section(n.get(["ADDED"],!1),n,{block:P},{}).write(" ").section(n.get(["REMOVED"],!1),n,{block:D},{})}function t(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Shared\n</b> ')}function s(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Shared\n</b> ')}function i(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').reference("added",t).write(" </b> ")}function o(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:n},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:r},{}).write(" </b> ")}function n(e){return e.write("Reported")}function r(e){return e.write("Reported")}function a(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:l},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:_},{}).write(" </b> ")}function l(e){return e.write("Blocked")}function _(e){return e.write("Blocked")}function c(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:u},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:p},{}).write(" </b> ")}function u(e){return e.write("Unblocked")}function p(e){return e.write("Unblocked")}function d(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Reported\n</b> ')}function h(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Set as default photo\n</b> ')}function b(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:m},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:E},{}).write(" </b> ")}function m(e){return e.write("Linked")}function E(e){return e.write("Linked")}function f(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:g},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:v},{}).write(" </b> ")}function g(e){return e.write("Disconnected")}function v(e){return e.write("Disconnected")}function T(e,t){return e.write(' <b class="confirmation__txt"> ').reference("error",t).write(" </b> ")}function O(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:y},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:R},{}).write(" </b> ")}function y(e){return e.write("Verified")}function R(e){return e.write("Verified")}function S(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:w},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:I},{}).write(" </b> ")}function w(e){return e.write("Done")}function I(e){return e.write("Done")}function N(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Sent!\n</b> ')}function A(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Congratulations!\n</b> ')}function C(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Request sent\n</b> ')}function P(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:$},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:L},{}).write(" </b> ")}function $(e){return e.write("Added")}function L(e){return e.write("Added")}function D(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:B},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:M},{}).write(" </b> ")}function B(e){return e.write("Removed")}function M(e){return e.write("Removed")}return $u.dust.register("overlays/popup.confirmation",e),e.s={SCORE_SHARED:t,HOT_LIST_SHARED:s,INTEREST_ADDED:i,ABUSE_REPORTED:o,ABUSE_BLOCKED:a,ABUSE_UNBLOCKED:c,PHOTO_REPORTED:d,DEFAULT_PHOTO:h,SETTINGS_SOCIAL_CONNECTED:b,SETTINGS_SOCIAL_DISCONNECTED:f,SETTINGS_SOCIAL_ERROR:T,VERIFIED:O,DONE:S,SENT:N,CONGRATULATIONS:A,PRIVATE_PHOTOS:C,ADDED:P,REMOVED:D},o.s={MALE:n,FEMALE:r},a.s={MALE:l,FEMALE:_},c.s={MALE:u,FEMALE:p},b.s={MALE:m,FEMALE:E},f.s={MALE:g,FEMALE:v},O.s={MALE:y,FEMALE:R},S.s={MALE:w,FEMALE:I},P.s={MALE:$,FEMALE:L},D.s={MALE:B,FEMALE:M},e}(),B.Ovl.HoN_v3_notify_View=$class(B.Ovl.View,{name:"Ovl.HoN_v3_notify",type:"hon-v3-notify",tpl:'<div class="confirmation-wrap"><div class="confirmation">{html}</div><i class="middle"></i></div><i class="middle"></i>',simple_close:!1,timer:null,init:function(){if(!this.url&&!this.html){var e={};e[this.blockName]={};var t=B.Session.getUserGender()==$p.SexType.MALE?"MALE":"FEMALE";e[this.blockName][t]={},this._render(new B.DustView("overlays/popup.confirmation",e))}this.timer=new $t(this.close,this,1100),this.timer.set()},destroy:function(){this.timer.clear(),this.timer=null}}),B.Ovl.HoN_v3_notify=new B.Ovl.HoN_v3_notify_View,B.Ovl.HonUploadImport=new $class(B.Ovl.View,{name:"Ovl.HonUploadImport",type:"hon-upload-import",simple_close:!1,use_contacts_type:!1,contacts_type:null,init:function(e){$super(this,arguments);var t;t=this.use_contacts_type?"album"==this.contacts_type?"load_login":"load_results":"load_login",B.UploadImport[t].call(B.UploadImport,e)},destroy:function(){B.UploadImport.unload(),new $gpb.Rpc($p.MessageType.SERVER_GET_TERMS,null).request(),this.use_contacts_type=!1,$super(this,arguments)}}),$u.scroll||($u.scroll=function(e,t,s){if(e||+e==e){var i=$el.scroll_top(),o=parseInt($el.style(document.body,"margin-top"),10),n=+e==e?e:e.getBoundingClientRect().top+i-o,r=Math.min(Math.max(n-(t?0:15),0),window.scrollMaxY||document.body.parentNode.scrollHeight);r!=i&&new $fx.effect({wait:!1,duration:300,onEnd:s,items:[new $fx.style({from:i,to:r,step:function(e,t){var s=this.fx(e,this.from,this.to,t);window.scroll(0,s)}})]})}}),B.MsgClose||(B.MsgClose=new $class(B.Page,{name:"MsgClose",init:function(){$e.on(".js-remove",this.msg_close,this)},destroy:function(){$e.un(".js-remove",this.msg_close,this)},remove_el:function(e){$el.remove(e)},msg_close:function(e){var t=$el.up(e,".js-remove-el");t&&(t.style.height=t.offsetHeight+"px",$u.reflow(t),$el.add(t,"close"),$u.transition.wait(t,this.remove_el,this),e.rev&&new $r(e.rev))}})),B.ImportWrapper||(B.ImportWrapper=new $class(B.Page,{name:"ImportWrapper",imports:[],trusted_complete:!1,init:function(){$e.on({".oauth_provider":this.wrap_fn("oauth_open"),".webmail_provider":this.wrap_fn("webmail_provider"),".other_services":this.wrap_fn("clean_other_services"),".search_by_email":this.wrap_fn("search_by_email"),".sf-show-forms":this.wrap_fn("show_providers"),".js-import-error-close":this.wrap_fn("close_error",this.close_import_error),".js-import-try_another":this.wrap_fn("close_tooltips",this.close_basic_tooltip)},this)},on:function(e,t){$el.add(t,"import-wrapper"),this.imports.push([e,t])},un:function(e){for(var t=0;t<this.imports.length;t++)this.imports[t][0]==e&&($el.del(this.imports[t][1],"import-wrapper"),this.imports.splice(t,1))
},get_instance:function(e){for(var t=$el.up(e,".import-wrapper"),s=0;s<this.imports.length;s++)if(this.imports[s][1]==t)return this.imports[s][0]},wrap_fn:function(e,t){return function(s){var i=this.get_instance(s);i?i[e](s):t&&t(s)}},set_vars:function(e){e&&($vars.TrustedImport=e)},change_progress:function(e){$vars.TrustedImport.in_progress=e},get_trusted_cfg:function(){var e=$clone($vars.TrustedImport);return this.trusted_complete&&(e&&e.in_progress?e.in_progress=!1:this.trusted_complete=!1),e},close_basic_tooltip:function(e){e=$el.up(e,".confirm"),$el.add(e,"hidden")},close_import_error:function(e){var t=$el.up(e,".js-import-error");$el.add(t,"hidden")}})),B.Import2=$class($u.Observable,{name:"Import2",check_url:"",active_session_ids:[],social_provider_url:"",error_tpl:"{error}",friends_error_tpl:'<p class="large">{error}</p>',friends_trusted_url:"",friends_trusted_timer:null,cancel_url:"",progress_bar:null,timer:null,import_updater:null,provider_id:0,wrap:null,ovl_wrap:null,friends_wrap:null,other_services_el:null,emails_el:null,connect_el:null,forms:[],other_services_pre_filled:!1,social_import_form:null,popup:null,popup_interval:0,_watch_popup_handler:null,t:null,constructor:function(e){$super(this,arguments),$config(this,$clone(e)),this.features={}},init:function(e,t){if(this.set_import_urls(),this.wrap=e,this.ovl_wrap=t||e,this.friends_wrap=$el.up(e,".js-friends-import-wrapper"),this.other_services_el=$el.down(this.wrap,".connect__service-login"),this.other_services_el){var s=$el.down(this.other_services_el,".js-input");this.other_services_pre_filled=!!s.value}this.emails_el=$el.down(this.wrap,".connect__service-emails"),this.connect_el=this._get_connect_element();for(var i,o=$el.select(e,"form",!1),n=null,r=0;r<o.length;r++){var a=o[r];$el.has(a,"import-form")&&(i=this.create_dform(a),this.forms.push(i),"webmail_form"==a.id&&(n=i))}if($el.select(this.wrap,".oauth_provider").length&&(this.features.oauth=!0),n&&(this.features.webmail=!0),"webmail"in this.features&&"oauth"in this.features&&this.create_social_import_form(n),"oauth"in this.features&&B.on("import_auth",this.oauth_ready,this),this.connect_el){var l=this.check_url+"?imp="+this.connect_el.getAttribute("data-import-context");this.import_updater=new B.ImportUpdater({url:l,ready:this.check_ready,scope:this})}if(B.ImportWrapper.on(this,e),this.import_updater&&this.active_session_ids.length){this.session_id=this.active_session_ids[0];var _=$el.down(this.wrap,".connect__process");$el.del(_,"hidden"),this.progress_bar=this.create_progress_bar(0),this.import_updater.add(this.session_id)}this._watch_popup_handler=this.watch_popup_handler.bind(this),this.friends_trusted_timer=new $t(this.friends_trusted_check,this)},_get_connect_element:function(){return $el.has(this.wrap,"connect")?this.wrap:$el.down(this.wrap,".connect")},create_social_import_form:function(e){this.social_import_form=new B.SocialProviders.Form(e,{on_open:this.oauth_open_by_name,scope:this})},create_dform:function(e){return new $u.Form(e,{ready:this.import_form_ready,scope:this},this)},create_progress_bar:function(e){return new $u.progress({el:$el.down(this.wrap,".connect__progress"),tl:e})},destroy:function(){this.t&&(this.t.abort(),this.t=null),this.social_import_form&&(this.social_import_form.destroy(),this.social_import_form=null),this.wrap=null,this.ovl_wrap=null,this.other_services_el=null,this.emails_el=null,this.connect_el=null;for(var e=0;e<this.forms.length;e++)this.forms[e].destroy();this.forms=[],"oauth"in this.features&&B.un("import_auth",this.oauth_ready,this),this.import_updater&&(this.import_updater.destroy(),this.import_updater=null),this.destroy_progress_bar(),this.provider_id=0,this.watch_popup_stop(!0),this.friends_trusted_timer.clear(),this.friends_trusted_timer=null,B.ImportWrapper.un(this)},set_import_urls:function(){B.ImportLinksKeeper.social_provider_url=this.social_provider_url},destroy_progress_bar:function(){this.progress_bar&&(this.progress_bar.tl&&this.progress_bar.clean(),this.progress_bar.destroy(),this.progress_bar=null)},oauth_open_by_name:function(e){for(var t,s=$el.select(this.wrap,".oauth_provider"),i=0;i<s.length;i++)if(s[i].getAttribute("data-provider-name")==e){t=s[i];break}t&&this.oauth_open(t)},oauth_open:function(e){this.provider_id=+e.getAttribute("data-provider-id"),this.watch_popup_start(window.open(e.getAttribute("data-url"),"auth",e.getAttribute("data-window-params"))),this.close_tooltips()},watch_popup_start:function(e){this.watch_popup_stop(!0),this.popup=e,this.popup_interval=window.setInterval(this._watch_popup_handler,250)},watch_popup_handler:function(){this.popup&&this.popup.closed&&this.watch_popup_stop(!1)},watch_popup_stop:function(e){this.popup_interval&&(window.clearInterval(this.popup_interval),this.popup_interval=0,e&&this.popup.close(),this.popup=null)},oauth_ready:function(){if(this.watch_popup_stop(!1),this.provider_id){var e=this.connect_el.getAttribute("data-start-url");this.t=new $r(e,{method:"POST",params:{provider_id:this.provider_id},ready:this.start_import_ready},this),this.provider_id=0}},get_timer:function(){var e,t;return this.friends_wrap&&(e=$el.down(this.friends_wrap,".js-social-import-timer"),e&&(t=$c.get(e,"timer"))),t},start_import_ready:function(e){var t,s,i,o=this.get_timer();if(o&&o.stop(),e.notice&&$u.notice.update(e.notice),"errors"in e){s="";for(i in e.errors){s=e.errors[i];break}return this.friends_wrap?($el.del(this.friends_wrap,"first"),$el.del(this.friends_wrap,"second"),$el.add(this.friends_wrap,"third"),this.show_error($u.tpl(this.friends_error_tpl,{error:s}))):this.open_tooltip(s),void 0}this.fire("started"),this.session_id=e.id,this.cancel_url=e.cancel_url,t=$el.down(this.ovl_wrap,".connect__process"),t&&$el.del(t,"hidden"),this.friends_wrap&&($el.del(this.friends_wrap,"first"),$el.add(this.friends_wrap,"second"),$el.del(this.friends_wrap,"third"),o&&o.restart({autorun:!0})),this.prepare_counter(e.tl),this.import_updater.add(this.session_id)},prepare_counter:function(e){this.steps_count=e?e:20,this.current_time=-1,new $t(this.step,this).set(1e3),this.preset_time()},preset_time:function(){var e=$el.down(this.ovl_wrap,".connect__process__time");if(e){var t=++this.current_time,s=this.steps_count,i=(s-t)%60,o=$u.tpl("{m}:{s}",{m:parseInt((s-t)/60),s:10>i?"0"+i:i});e.innerHTML=o}},step:function(){var e=$el.down(this.ovl_wrap,".connect__process__time");if(e){if(this.current_time>=this.steps_count)return $el.add(e,"connect__process__time-timeout"),void 0;$el.del(e,"connect__process__time-timeout");var t=++this.current_time,s=this.steps_count,i=(s-t)%60,o=$u.tpl("{m}:{s}",{m:parseInt((s-t)/60),s:10>i?"0"+i:i});this.steps_count-this.current_time<2&&(this.steps_count+=10),e.innerHTML=o,this.timer=new $t(this.step,this),this.timer.set(1e3)}},check_ready:function(e){if(e.notice&&$u.notice.update(e.notice),"ovl"in e)return B.Ovl.open(e.ovl),void 0;if("app_link"in e)return B.App.app_link(e.app_link.state,e.app_link.url),void 0;if("imports"in e){var t=e.imports[this.session_id];if(t){if(t.errno)return this.stop_progress(),5===t.errno?(B.Ovl.open({type:"cloud",html:$u.tpl(this.error_tpl,{error:t.error_text})}),this.fire("error",this.session_id)):(this.error_action(t),this.fire("error")),void 0;"contacts"in e&&(this.friends_wrap?this.friends_trusted_check():(this.stop_progress(),B.fire("import_contacts",e.contacts,this.session_id)))}}"tls"in e&&this.progress_bar.adjust(e[this.session_id])},error_action:function(e){this.open_tooltip(e.error_text)},open_tooltip:function(e){var t=$("error_msg");if(t){var s=$el.down(t,".cont");s.innerHTML=e,$el.del(t,"hidden");var i=$el.down(this.wrap,".js-import-try_another");i&&i.focus()}},close_tooltips:function(){$el.add($("error_msg"),"hidden");for(var e=$el.select(document,".input-error"),t=0,s=e.length;s>t;t++)$el.add(e[t],"hidden")},show_error:function(e){var t,s,i;this.friends_wrap?($el.del(this.friends_wrap,"first"),$el.del(this.friends_wrap,"second"),$el.add(this.friends_wrap,"third"),s=$el.down(this.friends_wrap,".js-import-error-text"),i=$el.select(document,".js-ovl-close")):(t=$el.down(this.ovl_wrap,".js-import-error"),s=$el.down(t,".js-import-error-text"),$el.del(t,"hidden"),i=$el.select(document,".js-import-error-close")),s.innerHTML=e,i[0]&&i[0].focus()},close_error:function(){var e=$el.down(this.ovl_wrap,".js-import-error"),t=$el.select(document,".js-import-error-close");t[0]&&t[0].blur(),$el.add(e,"hidden")},handle_errors:function(e){var t,s=this.scope.wrap,i=$el.down(s,".js-form-notice"),o=$el.down(i,".js-form-notice-errtext"),n="";this.scope.remove_focus(s);for(t in e.errors)n+=e.errors[t];o.innerHTML=n,$el.del(i,"hidden"),$el.add(s,"error")},remove_focus:function(e){var t,s=$el.select(e,".input");if(s)for(s.push($el.down(e,".js-webmail-import-submit")),t=0;t<s.length;t+=1)s[t]&&s[t].blur()},clean_errors:function(){var e=this.scope.wrap,t=$el.down(e,".js-form-notice"),s=$el.down(t,".js-form-notice-errtext");s.innerHTML="",$el.add(t,"hidden"),$el.del(e,"error")},stop_progress:function(){var e=$el.down(this.ovl_wrap,".connect__process");e&&$el.add(e,"hidden"),this.timer&&this.timer.clear(),this.destroy_progress_bar(),this.import_updater&&this.import_updater.del(this.session_id)},form_fields_erasing:function(){if(!this.other_services_pre_filled)for(var e=$el.select(this.other_services_el,".js-input"),t=0;t<e.length;t++)e[t].value=""},clean_other_services:function(e){this.form_fields_erasing(),this.close_tooltips(),this.other_services(e)},other_services:function(){$el.tgl(this.other_services_el,"hidden");var e=$el.has(this.other_services_el,"hidden");this.fire("other_services_tgl",e),e||$el.add(this.emails_el,"hidden")},search_by_email:function(){$el.down(this.wrap,".connect__service-emails-textarea").value="",$el.tgl(this.emails_el,"hidden"),$el.has(this.emails_el,"hidden")||this.hide_other_services(),$el.has(this.other_services_el,"provider_detected")&&($el.add(this.other_services_el,"hidden"),$el.del($el.down(this.wrap,".connect__service-full"),"hidden"))},import_form_ready:function(e){$el.add(this.emails_el,"hidden"),this.close_tooltips(),this.start_import_ready(e)},hide_other_services:function(){$el.has(this.other_services_el,"first_service")||($el.add(this.other_services_el,"hidden"),this.fire("other_services_tgl",!0))},webmail_provider:function(){$el.has(this.other_services_el,"provider_detected")&&($el.del(this.other_services_el,"hidden"),$el.add($el.down(this.wrap,".connect__service-full"),"hidden"),$el.add(this.emails_el,"hidden"))},set_view:function(e){for(var t=["providers","contacts","full"],s=0;s<t.length;s++)$el.del(this.wrap,"connect-"+t[s]);$el.add(this.wrap,"connect-"+e)},show_providers:function(){this.form_fields_erasing(),this.set_view("full")},friends_trusted_check:function(){this.t=new $r(this.friends_trusted_url,{method:"POST",ready:this.friends_trusted_ready},this)},friends_trusted_ready:function(e){e&&"ready"===e.status?this.stop_progress():this.friends_trusted_timer.set(2e3)}}),B.HoN_v3.SocialProviders={},B.HoN_v3.SocialProviders.Form=$class(B.SocialProviders.Form,{constructor:function(){$super(this,arguments),$e.add(this.password_field,"keyup",this.change,this),$e.add(this.password_field,"input",this.change,this),$e.add(this.password_field,"blur",this.change,this)},destroy:function(){$super(this,arguments),$e.del(this.password_field,"keyup",this.change,this),$e.del(this.password_field,"input",this.change,this),$e.del(this.password_field,"blur",this.change,this)},test_domain:function(){this.check_form_values(),$super(this,arguments)},set_provider:function(){$super(this,arguments),this.check_form_values()},check_form_values:function(){var e=this.login.value,t=this.password_field.value;e&&t||e&&this.provider?this.submit_btn.removeAttribute("disabled"):this.submit_btn.setAttribute("disabled",!0)}}),B.HoN_v3.Import2=$class(B.Import2,{_unpredictable_cfg:{animationLength:6e4,barAnimation:$u.ScaleDisplay.ANIMATION_TIMINGS.EXPONENTIAL,showLabel:!1},init:function(){$super(this,arguments),this.import_updater&&this.active_session_ids.length&&this.prepare_counter()},create_social_import_form:function(e){this.social_import_form=new B.HoN_v3.SocialProviders.Form(e,{on_open:this.oauth_open_by_name,scope:this})},create_dform:function(e){return new $u.Form(e,{ready:this.import_form_ready,scope:this,handle_errors:this.handle_errors,clean_errors:this.clean_errors},this)},create_progress_bar:function(e){var t=$el.down(this.wrap.parentNode,".scale"),s=e?{animationLength:1e3*e}:this._unpredictable_cfg,i=$c.get(t,"timer");return i.restart($config(s,{autorun:!0,onAnimationReady:this._add_time.bind(this)})),i},_add_time:function(){this.progress&&this.progress.set_time_left(5e3)},destroy_progress_bar:function(){this.progress&&this.progress.stop()},prepare_counter:function(){$super(this,arguments),this.progress?(this.progress.restart(),this.progress.start()):this.progress=this.create_progress_bar(this.steps_count)},step:function(){},error_action:function(e){this.show_error(e.error_text)},start_import_ready:function(){this.remove_focus(this.wrap),$super(this,arguments)},webmail_provider:function(e){$super(this,arguments),this.toggle_webmail_form(e)},toggle_webmail_form:function(e){var t=$("webmail_form"),s=$el.up(e,".acc-selector__item"),i=$el.has(t,"hidden");$el.tgl(s,"active",i),$el.tgl(t,"hidden",!i)},friends_trusted_ready:function(e){return e&&"ready"===e.status?(this.friends_update_url&&(this.t=new $r(this.friends_update_url,{method:"POST",ready:this.friends_trusted_result},this)),void 0):(this.friends_trusted_timer.set(2e3),void 0)},friends_trusted_result:function(e){this.stop_progress(),e&&(B.Ovl.close(),B.fire("friends:imported",e))}}),B.FacebookApprequestButton||(B.FbApprequests||(B.FbApprequests=$class($u.Observable,{message:null,to:null,exclude_ids:null,save_result_url:null,wait_for_login:!0,force_check:!1,constructor:function(e,t){if("FB.RequestDialogConfig"!=e.$gpb)throw"params.$gpb not exist";$super(this,arguments),$config(this,e),t&&$config(this,t)},destroy:function(){this.message=this.to=this.exclude_ids=this.save_result_url=this.force_check=null,this.stat_$r&&(this.stat_$r.abort(),this.stat_$r=null),this.save_$r&&(this.save_$r.abort(),this.save_$r=null),$super(this,arguments)},_apprequest:function(e){if(e)return this.fire("cancel"),void 0;var t={method:"apprequests",message:this.message};t.exclude_ids=this.exclude_ids?this.exclude_ids:$u.fb.get_exclude_ids(),FB.ui(t,this._send_ready.bind(this)),this.fire("dlg_show")},_send_ready:function(e){void 0===e&&(e={fb_requests_dialog_closed:1}),"to"in e&&$u.fb.add_exclude_ids(e.to),this.fire("fb-result",e),this.save_$r=new $r(this.save_result_url,{method:"post",params:e,ready:this._save_ready},this)},_save_ready:function(e){this.save_$r=null,this.fire("ready",e)},send:function(){$u.fb.call(this._apprequest,this,this.wait_for_login,this.force_check)}})),B.FbFetchFriends||(B.FbFetchFriends=new $class($u.Observable,{name:"FbFetchFriends",constructor:function(){$super(this,arguments),this.watch_$t=new $t(this._check,this,500)},_check:function(){this.wnd.closed?(this.wnd=null,this.fire("cancel")):this.watch_$t.set()},in_progress:function(){return null!=this.wnd},fetch:function(e){if("FB.FetchFriendsConfig"!=e.$gpb)throw"cfg.$gpb not exist";this.wnd||(this.wnd=window.open(e.url,"FbFetchFriends","toolbar=no,width=650, height=550"),this.wnd?(this.fire("shown"),this.watch_$t.set()):this.fire("blocked"))},fb_request:function(e){this.watch_$t.clear(),this.wnd=null,this.fire("ready",e)}})),B.FbDialogStat||(B.FbDialogStat=new $class({msg_open:"popup_open",msg_send:"popup_send_click",msg_cancel:"popup_send_cancel",msg_fetch_blocked:"popup_fetch_blocked",msg_fetch_shown:"popup_fetch_shown",msg_fetch_cancel:"popup_fetch_cancel",msg_fetch_ready:"popup_fetch_ready",msg_fb_open:"fb_popup_open",send:function(e,t){e&&t?new $r(e,{method:"post",params:{stat_action:t}}):$s.error_log($s.newError("UserError","B.FbDialogStat bad url or action_name",{origin:"B.FbDialogStat"}))}})),B.FbRequestsDialogManager||(B.FbRequestsDialogManager=new $class($u.Observable,{_config:null,process:function(e){if(null==e)return $s.error_log($s.newError("UserError","FbRequestsDialogManager config is null",{origin:"B.FbRequestsDialogManager"})),!1;if(this._config)return!1;this._config=e,this._send_stat(B.FbDialogStat.msg_send),this.fire("start");var t=e.stage;switch(t.$gpb){case"FB.FetchFriendsConfig":this._fetch_friends(t);break;case"FB.RequestDialogConfig":this._app_request(t);break;default:return $s.error_log($s.newError("UserError","Invalid FbRequestsDialogManager config"),{origin:"B.FbRequestsDialogManager"}),this._config=null,!1}},busy:function(){return null!=this._config},_process_responce:function(e){switch(e.$gpb){case"base.AppLink":return B.App.app_link(e.state,e.url),!1;case"base.Ovl":B.Ovl.open(e)}return!0},_send_stat:function(e){this._config.stat_url&&B.FbDialogStat.send(this._config.stat_url,e)},_fetch_clean:function(){B.FbFetchFriends.un(this.fetch_$e),this.fetch_$e=null},_fetch_blocked:function(){this._fetch_clean(),this._send_stat(B.FbDialogStat.msg_fetch_blocked),this._config=null,this.fire("stop")},_fetch_cancel:function(){this._fetch_clean(),this._send_stat(B.FbDialogStat.msg_fetch_cancel),this._config=null,this.fire("stop")},_fetch_shown:function(){this._send_stat(B.FbDialogStat.msg_fetch_shown)},_fetch_ready:function(e){this._send_stat(B.FbDialogStat.msg_fetch_ready),this._fetch_clean(),this._app_request(e,{force_check:!0})},_apprequest_shown:function(){this._send_stat(B.FbDialogStat.msg_fb_open)},_apprequest_clean:function(){this.app_req.un(this.app_req_$e),this.app_req.destroy(),this.app_req=null},_apprequest_cancel:function(){this._apprequest_clean(),$u.escape.enable(),this._config=null,this.fire("cancel")},_apprequest_ready:function(e){this._apprequest_clean(),$u.escape.enable(),this._config=null,this._process_responce(e)&&this.fire("sent",e)},_apprequest_fb_result:function(e){this.fire("fb-result",e)},_app_request:function(e,t){this.app_req||($u.escape.disable(),this.app_req=new B.FbApprequests(e,t),this.app_req_$e=this.app_req.on({cancel:this._apprequest_cancel,ready:this._apprequest_ready,dlg_show:this._apprequest_shown,"fb-result":this._apprequest_fb_result},this),this.app_req.send())},_fetch_friends:function(e){B.FbFetchFriends.in_progress()||(this.fetch_$e=B.FbFetchFriends.on({blocked:this._fetch_blocked,shown:this._fetch_shown,cancel:this._fetch_cancel,ready:this._fetch_ready},this),B.FbFetchFriends.fetch(e))}})),B.FacebookApprequestButton=$class(B.Controls.BaseControl,{name:"FacebookApprequestButton",lock_delay:5e3,button_el:null,init:function(){$u.fb.init(),this.button_el=this.get_element(this.wrap_el,"button"),$e.add(this.button_el,"click",this._click,this)},destroy:function(){this.lock_timer&&(this.lock_timer.clear(),this.lock_timer=null),$e.del(this.button_el,"click",this._click,this),this.button_el=null,this._clean_dialog_e()},get_element:function(e,t){switch(t){case"button":return e}},_click:function(){return this._lock_btn(),B.FbRequestsDialogManager.busy()||(this.$e=B.FbRequestsDialogManager.on({start:this._on_start,stop:this._on_stop,cancel:this._on_cancel,"fb-result":this._on_fb_result,sent:this._on_sent},this),B.FbRequestsDialogManager.process(this.config)),!0},_clean_dialog_e:function(){this.$e&&(B.FbRequestsDialogManager.un(this.$e),this.$e=null),this._unlock_btn()},_on_start:function(){this.fire("start")},_on_stop:function(){this._clean_dialog_e()},_on_cancel:function(){this.fire("cancel"),this._clean_dialog_e()},_on_fb_result:function(e){this.fire("fb-result",e)},_on_sent:function(e){this.fire("ready",e),this._clean_dialog_e()},_lock_btn:function(){this.lock_timer||(this.lock_timer=new $t(this._unlock_btn,this,this.lock_delay)),this._toggle_button_disabled(!0)},_unlock_btn:function(){this.lock_timer&&this.lock_timer.clear(),this._toggle_button_disabled(!1)},_toggle_button_disabled:function(e){$el.tgl($el.up(this.button_el,".btn"),"disabled",e)}}),$c.register("fb-apprequest-dialog",B.FacebookApprequestButton)),B.Ovl.HoN_v3_ImportOverlayView=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_ImportOverlayView",type:"hon-import-overlay",simple_close:!1,importer:null,dialog:null,stat:null,fb_dlg_id:"hon_importview",init:function(e){$super(this,arguments);var t=$el.down(this._el,".acc-selector");t&&(this.importer=new B.HoN_v3.Import2(e.vars.Import2),this.importer.init(t,this._el),B.on("import_contacts",this.contacts_ready,this));var s=$el.down(this._el,".friend-connected__first");s&&(this.importer=new B.HoN_v3.Import2(e.Import2),this.importer.friends_trusted_url=e.TrustedImport.check_url,this.importer.friends_update_url=e.Profile.friends.update_url,this.importer.init(s,this._el),B.on("import_contacts",this.contacts_ready,this)),e.vars&&e.vars.FbImportRequest&&($c.config.add(this.fb_dlg_id,e.vars.FbImportRequest),this.control=$c.get($el.down(document,".js-import-fb-dialog"),"fb-apprequest-dialog"),this.control.on({ready:this.close,cancel:this.close},this))},destroy:function(){this.control&&($c.config.del(this.fb_dlg_id),this.control.un("ready",this.close,this),this.control=null),B.un("import_contacts",this.contacts_ready,this),this.importer&&(this.importer.destroy(),this.importer=null),$super(this,arguments)},contacts_ready:function(e){this.importer.set_view("contacts"),B.Ovl.open({type:"hon-import-overlay",html:e})}}),B.Ovl.HoN_v3_ContactImportProgress=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_ContactImportProgress",type:"hon_v3_contact_import_progress",time:null,init:function(){var e=new B.HoN_v3.ContactImportProgressView;e.setTimer(this.time),this._render(e.toString())}}),B.Ovl.HoN_v3_ContactImportError=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_ContactImportError",type:"hon_v3_contact_import_error",text:null,init:function(){var e=new B.HoN_v3.ContactImportErrorView;e.setErrorText(this.text),this._render(e.toString())}}),B.HoN_v3.VoteQuota||(B.HoN_v3.VoteQuota={},function(){function e(e,t){return e.write('<div class="ovl-body"> <div class="ovl-promo ovl-promo--blue ovl-promo--curved"> <div class="ovl-promo__curved"> <img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/overlays/votes-quota.1.png"}).write('" srcset="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/overlays/votes-quota.1.png"}).write(" 1x, ").helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/overlays/votes-quota@2x.1.png"}).write(' 2x" alt="" width="153" height="101"> </div> </div> <div class="ovl-content"> <h1>').reference("title",t).write('</h1> <p class="x-large">').reference("message",t,["s"]).write('</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">').reference("action",t).write('</span> <span class="b-link js-vote-quota-buy-votes"></span> </div> </div> <div class="ovl-hint">').reference("hint",t).write('</div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}return $u.dust.register("game/popup.votes-quota",e),e}(),B.HoN_v3.VoteQuota.View=$class(B.DustView,{template:"game/popup.votes-quota",setData:function(e){return this.setTitle(e.getDisplayTitle()).setMessage(e.getDisplayMessage()).setAction(e.getDisplayAction()).setHint(e.getDisplayComment())},setTitle:function(e){return this.set("title",e)},setMessage:function(e){return this.set("message",e)},setAction:function(e){return this.set("action",e)},setHint:function(e){return this.set("hint",e)}}),B.HoN_v3.VoteQuota.ViewController=$class($u.Observable,{$e:null,constructor:function(){$super(this,arguments),this.$e=$e.on({".js-vote-quota-buy-votes":this.onBuy},this)},onBuy:function(){this.fire("buy")},destroy:function(){$e.un(this.$e),this.$e=null}}),B.HoN_v3.VoteQuota.Controller=$class({viewController:null,applicationFeature:null,BILLING_OVERLAY:{type:"payment",url:"/billing/contacts-ws.phtml?votes=1&activation_place=65&ws=1"},constructor:function(e){this.applicationFeature=e,this.viewController=new B.HoN_v3.VoteQuota.ViewController,this.viewController.on({buy:this.onBuy},this)},onBuy:function(){B.Ovl.open(this.BILLING_OVERLAY)},destroy:function(){this.viewController.destroy(),this.viewController=null,this.applicationFeature=null,this.billingOverlay=null},render:function(){return(new B.HoN_v3.VoteQuota.View).setData(this.applicationFeature)}})),B.Ovl.VoteQuota=new $class(B.Ovl.View,{name:"Ovl.VoteQuota",type:"hon-vote-quota",simple_close:!1,controller:null,init:function(){$super(this,arguments),this.controller=new B.HoN_v3.VoteQuota.Controller(this.applicationFeature),this._render(this.controller.render())},destroy:function(){this.controller.destroy(),this.controller=null,B.fire("quota-ovl-close")}}),B.Ovl.HoN_v3_registration=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_location",type:"hon-v3-location",_selected_el:null,_selected_text:"",_selected_id:"",_action_t:null,init:function(e){this.location=e.location,this.$e=$e.on({".js-registration-select":this.select,"#js-registration-submit_locations, * #js-registration-submit_locations":this.submit_locations},this),$e.add($("js-registration-locations"),"dblclick",this.dblclick,this)},open_ovl:function(e,t){B.Ovl.open({type:t,url:e})},destroy:function(e){this.$e&&$e.un(this.$e),this._action_t&&this._action_t.clear(),this._selected_el=this._action_t=null,$e.del($("js-registration-locations"),"dblclick",this.dblclick,this),e&&B.fire("hack:loc-ovl:closed")},select:function(e,t){var s=100;return $el.del(this._selected_el,"active"),$el.add(e,"active"),this._selected_el=e,$el.has(e,"selectable")?($("js-registration-submit_locations").removeAttribute("disabled"),this._selected_id=$el.down(e,"input").getAttribute("value"),this._selected_text=e.lastChild.nodeValue.replace(/^\s+|\s+$/g,""),t&&(this._action_t=new $t(this.submit_locations,this),this._action_t.set(s))):(this._action_t=new $t(this.next,this),this._action_t.set(s)),"ie8"!=$u.ua?!0:($el.down(e,"input").checked=!0,void 0)},dblclick:function(e){this.select(e,!0)},submit_locations:function(){this.location.country&&(this._selected_text+=", "+this.location.country),B.fire("hack:loc-ovl:done",this._selected_id,this._selected_text),this.close()}}),$gpb.exists("badoo.bma.ClientCountries","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientCountries=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientCountries",t.prototype._descriptor={fields:{countries:{type:11,type_name:"badoo.bma.Country",number:1,label:3}}}}(),$gpb.exists("badoo.bma.ServerGetRegions","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetRegions=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetRegions",t.prototype._descriptor={fields:{country_id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ClientRegions","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientRegions=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientRegions",t.prototype._descriptor={fields:{regions:{type:11,type_name:"badoo.bma.Region",number:2,label:3},country:{type:11,type_name:"badoo.bma.Country",number:1,label:1}}}}(),$gpb.exists("badoo.bma.ServerGetCities","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetCities=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetCities",t.prototype._descriptor={fields:{country_id:{type:5,number:1,label:1},region_id:{type:5,number:2,label:1}}}}(),$gpb.exists("badoo.bma.ClientCities","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientCities=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientCities",t.prototype._descriptor={fields:{country:{type:11,type_name:"badoo.bma.Country",number:1,label:1},region:{type:11,type_name:"badoo.bma.Region",number:2,label:1},cities:{type:11,type_name:"badoo.bma.City",number:3,label:3}}}}(),$gpb.exists("badoo.bma.Integer","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Integer=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Integer",t.prototype._descriptor={fields:{value:{type:5,number:1,label:2}}}}(),function(){function e(e,n){return e.write('<div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">').section(n.get(["TITLE_ALL"],!1),n,{block:t},{}).section(n.get(["TITLE"],!1),n,{block:s},{}).write('</h2> <form action="#" method="post" id="lp_form" class="select-location" data-ovl-type="').reference("ovl_type",n).write('" data-ovl-url="').reference("url_action",n).write('"> <div class="ovl-content"> <p class="b">Select your ').section(n.get(["SUB_TITLE"],!1),n,{block:i},{}).write(':</p> <div id="popup_location_div" class="ovl-scroll" data-control-type="scrollable"> ').section(n.get(["LIST"],!1),n,{block:o},{}).write(' </div> </div> <div class="ovl-buttons"> <div class="table"> <div class="table-cell">').section(n.get(["TO_COUNTRIES"],!1),n,{block:a},{}).write(" ").section(n.get(["TO_REGIONS"],!1),n,{block:l},{}).write('</div> <div class="table-cell"> <span class="f-right btn btn--sm btn--blue disabled js-location-submit" data-control-type="tooltip"> <span class="btn-txt">Select</span> <span class="b-link js-location-submit-link"></span> <div class="tooltip"><span class="tooltip-txt">You must select location first</span></div> </span> </div> </div> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ').section(n.get(["SERVICE_ERROR"],!1),n,{block:_},{}).write(" ").section(n.get(["_CLOSE_BLOCK"],!1),n,{block:c},{})}function t(e){return e.write("Select location")}function s(e,t){return e.reference("title",t)}function i(e,t){return e.reference("title",t)}function o(e,t){return e.write(' <div id="js-registration-locations" class="ovl-scroll_ js-scroller"> ').section(t.get(["ITEM"],!1),t,{block:n},{}).write(" </div> ")}function n(e,t){return e.write(' <label for="location').reference("id",t).write('" class="select-location__item').section(t.get(["_SELECTABLE"],!1),t,{block:r},{}).write(' js-registration-select"> <input type="radio" name="location" value="').reference("id",t).write('" id="location').reference("id",t).write('" class="hidden"> ').reference("name",t).write(" </label> ")}function r(e){return e.write(" selectable")}function a(e,t){return e.write('<a href="#" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("back_url",t).write('" class="grey f-left js-ovl-open">&larr; Back to countries</a>')}function l(e,t){return e.write('<a href="#" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("back_url",t).write('" class="grey f-left js-ovl-open">&larr; Back to regions</a>')}function _(e,t){return e.write("\nWe're sorry, this page is temporarily unavailable. We're currently working to fix this problem (").reference("error_code",t).write(").<br>You'll be able to use this service in few minutes. For now you can still use other sections of the website.\n")}function c(e,t){return e.write(' <div class="ovl-body"> ').reference("html",t).write(' <div class="ovl-close"><i class="icon ico--cross js-ovl-open" data-ovl-type="').reference("rel",t).write('" data-ovl-url="').reference("url",t).write('"></i></div> </div><span class="middle"></span> ')}return $u.dust.register("overlays/popup.select-location",e),e.s={TITLE_ALL:t,TITLE:s,SUB_TITLE:i,LIST:o,TO_COUNTRIES:a,TO_REGIONS:l,SERVICE_ERROR:_,_CLOSE_BLOCK:c},o.s={ITEM:n},n.s={_SELECTABLE:r},e}(),$l.register({section:"hon/location-ovl",lang:"en-us",translations:{CITY:"city",REGION:"region",COUNTRY:"country",REGIONS_IN:"Regions in",CITIES_IN:"Cities in",LOCATION_STRINGS:{CITY:"{{city}}",CITY_REGION:"{{city}}, {{region}}",REGION_COUNTRY:"{{region}}, {{country}}"}}}),B.Ovl.HoN_v3_LocationBma=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_location",type:"hon-v3-location-bma",ctx:"ovl--wizard ovl--narrow",_selected_el:null,_action_t:null,btn_disabled:null,step:null,country_id:null,region_id:null,_init:function(e){var t=$gpb.namespace("badoo.bma");
if(!e.common_settings)return new $gpb.Rpc(t.MessageType.SERVER_GET_COMMON_SETTINGS).on(t.MessageType.CLIENT_COMMON_SETTINGS,this.on_common_settings_ready.bind(this,e),this).request(),void 0;var s=e.step||"request-regions";switch(s){case"request-countries":return new $gpb.Rpc(t.MessageType.SERVER_GET_COUNTRIES).on(t.MessageType.CLIENT_COUNTRIES_LIST,this.on_countries_ready.bind(this,e),this).request(),void 0;case"render_countries":e.html=$u.dust.render("overlays/popup.select-location",{TITLE_ALL:{},SUB_TITLE:{title:$l.get("hon/location-ovl","COUNTRY")},LIST:{ITEM:e.countries.getCountries().map(function(e){return{id:e.getId(),name:e.getName()}})}});break;case"request-regions":var i=new t.ServerGetRegions;return e.country&&i.setCountryId(e.country.getId()),new $gpb.Rpc(t.MessageType.SERVER_GET_REGIONS,i).on(t.MessageType.CLIENT_REGIONS_LIST,this.on_regions_ready.bind(this,e),this).request(),void 0;case"render_regions":e.html=$u.dust.render("overlays/popup.select-location",{TITLE:{title:$l.get("hon/location-ovl","REGIONS_IN")+" "+e.regions.getCountry().getName()},SUB_TITLE:{title:$l.get("hon/location-ovl","REGION")},TO_COUNTRIES:{},LIST:{ITEM:e.regions.getRegions().map(function(e){return{id:e.getId(),name:e.getName()}})}}),e.html=e.html.replace("js-ovl-open","js-location-back-to-countries");break;case"request-cities":var i=new t.ServerGetCities;return i.setCountryId(e.country.getId()),i.setRegionId(e.region.getId()),new $gpb.Rpc(t.MessageType.SERVER_GET_CITIES,i).on(t.MessageType.CLIENT_CITIES_LIST,this.on_cities_ready.bind(this,e),this).request(),void 0;case"render_cities":e.html=$u.dust.render("overlays/popup.select-location",{TITLE:{title:$l.get("hon/location-ovl","CITIES_IN")+" "+e.region.getName()},SUB_TITLE:{title:$l.get("hon/location-ovl","CITY")},TO_REGIONS:{},LIST:{ITEM:e.cities.getCities().map(function(e){return{id:e.getId(),name:e.getName(),_SELECTABLE:{}}})}}),e.html=e.html.replace("js-ovl-open","js-location-back-to-regions")}$super(this,arguments)},on_common_settings_ready:function(e,t,s){$config(e,{common_settings:s}),this._init(e,{})},on_countries_ready:function(e,t,s){$config(e,{common_settings:this.common_settings,step:"render_countries",countries:s}),this._init(e,{})},on_regions_ready:function(e,t,s){$config(e,{common_settings:this.common_settings,step:"render_regions",country:s.getCountry(),regions:s}),this._init(e,{})},on_cities_ready:function(e,t,s){$config(e,{common_settings:this.common_settings,step:"render_cities",cities:s}),this._init(e,{})},init:function(){this.$e=$e.on({".js-registration-select":this.select,".js-location-back-to-countries":this.back_to_countries,".js-location-back-to-regions":this.back_to_regions,".js-location-submit-link":this.submit_locations},this),$e.add($("js-registration-locations"),"dblclick",this.dblclick,this),this.submit_el=$el.down(this._el,".js-location-submit"),this.btn_disabled=!0},destroy:function(e){this.$e&&$e.un(this.$e),this._action_t&&this._action_t.clear(),this._selected_el=this._action_t=null,$e.del($("js-registration-locations"),"dblclick",this.dblclick,this),e&&B.fire("hack:loc-ovl:closed"),this.step=this.country=this.region=null,this.countries=this.regions=this.cities=null,this.common_settings=null,this.btn_disabled=null},select:function(e,t){var s=100;return $el.del(this._selected_el,"active"),$el.add(e,"active"),this._selected_el=e,$el.has(e,"selectable")?(this.btn_disabled&&($el.del(this.submit_el,"disabled"),$c.del($c.get(this.submit_el,"tooltip"),"tooltip"),this.btn_disabled=null),t&&(this._action_t=new $t(this.submit_locations,this),this._action_t.set(s))):(this._action_t=new $t(this.next,this),this._action_t.set(s)),"ie8"!=$u.ua?!0:($el.down(e,"input").checked=!0,void 0)},dblclick:function(e){this.select(e,!0)},next:function(){switch(this.step){case"render_countries":for(var e,t=this.countries.getCountries(),s=0;s<t.length&&(e=t[s],e.getId()!=+this._form.location.value);s++);B.Ovl.open({type:"hon-v3-location-bma",step:"request-regions",common_settings:this.common_settings,country:e});break;case"render_regions":for(var i,o=this.regions.getRegions(),s=0;s<o.length&&(i=o[s],i.getId()!=+this._form.location.value);s++);B.Ovl.open({type:"hon-v3-location-bma",step:"request-cities",common_settings:this.common_settings,country:this.country,region:i})}},submit_locations:function(){for(var e,t=this.cities.getCities(),s=0;s<t.length&&(e=t[s],e.getId()!=+this._form.location.value);s++);try{var i,o=B.HoN_v3.ProfileEdit.controller.model._data.person,n=o.getLocation()==e.getId(),r=this.common_settings.getUserCountry().getId()!=this.country.getId();i=n?$l.get("hon/location-ovl",["LOCATION_STRINGS","CITY"]):r?$l.get("hon/location-ovl",["LOCATION_STRINGS","REGION_COUNTRY"]):$l.get("hon/location-ovl",["LOCATION_STRINGS","CITY_REGION"])}catch(a){i=e.getName()+", "+this.country.getName()}i=i.replace(/{{/g,"{").replace(/}}/g,"}");var l=$u.tpl(i,{city:e.getName(),region:this.region.getName(),country:this.country.getName()}),_=[this.country.getId(),this.region.getId(),e.getId()].join("_");B.fire("hack:loc-ovl:done",e.getId(),l,_),this.close()},back_to_countries:function(){B.Ovl.open({type:"hon-v3-location-bma",common_settings:this.common_settings,step:"request-countries"})},back_to_regions:function(){B.Ovl.open({type:"hon-v3-location-bma",common_settings:this.common_settings,step:"request-regions",country:this.country})}}),B.ImagePreloadQueue||(B.ImagePreloadQueue=new $class($u.Observable,{name:"ImagePreloadQueue",_active_threads:0,_completed:!1,_preloaders:null,_iframes:null,_preloaded:null,_queue:null,max_threads:2,constructor:function(){$super(this,arguments),this._preloaders={},this._preloaded={},this._iframes=[],this._queue=[]},append:function(e){e=this.drop_preloaded(e),e.length&&(Array.prototype.push.apply(this._queue,e),this._fulfil_queue())},prepend:function(e){e=this.drop_preloaded(e),e.length&&(Array.prototype.unshift.apply(this._queue,e),this._fulfil_queue())},drop_preloaded:function(e){var t,s,i=[];for(s=0;s<e.length;s++)t=e[s],this.has_preloaded(t)||this.in_queue(t)||i.push(t);return i},cancel:function(e){for(var t=0;t<e.length;t++)this._cancel_file(e[t]);this._fulfil_queue()},in_queue:function(e){var t,s;for(t=0;t<this._queue.length;t++)if(s=this._queue[t],e===s)return!0;return!1},has_preloaded:function(e){return this._preloaded[e]},_cancel_file:function(e){for(var t=0;t<this._queue.length;t++)e===this._queue[t]&&this._queue.splice(t,1);if(this._preloaders[e]){var s=this._preloaders[e];this._stop_iframe(s),this._finish(s)}},_stop_iframe:function(e){e.image_src=null,this._destroy_images(e);var t=e.contentWindow;t.stop?t.stop():(t=e.contentDocument,t.execCommand&&t.execCommand("Stop",!1))},_destroy_images:function(e){for(var t=$el.iframe_document(e).body,s=$el.select(t,"img"),i=0;i<s.length;i++){var o=s[i];o.onload=null,o.onerror=null,$el.remove(o)}},_fulfil_queue:function(){for(var e=this._active_threads;e<this.max_threads;e++)this._next()},_next:function(){this._queue.length?(this._completed=!1,this._preload(this._queue.shift())):this._active_threads||this._completed||(this._completed=!0)},_preload:function(e){this._preloaders[e]=this._create_preloader(e),this._active_threads++},_create_preloader:function(e){var t=this._iframes.pop();return t?(t.image_src=e,this._preload_image(t)):(t=$el.create("iframe",{src:"about:blank",style:{display:"none"},name:this.name+this._active_threads}),t.image_src=e,$e.add(t,"load",this._preload_image.bind(this,t),this),document.body.appendChild(t)),t},_preload_image:function(e){this._destroy_images(e);var t=new e.contentWindow.Image,s=$el.iframe_document(e).body,i=+new Date;s.appendChild(t),t.onload=this._on_load.bind(this,e,i),t.onerror=this._on_error.bind(this,e,i),t.src=e.image_src},_on_load:function(e,t){var s=e.image_src,i=+new Date-t;this._preloaded[s]=!0,this.fire("load",s,i),this._finish(e)},_on_error:function(e,t){var s=e.image_src,i=+new Date-t;this.fire("error",s,i),this._finish(e)},_finish:function(e){this._iframes.push(e),this._preloaders[e.image_src]=null,this._active_threads--,this._next()}})),B.AwardsLoader=$class({name:"AwardsLoader",src:null,image:null,count:null,tm:null,$e_preloader:null,constructor:function(e){this.src=e.src,this.count=e.count,this.callback=e.callback,this.scope=e.scope,this.load()},destroy:function(){this.remove_listeners(),this.scr=null,this.image=null},load:function(){B.ImagePreloadQueue.append([this.src]),this.add_listeners(),this.tm=setTimeout(this.on_load.bind(this,this.src),1e4)},add_listeners:function(){this.$e_preloder=B.ImagePreloadQueue.on({load:this.on_load,error:this.on_load},this)},remove_listeners:function(){this.$e_preloder&&B.ImagePreloadQueue.un(this.$e_preloder),this.tm&&clearTimeout(this.tm),this.$e_preloder=this.tm=null},on_load:function(e,t){e===this.src&&(this.remove_listeners(),this.ready(t))},ready:function(e){this.image=new Image,this.image.src=this.src,this.image.alt="",this.callback.call(this.scope,this.image,this.count,e)}}),B.AwardsView=$class($u.Observable,{name:"AwardsView",photos:null,wrap:null,el_wrap:null,current:0,total_num:0,images:[],current_image:null,old_image:null,is_blocked:!1,is_loading:!0,is_one_photo:!1,SPEED:500,REDRAW_PAUSE:25,constructor:function(e,t){$super(this,arguments),this.wrap=e,this.photos=t,this.el_wrap=$el.down(this.wrap,".js-awards-wrap"),this.photos.length>7&&(this.photos.length=7),this.$e=$e.on({".js-awards-share":this.share,".js-awards-prev":this.prev,".js-awards-next":this.next},this),this.total_num=this.photos.length,this.total_num<2&&(this.is_one_photo=!0,this.remove_controls()),this.preload_first()},destroy:function(){$e.un(this.$e),this.$e=null,this.destroy_all_loaders(),this.photos=null,this.wrap=null,this.el_wrap=null,this.images=[],$super(this,arguments)},destroy_all_loaders:function(){for(var e=0;e<this.total_num;e++)this.destroy_loader(e)},destroy_loader:function(e){this.images[e].loader&&(this.images[e].loader.destroy(),delete this.images[e].loader)},show_controls:function(){this.is_loading=!1,$el.del(this.el_wrap,"loading")},remove_controls:function(){var e,t=$el.select(this.wrap,".js-awards-arr"),s=t.length;for(e=0;s>e;e+=1)$el.remove(t[e])},preload_first:function(){this.images[0]={img:null,loader:null},this.images[0].loader=new B.AwardsLoader({src:this.photos[0].img,count:0,callback:this.first_ready,scope:this})},first_ready:function(e,t,s){if(this.images[0].img=e,this.destroy_loader(0),this.change(),this.show_controls(),this.is_one_photo||this.load_others(),s){var i=new $s.Request("awards-view",$s.TAG_ACTION);i.value=s,i.timer_add({group:"load_img",src:e.src},s),i.send()}},load_others:function(){var e;for(e=1;e<this.total_num;e++)this.images[e]={img:null,loader:null};for(e=1;e<this.total_num;e++)this.images[e].loader=new B.AwardsLoader({src:this.photos[e].img,count:e,callback:this.other_ready,scope:this})},other_ready:function(e,t){var s,i=0;for(this.images[t].img=e,this.destroy_loader(t),s=0;s<this.total_num;s++)this.images[s].img&&i++},change:function(){this.is_blocked=!0,this.current_image=this.images[this.current].img,$el.add(this.current_image,"ovl-photos__img"),this.el_wrap.appendChild(this.current_image),this.tm=setTimeout(this.show_image.bind(this),this.REDRAW_PAUSE)},show_image:function(){clearTimeout(this.tm),this.tm=null,$el.add(this.current_image,"visible"),this.tm=setTimeout(this.unblock.bind(this),this.SPEED+this.REDRAW_PAUSE)},unblock:function(){clearTimeout(this.tm),this.tm=null,this.is_blocked=!1,this.old_image&&($el.remove(this.old_image),this.old_image=null),this.old_image=this.current_image},prev:function(){this.is_blocked||this.is_loading||(this.current-=1,this.current<0&&(this.current=this.total_num-1),this.change())},next:function(){this.is_blocked||this.is_loading||(this.current+=1,this.current>this.total_num-1&&(this.current=0),this.change())},share:function(e){this.fire("share",this.current,e)}}),B.AwardsSharing=$class({name:"AwardsSharing",photos:null,share_url:null,success_url:null,is_video:!1,check_url:null,check_timer:null,check_request:null,video_url:null,current:0,constructor:function(e,t){this.photos=t.photos,this.success_url=t.success_url,this.is_video=t.is_video,this.check_url=t.check_url,$u.fb.init(),this.is_video?(this.check_timer=new $t(this.check_video,this,1e3),this.check_timer.set(),this.$e=$e.on({".js-awards-share":this.share_video},this)):(this.view=new B.AwardsView(e,this.photos),this.view.on("share",this.share,this))},destroy:function(){this.check_timer&&(this.check_timer.clear(),this.check_timer=null),this.check_request&&(this.check_request.abort(),this.check_request=null),this.photos=null,this.success_url=null,this.view&&(this.view.un("share",this.share,this),this.view.destroy(),this.view=null),this.$e&&(B.un(this.$e),this.$e=null)},check_video:function(){this.check_request=new $r(this.check_url,{method:"post",ready:this.check_video_ready},this)},check_video_ready:function(e){if(e.is_ready){this.video_url=e.video_url;var t=$u.tpl2el('<video loop autoplay src="{url}" height="315" width="315" class="ovl-video" style="object-fit: inherit;"></video>',{url:e.video_url}),s=$el.down(document,".js-awards-wrap");s.innerHTML="",s.appendChild(t)}else this.check_timer.set()},share_video:function(e){this.share(0,e)},share:function(e,t){var s=this.photos[e],i=t.getAttribute("data-share-type"),o=t.hasAttribute("data-share-link"),n=s[i+"_url"];if(this.current=e,o)switch(i){case"facebook":$u.fb.call(function(e){e||FB.ui({method:"share",href:n},this.share_done.bind(this))},this,!0)}else window.open(s[i+"_url"],"AwardsSharing","toolbar=no,width=650,height=550")},share_done:function(e){if(e&&!e.error_code){var t=this.photos[this.current],s=$u.tpl(this.success_url,{photo_id:t.photo_id});B.Ovl.open({type:"hon-v3-notify",url:s})}}}),B.Ovl.HoN_v3_AwardsSharing=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_awards_sharing",type:"hon-v3-badges-sharing",sharing:null,init:function(e){$super(this,arguments),e.photos&&(this.sharing=new B.AwardsSharing(this._el,e))},destroy:function(){$super(this,arguments),this.sharing&&(this.sharing.destroy(),this.sharing=null)}}),B.Ovl.HoN_v3_Score=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_score",type:"hon-v3-score",fb_dlg_id:"hon-v3-promo-fb",ok_dlg_id:"hon-v3-promo-ok",init:function(e){$super(this,arguments),e.fb_request_cfg?$c.config.add(this.fb_dlg_id,e.fb_request_cfg):e.ok_request_cfg&&$c.config.add(this.ok_dlg_id,e.ok_request_cfg)},destroy:function(){$super(this,arguments)}}),B.Ovl.HoN_v3_image_viewer=new $class(B.Ovl.View,{name:"Ovl.HoN_image_viewer",type:"hon-v3-image-viewer",tpl:"{html}"}),function(){function e(e,n){return e.write('<div class="ovl-body"> <div class="ovl-content"> <h1> ').section(n.get(["PHOTO_RULES_TITLE"],!1),n,{block:t},{}).write(" ").section(n.get(["VIDEO_RULES_TITLE"],!1),n,{block:s},{}).write(' </h1> <ol class="photo-rules"> ').section(n.get(["PHOTO_RULES_TEXT"],!1),n,{block:i},{}).write(" ").section(n.get(["VIDEO_RULES_TEXT"],!1),n,{block:o},{}).write(' </ol> <div class="checkbox"> <input type="checkbox" name="rules_remember" id="rules_remember" class="js-do-not-show" value="0"> <label for="rules_remember">Don\'t show me again</label> </div> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Continue</span> <span class="b-link js-upload-rules-continue"></span> </div> </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div>')}function t(e){return e.write("Photo rules")}function s(e){return e.write("Video rules")}function i(e){return e.write(' <li class="x-large">Photos must have only you or you with friends in them. Please add photos which identify you easily and show your face clearly.</li> <li class="x-large">Photos without you in them, children, erotic or inappropriate photos are not allowed.</li> ')}function o(e){return e.write(' <li class="x-large">Videos must have only you or you with friends in them. Please add videos which identify you easily and show your face clearly.</li> <li class="x-large">Videos without you in them, children, erotic or inappropriate videos are not allowed.</li> ')}return $u.dust.register("photos/popup.photo-rules",e),e.s={PHOTO_RULES_TITLE:t,VIDEO_RULES_TITLE:s,PHOTO_RULES_TEXT:i,VIDEO_RULES_TEXT:o},e}(),B.Ovl.HoN_v3_upload_rules=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_upload_rules",type:"hon_upload_rules",tpl_name:"photos/popup.photo-rules",init:function(e){$super(this,arguments),this.cfg=e,this.$e=$e.on({".js-do-not-show":this._onClickDoNotShow,".js-upload-rules-continue":this._onClickContinue},this),this.render()},destroy:function(){$e.un(this.$e),this.cfg=this.$e=null,$super(this,arguments)},render:function(){var e={PHOTO_RULES_TITLE:!0,PHOTO_RULES_TEXT:!0,VIDEO_RULES_TITLE:!1,VIDEO_RULES_TEXT:!1};this._render($u.dust.render(this.tpl_name,e))},_onClickContinue:function(){B.Upload2.UploadOverlayController.show(this.cfg.ovlCfg)},_onClickDoNotShow:function(e){return B.Upload2.UploadOverlayController.setDontShowRules(e.checked),!0}}),B.Ovl.HoN_v3_upload_error=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_upload_error",type:"hon-v3-upload-error",item_tpl:"<li>{text}</li>",_init:function(e,t){for(var s=[],i=0;i<t.errors.length;i++)s.push($u.tpl(this.item_tpl,{text:t.errors[i]}));return t.html=$u.tpl(t.list_tpl,{list:s.join("")}),$super(this,arguments)}}),B.Ovl.HonUploadImportFbc=new $class(B.Ovl.View,{name:"Ovl.HonUploadImportFbc",type:"hon-upload-import-fbc",simple_close:!1,init:function(e){$super(this,arguments),B.UploadImport.is_fbc=!0,B.UploadImport.load_login(e)},destroy:function(){return $super(this,arguments),B.UploadImport.unload()}}),B.Upload||(B.Upload={},B.Upload.Uploader=$class($u.Observable,{name:"Upload.Uploader",upload_url:null,max_count:1/0,max_threads:2,max_file_size:1/0,mime_types:null,extensions:null,xhr_timeout:18e5,extra_data:null,extra_validation_callback:null,scope:null,_files:null,_xhrs:null,_queue:null,_last_id:0,_active_threads:0,_completed:!1,_allowed_mime_types:null,_allowed_extensions_re:null,ERROR_TOO_LARGE:1,ERROR_BAD_FORMAT:2,ERROR_INVALID:3,ERROR_UPLOAD_ERROR:4,constructor:function(e){$super(this,arguments),$config(this,e),this._files={},this._xhrs={},this._queue=[],this.mime_types&&(this.extensions=this._get_extensions_from_mime_types(this.mime_types),this._allowed_mime_types=this.mime_types.join(",")),this.extensions&&(this._allowed_extensions_re=this._get_allowed_extensions_regexp(this.extensions)),this._recreate_input()},destroy:function(){$super(this,arguments),$e.del(this._upload_input,"change",this._add_photos,this),$el.remove(this._upload_input),this._upload_input=null,this._files=this._xhrs=this._queue=null,this._allowed_mime_types=this._allowed_extensions_re=null},_recreate_input:function(){this._upload_input&&($e.del(this._upload_input,"change",this._add_photos,this),$el.remove(this._upload_input));var e=$el.create("input",{className:"uploader_input",type:"file",multiple:1!==this.max_count,accept:this._allowed_mime_types});document.body.appendChild(e),this._upload_input=e,$e.add(this._upload_input,"change",this._add_photos,this)},choose:function(){this._upload_input&&(this._upload_input.value="",this._upload_input.click())},cancel_one:function(e){for(var t=0;t<this._queue.length;t++)if(this._queue[t]===e){delete this._queue[t];break}this._xhrs[e]&&(this._active_threads--,this._xhrs[e].abort(),delete this._xhrs[e],this._upload_next())},cancel_all:function(){var e=this._xhrs;for(var t in e)e[t].abort();this._xhrs={},this._queue=[],this._active_threads=0},_add_photos:function(){var e=this._upload_input.files;if(e.length){this._completed=!1;for(var t=0;t<e.length;t++){var s=e[t],i=this._generate_id();this._files[i]=s,this.fire("registered",i,this._files[i]);var o=this._validate(s);if(o===!0){if(this.extra_validation_callback){var n=this.extra_validation_callback.call(this.scope,i,s);if(n!==!0){this._error(i,this.ERROR_INVALID,n);continue}}this._queue.push(i)}else this._error(i,o)}for(var r=0;r<this.max_threads;r++)this._upload_next()}},_validate:function(e){return e.size>this.max_file_size?this.ERROR_TOO_LARGE:this._allowed_extensions_re.test(e.name)?!0:this.ERROR_BAD_FORMAT},_upload_next:function(){this._queue.length?this._upload_photo(this._queue.shift()):this._active_threads||this._completed||(this._completed=!0,this._recreate_input(),this.fire("queue_completed"))},_upload_photo:function(e){var t=this._files[e];if(!t)return this._upload_next(),void 0;var s=new FormData;if(s.append("Filedata",t),this.extra_data)for(var i in this.extra_data)s.append(i,this.extra_data[i]);this._xhrs[e]=new $r(this.upload_url,{method:"post",cors:!0,timeout:this.xhr_timeout,data:s,upload_progress:this._upload_progress.bind(this,e),ready:this._upload_ready.bind(this,e),error:this._upload_error.bind(this,e)}),this._active_threads++,this.fire("started",e)},_upload_ready:function(e,t){this._active_threads--,delete this._xhrs[e],this.fire("ready",e,t),this._upload_next()},_upload_error:function(e,t){this._active_threads--,this._error(e,this.ERROR_UPLOAD_ERROR,t),this._upload_next()},_upload_progress:function(e,t){this.fire("progress",e,t)},_error:function(e,t,s){delete this._xhrs[e],this.fire("error",e,t,s)},_generate_id:function(){return++this._last_id},_get_extensions_from_mime_types:function(e){for(var t=[],s=0;s<e.length;s++)t.push(e[s].replace(/^\w+\//,""));return t},_get_allowed_extensions_regexp:function(e){return new RegExp("\\.("+e.join("|").replace(/\*/g,"\\*")+")$","i")}}),B.UploaderOld||(B.UploaderOld=$class({name:"UploaderOld",el_form:null,el_input:null,constructor:function(e){e&&(this.el_form=$el.down(e,".js-uploader-old"),this.el_form&&(this.el_input=$el.down(this.el_form,".js-uploader-old-input"),$e.add(this.el_input,"change",this.change,this)))},destroy:function(){this.el_form&&($e.del(this.el_input,"change",this.change,this),this.el_input=null,this.el_form=null)},change:function(){this.el_form.submit()}})),B.Upload.Controller=new $class($u.Observable,{name:"upload-controller",type:"plain",_instances:{},_totals:null,_files_left_default:null,_files_left:null,_files_done:0,_last_handle:0,_handles:{},_transport:null,_transport_params:null,_strings:{},register_transport:function(e){!this._transport&&e.supported()&&(this.type=e.prototype.type,this._transport=e,$el.add(document.documentElement,"upload_type_"+this.type))},create:function(e,t,s){s=s||$vars.UploadSettings,this._transport_params||(this._transport_params=(s||{})[this.type]||{}),this._files_left=this._files_left_default=t&&t.files_left||s&&s.files_left;var i=t&&t[this.type]||s&&s[this.type]||this._transport_params;return i.session=t&&t.session||s&&s.session,this._transport?new this._transport(e,i):void 0},create_im_send:function(e,t){var s=this.create(e,null,t);return s?(s.control_init(),s):null},add:function(e){this._instances[e.id]=e,e.on({state_changed:this.update},this)},del:function(e){e.un({state_changed:this.update},this),this._instances[e.id]=null},update:function(e,t,s,i){this._totals=null;var o;switch(t){case"register":this._files_left--,o=this._generate_handle(),this._handles[o]={instance_id:e,id:s};break;case"error":this._files_left++;break;case"cancel":this._files_left++;break;case"complete":this._files_done++}o||(o=this._get_handle(e,s)),this.fire("state_changed",t,o,i)},cancel:function(e){var t,s,i;if(this._totals=null,e)s=this._handles[e],t=this._get_instance(s.instance_id),t&&t.cancel(s.id);else for(i in this._instances)t=this._get_instance(i),t&&t.cancel()},reset:function(){this._handles={},this._files_done=0,this._files_left=this._files_left_default,this._totals=null},get_state:function(){var e,t,s={},i=!1;for(e in this._handles)this._handles.hasOwnProperty(e)&&(i=!0,t=this._handles[e],s[e]=this._get_instance(t.instance_id).get_state(t.id));return i?s:null},get_totals:function(){if(this._totals)return this._totals;var e=0,t=0,s=0,i=this.get_state();for(var o in i){var n=i[o];n.cancelled||(t+=n.percent,100===n.percent&&e++,s++)}var r={total:s,done:e,percent:0===s?100:Math.round(t/s)};return this._totals=r,r},set_strings:function(e){this._strings=e},string:function(e){return this._strings["er_"+e]||e},set_limit:function(e){this._files_left=e-this._files_done},get_limit:function(){return this._files_left},can_upload:function(){return!!this._files_left},_generate_handle:function(){return++this._last_handle},_get_handle:function(e,t){for(var s in this._handles){var i=this._handles[s];if(i.instance_id===e&&i.id===t)return s}},_get_instance:function(e){return this._instances[e]}}),B.Upload.Link=new $class(B.Page,{name:"upload-link",_ovl_opened:!1,ovls:{},init:function(){B.IM&&B.IM.on("destroy",this.close,this),this.$b=B.on("upload:close",this.close,this)},destroy:function(){B.IM&&B.IM.un("destroy",this.close,this),B.un(this.$b),this.im_$b&&B.un(this.im_$b)},update_status:function(e,t){switch(t){case"register":this._ovl_opened||!this.ovls[e]||B.Upload.Overlay&&B.Upload.Overlay.opened||(B.Ovl.open(this.ovls[e]),this._ovl_opened=!0);break;case"queue_complete":this._ovl_opened=!1}},close:function(){this._ovl_opened=!1},wrap:function(e,t,s){for(var i,o=$el.select(e||document.body,".js-uploader-choose"),n=[],r=0,a=o.length;a>r;r++)if(i=o[r],null===i.getAttribute("data-uploader")){var l;if(l="im-send-photo"===i.getAttribute("data-ovl-type")?B.Upload.Controller.create_im_send(i,s):B.Upload.Controller.create(i,t,null))n.push(l),B.Upload.Controller.add(l),l.on("state_changed",this.update_status,this),i.setAttribute("data-uploader",""),null===i.getAttribute("data-no-ovl")&&(this.ovls[l.id]={url:i.getAttribute("data-ovl-url"),type:i.getAttribute("data-ovl-type")||"process"});else{var _=$el.up(i,".js-upload-photo"),c=$el.up(i,".js-upload-link");_&&($el.add(_,"old-upload"),c&&$el.dom.remove(c))}}return new B.Upload.Instance(n,e)}}),B.Upload.Instance=$class({name:"B.Upload.Instance",instances:null,uploader_old:null,constructor:function(e,t){this.instances=e,this.instances.length||(this.uploader_old=new B.UploaderOld(t))},destroy:function(){this.uploader_old&&(this.uploader_old.destroy(),this.uploader_old=null);for(var e=0;e<this.instances.length;e+=1){var t=this.instances[e];t&&(t._button.removeAttribute("data-uploader"),t.un("state_changed",B.Upload.Link.update_status,B.Upload.Link),B.Upload.Controller.del(t),t.destroy())}B.Upload.Controller.reset()}}),B.Upload.TransportBase=$class($u.Observable,{name:"Upload.TransportBase",id:null,_files:{},_is_waiting:!1,_files_left:0,constructor:function(e,t){$super(this,arguments),$config(this,t),this.id=++B.Upload.TransportBase.counter,this._button=e},get_state:function(e){return this._files[e]},cancel:function(e){e?this._cancel_one(e):this._cancel_all()},cancel_upload:function(e){this._cancel_one(e.rel)},can_upload:function(){return B.Upload.Controller.can_upload()},_cancel_upload:function(e){this._files[e].cancelled=!0,this._files_left--,this._notify("cancel",e)},_cancel_one:function(e){this._cancel_upload(e)},_cancel_all:function(){for(var e in this._files)this._cancel_upload(e)},_notify:function(e,t){this.fire("state_changed",this.id,e,t,this._files[t])},_register:function(e,t,s){this._files[e]={file:s,name:$u.escapeHTML(t),percent:0,data:null,error:null,start_time:null,cancelled:!1},this._files_left++,this._notify("register",e)},_start:function(e){var t=this._files[e];t.percent=0,t.start_time=(new Date).getTime(),this._notify("start",e)},control_init:function(){this._is_waiting=!0,this.wait_$b=B.on("sendphoto:inited",this.no_wait_init,this),B.fire("sendphoto:check")},no_wait_init:function(){this._is_waiting=!1,this.wait_$b&&B.un(this.wait_$b)},_complete:function(e,t){if(this._is_waiting)return this.complete_$b=B.on("sendphoto:inited",this._complete.bind(this,e,t),this),void 0;this.complete_$b&&B.un(this.complete_$b),this._files_left--;var s=this._files[e];if(s.percent=100,s.data=t,s.result=t.photo,this._notify("complete",e),s.result){var i=(new Date).getTime()-s.start_time;this._send_stats(i,s.result)}},_error:function(e,t){this._files_left--,this._files[e].error=B.Upload.Controller.string(t),this._notify("error",e)},_queue_complete:function(){this._is_waiting?this.queue_$b=B.on("sendphoto:inited",this._queue_complete,this):(this.queue_$b&&B.un(this.queue_$b),this._notify("queue_complete"))},_upload_progress:function(e,t){e&&(this._files[e].percent=t,this._notify("progress",e))},_send_stats:function(e,t){e&&t&&t.counter_url&&new $r(t.counter_url,{params:{upload_ms:e,flash:"flash"===this.type?1:0}})}}),$config(B.Upload.TransportBase,{counter:0}),B.Upload.TransportHtml5=$class(B.Upload.TransportBase,{name:"Upload.TransportHtml5",type:"html5",max_threads:2,upload_backend:"",allowed_filesize:1/0,allowed_image_types:"",allowed_video_types:"",session:null,_uploader:null,constructor:function(){$super(this,arguments);var e={};this.session&&(e[this.session.key]=this.session.value),this._uploader=new B.Upload.Uploader({upload_url:this.upload_backend,max_count:this._button.hasAttribute("data-upload-single")?1:1/0,max_threads:this.max_threads,max_file_size:1024*this.allowed_filesize*1024,mime_types:this._allowed_mime_types(),extra_data:e,extra_validation_callback:this._extra_validation,scope:this}),this._uploader_$e=this._uploader.on({registered:this._upload_register,started:this._start,progress:this._upload_progress,ready:this._upload_ready,error:this._upload_error,queue_completed:this._queue_complete},this),$e.add(this._button,"click",this.choose,this)},destroy:function(){$e.del(this._button,"click",this.choose,this),this._cancel_all(),this._uploader.un(this._uploader_$e),this._uploader.destroy(),this._uploader=null},choose:function(){$u.rstat.manage(this._button),this._uploader.choose()},_cancel_one:function(e){$super(this,arguments),this._uploader.cancel_one(e)},_cancel_all:function(){$super(this,arguments),this._uploader.cancel_all()},_upload_ready:function(e,t){return 0!==t.errno?(this._error(e,t.errmsg),void 0):(this._complete(e,t),void 0)},_upload_error:function(e,t,s){var i;switch(t){case this._uploader.ERROR_BAD_FORMAT:i="bad_format";break;case this._uploader.ERROR_TOO_LARGE:i="file_too_large";break;case this._uploader.ERROR_INVALID:i=s;break;case this._uploader.ERROR_UPLOAD_ERROR:i="bad_format";break;default:i="unknown"}this._error(e,i)},_extra_validation:function(){return this.can_upload()?!0:"files_limit"},_upload_register:function(e,t){this._register(e,t.name,t)},_allowed_mime_types:function(){var e={image:this.allowed_image_types,video:this.allowed_video_types},t=[];for(var s in e)for(var i=e[s].split(/[;,]\s*/g),o=0;o<i.length;o++){var n=i[o].replace(/\*\./,"");n&&t.push(s+"/"+n)}return"ff"===$u.ua&&(this.allowed_image_types&&t.push("image/*"),this.allowed_video_types&&t.push("video/*")),t}}),$config(B.Upload.TransportHtml5,{supported:function(){return"FormData"in window}}),B.Upload.Controller.register_transport(B.Upload.TransportHtml5),B.Upload.TransportFlash=$class(B.Upload.TransportBase,{name:"Upload.TransportFlash",type:"flash",_callbacks:["","uploadRegisterCallback={object}._register","uploadStartCallback={object}._start","uploadProgressCallback={object}._upload_progress","uploadCompleteCallback={object}._complete","uploadGetLimitCallback={object}._get_limit","uploadErrorCallback={object}._error","uploadCancelCallback={object}._cancel","uploadQueueCompleteCallback={object}._queue_complete"].join("&"),upload_swf:"",flash_params:"",session:null,_flash_object:null,constructor:function(){if($super(this,arguments),this.upload_swf){this._adapter_name="__B_Upload_TransportFlash_"+this.id,window[this._adapter_name]=this;var e="uploader_flash_"+this.id,t=$u.tpl(this._callbacks,{object:this._adapter_name}),s=this._button.style;"absolute"!==s.position&&"relative"!==s.position&&(s.position="absolute");var i=this.flash_params+t+"&maxNumThreads=2";this.session&&(i+="&sessionKey="+this.session.key+"&sessionValue="+this.session.value),this._button.innerHTML+=$u.flash.draw(this.upload_swf,"100%","100%","",i,!0,e),this._flash_object=$(e),$config(this._flash_object.style,{position:"absolute",top:0,left:0}),this._fix_flash_timeout=setTimeout(this._fix_flash_size.bind(this),0),$e.add(this._flash_object,"mouseover",this.hover,this),$e.add(this._flash_object,"mouseout",this.hover,this)
}},destroy:function(){this.upload_swf&&(this._cancel_all(),this._fix_flash_timeout&&(clearTimeout(this._fix_flash_timeout),this._fix_flash_timeout=null),$e.del(this._flash_object,"mouseover",this.hover,this),$e.del(this._flash_object,"mouseout",this.hover,this),$el.remove(this._flash_object),this._flash_object=null)},_cancel_one:function(e){$super(this,arguments),this._call_flash("cancelUpload",e)},_cancel_all:function(){$super(this,arguments),this._files_left&&this._call_flash("cancelAll")},_fix_flash_size:function(){this._fix_flash_timeout=null,this._button.offsetWidth>this._flash_object.offsetWidth&&(this._flash_object.style.width=this._button.offsetWidth+"px")},_get_limit:function(){return B.Upload.Controller.get_limit()},_complete:function(e,t){return t=JSON.parse(t),t.errno?(this._error(e,t.errmsg),void 0):($super(this,arguments),void 0)},_call_flash:function(e){try{var t=Array.prototype.slice.call(arguments,1);this._flash_object[e].apply(this._flash_object,t)}catch(s){}},hover:function(){$el.tgl(this._button,"hover")}}),$config(B.Upload.TransportFlash,{supported:function(){return $u.flash.init(9)}}),B.Upload.Controller.register_transport(B.Upload.TransportFlash)),$gpb.exists("badoo.bma.ExternalProviderContext","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderContext=new $gpb.Enum("badoo.bma.ExternalProviderContext");t._values=[1,2,3,4,5,6,7,8],t.EXTERNAL_PROVIDER_TYPE_CONTACTS=1,t.EXTERNAL_PROVIDER_TYPE_PHOTOS=2,t.EXTERNAL_PROVIDER_TYPE_REGISTRATION=3,t.EXTERNAL_PROVIDER_TYPE_PERSONAL_INFORMATION=4,t.EXTERNAL_PROVIDER_TYPE_INTERESTS=5,t.EXTERNAL_PROVIDER_TYPE_WORK_EDUCATION=6,t.EXTERNAL_PROVIDER_TYPE_VIDEOS=7,t.EXTERNAL_PROVIDER_TYPE_COMMON_PLACES=8}(),$gpb.exists("badoo.bma.ExternalProviders","message")||($gpb.exists("badoo.bma.ImportGoalProgress","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ImportGoalProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ImportGoalProgress",t.prototype._descriptor={fields:{number_already_imported_string:{type:9,number:3,label:1},number_required:{type:5,number:1,label:1},description:{type:9,number:5,label:1},number_already_imported:{type:5,number:2,label:1},progress_stops:{type:9,number:4,label:3}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviders=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProviders",t.prototype._descriptor={fields:{providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:1,label:3},heading_string:{type:9,number:4,label:1},title:{type:9,number:5,label:1},display_image:{type:9,number:7,label:1},context:{type:14,type_name:"badoo.bma.ExternalProviderContext",number:2,label:1},import_goal_progress:{type:11,type_name:"badoo.bma.ImportGoalProgress",number:6,label:1},display_string:{type:9,number:3,label:1}}}}()),B.HoN_v3.ExternalProvidersModel||(B.HoN_v3.ExternalProvidersModel=$class($u.Observable,{_providers:null,_state:"empty",_map:{"default":"UNKNOWN_EXTERNAL_PROVIDER_TYPE",facebook:"EXTERNAL_PROVIDER_TYPE_FACEBOOK",instagram:"EXTERNAL_PROVIDER_TYPE_INSTAGRAM",ok:"EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI",vk:"EXTERNAL_PROVIDER_TYPE_VKONTAKTE"},_context:null,get:function(e,t,s,i){var o;switch(s=s||this,this._state){case"empty":this._get(i);case"loading":if(!t)return this;this.on("load",this._wrap_callback(e,t,s));break;case"clear":if(o=this._get_val(e),!t)return o;t.call(s,o)}},get_cached:function(e,t){var s;return this._providers&&(s=e?this._get_val(e):this._providers),t&&(this._providers=null),this._get(),s},_get:function(){if("loading"!==this._state){if(!this._context)throw"No context";switch(this._state="loading",this._context){case"EXTERNAL_PROVIDER_TYPE_PHOTOS":B.HoN_v3.Models.Cache.PhotosExternalProvidersCache.fetch(this._on_data,this);break;case"EXTERNAL_PROVIDER_TYPE_VIDEOS":B.HoN_v3.Models.Cache.VideosExternalProvidersCache.fetch(this._on_data,this);break;case"EXTERNAL_PROVIDER_TYPE_WORK_EDUCATION":B.HoN_v3.Models.Cache.WorkEducationExternalProvidersCache.fetch(this._on_data,this)}}},_on_data:function(e){var t=!1,s=e.getProviders();t?(this._state="empty",this.fire("error",t)):(this._providers=s.getProviders(),this._state="clear",this.fire("load",this))},_wrap_callback:function(e,t,s){var i=this;return function(){t.call(s,i._get_val(e)),setTimeout(i._remove_subscribers.bind(i),0)}},_get_val:function(e){e=this._map[e]||e;var t=$gpb.namespace("badoo.bma").ExternalProviderType[e];if(t===+t&&this._providers)for(var s=0,i=this._providers.length;i>s;s++)if(this._providers[s].getType()==t)return this._providers[s];return null},_remove_subscribers:function(){this._subscribers={},this._providers=null,this._state="empty"}}),B.HoN_v3.ExternalProvidersPhoto=new $class(B.HoN_v3.ExternalProvidersModel,{_context:"EXTERNAL_PROVIDER_TYPE_PHOTOS"}),B.HoN_v3.ExternalProvidersVideo=new $class(B.HoN_v3.ExternalProvidersModel,{_context:"EXTERNAL_PROVIDER_TYPE_VIDEOS"}),B.HoN_v3.ExternalProvidersEducation=new $class(B.HoN_v3.ExternalProvidersModel,{_context:"EXTERNAL_PROVIDER_TYPE_WORK_EDUCATION"})),B.HoN_v3.Upload=$class($u.Observable,{name:"Upload",wrap_el:null,upload_wrap_el:null,toggle_el:null,current_el:null,total_el:null,uploaders:null,total_num:0,done_num:0,errors_tpl:"",errors:null,$e:null,upload_$e:null,provider_id:null,constructor:function(){$super(this,arguments),this.bind_events()},bind_events:function(){this.$e=$e.on({".js-upload-import":this.open_import},this)},unbind_events:function(){this.$e&&$e.un(this.$e)},destroy:function(){$super(this,arguments),this.unbind_events()},open:function(e){B.Toggle.manage(e),$e.on("__all__",this.any_click,this)},auto_open:function(){B.Upload2.Controller.get_group("photos_of_me").choose()},close:function(e){this.simple_upload||(B.Toggle.manage(e||this.toggle_el,"clear"),$e.un("__all__",this.any_click,this))},any_click:function(){var e=$e.element($e.e);$el.has(e,"uploader_input")||this.upload_wrap_el.contains(e)||this.close()},open_import:function(e){var t=e.getAttribute("data-type"),s=e.getAttribute("data-url"),i=e.getAttribute("data-context")||"photo";this.provider_id=e.getAttribute("data-provider-id");var o={photo:B.HoN_v3.ExternalProvidersPhoto,video:B.HoN_v3.ExternalProvidersVideo};return s||(s=o[i].get_cached(this.provider_id,!0),s=s&&s.getAuthData().getOauthUrl()),s?("open"===t?window.open(s,"auth","width=600,height=400"):B.UploadFbc.fb_ready_hon(s),!1):void 0},rules_closed:function(){$el.del(this.wrap_el,"photo-list--rules")},uploader_state:function(e,t,s){switch(e){case"register":this.total_num++,this.close();break;case"start":this.fire("start");break;case"progress":break;case"complete":this.done_num++,this.done(s.result);break;case"cancel":this.fire("cancel");break;case"error":this.errors.push('<b class="b">'+s.name+'</b><div class="lgrey">'+s.error+"</div>"),this.done_num++;break;case"queue_complete":this.done_all(),this.fire("done_all")}this.update()},update:function(){this.current_el.innerHTML=this.done_num+1,this.total_el.innerHTML=this.total_num,this.toggle_progress(this.total_num>0)},toggle_progress:function(e){$el.tgl(this.wrap_el,"photo-list--photo-progress",e),$el.tgl(this.wrap_el,"loading",e)},done:function(e){this.fire("uploaded",{id:e.photo_id,entry_id:e.entry_id,url:e.tb_url,width:e.size.width,height:e.size.height,coach_status:e.coach_status,coach_text:e.coach_text})},done_all:function(){this.errors.length&&(B.Ovl.open({type:"hon-v3-upload-error",errors:this.errors,list_tpl:this.errors_tpl}),this.errors=[]),this.total_num=this.done_num=0},cancel:function(){B.Upload.Controller.cancel(),this.toggle_progress(!1),this.total_num=this.done_num=0}}),B.Ovl.HoN_v3_PromoPhotoImport=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_PromoPhotoImport",type:"hon-promo-photo-import",simple_close:!1,upload:null,init:function(){$super(this,arguments),this.upload=new B.HoN_v3.Upload(this._el)},destroy:function(){this.upload&&(this.upload.destroy(),this.upload=null),$super(this,arguments)}}),B.Ovl.HoN_v3_settings_confirm=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_settings_confirm",type:"hon-v3-settings-confirm",section_ref:null,form:null,init:function(){this.handle_errors_=this.handle_errors.bind(this);var e=$el.down(this._el,"form");this.form=new $u.Form(e,{ready:this.confirm_ready,handle_errors:this.handle_errors_,error_handler:new $u.FormErrorHandler.Modern(e)},this)},destroy:function(){this.handle_errors_=this.section_ref=null,this.form.destroy()},confirm_ready:function(e){var t=this.section_ref;this.close(),t.ready(e)},handle_errors:function(e){return"Hotornot.Settings.SectionErrors"==e.$gpb?(this.confirm_ready(e),void 0):(B.Captcha.reload_capcha(),$u.Form.prototype.handle_errors.call(this.form,e))}}),B.Ovl.HoN_v3_settings_confirm=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_new-settings_confirm",type:"hon-v3-new-settings-confirm",form_el:null,init:function(){this.form_el=$el.down(this._el,"form"),$e.add(this.form_el,"submit",this.submit,this)},destroy:function(){$e.del(this.form_el,"submit",this.submit,this)},submit:function(){this.close()}}),$u.CharCount||($u.CharCount=$class({el:null,elc:null,limit:0,isSoft:!1,constructor:function(e,t,s){this.params={warnCoefLevel:7},"string"==typeof e?(this.el=$(e),this.elc=$(e+"_count")):(this.el=e,this.elc=$el.down(e.parentNode,".can_enter")),this.limit=+t,this.el&&this.elc&&($e.add(this.el,"keyup",this.count,this),$e.add(this.el,"keydown",this.count,this),$e.add(this.el,"keypress",this.count,this),$e.add(this.el,"input",this.count_delayed,this),$e.add(this.el,"paste",this.count_delayed,this),$e.add(this.el,"mouseover",this.count_delayed,this),this.isSoft=s&&($config(this.params,s)||!0),this.count())},destroy:function(){$e.del(this.el,"keyup",this.count,this),$e.del(this.el,"keydown",this.count,this),$e.del(this.el,"keypress",this.count,this),$e.del(this.el,"input",this.count_delayed,this),$e.del(this.el,"paste",this.count_delayed,this),$e.del(this.el,"mouseover",this.count_delayed,this),this.timer&&this.timer.clear(),this.el=this.elc=this.timer=null,this.params=null},count_delayed:function(){return this.timer&&this.timer.clear(),this.timer=new $t(this.count,this,5),this.timer.set(),!0},count:function(){var e=this.el.value.length,t=this.limit-e,s=this.params.btn&&$(this.params.btn);return this.isSoft?0>t?(s.disabled=!0,$el.add(s,"disabled")):(s.disabled=!1,$el.del(s,"disabled"),t<this.limit/this.params.warnCoefLevel?$el.add(this.elc,"accent_red"):$el.del(this.elc,"accent_red")):0>t&&(this.el.value=this.el.value.substr(0,this.limit),t=0),this.elc.innerHTML=t,!0}})),B.Ovl.HoN_v3_abuse_base=$class(B.Ovl.View,{name:"Ovl.HoN_v3_abuse_base",MAX_CHARACTERS:255,textarea_el:null,form_el:null,char_count:null,init:function(){this.textarea_el=$el.down(this._el,".js-abuse-textarea"),this.$e=$e.on(".js-abuse-radio",this.click,this),this.form_el=$el.down(this._el,".js-abuse-form"),this.wrap_el=$el.down(this.form_el,".js-abuse-wrap"),$el.has(this.form_el,"no_autoloader")?$e.add(this.form_el,"submit",this.submit,this):this.form_el=null,this.textarea_el&&(this.char_count=new $u.CharCount(this.textarea_el.id,this.MAX_CHARACTERS))},destroy:function(){$e.un(this.$e),this.form_el&&($e.del(this.form_el,"submit",this.submit,this),this.form_el=null),this.textarea_el=this.wrap_el=null,this.char_count&&(this.char_count.destroy(),this.char_count=null)},click:function(e){return this.textarea_el&&this.textarea_el.setAttribute("placeholder",e.getAttribute("data-placeholder")),$el.tgl(this.textarea_el,"hidden","user_dont_like"==e.getAttribute("for")),!0},submit:function(){var e={type:this.form_el.getAttribute("data-abuse-type"),data:$r.serialize(this.form_el)};"photo"==e.type&&(e.url=this.form_el.action),B.HoN_v3.fire("abuse_submit",e),this.close()}}),B.Ovl.HoN_v3_abuse=new $class(B.Ovl.HoN_v3_abuse_base,{name:"Ovl.HoN_v3_abuse",type:"hon-v3-abuse"}),B.Ovl.HoN_v3_abuse_photo=new $class(B.Ovl.HoN_v3_abuse_base,{name:"Ovl.HoN_v3_abuse_photo",type:"hon-v3-abuse-photo"}),B.Ovl.HoN_v3_delete_profile=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_delete_profile",type:"hon-v3-delete-profile",delete_btn_el:null,reason_el:null,placeholders:null,required_value:"r_other",is_required:null,is_filled:!1,init:function(){this.delete_btn_el=$("delete_account_button"),this.reason_el=$("js-settings-reason"),this.placeholders={optional:this.reason_el.getAttribute("data-placeholder"),required:this.reason_el.placeholder},$e.add(this._form,"click",this.on_radio_click,this),$e.add(this.reason_el,"keyup",this.on_reason_input,this)},destroy:function(){$e.del(this.reason_el,"keyup",this.on_reason_input,this),$e.del(this._form,"click",this.on_radio_click,this),this.delete_btn_el=this.reason_el=this.placeholders=null},on_radio_click:function(e){return"LABEL"!=e.nodeName?!0:(e=$(e.htmlFor),"INPUT"!=e.nodeName||"radio"!=e.type?!0:(this.is_required=e.value==this.required_value,this.reason_el.placeholder=this.placeholders[this.is_required?"required":"optional"],this.update_button(),!0))},on_reason_input:function(){this.is_filled=""!=this.reason_el.value.replace(/^\s+|\s+$/gm,""),this.update_button()},update_button:function(){var e=this.delete_btn_el;this.is_required===!1||this.is_required&&this.is_filled?e.removeAttribute("disabled"):e.setAttribute("disabled","disabled")}}),B.Ovl.HoN_v3_delete_profile_done=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_delete_profile",type:"hon-v3-delete-profile-done",landing_url:null,_init:function(e,t){$super(this,arguments),this.landing_url=t.landing_url},destroy:function(){this.landing_url&&(window.location.href=this.landing_url)}}),B.HoN_v3.EmailSpamNotifyOvl||(B.HoN_v3.EmailSpamNotifyOvl={},function(){function e(e,t){return e.write('<div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Great! Please remember to open your email spam folder and mark your ').reference("PAGE_partner_name",t).write(' emails as \'not spam\'.</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Continue</span> <a href="').reference("turnon_url",t).write('" rel="').reference("rel",t).write('" class="b-link app"></a> </div> </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div>')}return $u.dust.register("account/popup.email-spam-notify",e),e}(),B.HoN_v3.EmailSpamNotifyOvl.View=$class(B.DustView,{template:"account/popup.email-spam-notify",setPartner:function(){return this.set("PAGE_partner_name",$l.get("partner","title"))},setUrl:function(e){return this.set("turnon_url",e)},setState:function(e){return this.set("rel",e)}}),B.HoN_v3.EmailSpamNotifyOvl.Controller=$class({constructor:function(e){$config(this,e)},destroy:function(){},render:function(){return(new B.HoN_v3.EmailSpamNotifyOvl.View).setUrl(this.continueState.url).setState(this.continueState.state).setPartner($l.get("partner","title"))}})),B.Ovl.HoN_v3_settings_confirm=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_spam_notify",type:"hon-v3-spam-notify",controller:null,init:function(){this.controller=new B.HoN_v3.EmailSpamNotifyOvl.Controller({continueState:this.continueState}),this._render(this.controller.render())},destroy:function(){this.controller.destroy(),this.controller=null}}),B.HoN_v3.EmailUnblockOvl||(B.HoN_v3.EmailUnblockOvl={},function(){function e(e,i){return e.section(i.get(["SUCCESS"],!1),i,{block:t},{}).write(" ").section(i.get(["NO"],!1),i,{block:s},{})}function t(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Success! Your email is now unblocked and you can go back to meeting new people.</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Continue</span> <a href="').reference("url",t).write('" class="b-link"></a> </div> </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div> ')}function s(e){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Sorry, we haven\'t received your confirmation email yet. Please wait a few minutes more, or check the details are correct and try again.</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Continue</span> <span class="b-link js-ovl-close"></span> </div> </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div> ')}return $u.dust.register("account/popup.cloud-email-unblock-result",e),e.s={SUCCESS:t,NO:s},e}(),B.HoN_v3.EmailUnblockOvl.View=$class(B.DustView,{template:"account/popup.cloud-email-unblock-result",setBlock:function(e){return this.set(e,!0)},setUrl:function(e){return this.set("url",e)}}),B.HoN_v3.EmailUnblockOvl.Controller=$class($u.Observable,{blockName:null,$r:null,continueState:null,constructor:function(e){$super(this,arguments),this.continueState=e.continueState,this.$r=new $gpb.Rpc($p.MessageType.SERVER_CONFIRM_YES_EMAIL_SENT).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,this.confirm,this).request()},destroy:function(){this.blockName=null,$super(this,arguments),this.$r.abort(),this.$r=null,this.continueState=null},confirm:function(e){this.blockName=e?"NO":"SUCCESS",this.fire("ready")},render:function(){return(new B.HoN_v3.EmailUnblockOvl.View).setBlock(this.blockName).setUrl(this.continueState.url)}})),B.Ovl.HoN_v3_settings_confirm=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_email_unblock",type:"hon-v3-email-unblock",controller:null,init:function(){this.controller=new B.HoN_v3.EmailUnblockOvl.Controller({continueState:this.continueState}),this.controller.on("ready",this.ready,this)},destroy:function(){this.controller.destroy(),this.controller=null},ready:function(){this._render(this.controller.render())}}),B.Ovl.HoN_v3_add_interest=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_add_interest",type:"hon-v3-add-interest",radios:null,init:function(){this.radios=$el.select(this._el,".radio");var e,t;for(e=0;e<this.radios.length;e++)t=this.radios[e],$e.add(t,"change",this.enable_form,this)},destroy:function(){this.enable_form(),this.clear_radio_events(),this.radios=null,$el.down(this._el,"button").setAttribute("disabled","disabled")},enable_form:function(){var e=$el.down(this._el,"button");e&&(e.disabled=!1),this.clear_radio_events()},clear_radio_events:function(){var e,t;for(e=0;e<this.radios.length;e++)t=this.radios[e],$e.del(t,"change",this.enable_form,this)}}),B.Ovl.HoN_v3_interests=new $class(B.Ovl.HoN_v3_notify_View,{name:"Ovl.HoN_v3_interests",type:"hon-v3-interests-cloud",init:function(){$super(this,arguments),B.fire("interests-refresh")}}),B.Ovl.EncountersFbReactivationBase=$class(B.Ovl.View,{name:"Ovl.EncountersFbReactivation",type:"encounters-fb-reactivation",simple_close:!1,fb_request_cfg:null,fb_dlg_id:"encounters_fb_reactivation",ok_dlg_id:"encounters_ok_reactivation",$e:null,init:function(e){$super(this,arguments),e.fb_dialog_param&&(this.fb_request_cfg=e.fb_dialog_param,$c.config.add(this.fb_dlg_id,this.fb_request_cfg),this.control=$c.get($el.down(document,".js-encounters-fb-dialog"),"fb-apprequest-dialog"),this.$e_fb=this.control.on({ready:this.close,cancel:this.close},this)),e.ok_dialog_param&&(this.ok_request_cfg=e.ok_dialog_param,$c.config.add(this.ok_dlg_id,this.ok_request_cfg),this.control=$c.get($el.down(document,".js-encounters-ok-dialog"),"ok-request-dialog"),this.$e_ok=this.control.on({stat_ready:this._stat_ready},this)),this.on_ovl_open()},destroy:function(e){this.on_ovl_close(e),this.fb_request_cfg&&($c.config.del(this.fb_dlg_id),this.control.un(this.$e_fb),this.control=null,this.fb_request_cfg=null),this.ok_request_cfg&&($c.config.del(this.ok_dlg_id),this.control.un(this.$e_ok),this.control=null,this.ok_request_cfg=null),$super(this,arguments)},_stat_ready:function(e){"base.Ovl"==e.$gpb?B.Ovl.open(e):this.close()},on_ovl_open:function(){this.fb_request_cfg&&this.fb_request_cfg.stat_url&&B.FbDialogStat.send(this.fb_request_cfg.stat_url,B.FbDialogStat.msg_open)},on_ovl_close:function(e){e&&this.fb_request_cfg&&this.fb_request_cfg.stat_url&&B.FbDialogStat.send(this.fb_request_cfg.stat_url,B.FbDialogStat.msg_cancel)}}),B.Ovl.EncountersFbReactivation=new B.Ovl.EncountersFbReactivationBase,B.Ovl.EncountersFbReactivationRedirect=new $class(B.Ovl.EncountersFbReactivationBase,{name:"Ovl.EncountersFbReactivation",type:"encounters-fb-reactivation-redirect",init:function(e){$super(this,arguments),e.mm_replace_users_url&&(this.replace_users_request=new $r(e.mm_replace_users_url,{ready:this.on_users_ready},this))},destroy:function(){this.replace_users_request&&(this.replace_users_request.abort(),this.replace_users_request=null),$super(this,arguments)},on_users_ready:function(e){B.fire("mm:replace_users",e.users)}}),B.Ovl.HoN_v3_EncountersFbReactivationView=$class(B.Ovl.EncountersFbReactivationBase,{name:"Ovl.HoN_v3_EncountersFbReactivationView",type:null,simple_close:!1,fb_dlg_id:"hon_encounters_fb_reactivation"}),B.Ovl.HoN_v3_EncountersFbReactivation=new $class(B.Ovl.HoN_v3_EncountersFbReactivationView,{name:"Ovl.HoN_v3_EncountersFbReactivation",type:"hon-v3-encounters-fb-reactivation"}),B.Ovl.HoN_v3_EncountersFbReactivationRedirect=new $class(B.Ovl.HoN_v3_EncountersFbReactivationView,{name:"Ovl.HoN_v3_EncountersFbReactivation",type:"hon-v3-encounters-fb-reactivation-redirect",init:function(e){$super(this,arguments),e.mm_replace_users_url&&(this.replace_users_request=new $r(e.mm_replace_users_url,{ready:this.on_users_ready},this))},destroy:function(){this.replace_users_request&&(this.replace_users_request.abort(),this.replace_users_request=null),$super(this,arguments)},on_users_ready:function(e){B.fire("mm:replace_users",e.users)}}),B.Ovl.HoN_v3_EncountersFbReactivationFeedback=new $class(B.Ovl.HoN_v3_EncountersFbReactivationView,{name:"Ovl.HoN_v3_EncountersFbReactivationFeedback",type:"hon-v3-encounters-fb-reactivation-feedback",close:function(e){B.fire("fb-reactivation:close",e),$super(this,arguments)}}),B.Ovl.HotlistOkRiseup=new $class(B.Ovl.View,{name:"Ovl.HotlistOkRiseup",type:"hon-v3-ok-hotlist-riseup",config:null,id:"hotlist_ok_riseup",control:null,$e:null,init:function(e){$super(this,arguments),this.config=e.ok_dialog_param,!this.config;var t=$el.down(document,".js-ok-riseup-dialog");t&&($c.config.add(this.id,this.config),this.control=$c.get(t,"ok-request-dialog"),this.$e=this.control.on({stat_ready:this.close},this))},destroy:function(){$c.config.del(this.id),this.control&&(this.control.un(this.$e),this.control=null),this.config=null}}),$l.register({section:"common",lang:"en-us",translations:{year:{singular:["year"],plural:["years"]},month:{singular:["month"],plural:["months"]},week:{singular:["week"],plural:["weeks"]},day:{singular:["day"],plural:["days"]},hour:{singular:["hour"],plural:["hours"]},minute:{singular:["minute"],plural:["minutes"]},second:{singular:["second"],plural:["seconds"]},user:{singular:["member"],plural:["members"]},new_user:{singular:["new member"],plural:["new members"]},symbol:{plural:["symbols"],singular:["symbol"]},user_male:{singular:["user"],plural:["users"]},new_user_male:{singular:["new user"],plural:["new users"]},user_female:{singular:["user"],plural:["users"]},new_user_female:{singular:["new user"],plural:["new users"]},person:{singular:["person"],plural:["people"]},other_person:{singular:["other person"],plural:["other people"]},people:{singular:["person"],plural:["people"]},new_person:{singular:["new person"],plural:["new people"]},unknown:{singular:["unknown person"],plural:["unknown people"]},man:{singular:["man"],plural:["men"]},guy:{singular:["guy"],plural:["guys"]},other_guy:{singular:["other guy"],plural:["other guys"]},new_guy:{singular:["new guy"],plural:["new guys"]},woman:{singular:["woman"],plural:["women"]},girl:{singular:["girl"],plural:["girls"]},other_girl:{singular:["other girl"],plural:["other girls"]},new_girl:{singular:["new girl"],plural:["new girls"]},admirer:{singular:["admirer"],plural:["admirer"]},contacts:{singular:["contact"],plural:["contacts"]},new_contact:{singular:["new contact"],plural:["new contacts"]},visitors:{singular:["visitor"],plural:["visitors"]},new_visitors:{singular:["new visitor"],plural:["new visitors"]},friend:{singular:["friend"],plural:["friends"]},friend_male:{singular:["friend"],plural:["friends"]},friend_female:{singular:["friend"],plural:["friends"]},friend_connection:{singular:["shared friend"],plural:["shared friends"]},friend_connection_uc:{singular:["SHARED FRIEND"],plural:["SHARED FRIENDS"]},common_friend:{plural:["common friends"],singular:["common friend"]},fans:{singular:["Fan"],plural:["Fans"]},new_fans:{singular:["new Fan"],plural:["new Fans"]},favorite:{singular:["favorite"],plural:["favorites"]},new_favorite:{singular:["new favorite"],plural:["new favorites"]},messages:{singular:["message"],plural:["messages"]},new_message:{singular:["new message"],plural:["new messages"]},unread_message:{singular:["unread message"],plural:["unread messages"]},comments:{singular:["comment"],plural:["comments"]},new_comment:{singular:["new comment"],plural:["new comments"]},"comment threads":{singular:["comment thread"],plural:["comment threads"]},secret_comments:{plural:["secret comments"],singular:["secret comment"]},reply:{singular:["reply"],plural:["replies"]},new_reply:{singular:["new reply"],plural:["new replies"]},vote:{singular:["vote"],plural:["votes"]},extra_vote:{plural:["extra votes"],singular:["extra vote"]},question:{singular:["question"],plural:["questions"]},album:{singular:["album"],plural:["albums"]},photo:{singular:["photo"],plural:["photos"]},photo_uc_first:{plural:["Photos"],singular:["Photo"]},new_photo:{singular:["new photo"],plural:["new photos"]},personal_photo:{singular:["personal photo"],plural:["personal photos"]},private_photo:{singular:["private photo"],plural:["private photos"]},video:{singular:["video"],plural:["videos"]},new_likes:{singular:["new like"],plural:["new likes"]},mutual_attractions:{singular:["mutual attraction"],plural:["mutual attractions"]},mutual_likes:{singular:["mutual likes"],plural:["mutual likes"]},new_mutual_attractions:{singular:["new mutual attraction"],plural:["new mutual attractions"]},connections:{singular:["connection"],plural:["connections"]},new_connections:{singular:["new connection"],plural:["new connections"]},priority_display:{singular:["priority display"],plural:["priority displays"]},credits:{singular:["credit"],plural:["credits"]},gift:{singular:["gift"],plural:["gifts"]},point:{singular:["point"],plural:["points"]},interest:{singular:["interest"],plural:["interests"]},interest_uc:{singular:["INTEREST"],plural:["INTERESTS"]},common_interest:{singular:["common interest"],plural:["common interests"]},common_interest_uc_first:{plural:["Common interests"],singular:["Common interest"]},common_interest_uc:{singular:["COMMON INTEREST"],plural:["COMMON INTERESTS"]},answer:{singular:["answer"],plural:["answers"]},new_answer:{singular:["new answer"],plural:["new answers"]},million:{singular:["million"],plural:["million"]},more_options:{singular:["more option"],plural:["more options"]},option:{plural:["options"],singular:["option"]},new_profile_visitors:{singular:["new profile visitor"],plural:["new profile visitors"]},every_x_months:{singular:["every month"],plural:["every X months"]},every_x_weeks:{singular:["every week"],plural:["every X weeks"]},every_x_days:{singular:["every day"],plural:["every X days"]},new_friends:{singular:["new friend"],plural:["new friends"]},new_friends_male:{singular:["new friend"],plural:["new friends"]},new_friends_female:{singular:["new friend"],plural:["new friends"]},payment_method_PayPal:{singular:["PayPal"],plural:["PayPal"]},payment_method_CreditCard:{singular:["Credit card"],plural:["Credit cards"]},payment_method_CreditCardShort:{singular:["Card"],plural:["Cards"]},payment_method_Ideal:{singular:["Ideal"],plural:["Ideal"]},payment_method_Boleto:{singular:["Boleto"],plural:["Boleto"]},payment_method_directEbanking:{singular:["directEbanking"],plural:["directEbanking"]},payment_method_Suomen:{singular:["Suomenverkumakste"],plural:["Suomenverkumakste"]},payment_method_DineroMail:{singular:["DineroMail"],plural:["DineroMail"]},payment_method_DotPay:{singular:["DotPay"],plural:["DotPay"]},payment_method_GoogleWallet:{singular:["Google Wallet"],plural:["Google Wallet"]},payment_method_AppWorld:{singular:["App World"],plural:["App World"]},payment_method_text:{singular:["text"],plural:["texts"]},payment_method_Qiwi:{singular:["Qiwi"],plural:["Qiwi"]},payment_method_WebPayment:{singular:["Web payment"],plural:["Web payments"]},payment_method_Mobile:{singular:["Mobile"],plural:["Mobiles"]},payment_method_GiroPay:{singular:["GiroPay"],plural:["GiroPay"]},admirer_male:{singular:["admirer"],plural:["admirers"]},new_admirer_male:{singular:["new admirer"],plural:["new admirers"]},admirer_female:{singular:["admirer"],plural:["admirers"]},new_admirer_female:{singular:["new admirer"],plural:["new admirers"]},times:{singular:["time"],plural:["times"]},your_friend_uc_br:{singular:["YOUR<br>FRIEND"],plural:["YOUR<br>FRIENDS"],_blocked:1},shared_friend_uc_br:{singular:["SHARED<br>FRIEND"],plural:["SHARED<br>FRIENDS"]},shared_friend_br:{plural:["common<br>friends"],singular:["common<br>friend"]},shared_friend:{singular:["shared friend"],plural:["shared friends"]},shared_friend_uc_first:{plural:["Common friends"],singular:["Common friend"]},shared_friend_uc:{singular:["SHARED FRIEND"],plural:["SHARED FRIENDS"]},hottest_friend_uc_br:{plural:["HOTTEST<br>FRIENDS"],singular:["HOTTEST<br>FRIEND"]},hottest_friend_br:{plural:["hottest<br>friends"],singular:["hottest<br>friend"]},hottest_friend:{plural:["hottest friends"],singular:["hottest friend"]},hottest_friend_uc:{plural:["HOTTEST FRIENDS"],singular:["HOTTEST FRIEND"]},your_interest_uc_br:{singular:["YOUR<br>INTEREST"],plural:["YOUR<br>INTERESTS"],_blocked:1},interest_in_common:{singular:["interest in common"],plural:["interests in common"]},more_interests:{plural:["more interests"],singular:["more interest"]},interest_in_common_uc_br:{singular:["INTEREST<br>IN COMMON"],plural:["INTERESTS<br>IN COMMON"]},interest_in_common_br:{plural:["interests<br>in common"],singular:["interest<br>in common"]},interest_in_common_uc:{singular:["INTEREST IN COMMON"],plural:["INTERESTS IN COMMON"]},secret_comments_uc_br:{plural:["SECRET<br>COMMENTS"],singular:["SECRET<br>COMMENT"]},secret_comments_br:{plural:["secret<br>comments"],singular:["secret<br>comment"]},thing_in_common:{singular:["thing in common"],plural:["things in common"]},string:{singular:["translation"],plural:["translations"]},phrase:{singular:["phrase"],plural:["phrases"]},translator:{singular:["translator"],plural:["translators"]},member:{singular:["member"],plural:["members"]},guys_and_girls:{singular:["guy and girl"],plural:["guys and girls"]},country:{singular:["country"],plural:["countries"]},region:{singular:["region"],plural:["regions"]},city:{singular:["city"],plural:["cities"]},slot:{singular:["slot"],plural:["slots"]},additional_feature:{singular:["additional feature"],plural:["additional features"]},matches:{singular:["match"],plural:["matches"]},new_match:{singular:["new match"],plural:["new matches"]},rated:{singular:["rated"],plural:["rated"]},Facebook:{singular:["Facebook"],plural:["Facebook"]},Twitter:{singular:["Twitter"],plural:["Twitter"]},Odnoklassniki:{singular:["Odnoklassniki"],plural:["Odnoklassniki"]},Vkontakte:{singular:["Vkontakte"],plural:["Vkontakte"]},miles:{singular:["mile"],plural:["miles"]},feet:{plural:["feet"],singular:["foot"]},yards:{plural:["yards"],singular:["yard"]},awards:{singular:["award"],plural:["awards"]},user_profiles:{plural:["user profiles"],singular:["user profile"]},translations:{plural:["translations"],singular:["translation"]},celebrities:{plural:["celebrities"],singular:["celebrity"]},characters:{plural:["characters"],singular:["character"]},results:{plural:["results"],singular:["result"]},liked:{plural:["liked"],singular:["liked"]},stickers:{plural:["stickers"],singular:["sticker"]},meters:{plural:["meters"],singular:["meter"]},chat:{plural:["chats"],singular:["chat"]},new_chat:{plural:["new chats"],singular:["new chat"]},follower:{plural:["followers"],singular:["follower"]},display:{plural:["displays"],singular:["display"]},new_bee_nounless:{plural:["new"],singular:["new"]},new_male_nounless:{plural:["new"],singular:["new"]},new_female_nounless:{plural:["new"],singular:["new"]},places:{plural:["places"],singular:["place"]},common_places:{plural:["common places"],singular:["common place"]},pound:{plural:["lbs"],singular:["lbs"]},digit:{plural:["digits"],singular:["digit"]}}}),B.HoN_v3.BaseViewController=$class({getClickHandlers:null,container:null,$e:null,_observer:null,constructor:function(e){this.container=e,this.getClickHandlers&&(this.$e=$e.on(this.getClickHandlers(),this)),this._observer=new $u.Observable
},destroy:function(){this.container=null,this.$e&&($e.un(this.$e),this.$e=null),this._observer.destroy(),this._observer=null},on:function(){return this._observer.on.apply(this._observer,arguments),this},un:function(){return this._observer.un.apply(this._observer,arguments),this},fire:function(){return this._observer.fire.apply(this._observer,arguments),this},getElement:function(e){return $el.down(this.container,e)}}),B.HoN_v3.VerifyByCall={},B.HoN_v3.VerifyByCall.ViewController=$class(B.HoN_v3.BaseViewController,{BACKSPACE_KEY:8,TAB_KEY:9,ENTER_KEY:13,ONE_SECOND:1e3,secondsRemaining:null,digitEls:null,$e:null,constructor:function(e){$super(this,arguments),this.digitEls=$el.select(e,".js-digit"),this.$e=[];for(var t=0;t<this.digitEls.length;t++)this.digitEls[t].setAttribute("data-index",t),$e.add(this.digitEls[t],"input",this.onInput,this),$e.add(this.digitEls[t],"keydown",this.onKeyDown,this);this.digitEls[0].focus(),this.secondsRemaining=this.getElement(".js-left-num").getAttribute("data-seconds-left"),this.secondsRemaining>0?(this.timer=new $t(this.onTimerTick,this),this.timer.set(this.ONE_SECOND)):this.showPinBlock()},onInput:function(e){var t=parseInt(e.getAttribute("data-index"),10),s=this.digitEls[t+1],i=this.getElement(".js-captcha-input");e.value=e.value.replace(/[^0-9]/,""),e.value&&(s?s.focus():i&&i.focus()),this.refreshHiddenCode()},onKeyDown:function(e){var t=parseInt(e.getAttribute("data-index"),10),s=this.digitEls[t-1],i=$e.key($e.e);return i==this.BACKSPACE_KEY?(e.selectionStart>0||e.selectionEnd>0?e.value="":s&&(s.value=""),s&&s.focus(),!1):!0},onTimerTick:function(){this.secondsRemaining--,this.secondsRemaining>0?(this.getElement(".js-left-num").textContent=this.secondsRemaining,this.getElement(".js-left-seconds").textContent=$l.get_num_dependent("second",this.secondsRemaining),this.timer.set(this.ONE_SECOND)):this.showPinBlock()},showPinBlock:function(){var e=this.getElement(".js-sms-hint"),t=this.getElement(".js-call-hint");$el.tgl(e,"hidden",!1),$el.tgl(t,"hidden",!0)},refreshHiddenCode:function(){this.getElement(".js-pin-code").value=this.digitEls.map(this.getElValue).join("")},getElValue:function(e){return e.value},destroy:function(){for(var e=this.$e.length-1;e>=0;e--)$e.del(this.digitEls[e],"keydown",this.onInput,this),$e.del(this.digitEls[e],"keydown",this.onKeyDown,this);this.timer&&(this.timer.clear(),this.timer=null),this.$e=null,this.digitEls=null,this.secondsRemaining=null}}),B.Ovl.HoN_v3_VerifyView=$class(B.Ovl.View,{name:"Ovl.HoN_v3_VerifyView",type:null,tpl:"{html}",destroy:function(e){return e?!0:$super(this,arguments)}}),B.Ovl.HoN_v3_Verify=new $class(B.Ovl.HoN_v3_VerifyView,{name:"Ovl.HoN_v3_Verify",type:"hon-v3-verify",done_ovl:null,viewController:null,init:function(e){$super(this,arguments),this.$h=B.HoN_v3.on("account:verified",this.on_verified,this),$el.down(this._el,".js-digit")&&(this.viewController=new B.HoN_v3.VerifyByCall.ViewController(this._el)),this.done_ovl=e.done_ovl},destroy:function(){return B.HoN_v3.un(this.$h),this.done_ovl=null,this.viewController&&(this.viewController.destroy(),this.viewController=null),$super(this,arguments)},on_verified:function(){B.Ovl.open(this.done_ovl)}}),B.Ovl.HoN_v3_VerifyRedirect=new $class(B.Ovl.HoN_v3_VerifyView,{name:"Ovl.HoN_v3_VerifyRedirect",type:"hon-v3-verify-redirect",tpl:'<div class="confirmation-wrap"><div class="confirmation">{html}</div><span class="middle"></span></div><span class="middle"></span>',timer:null,redirect:null,init:function(e){$super(this,arguments),this.redirect=e.redirect,this.timer=new $t(this._redirect,this,1100),this.timer.set()},destroy:function(){var e=$super(this,arguments);return e||(this.redirect=null,this.timer.clear(),this.timer=null),e},_redirect:function(){B.App.app_link(this.redirect.state,this.redirect.url)}}),B.Ovl.HoN_v3_share_photo=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_share_photo",type:"hon-v3-share-photo",init:function(){this.$e=$e.on({".js-share-photo-window":this.open_window},this)},destroy:function(){$e.un(this.$e)},open_window:function(e){var t=e.getAttribute("data-share-url");t&&$u.wopen(t,"share_photo",650,550),B.Ovl.close()}}),B.Ovl.HoN_v3_FiveStarFeedback=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_FiveStarFeedback",type:"hon-v3-five-star-feedback",close_url:null,submit_button:null,textarea:null,timer:null,init:function(e){this.close_url=e.close_url,this.submit_button=$el.down(this._el,".js-five-star-feedback-submit-button"),this.textarea=$el.down(this._el,".js-five-star-feedback-textarea"),this.timer=new $t(this.update_submit_state,this,250),this.update_submit_state()},destroy:function(e){e&&new $r(this.close_url),this.close_url=null,this.timer.clear(),this.timer=null,this.submit_button=this.textarea=null},update_submit_state:function(){this.submit_button.disabled=!this.textarea.value,this.timer.set()}}),B.Ovl.HoN_v3_Likes=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_Likes",type:"hon-v3-likes-ovl",init:function(e){$super(this,arguments),e.five_stars_promo_stats_url&&(this.stat_url=e.five_stars_promo_stats_url,this.$e=$e.on({".js-five-stars-stat":this.send_stats},this)),e.vars&&e.vars.LikesCfg&&B.fire("likes:add_config",e.vars.LikesCfg.configs)},send_stats:function(){return new $r(this.stat_url,{method:"post",params:{trustpilot_click:1}},this),!0},destroy:function(){$super(this,arguments),this.$e&&(this.stat_url=null,$e.un(this.$e))}}),$u.yt||($u.yt=new $class({script_url:"//www.youtube.com/player_api",api_ready_callback:"onYouTubePlayerAPIReady",inited:!1,loading:!1,queue:null,constructor:function(){this.queue=[]},init:function(){this.inited||this.loading||(this.loading=!0,window[this.api_ready_callback]=this.api_ready.bind(this),$r.loader.js(this.script_url))},api_ready:function(){"ie8"!=$u.ua?delete window[this.api_ready_callback]:window[this.api_ready_callback]=void 0,this.loading=!1,this.inited=!0;for(var e=0;e<this.queue.length;e++)this.queue[e][0].call(this.queue[e][1]);this.queue=null},call:function(e,t){this.inited?e.call(t):(this.queue.push([e,t]),this.loading||this.init())}})),$u.gplus=new $class({script_url:"//apis.google.com/js/plus.js",api_ready_callback:"onGooglePlusAPIReady",inited:!1,loading:!1,queue:[],init:function(){if(!this.inited&&!this.loading){var e=$vars.GAPI&&$vars.GAPI.cfg.lang_code||"en-US";window.___gcfg={lang:e,parsetags:"explicit"},window[this.api_ready_callback]=this.api_ready.bind(this),$r.loader.js(this.script_url+"?onload="+this.api_ready_callback),this.loading=!0}},api_ready:function(){"ie8"!=$u.ua?delete window[this.api_ready_callback]:window[this.api_ready_callback]=void 0,this.loading=!1,this.inited=!0;for(var e=0;e<this.queue.length;e++)this.queue[e][0].call(this.queue[e][1]);this.queue=null},call:function(e,t){this.inited?e.call(t):(this.loading||this.init(),"ie8"!=$u.ua?this.queue.push([e,t]):(this.queue=[],this.queue.push([e,t])))}}),B.YoutubePlayer||(B.YoutubePlayer=$class($u.Observable,{wrapper:null,container_id:"",autoplay:!1,external_id:"",stats_url:"",video_quality:"hd720",width:"100%",height:null,subscribe_channel:"badoo",disable_fullscreen:!1,from_splash:!1,subscribe_button_el:null,_player:null,_ready:!1,constructor:function(e){$super(this,arguments),$config(this,e),$u.yt.call(this.init,this)},init:function(){this.on_ready_b=this.on_ready.bind(this),this.on_state_change_b=this.on_state_change.bind(this),this._player=new YT.Player(this.container_id,{height:this.height,width:this.width,videoId:this.external_id,events:{onReady:this.on_ready_b,onStateChange:this.on_state_change_b},playerVars:{rel:"0",vq:this.video_quality,wmode:"opaque",showinfo:0,fs:this.disable_fullscreen?0:1}}),$e.add(document,"mozfullscreenchange",this.on_fullscreen,this),this.wrapper&&($e.add(this.wrapper,"click",this.on_click,this),this.subscribe_button_el=$el.down(this.wrapper,".js-youtube-btn")),this.subscribe_button_el&&$u.gplus.call(this.create_subscribe_button,this),this.from_splash||this.send_stats("open")},create_subscribe_button:function(){gapi.ytsubscribe.render(this.subscribe_button_el,{channel:this.subscribe_channel})},destroy:function(){if(this._ready){this._ready=!1;try{this._player.stopVideo(),this._player.clearVideo(),this._player.removeEventListener("onReady",this.on_ready_b),this._player.removeEventListener("onStateChange",this.on_state_change_b)}catch(e){}}$e.del(document,"mozfullscreenchange",this.on_fullscreen,this),this.wrapper&&$e.del(this.wrapper,"click",this.on_click,this),this._player=this.subscribe_button_el=this.wrapper=this.stats_request=this.on_ready_b=this.on_state_change_b=null,$super(this,arguments)},on_ready:function(){this._player&&(this._ready=!0,this.autoplay&&this._player.playVideo(),this.fire("ready"))},on_state_change:function(e){if(this._player){var t;switch(e.data){case YT.PlayerState.PLAYING:t="start";break;case YT.PlayerState.ENDED:t="end",this._toggle_finished(!0);break;default:return}this.send_stats(t),this.fire("state_change",t)}},on_click:function(e){switch(!0){case!!$el.up(e,".js-video-share"):e=$el.up(e,".js-video-share");case $el.has(e,"js-video-share"):this._share(e);break;case $el.has(e,"js-video-replay"):this.replay();break;case $el.has(e,"js-video-reset"):this.reset();break;default:return!0}},on_share:function(){this._set_sharing(!1),this.fire("share_end")},on_fullscreen:function(){var e=$e.e.target.mozFullScreen;this._tgl_fullscreen(e),this.fire("fullscreen",e)},_tgl_fullscreen:function(e){$el.tgl(document.body,"fullscreen",e)},start:function(){this._player.playVideo()},pause:function(){this._player.pauseVideo()},stop:function(){this._player.stopVideo()},replay:function(){this._toggle_finished(!1),this._player.playVideo()},reset:function(){this._toggle_finished(!1)},send_stats:function(e,t){this.stats_url&&(this.stats_request=new $r(this.stats_url,{params:{action:e,extra:t}}))},_share:function(e){this.send_stats("share",e.getAttribute("data-share")),this._set_sharing(!0),window.open(e.href,"VideoSharing","toolbar=no,width=650,height=550")},_set_sharing:function(e){$el.tgl(document.body,"ovl-opened",e),e?($e.add(window,"focus",this.on_share,this),this.fire("share_start")):$e.del(window,"focus",this.on_share,this)},_toggle_finished:function(e){$el.tgl(this.wrapper,"finished",e)}})),$u.VideoSplash||($u.VideoSplash=$class({name:"VideoSplash",wrap:null,callback:null,scope:null,autoplay:null,stats_url:null,el_splash_link:null,el_splash:null,$e:null,constructor:function(e){this.wrap=e.wrap,this.callback=e.callback,this.scope=e.scope,this.autoplay=e.autoplay,this.stats_url=e.stats_url,this.el_splash_link=$el.down(this.wrap,".js-video-splash-link"),this.el_splash=$el.up(this.el_splash_link,".js-video-splash"),this.$e=$e.on({".js-video-splash-link":this.click},this),this.send_stats()},destroy:function(){this.$e&&($e.un(this.$e),this.$e=null),this.wrap=null,this.callback=null,this.scope=null,this.autoplay=null,this.stats_url=null,this.el_splash_link=null,this.el_splash=null},click:function(){$el.add(this.el_splash,"invisible"),this.callback.call(this.scope,this.autoplay,!0)},send_stats:function(){this.stats_url&&new $r(this.stats_url,{params:{action:"open"}})}})),$u.Stickers||($u.Stickers=$class({name:"Stickers",reopen_url:null,el_packs:null,$ct:null,$e:null,$B:null,constructor:function(e){this.el_packs=$el.select(e.wrap,".js-stickers-pack"),this.reopen_url=e.reopen_url,this.$ct=$r.comet.on({"stickers:update":this.update},this),this.reopen_url&&(this.$e=$e.on({".js-buy-stickers":this.save},this)),this.$B=B.on({"credits:update_amount":this.reload},this)},destroy:function(){this.$ct&&($r.comet.un(this.$ct),this.$ct=null),this.$e&&($e.un(this.$e),this.$e=null),this.$B&&(B.un(this.$B),this.$B=null),this.el_packs=null},update:function(e){if(e){var t,s;for(s=0;s<e.update.length;s++)t=e.update[s],this.unlock(t)}},unlock:function(e){var t,s,i;for(t=0;t<this.el_packs.length;t++)s=this.el_packs[t],i=s.getAttribute("data-id"),e==i&&$el.add(s,"sticker-offer--bought")},save:function(e){$u.storage.setItem("bd_whatsnew_url",this.reopen_url),this.open_billing(e)},open_billing:function(e){var t=e.getAttribute("data-ovl-type"),s=e.getAttribute("data-ovl-url");B.Ovl.open({type:t,url:s})},reload:function(){B.Ovl.open({type:"whats-new-stickers",url:this.reopen_url})}})),B.Ovl.WhatsNewBase=$class(B.Ovl.View,{name:"Ovl.WhatsNew",type:"whats-new",simple_close:!1,list:null,feature_id:null,stats_url_tpl:null,is_news:!1,is_video:!1,is_stickers:!1,splash:null,player:null,video_config:null,stickers:null,coment_silence:!0,wrap_el:null,title_el:null,stats_request:null,transitionend_supported:!1,init:function(e){$super(this,arguments),$config(this,e),this.coment_silence&&B.fire("silence:on"),this.$e=$e.on({"* .js-whats-new-show-by-id":this.on_show_by_id,".js-whats-new-prev":this.on_prev,".js-whats-new-next":this.on_next},this),this.wrap_el=$el.down(this._el,".js-whats-new-wrap"),this.title_el=$el.down(this._el,".js-whats-new-title"),this.transitionend_supported=$e.supported("transitionend"),this.list[this.get_index_by_id(this.feature_id)].displayed=!0,this.render(this.feature_id),this.transitionend_supported&&this.render_finish()},destroy:function(){return $e.un(this.$e),$e.del(this.wrap_el,"transitionend",this.render_finish,this),this.is_news=!1,this.is_video=!1,this.is_stickers=!1,this.wrap_el=null,this.title_el=null,this.splash=null,this.stats_request&&(this.stats_request.abort(),this.stats_request=null),this.coment_silence&&B.fire("silence:off"),this.destroy_video(),this.destroy_stickers(),$super(this,arguments)},on_prev:function(){this.show_next_prev(-1)},on_next:function(){this.show_next_prev(1)},on_show_by_id:function(e){var t=+e.getAttribute("data-feature-id");t&&this.render(t)},show_next_prev:function(e){var t=this.get_index_by_id(this.feature_id)+e,s=this.list[t];s||(s=e>0?this.list[0]:this.list[this.list.length-1]),this.render(s.id)},render:function(e){this.feature_id=e;var t=this.list[this.get_index_by_id(e)],s=t.feature_html&&t.feature_html.html,i=t.feature_video&&t.feature_video.promo_video_cfg.block_html,o=t.feature_stickers&&t.feature_stickers.html;s&&(this.html=s),i&&(this.html=i),o&&(this.html=o),this.is_news=!!s,this.is_video=!!i,this.is_stickers=!!o,$el.dom.html(this.title_el,t.title),this.transitionend_supported?(this.toggle_transition(!0),$e.add(this.wrap_el,"transitionend",this.render_finish,this)):this.render_finish(),t.displayed||(this.send_stats(e),t.displayed=!0)},render_finish:function(){this.destroy_player(),$e.del(this.wrap_el,"transitionend",this.render_finish,this),$el.dom.html(this.wrap_el,this.html),this.toggle_transition(!1),this.is_video?this.create_video():this.destroy_video(),this.is_stickers?this.create_stickers():this.destroy_stickers()},toggle_transition:function(e){$el.tgl(this.wrap_el,"invisible",e)},send_stats:function(e){var t=$u.tpl(this.stats_url_tpl,{id:e});this.stats_request=new $r(t)},get_index_by_id:function(e){for(var t=0;t<this.list.length;t++)if(this.list[t].id===e)return t},create_video:function(){var e=this.list[this.get_index_by_id(this.feature_id)];this.video_config=e.feature_video.promo_video_cfg,this.video_config.splash_screen?this.create_splash():this.create_player()},destroy_video:function(){this.video_config&&this.video_config.splash_screen?this.destroy_splash():this.destroy_player()},create_splash:function(){this.splash=new $u.VideoSplash({wrap:document,callback:this.create_player,scope:this,autoplay:!0,stats_url:this.video_config.stats_url})},destroy_splash:function(){this.splash&&(this.splash.destroy(),this.splash=null)},create_player:function(e,t){var s={wrapper:$("video-wrap"),container_id:"player",external_id:this.video_config.external_id,stats_url:this.video_config.stats_url,autoplay:e?1:0,from_splash:t?!0:!1,disable_fullscreen:this.video_config.disable_fullscreen};this.player=new B.YoutubePlayer(s)},destroy_player:function(){this.player&&(this.player.destroy(),this.player=null)},create_stickers:function(){var e=this.list[this.get_index_by_id(this.feature_id)],t=e.feature_stickers.reopen_url;this.stickers=new $u.Stickers({wrap:$el.down(this._el,".js-whats-new-wrap"),reopen_url:t})},destroy_stickers:function(){this.stickers&&(this.stickers.destroy(),this.stickers=null)}}),B.Ovl.WhatsNew=new B.Ovl.WhatsNewBase,B.Ovl.HoN_v3_WhatsNew=new $class(B.Ovl.WhatsNewBase,{name:"Ovl.HoN_v3_WhatsNew",type:"hon-v3-whats-new",coment_silence:!1}),B.FbPermissionsPromo||(B.FbPermissionsPromo=new $class({name:"FbPermissionsPromo",$e:null,constructor:function(){B.on({"app:init":this.init},this),this.$e=$e.on(".js-fbsession",this.safe_get_login_status,this)},destroy:function(){$e.un(this.$e),this.$e=null},init:function(){$u.fb.init()},safe_get_login_status:function(){$u.fb.call(this.get_login_status,this)},get_login_status:function(){FB.getLoginStatus(this.get_login_status_ready.bind(this))},get_login_status_ready:function(e){B.FbPermissionsPromo.result=e}})),B.Ovl.FbPermissionsBase=$class(B.Ovl.View,{name:"Ovl.FbPermissionsBase",type:"fb-permissions-base",$e:null,$el:null,watch_$t:null,init:function(){$super(this,arguments),this.$e=$e.on({".js-fb-permissions-switcher":this.open_popup},this),this.watch_$t=new $t(this._check,this,500)},open_popup:function(e){var t=e.getAttribute("data-url");return this.wnd=window.open(t,"auth","width=750,height=600"),this.watch_$t.set(),!0},_check:function(){this.wnd.closed?(this.wnd=null,this._wnd_closed()):this.watch_$t.set()},_wnd_closed:function(){B.FbPermissionsPromo.redirecting||($("fbconnect-switcher").checked=!1)},destroy:function(){$e.un(this.$e),this.$e=this.$el=null,this.watch_$t.clear(),$super(this,arguments)}}),B.Ovl.FbPermissions=new $class(B.Ovl.FbPermissionsBase,{name:"Ovl.FbPermissions",type:"fb-permissions",init:function(){$super(this,arguments),FB.XFBML.parse(this._el)}}),B.Ovl.WhatsNewStickersBase=$class(B.Ovl.View,{name:"Ovl.WhatsNewStickers",type:"whats-new-stickers",stickers:null,coment_silence:!0,init:function(e){this.coment_silence&&B.fire("silence:on"),this.stickers=new $u.Stickers({wrap:this._el,reopen_url:e.url})},destroy:function(){this.stickers&&(this.stickers.destroy(),this.stickers=null),this.coment_silence&&B.fire("silence:off")}}),B.Ovl.WhatsNewStickers=new $class(B.Ovl.WhatsNewStickersBase),B.Ovl.HoN_v3_WhatsNewStickers=new $class(B.Ovl.WhatsNewStickersBase,{name:"Ovl.HoN_v3_WhatsNewStickers",type:"whats-new-stickers",coment_silence:!1}),B.Ovl.HoN_v3_RushHour=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_RushHour",type:"hon-v3-rush-hour",init:function(){$super(this,arguments),this.$e=$e.on(".js-rush-restart",this.play_again,this)},close:function(){$super(this,arguments),$e.un(this.$e)},play_again:function(){B.Encounters.fire("RushHour:restart",!1),this.close()}}),B.FbUiDialogView||(B.FbAuthPopup||(B.FbAuthPopup=new $class($u.Observable,{name:"FbAuthPopup",constructor:function(){$super(this,arguments),this.watch_$t=new $t(this._check,this,500)},_check:function(){this.wnd.closed?(this.wnd=null,this.fire("cancel")):this.watch_$t.set()},in_progress:function(){return null!=this.wnd},auth:function(e){if("FB.FacebookAuthConfig"!=e.$gpb)throw"cfg.$gpb not exist";this.wnd||(this.wnd=window.open(e.url,"FbAuthPopup","toolbar=no,width=650, height=550"),this.wnd?(this.fire("shown"),this.watch_$t.set()):this.fire("blocked"))},on_auth:function(e){this.watch_$t.clear(),this.wnd=null,this.fire("ready",e)}})),B.FbShareDialog||(B.FbShareDialog=$class($u.Observable,{name:"FbShareDialog",link:null,save_result_url:null,force_check:!1,wait_for_login:!1,constructor:function(e,t){if("FB.ShareDialogConfig"!=e.$gpb)throw"params.$gpb not exist";$super(this,arguments),$config(this,e),t&&$config(this,t)},destroy:function(){this.link=this.to=this.save_result_url=null,this.$r&&(this.$r.abort(),this.$r=null),$super(this,arguments)},share:function(){$u.fb.call(this._share,this,this.wait_for_login,this.force_check)},_share:function(e){if(e)return this.fire("ready"),void 0;var t={method:"share",href:this.link};FB.ui(t,this._share_ready.bind(this))},_share_ready:function(e){$u.escape.enable(),this.$r=new $r(this.save_result_url,{method:"post",params:void 0===e?{close:1}:e,ready:this._save_ready},this)},_save_ready:function(){this.$r=null,this.fire("ready")}})),B.FbSendDialog||(B.FbSendDialog=$class($u.Observable,{name:"FbSendDialog",link:null,to:null,save_result_url:null,wait_for_login:!1,constructor:function(e){if("FB.SendDialogConfig"!=e.$gpb)throw"params.$gpb not exist";$super(this,arguments),$config(this,e)},destroy:function(){this.link=this.to=this.save_result_url=null,this.$r&&(this.$r.abort(),this.$r=null),$super(this,arguments)},send:function(){$u.fb.call(this._send,this,this.wait_for_login)},_send:function(e){if(e)return this.fire("ready"),void 0;var t={method:"send",link:this.link,to:this.to};FB.ui(t,this._send_ready.bind(this))},_send_ready:function(e){$u.escape.enable(),this.$r=new $r(this.save_result_url,{method:"post",params:e,ready:this._save_ready},this)},_save_ready:function(){this.$r=null,this.fire("ready")}})),B.FbUiDialogView=new $class($u.Observable,{name:"FbUiDialogView",_configs:{},_cur_dlg_id:null,constructor:function(){$super(this,arguments),$e.on({".js-fb-ui-dialog":this._click},this)},_click:function(e){if(!this._cur_dlg_id){if(this._cur_dlg_id=e.getAttribute("data-fb-ui-dlg-id"),!this._cur_dlg_id)return $s.error_log($s.newError("UserError","FB dlg data-fb-ui-dlg-id is undefined"),{origin:"B.FbUiDialogView"}),void 0;var t=this._configs[this._cur_dlg_id];if(!t)return $s.error_log($s.newError("UserError","B.FbUiDialogView config not found for "+this._cur_dlg_id),{origin:"B.FbUiDialogView"}),void 0;switch(t.click_track_url&&new $r(t.click_track_url),t.$gpb){case"FB.FacebookAuthConfig":this._auth_popup(t);break;case"FB.ShareDialogConfig":this.share(t);break;case"FB.SendDialogConfig":this.send(t);break;default:$s.error_log($s.newError("UserError","B.FbUiDialogView invalid $gpb"),{origin:"B.FbUiDialogView"})}}},set_cfg:function(e,t){this._configs[e]=$clone(t)},_auth_clean:function(){B.FbAuthPopup.un(this.auth_$e),this.auth_$e=null,this._cur_dlg_id=null},_auth_blocked:function(){this._auth_clean()},_auth_cancel:function(){this._auth_clean()},_auth_ready:function(e){this._auth_clean(),this.share(e,{wait_for_login:!0,force_check:!0})},_auth_popup:function(e){B.FbAuthPopup.in_progress()||(this.auth_$e=B.FbAuthPopup.on({blocked:this._auth_blocked,cancel:this._auth_cancel,ready:this._auth_ready},this),B.FbAuthPopup.auth(e))},_share_ready:function(){this.share_dlg.un("ready",this._share_ready,this),this.share_dlg.destroy(),this.share_dlg=null,this._cur_dlg_id=null},share:function(e,t){this.share_dlg=new B.FbShareDialog(e,t),this.share_dlg.on("ready",this._share_ready,this),this.share_dlg.share()},_send_ready:function(){this.send_dlg.un("ready",this._send_ready,this),this.send_dlg.destroy(),this.send_dlg=null,this._cur_dlg_id=null},send:function(e){this.send_dlg=new B.FbSendDialog(e),this.send_dlg.on("ready",this._send_ready,this),this.send_dlg.send()}})),B.Ovl.HoN_v3_secret=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_secret",type:"hon-v3-secret",min_length:0,input_el:null,scroll_duration:500,init:function(e){var t=$el.down(this._el,".js-secret-messages");if(e.scroll_to_last_comment&&t){var s=$c.get(t,"scrollable");s.scrollbar.scroll_to_position(1/0,{duration:this.scroll_duration})}e.comments_num&&B.fire("profile:secret_comments_update",e.comments_num,e.comments),e.fb_share_dlg&&B.FbUiDialogView.set_cfg(e.share_dlg_id,e.fb_share_dlg),this.min_length=e.min_length;var i=this.input_el=$el.down(this._el,".js-secret-input");$e.add(i.form,"submit",this.on_submit,this),$e.add(i,"keyup",this.on_input,this),i.focus()},destroy:function(){var e=this.input_el;$e.del(e,"keyup",this.on_input,this),$e.del(e.form,"submit",this.on_submit,this),this.input_el=null},on_input:function(){var e=this.input_el,t=e.value.length;t>=this.min_length&&$el.del(e.parentNode,"error")},on_submit:function(){var e=this.input_el;return e.value.length<this.min_length?($el.add(e.parentNode,"error"),void 0):(B.Ovl.open_el(e.form),void 0)}}),$gpb.exists("badoo.bma.ServerGetSecretComments","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetSecretComments=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetSecretComments",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:1}}}}(),$gpb.exists("badoo.bma.ServerAddSecretComment","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAddSecretComment=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerAddSecretComment",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},comment:{type:9,number:2,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}(),$gpb.exists("badoo.bma.ClientSecretComments","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientSecretComments=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientSecretComments",t.prototype._descriptor={fields:{my_icon_id:{type:9,number:5,label:1},is_subscribed:{type:8,options:{"default":"false"},number:4,label:1},show_rules:{type:8,options:{"default":"false"},number:2,label:1},secret_comments:{type:11,type_name:"badoo.bma.SecretComment",number:1,label:3},rate_user:{type:8,options:{"default":"false"},number:3,label:1}}}}(),B.HoN_v3.SecretComments=B.HoN_v3.SecretComments||{},$gpb.exists("badoo.bma.ServerReportSecretComment","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerReportSecretComment=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerReportSecretComment",t.prototype._descriptor={fields:{person_id:{type:9,number:2,label:1},comment_id:{type:9,number:1,label:1},set_flag:{type:8,number:3,label:1}}}}(),$gpb.exists("badoo.bma.ServerDeleteSecretComment","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerDeleteSecretComment=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerDeleteSecretComment",t.prototype._descriptor={fields:{person_id:{type:9,number:2,label:1},comment_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}(),$gpb.exists("badoo.bma.ServerRateSecretComments","message")||($gpb.exists("badoo.bma.SecretCommentRating","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SecretCommentRating=new $gpb.Enum("badoo.bma.SecretCommentRating");t._values=[1,2],t.POSITIVE=1,t.NEGATIVE=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerRateSecretComments=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerRateSecretComments",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},rating:{type:14,type_name:"badoo.bma.SecretCommentRating",number:2,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}()),$gpb.exists("badoo.bma.ServerSubscribeToSecretComments","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerSubscribeToSecretComments=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerSubscribeToSecretComments",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},subscribe:{type:8,number:2,label:1}}}}(),$gpb.exists("badoo.bma.ClientSecretCommentAdded","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientSecretCommentAdded=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientSecretCommentAdded",t.prototype._descriptor={fields:{secret_comment:{type:11,type_name:"badoo.bma.SecretComment",number:1,label:1},is_subscribed:{type:8,number:2,label:1}}}}(),B.HoN_v3.SecretComments.Model||(B.HoN_v3.SecretComments.Model=$class($u.Observable,{_user_id:null,_context:null,_comments:null,_load_rpc:null,_send_rpc:null,constructor:function(e,t){this._user_id=e,this._context=t,$super(this,arguments)},destroy:function(){this._load_rpc&&this._load_rpc.abort(),this._send_rpc&&this._send_rpc.off($p.MessageType.CLIENT_SECRET_COMMENTS,this.on_send,this),this._load_rpc=this._send_rpc=null},load:function(){var e=(new $p.ServerGetSecretComments).setPersonId(this._user_id).setContext(this._context);this._load_rpc&&this._load_rpc.abort(),this._load_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_SECRET_COMMENTS,e).on($p.MessageType.CLIENT_SECRET_COMMENTS,this.on_load,this).request()},on_load:function(e,t){this._load_rpc=null,this._handle_response(e,t)},send:function(e){var t=(new $p.ServerAddSecretComment).setPersonId(this._user_id).setComment(e).setContext(this._context);this._send_rpc&&this._send_rpc.abort(),this._send_rpc=new $gpb.Rpc($p.MessageType.SERVER_ADD_SECRET_COMMENT,t).on($p.MessageType.CLIENT_SECRET_COMMENT_ADDED,this.on_send,this).request()},on_send:function(e,t){return this._send_rpc=null,e?(this.fire("error",e),!1):(this._comments&&(this._comments.setIsSubscribed(t.getIsSubscribed()),this._comments.addSecretComments(t.getSecretComment())),this.fire("comments:updated",this._comments),this.fire("comments:added"),void 0)},remove:function(e){var t=this._comments.getSecretComments();this._comments.setSecretComments(t.filter(function(t){return t.getCommentId()!=e})),new $gpb.Rpc($p.MessageType.SERVER_DELETE_SECRET_COMMENT,(new $p.ServerDeleteSecretComment).setPersonId(this._user_id).setCommentId(e).setContext(this._context)).request(),this.fire("comments:updated",this._comments)},report:function(e,t){var s=this._get_comment(e);s&&s.setIsReported(t),new $gpb.Rpc($p.MessageType.SERVER_REPORT_SECRET_COMMENT,(new $p.ServerReportSecretComment).setSetFlag(t).setPersonId(this._user_id).setCommentId(e)).request(),this.fire("comments:updated",this._comments)},rate:function(e){this._comments.setRateUser(!1),new $gpb.Rpc($p.MessageType.SERVER_RATE_SECRET_COMMENTS,(new $p.ServerRateSecretComments).setPersonId(this._user_id).setRating($p.SecretCommentRating[e?"POSITIVE":"NEGATIVE"]).setContext(this._context)).request(),this.fire("state:updated",this._comments)},follow:function(e){new $gpb.Rpc($p.MessageType.SERVER_SUBSCRIBE_TO_SECRET_COMMENTS,(new $p.ServerSubscribeToSecretComments).setPersonId(this._user_id).setSubscribe(e)).request()},_handle_response:function(e,t){return e?(this.fire("error",e),!1):(this.fire("updated",this._comments=t),void 0)},_get_comment:function(e){for(var t=this._comments.getSecretComments(),s=0,i=t.length;i>s;s++)if(t[s].getCommentId()==e)return t[s];return null}})),function(){function e(e,s){return e.write('<div class="ovl-body"> <h2 class="ovl-header"> Secret comments about ').reference("name",s).write('\r\n<i class="inline ico ico--xsm ico--white ico--circle-question tooltip-wrap" data-control-type="tooltip">\r\n<span class="tooltip"><span class="tooltip-txt">Other girls can see your comments – guys don’t know they exist!</span></span>\r\n</i>\n</h2> <div class="ovl-content"> ').section(s.get(["SECRET_COMMENTS"],!1),s,{block:t},{}).write(" ").section(s.get(["NO_SECRET_COMMENTS"],!1),s,{block:u},{}).write(' <div class="secret-comments__form-wrap js-secret-comments-form-wrap').section(s.get(["_RATE"],!1),s,{block:d},{}).write(' js-wrap"> <form class="no_autoloader" action="" method="POST"> <div class="table"> <div class="table-cell table-cell--top"> <div class="brick secret-comments__icon"> <span class="brick-img"> <img src="').reference("icon_img",s).write('" srcset="').reference("icon_img",s).write(" 1x, ").reference("icon_img_2x",s).write(' 2x" alt=""> </span> </div> <div class="secret-comments__textarea"> <div class="js-secret-comments-cell ').section(s.get(["_ERROR"],!1),s,{block:h},{}).write('"> <textarea name="comment" id="js-secret-comments-textarea" class="textarea js-secret-comments-textarea" placeholder="Tell us what you think about ').reference("name",s).write('. Be fair." autofocus></textarea> <div id="js-secret-comments-textarea_count" class="char-counter"></div> <div class="input-error">Comment must be at least 4 symbols.</div> </div> <div class="secret-comments__follow"> <div class="inline switcher"> <input type="checkbox" name="" id="comments-subscribe" class="js-secret-comments-subscribe" ').section(s.get(["_SUBSCRIBED"],!1),s,{block:b},{}).write('> <label for="comments-subscribe"><span class="switcher__state switcher__state--on"></span><span class="switcher__state switcher__state--off"></span></label> </div> <label for="comments-subscribe" class="inline">Follow all new comments about ').reference("name",s).write('</label> </div> </div> </div> <div class="table-cell table-cell--top"> <button type="submit" class="btn btn--sm btn--blue"> <span class="btn-txt">Post</span> <span class="loader loader--white"><span class="loader_"></span></span> </button> </div> </div> </form> ').section(s.get(["RATE"],!1),s,{block:m},{}).write(' </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')
}function t(e,t){return e.write(' <div class="ovl-scroll secret-comments-wrap').section(t.get(["_RATE"],!1),t,{block:s},{}).section(t.get(["_HIDDEN"],!1),t,{block:i},{}).write(' js-secret-comments-wrap" data-control-type="scrollable"> <div class="ovl-scroll_ js-scroller"> <div class="secret-comments js-secret-comments-cont"> ').section(t.get(["COMMENT"],!1),t,{block:o},{}).write(" </div> </div> </div> ")}function s(e){return e.write(" secret-comments__form-wrap--vote")}function i(e){return e.write(" hidden")}function o(e,t){return e.write(' <div class="secret-comments__item').section(t.get(["_REPORTED"],!1),t,{block:n},{}).write(' js-secret-comments-item"> <div class="brick secret-comments__icon').section(t.get(["_NEW_COMMENT"],!1),t,{block:r},{}).write('"> <span class="brick-img"> <img src="').reference("icon_img",t).write('" srcset="').reference("icon_img",t).write(" 1x, ").reference("icon_img_2x",t).write(' 2x" alt=""> </span> ').section(t.get(["NEW_COMMENT"],!1),t,{block:a},{}).write(' <span class="loader"><span class="loader_"></span></span> </div><!-- --><div class="secret-comments__text"> <div>').reference("comment",t).write('</div> <time class="small lgrey">').reference("time",t).write('</time> </div> <div class="secret-comments__action"> ').section(t.get(["DELETE"],!1),t,{block:l},{}).write(" ").section(t.get(["REPORT"],!1),t,{block:_},{}).write(" </div> </div> ").section(t.get(["DIVIDER"],!1),t,{block:c},{}).write(" ")}function n(e){return e.write(" reported")}function r(e){return e.write(' secret-comments__icon--new tooltip-wrap" data-control-type="tooltip')}function a(e){return e.write(' <span class="tooltip"><span class="tooltip-txt">New comment</span></span> ')}function l(e,t){return e.write(' <i class="icon ico--xsm ico--grey ico--trash tooltip-wrap" data-control-type="tooltip"> <span class="b-link js-secret-comments-remove" data-comment-id="').reference("id",t).write('"></span> <span class="tooltip"><span class="tooltip-txt">Delete</span></span> </i> ')}function _(e,t){return e.write(' <i class="secret-comments__report icon ico--xsm ico--grey ico--flag tooltip-wrap" data-control-type="tooltip"> <span class="b-link js-secret-comments-report" data-comment-id="').reference("id",t).write('" data-is-reported="0"></span> <span class="tooltip"><span class="tooltip-txt">Report</span></span> </i> <i class="secret-comments__reported icon ico--xsm ico--red ico--flag tooltip-wrap" data-control-type="tooltip"> <span class="b-link js-secret-comments-report" data-comment-id="').reference("id",t).write('" data-is-reported="1"></span> <span class="tooltip"><span class="tooltip-txt">Reported</span></span> </i> ')}function c(e){return e.write(' <div class="secret-comments__divider"> <span class="lgrey">New comments</span> </div> ')}function u(e,t){return e.write(' <div class="secret-comments__prompt js-secret-comments-prompt').section(t.get(["_HIDDEN"],!1),t,{block:p},{}).write('"> <div class="inline"> <img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/secret-comments/prompt.1.png"}).write('" srcset="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/secret-comments/prompt.1.png"}).write(" 1x, ").helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/secret-comments/prompt@2x.1.png"}).write(' 2x" alt="" width="368" height="125" class="secret-comments__prompt-img"> <div class="secret-comments__prompt-txt"> <h1>Did ').reference("name",t).write(' impress you?</h1> <p class="large">Leave a comment on him. Other girls can see your comments – guys don’t know they exist!</p> </div> </div><span class="middle"></span> </div> ')}function p(e){return e.write(" hidden")}function d(e){return e.write(" secret-comments__form-wrap--vote")}function h(e){return e.write("error")}function b(e){return e.write(' checked="CHECKED"')}function m(e,t){return e.write(' <div class="secret-comments__vote"> <div class="inline"> How would you rate ').reference("name",t).write(' overall?\n</div> <div class="inline btn-group"> <div class="btn btn--sm btn--white"> <i class="ico ico--thumb-positive"></i> <span class="btn-txt">Yes please!</span> <span class="b-link js-secret-comments-vote js-toggle" data-jst-class="secret-comments__form-wrap--vote" data-vote="1"></span> </div><!-- --><div class="btn btn--sm btn--white"> <i class="ico ico--thumb-negative"></i> <span class="btn-txt">No thanks!</span> <span class="b-link js-secret-comments-vote js-toggle" data-jst-class="secret-comments__form-wrap--vote" data-vote="0"></span> </div> </div> </div> <div class="secret-comments__thanks">Thanks for sharing!</div> ')}return $u.dust.register("profile/popup.secret-comments",e),e.s={SECRET_COMMENTS:t,NO_SECRET_COMMENTS:u,_RATE:d,_ERROR:h,_SUBSCRIBED:b,RATE:m},t.s={_RATE:s,_HIDDEN:i,COMMENT:o},o.s={_REPORTED:n,_NEW_COMMENT:r,NEW_COMMENT:a,DELETE:l,REPORT:_,DIVIDER:c},u.s={_HIDDEN:p},e}(),B.HoN_v3.SecretComments.ViewBase||(B.HoN_v3.SecretComments.ViewBase=$class(B.DustView,{get_img_url:function(e){return $u.tpl($r.cdn_domain+"/big/secret-comments/{id}.png",{id:e})}})),B.HoN_v3.SecretComments.PopupView||(B.HoN_v3.SecretComments.PopupView=$class(B.HoN_v3.SecretComments.ViewBase,{template:"profile/popup.secret-comments",setName:function(e){return this.set({name:e})},setComments:function(e){for(var t,s=e.getSecretComments()||[],i={icon_img:this.get_img_url(e.getMyIconId()),icon_img_2x:this.get_img_url(e.getMyIconId()+"@2x"),RATE:e.getRateUser(),_RATE:e.getRateUser(),_SUBSCRIBED:e.getIsSubscribed(),NO_SECRET_COMMENTS:{_HIDDEN:s.length},SECRET_COMMENTS:{_HIDDEN:!s.length,COMMENT:[]}},o=0;o<s.length;o++)t=s[o],i.SECRET_COMMENTS.COMMENT[o]={id:t.getCommentId(),icon_img:this.get_img_url(t.getIconId()),icon_img_2x:this.get_img_url(t.getIconId()+"@2x"),comment:t.getComment(),time:t.getDate(),_REPORTED:t.getIsReported(),_NEW_COMMENT:t.getIsNew(),NEW_COMMENT:t.getIsNew(),DELETE:t.getCanDelete(),REPORT:t.getCanReport(),DIVIDER:t.getIsNew()&&s[o+1]&&!s[o+1].getIsNew()};return this.set(i)}})),B.HoN_v3.SecretComments.PopupCommentsView||(B.HoN_v3.SecretComments.PopupCommentsView=$class(B.HoN_v3.SecretComments.ViewBase,{template:"profile/popup.secret-comments",block:"SECRET_COMMENTS/COMMENT",setComment:function(e,t){return this.set({id:e.getCommentId(),icon_img:this.get_img_url(e.getIconId()),icon_img_2x:this.get_img_url(e.getIconId()+"@2x"),comment:e.getComment(),time:e.getDate(),_REPORTED:e.getIsReported(),_NEW_COMMENT:e.getIsNew(),NEW_COMMENT:e.getIsNew(),DELETE:e.getCanDelete(),REPORT:e.getCanReport(),DIVIDER:!e.getIsNew()&&t})}})),B.HoN_v3.SecretComments.PopupViewController||(B.HoN_v3.SecretComments.PopupViewController=$class($u.Observable,{listeners_set:!1,_form:null,_container:null,_comments_container:null,subscribe_el:null,$e:null,constructor:function(e){this.$e=$e.on({".js-secret-comments-report":this.report,".js-secret-comments-vote":this.vote,".js-secret-comments-remove":this.remove,".js-secret-comments-subscribe":this.subscribe},this),this._container=e,this._comments_container=$el.down(this._container,".js-secret-comments-cont"),this.subscribe_el=$el.down(this._container,".js-secret-comments-subscribe"),this._set_listeners(),this.scroll_down(),$super(this,arguments)},destroy:function(){$e.un(this.$e),this._unset_listeners(),this._form=this._container=this._comments_container=this.subscribe_el=this.$e=null},set_container:function(e){this._container=e},_set_listeners:function(){this._form=$el.down(this._container,"form");var e=$el.down(this._container,"textarea");$e.add(this._form,"submit",this.on_submit,this),$e.add(e,"keypress",this.on_key_pressed,this),$e.add(e,"keyup",this._set_counter,this),$e.add(e,"change",this._set_counter,this),$e.add(e,"paste",this._set_counter,this),this.listeners_set=!0},_unset_listeners:function(){if(this.listeners_set){var e=$el.down(this._container,"textarea");$e.del(this._form,"submit",this.on_submit,this),$e.del(e,"keypress",this.on_key_pressed,this),$e.del(e,"keyup",this._set_counter,this),$e.del(e,"change",this._set_counter,this),$e.del(e,"paste",this._set_counter,this),this.listeners_set=this._form=!1}},unfreeze:function(){return this._sending=!1,this._set_counter(),this},send:function(e){return this._sending?!0:(this._sending=!0,this.fire("send",e),void 0)},report:function(e){return this.fire("report",e.getAttribute("data-comment-id"),"0"===e.getAttribute("data-is-reported")),!0},vote:function(e){return this.fire("vote","1"===e.getAttribute("data-vote")),!0},remove:function(e){return this.fire("remove",e.getAttribute("data-comment-id")),!0},subscribe:function(e){return this.fire("subscribe",e.checked),!0},on_submit:function(e){var t=e.comment,s=t.value,i=this._validate_comment(s);return this.toggle_error(i),i?(t.value="",this.send(s),!1):!1},update_messages_block:function(e){return this._comments_container&&$el.dom.html(this._comments_container,e),this._set_counter(),this},toggle_no_comments_screen:function(e){return $el.tgl($el.down(this._container,".js-secret-comments-prompt"),"hidden",e),$el.tgl($el.down(this._container,".js-secret-comments-wrap"),"hidden",!e),this},toggle_error:function(e){return $el.tgl(this._form,"error",!e),this},_set_error_message:function(e){var t=$el.down(this._form,".js-secret-comments-error");return $el.dom.html(t,e),this.toggle_error(),this},on_key_pressed:function(e){if(this._sending)return!1;var t=$e.e;if(13==t.keyCode&&!t.shiftKey&&!t.ctrlKey){var s=e.value,i=this._validate_comment(s);return this.toggle_error(i),i?(e.value="",this.send(s),!1):!1}return this._set_counter(),!0},_validate_comment:function(e){return e.length>3&&e.length<=300},_set_counter:function(){if(this._form&&!this._sending){var e=this._form.comment,t=e.value.length,s=300;return t>s&&(e.value=e.value.substr(0,s)),$("js-secret-comments-textarea_count").innerHTML=s-e.value.length,!0}},scroll_down:function(){if(!this._comments_container)return this;var e=$el.up(this._comments_container,".js-secret-comments-wrap"),t=$c.get(e,"scrollable");return t&&(t.redraw_now(),t.scrollbar.scroll_to_position("bottom",{duration:500})),this},set_comments_subscribe:function(e){this.subscribe_el.checked=e}})),B.HoN_v3.SecretComments.PopupController||(B.HoN_v3.SecretComments.PopupController=$class({name:null,view_controller:null,model:null,$e_model:null,$e_vc:null,_comments_container:null,_form:null,constructor:function(e,t,s){var i=$p.ClientSource[s]||$p.ClientSource.CLIENT_SOURCE_UNSPECIFIED;this.name=t,this.model=new B.HoN_v3.SecretComments.Model(e,i),this.$e_model=this.model.on({"comments:added":this.on_comment_added,"comments:updated":this.on_updated,updated:this.on_updated,error:this.on_data_error},this),this.model.load()},destroy:function(){this.view_controller&&(this.view_controller.un(this.$e_vc),this.view_controller.destroy()),this.model.un(this.$e_model),this.model.destroy(),this.model=this.$e_model=this.view_controller=this.$e_vc=null},set_ovl_tpl:function(e){this.ovl_tpl=e},send:function(e){this.model.send(e)},report:function(e,t){this.model.report(e,t)},vote:function(e){this.model.rate(e)},remove:function(e){this.model.remove(e)},subscribe:function(e){this.model.follow(e)},on_updated:function(e){var t,s=e.getSecretComments()||[];if(this.view_controller){t=new B.HoN_v3.SecretComments.PopupCommentsView;for(var i="",o=0;o<s.length;o++)t.setComment(s[o],s[o+1]&&s[o+1].getIsNew()),i+=t;this.view_controller.set_comments_subscribe(e.getIsSubscribed()),this.view_controller.update_messages_block(i),this.view_controller.toggle_no_comments_screen(s.length)}else t=(new B.HoN_v3.SecretComments.PopupView).setName(this.name).setComments(e),B.Ovl.draw(this.ovl_tpl,t,!0),this.view_controller=new B.HoN_v3.SecretComments.PopupViewController(B.Ovl.renderer._cont),this.$e_vc=this.view_controller.on({send:this.send,remove:this.remove,report:this.report,vote:this.vote,subscribe:this.subscribe},this);B.fire("profile:secret_comments_update",s.length,$l.get_num_dependent("secret_comments_br",s.length))},on_comment_added:function(){this.view_controller.unfreeze().scroll_down()},on_data_error:function(e){this.view_controller&&this.view_controller.unfreeze();var t=e.getFeature&&e.getFeature();return t?(t.getRequiredAction()===$p.ActionType.VERIFY_MYSELF&&B.Ovl.open({type:"hon-v3-verify-list",html:""}),void 0):(B.App.reload(),void 0)}})),B.Ovl.HoN_v3_secret=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_secret",type:"hon-v3-secret-2",person_id:null,username:null,context:null,init:function(){this.controller=new B.HoN_v3.SecretComments.PopupController(this.person_id,this.username,this.context),this.controller.set_ovl_tpl(this.tpl)},destroy:function(){this.controller.destroy(),this.controller=null}}),B.Ovl.ProfileFbHottestFriends=new $class(B.Ovl.View,{name:"Ovl.ProfileFbHottestFriends",type:"hon-v3-hottest-friends",request_dialog_cfg:null,fb_dlg_id:"hon_profile_fb_hottest_friends",init:function(e){$super(this,arguments),$config(this,e),$c.config.add(this.fb_dlg_id,this.request_dialog_cfg),this.control=$c.get($el.down(document,".js-hottestfriends-fb-dialog"),"fb-apprequest-dialog"),this.$e=this.control.on({ready:this.on_ready,cancel:this.on_cancel},this)},destroy:function(){$c.config.del(this.fb_dlg_id),this.control.un(this.$e),this.control=null,this.request_dialog_cfg=null,$super(this,arguments)},on_ready:function(){B.fire("profile:hottest_friends_update"),this.close()},on_cancel:function(){this.close()}}),B.Ovl.hon_v3_wait_after_spp_promo=new $class(B.Ovl.View,{name:"Ovl.hon_v3_wait_after_spp_promo",type:"wait_after_spp_promo",url:null,delay:3e3,init:function(e){$config(this,e.config),this.check_t=new $t(this._check,this,this.delay),this.check_r=new $r(this.url,{auto:!1,ready:this._ready_check},this),this._check()},destroy:function(){this.url=this.time=this.delay=null,this.check_t.clear(),this.check_t=null,this.check_r.abort(),this.check_r=null},_check:function(){this.check_r.abort(),this.check_r.request()},_ready_check:function(e){"base.AppLink"==e.$gpb?B.App.app_link(e.state,e.url):this.check_t.set()}}),$l.register({section:"hon/fbc",lang:"en-us",translations:{REVEAL_FACEBOOK_FRIEND:"Please, help me reveal my fans!",BOOST:"Hi! Help me to raise my profile ;)",FRIENDS_HOT_LIST_ADD_MORE_FRIENDS:"Check out who is your hottest friend!",FRIENDS_HOT_LIST_INCREASE_SCORE:"Please, help me to increase my score!",FACEBOOK_REACTIVATION:"Hi! Let's meet on {{partner_name}}",TRIAL_SPP_INVITE:"Help me get Super Powers!",IMPORT_FORM_REQUEST_MESSAGE:"Ask friends to rate you"}}),$gpb.exists("badoo.bma.ServerGetUser","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetUser=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetUser",t.prototype._descriptor={fields:{user_id:{type:9,number:1,label:1},token:{type:9,number:2,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:4,label:2},client_source:{type:14,type_name:"badoo.bma.ClientSource",number:5,label:2},is_prefetch:{type:8,number:6,label:1}}}}(),function(){function e(e,n){return e.write('<div class="ovl-body"> <div class="ovl-promo"> <div class="brick brick--xlg"> <div class="brick-img"><img src="').reference("src",n).write('" alt=""></div> <mark class="brick brick--sm brick--yellow"><i class="ico ico--xsm ico--color ico--spp-xsm"></i></mark> </div> <h1>Find out who wants to meet you!</h1> ').section(n.get(["TEXT"],!1),n,{block:t},{}).write(" ").section(n.get(["TEXT_BLACKLIST_USER"],!1),n,{block:s},{}).write(" ").section(n.get(["COUNTER"],!1),n,{block:i},{}).write(" ").section(n.get(["PROGRESS_BAR"],!1),n,{block:o},{}).write(' </div> <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Ask friends</span><span class="b-link js-spp-trial-fb-dialog" data-control-type="fb-apprequest-dialog" data-control-name="spp-trial-fb-dialog" tabindex="-1"></span></div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write('<p class="x-large">To try Super Powers for free and find out who wants to meet you, ask <b>').reference("num",t).write("</b> of your ").reference("friends",t).write(" for help.</p>")}function s(e,t){return e.write('<span class="x-large">To try Super Powers for free and find out who wants to meet you, ask <b>').reference("num",t).write("</b> of your ").reference("friends",t).write(" for help.</span>")}function i(e,t){return e.write(' <div class="counter-wrap"> Invite <span class="inline counter" data-control-type="counter" data-value="').reference("num",t).write('"></span> ').reference("friends",t).write("\n</div> ")}function o(e,t){return e.write(' <div class="progress-bar"> <span class="progress-bar_" style="width: ').reference("progress_value",t).write('%"></span> </div> <p class="x-large b">').reference("num",t).write(" ").reference("friends",t).write(" left</p> ")}return $u.dust.register("overlays/popup.trial-spp",e),e.s={TEXT:t,TEXT_BLACKLIST_USER:s,COUNTER:i,PROGRESS_BAR:o},e}(),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.SppTrialView||(B.HoN_v3.Overlays.SppTrialView=$class(B.DustView,{template:"overlays/popup.trial-spp",NO_PHOTO_URL:"/v2/-/-/i/hotornot_v2/120_nophoto.1.png",getPhotoUrl:function(e){return e?e.getPreviewUrl():$r.images_root+this.NO_PHOTO_URL},getContent:function(e,t){var s=t.getGoal(),i=t.getProgress(),o=s-i,n=$l.get_num_dependent("friend",o);return this.set("src",this.getPhotoUrl(e)),t?(this.set("TEXT",{num:o,friends:n}),i>0?this.set("PROGRESS_BAR",{num:o,progress_value:i/s*100,friends:n}):this.set("COUNTER",{num:o,friends:n})):this.set("TEXT_BLACKLIST_USER",{friends:n}),this}})),B.Ovl.HoN_v3_SppTrial=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_SppTrial",type:"spp-trial",simple_close:!1,userRequest:null,userPhoto:null,lastRequestCount:0,FB_DIALOG_NAME:"spp-trial-fb-dialog",init:function(){$super(this,arguments),$c.config.add(this.FB_DIALOG_NAME,{$gpb:"FB.RequestDialogViewConfig",stage:{$gpb:"FB.RequestDialogConfig",message:$l.get("hon/fbc","TRIAL_SPP_INVITE"),save_result_url:"/ws-trial-spp-result"},stat_url:"/ws-trial-spp-stat"});var e=(new $p.ServerGetUser).setUserId(B.Session.getUserId()).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_PROFILE_PHOTO])).setClientSource($p.ClientSource.CLIENT_SOURCE_UNSPECIFIED);this.userRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,e).on($p.MessageType.CLIENT_USER,this.onUser,this).request()},destroy:function(){this.userRequest=null,this.userPhoto=null,this.lastRequestCount=0,$c.config.del(this.FB_DIALOG_NAME),$super(this,arguments)},onUser:function(e,t){e||(this.userPhoto=t.getProfilePhoto(),this.render())},render:function(){var e=new B.HoN_v3.Overlays.SppTrialView;this._render(e.getContent(this.userPhoto,this.getFeature().getGoalProgress()));var t=$c.get($el.down(this._el,".js-spp-trial-fb-dialog"),"fb-apprequest-dialog");t.on({"fb-result":this.fbDialogFbResult,ready:this.fbDialogReady},this)},getFeature:function(){return B.Features.getFeature("ALLOW_SUPER_POWERS_TRIAL")},updateFeature:function(e,t,s){var i=this.getFeature();i.setEnabled(e);var o=i.getGoalProgress();o&&(o.setGoal(t),o.setProgress(s)),B.Features._update(i)},fbDialogFbResult:function(e){"to"in e&&(this.lastRequestCount=e.to.length)},fbDialogReady:function(e){this.updateFeature(e.enabled,e.goal,e.progress);var t,s=this.getFeature().getGoalProgress();t=s?s.getProgress()>=s.getGoal():this.lastRequestCount>0,t?B.Ovl.open({type:"hon-v3-notify",blockName:"SENT"}):this.render()}}),B.Ovl.HoN_v3_TwitterPromo=new $class(B.Ovl.View,{name:"Ovl.TwitterPromo",type:"hon-twitter-promo",simple_close:!1,done_ovl:null,init:function(e){$super(this,arguments),this.done_ovl=e.done_ovl,this.$b=B.HoN_v3.on("social-account:linked",this.linked,this)},destroy:function(){B.HoN_v3.un(this.$b),$super(this,arguments)},linked:function(){B.Ovl.open(this.done_ovl)}}),B.Ovl.FbNotificationsSwitcher=new $class(B.Ovl.View,{name:"Ovl.FbNotificationSwitcher",type:"fb-notifications-switcher",switch_on_url:null,switch_off_url:null,switcher_el:null,init:function(e){$super(this,arguments),this.switch_on_url=e.switch_on_url,this.switch_off_url=e.switch_off_url,this.switcher_el=$("fb-notifications-switcher"),$e.add(this.switcher_el,"change",this.on_change,this)},destroy:function(){$e.del(this.switcher_el,"change",this.on_change,this),this.switcher_el=null,$super(this,arguments)},on_change:function(e){var t=e.checked?this.switch_on_url:this.switch_off_url;new $r(t)}}),B.HoN_v3.Profile=B.HoN_v3.Profile||{},B.HoN_v3.Profile.BlockView||(B.HoN_v3.Profile.BlockView=$class($u.Observable,{_tpl:"",_container:null,destroy:function(){this._container=this._data=null},render:function(){var e=this._container||document.createElement("div");return $el.dom.html(e,this.getResult()),this.fire("rendered"),e},get_result:function(){return null===this._data?"":$u.dust.render(this._tpl,this._data)},getResult:function(){return this.get_result.apply(this,arguments)},set_container:function(e){return this._container=e,this},setContainer:function(){return this.set_container.apply(this,arguments)},_get_profile_option:function(e,t){var s=null,i=[];e.own_profile&&e.edit_form&&(i=e.edit_form.getOptions()||[]),i=e.profile.getProfileFields?i.concat(e.profile.getProfileFields()||[]):i.concat(e.profile.getProfileField()||[]);for(var o=0;o<i.length;o++)(i[o].getId()==t||i[o].getType()==t)&&(s=i[o]);return s},set_data:function(){return this},setData:function(){return this.setData.apply(this,arguments)}})),function(){function e(e,r){return e.write('<div class="profile-widget').section(r.get(["_HIDE"],!1),r,{block:t},{}).write(' js-wrap"> <h2>Verifications <i class="ico ico--verify-tick"></i></h2> ').section(r.get(["SHOW_ALL"],!1),r,{block:s},{}).write(" ").section(r.get(["VERIFY_HIDDEN"],!1),r,{block:i},{}).write(" ").section(r.get(["OTHER_VERIFY_HIDDEN"],!1),r,{block:o},{}).write(' <ul class="profile-widget__items social-networks"> ').section(r.get(["LINK"],!1),r,{block:n},{}).write(" </ul> ").section(r.get(["BUTTON"],!1),r,{block:E},{}).write(" </div>")}function t(e){return e.write(" hide")}function s(e){return e.write(' <div class="profile-widget__expand"> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--show js-toggle" data-jst-class="hide">Show all</span> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--hide js-toggle" data-jst-class="hide">Hide all</span> </div> ')}function i(e){return e.write(' <p class="profile-widget__txt">Only you can see this block. Other users can\'t see it.</p> ')}function o(e,t){return e.write(' <p class="profile-widget__txt">To see other users’ verification details, you need to show <a href="').reference("url",t).write('" class="link grey app" rel="').reference("state",t).write('">your own</a>.</p> ')}function n(e,t){return e.write(" ").section(t.get(["_LINKED"],!1),t,{block:r},{}).write(" ").section(t.get(["UNLINKED"],!1),t,{block:u},{}).write(" ")}function r(e,t){return e.write(' <li class="profile-widget__item social-networks__item social-networks__item--linked"> <i class="inline ico ico--lg ico--color ico--').reference("link_type",t).write('-lg">').section(t.get(["_EXTERNAL_LINK"],!1),t,{block:a},{}).write('</i> <div class="inline social-networks__txt"> <div><b class="social-networks__title">').reference("name",t).write("</b></div> ").section(t.get(["_SOCIAL_FRIENDS"],!1),t,{block:l},{}).write(" ").section(t.get(["VERIFIED_TEXT"],!1),t,{block:_},{}).write(" ").section(t.get(["SPP_TEXT"],!1),t,{block:c},{}).write(" </div> </li> ")}function a(e,t){return e.write('<a href="').reference("url",t).write('" class="b-link" target="_blank" data-reg="hon/').reference("user_id",t).write("/socialclick/").reference("link_type",t).write('"></a>')}function l(e,t){return e.write('<span class="lgrey">').reference("num",t).write(" ").reference("friends",t).write("</span>")}function _(e){return e.write('<span class="lgrey">Verified</span>')}function c(e){return e.write('<span class="lgrey">Activated</span>')}function u(e,t){return e.write(' <li class="profile-widget__item social-networks__item"> <i class="inline ico ico--lg ico--grey ico--').reference("link_type",t).write('-lg"><!-- -->').section(t.get(["_EXTERNAL"],!1),t,{block:p},{}).write("<!-- -->").section(t.get(["_SPP"],!1),t,{block:d},{}).write("<!-- -->").section(t.get(["_PHONE"],!1),t,{block:h},{}).write('<!-- --></i> <div class="inline social-networks__txt"> <div><b class="grey social-networks__title">').reference("name",t).write('</b></div> <span class="link social-networks__connect">').section(t.get(["VERIFY_TEXT"],!1),t,{block:b},{}).section(t.get(["SPP_VERIFY_TEXT"],!1),t,{block:m},{}).write('</span> </div> <div class="social-networks__ico"> <i class="icon ico--grey ico--arrow-r"></i> </div> </li> ')}function p(e,t){return e.write('<span class="b-link js-external-link" data-url="').reference("url",t).write('" data-window-width="').reference("width",t).write('" data-window-height="').reference("height",t).write('" tabindex="-1"></span>')}function d(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="payment" data-ovl-url="').reference("url",t).write('" tabindex="-1"></span>')}function h(e,t){return e.write('<a class="b-link" href="').reference("url",t).write('" tabindex="-1"></a>')}function b(e){return e.write("Verify")}function m(e){return e.write("Activate")}function E(e,t){return e.write(' <div class="btn btn--sm btn--white btn--block"> <span class="btn-txt">Get verified</span> <span class="b-link js-verify-open" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("ovl_url",t).write('"></span> </div> ')}return $u.dust.register("verify/block.verified",e),e.s={_HIDE:t,SHOW_ALL:s,VERIFY_HIDDEN:i,OTHER_VERIFY_HIDDEN:o,LINK:n,BUTTON:E},n.s={_LINKED:r,UNLINKED:u},r.s={_EXTERNAL_LINK:a,_SOCIAL_FRIENDS:l,VERIFIED_TEXT:_,SPP_TEXT:c},u.s={_EXTERNAL:p,_SPP:d,_PHONE:h,VERIFY_TEXT:b,SPP_VERIFY_TEXT:m},e}(),function(){function e(e,s){return e.write('<div class="ovl-body ovl-body--narrow"> <form action="#" method="post"> <div class="ovl-content"> <h1> <span class="brick brick--xsm brick--sky ovl-verified__icon">\r\n<i class="ico ico--white ico--ok-sm"></i>\r\n</span>Get verified!\n</h1> <p class="large">').reference("PAGE_partner_name",s).write(' is a no fake-zone! Prove to other users that you’re you by getting Verified status. Use <b>any 2 options</b> from this list:</p> <div class="verify-methods ovl-scroll js-control" data-control-type="scrollable"> <div class="ovl-scroll_ js-scroller"> ').section(s.get(["LINK"],!1),s,{block:t},{}).write(' </div> </div> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--white"> <span class="btn-txt">Done</span> <span class="b-link js-ovl-close"></span> </div> </div> </form> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(" ").section(t.get(["_LINKED"],!1),t,{block:s},{}).write(" ").section(t.get(["UNLINKED"],!1),t,{block:a},{}).write(" ")}function s(e,t){return e.write(' <div class="verify-method"> <i class="ico ico--lg ico--color ico--').reference("link_type",t).write('-lg"> ').section(t.get(["_EXTERNAL_LINK"],!1),t,{block:i},{}).write(' </i> <div class="verify-method__txt"> <div class="verify-method__title"><b>').reference("name",t).write("</b></div> ").section(t.get(["_SOCIAL_FRIENDS"],!1),t,{block:o},{}).write(" ").section(t.get(["VERIFIED_TEXT"],!1),t,{block:n},{}).write(" ").section(t.get(["SPP_TEXT"],!1),t,{block:r},{}).write(" </div> </div> ")}function i(e,t){return e.write('<a href="').reference("url",t).write('" class="b-link" target="_blank" data-reg="hon/').reference("user_id",t).write("/socialclick/").reference("link_type",t).write('"></a>')}function o(e,t){return e.write('<span class="lgrey">').reference("num",t).write(" ").reference("friends",t).write("</span>")}function n(e){return e.write('<span class="lgrey">Verified</span>')}function r(e){return e.write('<span class="lgrey">Activated</span>')}function a(e,t){return e.write(' <div class="verify-method verify-method--unlinked"> <i class="ico ico--lg ico--grey ico--').reference("link_type",t).write('-lg"> ').section(t.get(["_EXTERNAL"],!1),t,{block:l},{}).write(" ").section(t.get(["_SPP"],!1),t,{block:_},{}).write(" ").section(t.get(["_PHONE"],!1),t,{block:c},{}).write(' </i> <div class="verify-method__txt"> <div class="verify-method__title"><b class="grey">').reference("name",t).write('</b></div> <span class="link">Verify</span> </div> </div> ')}function l(e,t){return e.write('<span class="b-link js-external-link" data-url="').reference("url",t).write('" data-window-width="').reference("width",t).write('" data-window-height="').reference("height",t).write('" tabindex="-1"></span>')}function _(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="payment" data-ovl-url="').reference("url",t).write('" tabindex="-1"></span>')}function c(e,t){return e.write('<a class="b-link" href="').reference("url",t).write('" tabindex="-1"></a>')}return $u.dust.register("verify/popup.verified",e),e.s={LINK:t},t.s={_LINKED:s,UNLINKED:a},s.s={_EXTERNAL_LINK:i,_SOCIAL_FRIENDS:o,VERIFIED_TEXT:n,SPP_TEXT:r},a.s={_EXTERNAL:l,_SPP:_,_PHONE:c},e}(),B.HoN_v3.Profile.VerifyView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"verify/block.verified",_popup_tpl:"verify/popup.verified",ovl_type:"hon-v3-notify",map_types:{1:"facebook",2:"vk",3:"odnoklassniki",4:"google",9:"google",12:"instagram",14:"linkedin",15:"twitter"},constructor:function(){$super(this,arguments),B.HoN_v3.on("social-account:linked",this.linked,this),$e.on(".js-external-link",this.open_window,this)},destroy:function(){B.HoN_v3.un("social-account:linked",this.linked,this),$e.un(".js-external-link",this.open_window,this)},set_data:function(e,t,s,i,o){var n,r,a,l=e&&e.getMethods()||[],_=[],c=[],u={},p=0,d=3,h="",b={};if(b[$p.SexType._map[t]]=!0,this.linked_html=$u.dust.render("overlays/popup.confirmation",b,"SETTINGS_SOCIAL_CONNECTED"),!i&&!l.length)return this._data=s&&o?{OTHER_VERIFY_HIDDEN:{url:"/settings?edit=verified_status",state:"settings"}}:null,this;for(var m=0,E=l.length;E>m;m+=1){switch(n=l[m],a=n.getType(),h=n.getDisplayMessage()||"",r=null,a){case $p.UserVerificationMethodType.VERIFY_SOURCE_EXTERNAL_PROVIDER:u=n.getExternalProviderData(),p=this.map_types[u.getType()];var f=u.hasAuthData()&&u.getAuthData().hasOauthUrl();r={_SOCIAL_FRIENDS:{num:h,friends:""},VERIFY_TEXT:!0,_EXTERNAL:{url:f?u.getAuthData().getOauthUrl():null,width:600,height:750},link_type:p,name:n.getName()};break;case $p.UserVerificationMethodType.VERIFY_SOURCE_SPP:var g=B.Features.getFeature($p.FeatureType.ALLOW_SUPER_POWERS),v=g.getEnabled();if(v)continue;r={_SPP:{url:"/billing/spp-ws.phtml?activation_place=26"},SPP_TEXT:!0,SPP_VERIFY_TEXT:!0,link_type:"spp",name:n.getName()};break;case $p.UserVerificationMethodType.VERIFY_SOURCE_PHONE_NUMBER:r={_PHONE:{url:"/promo/verification.phtml"},VERIFIED_TEXT:!0,VERIFY_TEXT:!0,link_type:"phone",name:n.getName()};break;default:continue}n.getIsConfirmed()?_.push(r):c.push(r)}return this._data={PAGE_partner_name:$l.get("partner").title,LINK:{_LINKED:_,UNLINKED:c},_HIDE:l.length>d,SHOW_ALL:l.length>d,VERIFY_HIDDEN:e.getIsVerified()&&o,BUTTON:!i&&!this.viewerVerified&&{ovl_type:"verify",ovl_url:""}},this},open_window:function(e){var t=e.getAttribute("data-url"),s=e.getAttribute("data-window-width"),i=e.getAttribute("data-window-height");this._opened_window=window.open(t,"auth","width="+s+",height="+i),this._open_t=new $t(this.check_close,this),this._open_t.set(1e3)},stop_linking:function(){this._open_t.clear(),this._open_t=this._cont_el=this._btn_el=null},check_close:function(){return this._opened_window.closed?(this.stop_linking(),void 0):(this._open_t.set(),void 0)},linked:function(){B.Ovl.open({type:this.ovl_type,html:this.linked_html}),B.on("ovl:close",this.ready,this)},ready:function(e){e.type!==this.ovl_type||B.IM.opened||B.App.reload(),B.un("ovl:close",this.ready,this)},get_ovl_html:function(){return null===this._data?"":$u.dust.render(this._popup_tpl,this._data)}}),$gpb.exists("badoo.bma.ServerGetPersonProfile","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetPersonProfile=function(){$gpb.Message.apply(this,arguments)
};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetPersonProfile",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},token:{type:9,number:2,label:1},is_prefetch:{type:8,number:4,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}(),B.Ovl.HoN_v3_VerifyListView=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_VerifyListView",type:"hon-v3-verify-list",user:null,view:null,_rpc:null,init:function(){this.view=new B.HoN_v3.Profile.VerifyView,this.user?this.draw():this._load_user()},destroy:function(){this._rpc&&this._rpc.destroy(),this.view.destroy(),this.view=this.user=this._rpc=null},draw:function(){var e=this.user.profile.getVerifiedInformation(),t=this.user.person.getGender(),s=B.Session.getUserId()==this.user.person.getUid(),i=this.view.set_data(e,t,s).get_ovl_html();this._render(i)},_load_user:function(){if(!this._rpc){var e=(new $p.ServerGetPersonProfile).setPersonId(B.Session.getUserId());this._rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_PERSON_PROFILE,e).on([$p.MessageType.CLIENT_PERSON,$p.MessageType.CLIENT_PERSON_PROFILE,$p.MessageType.CLIENT_PERSON_STATUS],this._on_user,this).request()}},_on_user:function(e,t,s,i){return this._rpc.destroy(),this._rpc=null,e?(this.close(),void 0):(this.user={status:i,profile:s,person:t},this.draw(),void 0)}}),B.Ovl.HoN_v3_extra_shows=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_extra_shows",type:"hon-v3-extra-shows"}),$gpb.exists("badoo.bma.ServerAppStats","message")||($gpb.exists("badoo.bma.PermissionAcceptanceStats","message")||($gpb.exists("badoo.bma.PermissionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PermissionType=new $gpb.Enum("badoo.bma.PermissionType");t._values=[1,2,3],t.PERMISSION_TYPE_PUSH_NOTIFICATIONS=1,t.PERMISSION_TYPE_BACKGROUND_LOCATION=2,t.PERMISSION_TYPE_IN_APP_LOCATION=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PermissionAcceptanceStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PermissionAcceptanceStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.PermissionType",number:1,label:2},can_be_changed:{type:8,number:3,label:1},allowed:{type:8,number:2,label:2}}}}()),$gpb.exists("badoo.bma.SharedFriendsStats","message")||($gpb.exists("badoo.bma.SharedFriendsStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SharedFriendsStatsType=new $gpb.Enum("badoo.bma.SharedFriendsStatsType");t._values=[1,2,3],t.SHARED_FRIENDS_STATS_TYPE_NOTIFICATION_SHOWN=1,t.SHARED_FRIENDS_STATS_TYPE_PERMISSION_REQUESTED=2,t.SHARED_FRIENDS_STATS_TYPE_PERMISSION_GIVEN=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SharedFriendsStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SharedFriendsStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.SharedFriendsStatsType",number:1,label:2},provider:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:2}}}}()),$gpb.exists("badoo.bma.OfferwallStats","message")||($gpb.exists("badoo.bma.StatsSourceClientScreen","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.StatsSourceClientScreen=new $gpb.Enum("badoo.bma.StatsSourceClientScreen");t._values=[7,8,9,10,11,12,13,14,15,16,17,18,19],t.SCREEN_MY_PROFILE=7,t.SCREEN_OTHER_PROFILE=8,t.SCREEN_CHAT=9,t.SCREEN_CHAT_QUOTA=10,t.SCREEN_VERY_POPULAR_BANNER=11,t.SCREEN_CHAT_TRUSTED_NETWORK_BLOCKED=12,t.SCREEN_BUILD_NETWORK=13,t.SCREEN_GROW_NETWORK=14,t.SCREEN_TRUSTED_NETWORK_SETTINGS=15,t.SCREEN_PEOPLE_NEARBY=16,t.SCREEN_OAUTH_PROVIDER=17,t.SCREEN_SERVER_NOTIFICATION=18,t.SCREEN_OFFERWALL_VIEW=19}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.OfferwallStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.OfferwallStats",t.prototype._descriptor={fields:{screen:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:1,label:1},source_screen:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ServerAppStatsStartSource","message")||($gpb.exists("badoo.bma.ServerAppStatsStartSourceType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAppStatsStartSourceType=new $gpb.Enum("badoo.bma.ServerAppStatsStartSourceType");t._values=[0,1,2,3,4,5],t.APP_START_SOURCE_UNKNOWN=0,t.APP_START_SOURCE_LAUNCHER=1,t.APP_START_SOURCE_WIDGET=2,t.APP_START_SOURCE_EMAIL=3,t.APP_START_SOURCE_PUSH=4,t.APP_START_SOURCE_SMS=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAppStatsStartSource=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerAppStatsStartSource",t.prototype._descriptor={fields:{source_id:{type:9,number:3,label:1},screen:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:2,label:1},start_screen:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},type:{type:14,type_name:"badoo.bma.ServerAppStatsStartSourceType",number:1,label:1}}}}()),$gpb.exists("badoo.bma.ImageStats","message")||($gpb.exists("badoo.bma.ImageStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ImageStatsType=new $gpb.Enum("badoo.bma.ImageStatsType");t._values=[1,2,3],t.IMAGE_STATS_TYPE_BROKEN_BINARY=1,t.IMAGE_STATS_TYPE_SERVER_ERROR=2,t.IMAGE_STATS_TYPE_INVALID_CONTENT_TYPE=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ImageStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ImageStats",t.prototype._descriptor={fields:{image_url:{type:9,number:1,label:1},error_data:{type:9,number:4,label:1},type:{type:14,type_name:"badoo.bma.ImageStatsType",number:2,label:2},http_response_code:{type:5,number:3,label:1}}}}()),$gpb.exists("badoo.bma.FacebookLikeStats","message")||($gpb.exists("badoo.bma.CommonStatsEventType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonStatsEventType=new $gpb.Enum("badoo.bma.CommonStatsEventType");t._values=[1,2,3,4,5,6,7,8,9,10],t.COMMON_EVENT_CLICK=1,t.COMMON_EVENT_SHOW=2,t.COMMON_EVENT_DISCARD=3,t.COMMON_EVENT_DISMISS=4,t.COMMON_EVENT_REPLACE=5,t.COMMON_EVENT_IGNORE=6,t.COMMON_EVENT_INTERRUPT=7,t.COMMON_EVENT_SKIP=8,t.COMMON_EVENT_SECONDARY_ACTION=9,t.COMMON_EVENT_FLOW_COMPLETE=10}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FacebookLikeStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FacebookLikeStats",t.prototype._descriptor={fields:{screen:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1},event_type:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1}}}}()),$gpb.exists("badoo.bma.StarRatingStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.StarRatingStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.StarRatingStats",t.prototype._descriptor={fields:{shared:{type:8,number:2,label:1},dismissed:{type:8,number:1,label:1}}}}(),$gpb.exists("badoo.bma.InviteStats","message")||($gpb.exists("badoo.bma.InviteStatsActionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InviteStatsActionType=new $gpb.Enum("badoo.bma.InviteStatsActionType");t._values=[1,2,3,4,5,6,7],t.INVITE_STATS_ACTION_TYPE_FOOTER_SEEN=1,t.INVITE_STATS_ACTION_TYPE_CONNECT=2,t.INVITE_STATS_ACTION_TYPE_LATER=3,t.INVITE_STATS_ACTION_TYPE_ACCESS_ALLOWED=4,t.INVITE_STATS_ACTION_TYPE_ACCESS_DENIED=5,t.INVITE_STATS_ACTION_TYPE_IGNORE=6,t.INVITE_STATS_ACTION_TYPE_SEEN=7}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.InviteStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InviteStats",t.prototype._descriptor={fields:{client_source:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1},action_type:{type:14,type_name:"badoo.bma.InviteStatsActionType",number:2,label:1},provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:3,label:1}}}}()),$gpb.exists("badoo.bma.ClientNotificationStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientNotificationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientNotificationStats",t.prototype._descriptor={fields:{notification_id:{type:9,number:1,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1}}}}(),$gpb.exists("badoo.bma.RushHourStats","message")||($gpb.exists("badoo.bma.RushHourStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RushHourStatsType=new $gpb.Enum("badoo.bma.RushHourStatsType");t._values=[1,2,3],t.GAME_START=1,t.GAME_FAILED=2,t.GAME_SUCCESS=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.RushHourStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RushHourStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.RushHourStatsType",number:1,label:2}}}}()),$gpb.exists("badoo.bma.BrowserPushStats","message")||($gpb.exists("badoo.bma.BrowserPushEvent","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.BrowserPushEvent=new $gpb.Enum("badoo.bma.BrowserPushEvent");t._values=[1,2,3,4,5,6,7,8,9,10],t.BROWSER_PUSH_EVENT_PRE_DIALOG_SHOW=1,t.BROWSER_PUSH_EVENT_PRE_DIALOG_DISMISS=2,t.BROWSER_PUSH_EVENT_PRE_DIALOG_ACCEPT=3,t.BROWSER_PUSH_EVENT_NATIVE_DIALOG_SHOW=4,t.BROWSER_PUSH_EVENT_NATIVE_DIALOG_DISMISS=5,t.BROWSER_PUSH_EVENT_NATIVE_DIALOG_ACCEPT=6,t.BROWSER_PUSH_EVENT_WORKER_ACTIVATE=7,t.BROWSER_PUSH_EVENT_WORKER_INSTALL=8,t.BROWSER_PUSH_EVENT_WORKER_PUSH=9,t.BROWSER_PUSH_EVENT_WORKER_CLICK=10}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.BrowserPushStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.BrowserPushStats",t.prototype._descriptor={fields:{event:{type:14,type_name:"badoo.bma.BrowserPushEvent",number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:1}}}}()),$gpb.exists("badoo.bma.PromoBannerStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBannerStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromoBannerStats",t.prototype._descriptor={fields:{context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1},promo_block_position:{type:14,type_name:"badoo.bma.PromoBlockPosition",number:5,label:1},banner_id:{type:9,number:2,label:1},promo_block_type:{type:14,type_name:"badoo.bma.PromoBlockType",number:4,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:1,label:1}}}}(),$gpb.exists("badoo.bma.CommonStats","message")||($gpb.exists("badoo.bma.CommonStatsSource","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonStatsSource=new $gpb.Enum("badoo.bma.CommonStatsSource");t._values=[1,2,3,4,5,6,7,10001,10002,10003],t.HIDE_PRESENCE_WITHOUT_SPP=1,t.HIDE_PROFILE_VISITOR_WITHOUT_SPP=2,t.HIDE_SPP_WITHOUT_SPP=3,t.OPEN_GRID_MODE_IN_PROFILE=4,t.CONNECT_FACEBOOK_PROMO=5,t.DOWNLOAD_MOBILE_APP=6,t.YOUTUBE_SUBSCRIBE_BUTTON=7,t.EXPERIMENTAL_BURIN40_ENCOUNTERS=10001,t.EXPERIMENTAL_BURIN40_SPP=10002,t.EXPERIMENTAL_BURIN40_SPP_TRIAL=10003}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CommonStats",t.prototype._descriptor={fields:{source:{type:14,type_name:"badoo.bma.CommonStatsSource",number:1,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}()),$gpb.exists("badoo.bma.RegistrationStats","message")||($gpb.exists("badoo.bma.RegistrationAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RegistrationAction=new $gpb.Enum("badoo.bma.RegistrationAction");t._values=[1,2],t.REGISTRATION_ACTION_STARTED=1,t.REGISTRATION_ACTION_CANCELLED=2}(),$gpb.exists("badoo.bma.RegistrationMethod","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RegistrationMethod=new $gpb.Enum("badoo.bma.RegistrationMethod");t._values=[1,2],t.REGISTRATION_METHOD_EMAIL=1,t.REGISTRATION_METHOD_FACEBOOK=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.RegistrationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RegistrationStats",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.RegistrationAction",number:1,label:1},method:{type:14,type_name:"badoo.bma.RegistrationMethod",number:2,label:1}}}}()),$gpb.exists("badoo.bma.SharingStats","message")||($gpb.exists("badoo.bma.SharingStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SharingStatsType=new $gpb.Enum("badoo.bma.SharingStatsType");t._values=[1,2,3,4,5,6,7,8,9,10,11],t.SHARING_STATS_TYPE_SOCIAL_CLICK=1,t.SHARING_STATS_TYPE_SOCIAL_POST=2,t.SHARING_STATS_TYPE_VIEW_MY_AWARD=3,t.SHARING_STATS_TYPE_VIEW_OTHERS_AWARD=4,t.SHARING_STATS_TYPE_VIEW_GET_MORE_AWARDS=5,t.SHARING_STATS_TYPE_VIEW_SHARING_OVERLAY=6,t.SHARING_STATS_TYPE_BUTTON_CLICK=7,t.SHARING_STATS_TYPE_PERMISSION_GIVEN=8,t.SHARING_STATS_TYPE_PERMISSION_DENIED=9,t.SHARING_STATS_TYPE_OTHER_CLICK=10,t.SHARING_STATS_TYPE_PERMISSION_REQUESTED=11}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SharingStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SharingStats",t.prototype._descriptor={fields:{provider_id:{type:9,number:2,label:1},uid:{type:9,number:5,label:1},sharing_stats_type:{type:14,type_name:"badoo.bma.SharingStatsType",number:3,label:1},award_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},promoted_video_id:{type:9,number:6,label:1},provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:7,label:1}}}}()),$gpb.exists("badoo.bma.InitialChatScreenStats","message")||($gpb.exists("badoo.bma.ChatBlockId","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ChatBlockId=new $gpb.Enum("badoo.bma.ChatBlockId");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],t.CHAT_BLOCK_ID_UNKNOWN=0,t.CHAT_BLOCK_ID_INITIAL=1,t.CHAT_BLOCK_ID_START_CONVERSATION=2,t.CHAT_BLOCK_ID_MESSAGES=3,t.CHAT_BLOCK_ID_ERROR=4,t.CHAT_BLOCK_ID_PROMO=5,t.CHAT_BLOCK_ID_ADD_PHOTO=6,t.CHAT_BLOCK_ID_ROULETTE=7,t.CHAT_BLOCK_ID_INCOMING_MESSAGE=8,t.CHAT_BLOCK_ID_TEEN_BLOCKED=9,t.CHAT_BLOCK_ID_FRIEND_CONNECTION=10,t.CHAT_BLOCK_ID_LIMIT_REACHED=11,t.CHAT_BLOCK_ID_PAIDMESSAGES=12,t.CHAT_BLOCK_ID_SEARCH_CONDITIONS=13,t.CHAT_BLOCK_ID_VERIFY_FOR_MAN=14,t.CHAT_BLOCK_ID_VERY_POPULAR=15,t.CHAT_BLOCK_ID_NEWBIE=16,t.CHAT_BLOCK_ID_LIMIT_CLOSE=17,t.CHAT_BLOCK_ID_SEND_SMILE=18,t.CHAT_BLOCK_ID_CONTACTS_FOR_CREDITS=19,t.CHAT_BLOCK_ID_CONVERSATION_GIFTS_BLOCKER=20,t.CHAT_BLOCK_ID_VERIFY_FOR_WOMAN=21,t.CHAT_BLOCK_ID_MATCH_WITH_STICKERS=22,t.CHAT_BLOCK_ID_MATCH_WITH_GIFTS=23,t.CHAT_BLOCK_ID_PLACES_IN_COMMON=24}(),$gpb.exists("badoo.bma.InitialChatScreenContext","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InitialChatScreenContext=new $gpb.Enum("badoo.bma.InitialChatScreenContext");t._values=[1],t.INITIAL_CHAT_SCREEN_CONTEXT_CTA=1}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.InitialChatScreenStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InitialChatScreenStats",t.prototype._descriptor={fields:{screen_type:{type:14,type_name:"badoo.bma.ChatBlockId",number:1,label:1},screen_context:{type:14,type_name:"badoo.bma.InitialChatScreenContext",number:2,label:1},promo_block_type:{type:14,type_name:"badoo.bma.PromoBlockType",number:3,label:1},event_type:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:4,label:1}}}}()),$gpb.exists("badoo.bma.InAppNotificationStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InAppNotificationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InAppNotificationStats",t.prototype._descriptor={fields:{notification_id:{type:9,number:1,label:1},screen:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1},event_type:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1}}}}(),$gpb.exists("badoo.bma.SpotlightStats","message")||($gpb.exists("badoo.bma.SpotlightStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SpotlightStatsType=new $gpb.Enum("badoo.bma.SpotlightStatsType");t._values=[1,2],t.SPOTLIGHT_STATS_TYPE_ADD_BUTTON_VIEWED=1,t.SPOTLIGHT_STATS_TYPE_ADD_BUTTON_PRESSED=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SpotlightStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SpotlightStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.SpotlightStatsType",number:1,label:1}}}}()),$gpb.exists("badoo.bma.FacebookAppRequestStats","message")||($gpb.exists("badoo.bma.FacebookAppRequestStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FacebookAppRequestStatsType=new $gpb.Enum("badoo.bma.FacebookAppRequestStatsType");t._values=[1,2,3,4,5,6],t.FACEBOOK_APP_REQUEST_STATS_TYPE_NOTIFICATION_SHOWN=1,t.FACEBOOK_APP_REQUEST_STATS_TYPE_NOTIFICATION_CONFIRM=2,t.FACEBOOK_APP_REQUEST_STATS_TYPE_NOTIFICATION_DENY=3,t.FACEBOOK_APP_REQUEST_STATS_TYPE_FB_DIALOG_OPEN=4,t.FACEBOOK_APP_REQUEST_STATS_TYPE_FB_DIALOG_INVITES_SENT=5,t.FACEBOOK_APP_REQUEST_STATS_TYPE_FB_DIALOG_INVITES_CANCEL=6}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FacebookAppRequestStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FacebookAppRequestStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.FacebookAppRequestStatsType",number:1,label:2},context:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:2}}}}()),$gpb.exists("badoo.bma.VerificationStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VerificationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VerificationStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.UserVerificationMethodType",number:1,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:3,label:1},provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1}}}}(),$gpb.exists("badoo.bma.TrustedNetworkStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.TrustedNetworkStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.TrustedNetworkStats",t.prototype._descriptor={fields:{person_id:{type:9,number:3,label:1},screen:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:1,label:1},source_screen:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},provider_id:{type:9,number:2,label:1}}}}(),$gpb.exists("badoo.bma.FriendOrCelebritySharingStats","message")||($gpb.exists("badoo.bma.CelebrityFriendSharing","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CelebrityFriendSharing=new $gpb.Enum("badoo.bma.CelebrityFriendSharing");t._values=[1,2,3],t.CELEBRITY_FRIEND_SHARING_CLICK=1,t.CELEBRITY_FRIEND_SHARING_POST=2,t.CELEBRITY_FRIEND_SHARING_FB_GRAPH=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendOrCelebritySharingStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FriendOrCelebritySharingStats",t.prototype._descriptor={fields:{provider_id:{type_name:"badoo.bma.ExternalProviderType",number:4,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_PROVIDER_TYPE"}},is_celebrity:{type:8,number:2,label:1},person_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:6,label:1},action:{type:14,type_name:"badoo.bma.CelebrityFriendSharing",number:5,label:1},is_hidden:{type:8,number:3,label:1}}}}()),$gpb.exists("badoo.bma.ServerResponseInvalidStats","message")||($gpb.exists("badoo.bma.ServerMessageInvalidType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerMessageInvalidType=new $gpb.Enum("badoo.bma.ServerMessageInvalidType");t._values=[1,2,3,4],t.SERVER_MESSAGE_INVALID_UNKNOWN=1,t.SERVER_MESSAGE_INVALID_MISSING_FIELD=2,t.SERVER_MESSAGE_INVALID_INCORRECT_BODY=3,t.SERVER_MESSAGE_INVALID_CANT_DECODE=4}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerResponseInvalidStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerResponseInvalidStats",t.prototype._descriptor={fields:{message_bytes:{type:12,number:1,label:1},type:{type_name:"badoo.bma.ServerMessageInvalidType",number:2,label:1,type:14,options:{"default":"SERVER_MESSAGE_INVALID_UNKNOWN"}},additional_data:{type:9,number:6,label:3}}}}()),$gpb.exists("badoo.bma.PromotedVideoStats","message")||($gpb.exists("badoo.bma.VideoStatsAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VideoStatsAction=new $gpb.Enum("badoo.bma.VideoStatsAction");t._values=[1,2,3],t.VIDEO_STATS_ACTION_PLAY_CLICKED=1,t.VIDEO_STATS_ACTION_SCROLL_TO_VIDEO=2,t.VIDEO_STATS_ACTION_WATCHED=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromotedVideoStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromotedVideoStats",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.VideoStatsAction",number:2,label:1},id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}()),$gpb.exists("badoo.bma.DwarfsStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.DwarfsStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.DwarfsStats",t.prototype._descriptor={fields:{dwarf_codes:{type:5,number:1,label:3}}}}(),$gpb.exists("badoo.bma.VipStats","message")||($gpb.exists("badoo.bma.VipStatsEvent","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VipStatsEvent=new $gpb.Enum("badoo.bma.VipStatsEvent");t._values=[1,2,3,4,5],t.VIP_STATS_EVENT_WHATS_NEW_SHOWN=1,t.VIP_STATS_EVENT_WHATS_NEW_PURCHASE_CLICK=2,t.VIP_STATS_EVENT_PROMO_DISABLED_SHOWN=3,t.VIP_STATS_EVENT_PROMO_DISABLED_PURCHASE_CLICK=4,t.VIP_STATS_EVENT_PROMO_ENABLED_SHOWN=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.VipStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VipStats",t.prototype._descriptor={fields:{event:{type:14,type_name:"badoo.bma.VipStatsEvent",number:1,label:1}}}}()),$gpb.exists("badoo.bma.VideoStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VideoStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VideoStats",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.VideoStatsAction",number:2,label:1},client_source:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1}}}}(),$gpb.exists("badoo.bma.PNBPromoBannerStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PNBPromoBannerStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PNBPromoBannerStats",t.prototype._descriptor={fields:{banner_id:{type:9,number:2,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:1,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAppStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerAppStats",t.prototype._descriptor={fields:{permission_acceptance_stats:{type:11,type_name:"badoo.bma.PermissionAcceptanceStats",number:12,label:1},registration_stats:{type:11,type_name:"badoo.bma.RegistrationStats",number:5,label:1},offerwall_source:{type:11,type_name:"badoo.bma.OfferwallStats",number:3,label:1},start_source:{type:11,type_name:"badoo.bma.ServerAppStatsStartSource",number:1,label:1},image_stats:{type:11,type_name:"badoo.bma.ImageStats",number:15,label:3},facebook_like_stats:{type:11,type_name:"badoo.bma.FacebookLikeStats",number:23,label:1},sharing_stats:{type:11,type_name:"badoo.bma.SharingStats",number:4,label:1},invite_stats:{type:11,type_name:"badoo.bma.InviteStats",number:10,label:1},client_notification_stats:{type:11,type_name:"badoo.bma.ClientNotificationStats",number:21,label:1},rush_hour_stats:{type:11,type_name:"badoo.bma.RushHourStats",number:14,label:1},browser_push_stats:{type:11,type_name:"badoo.bma.BrowserPushStats",number:27,label:1},promo_banner_stats:{type:11,type_name:"badoo.bma.PromoBannerStats",number:20,label:1},server_response_invalid_stats:{type:11,type_name:"badoo.bma.ServerResponseInvalidStats",number:16,label:1},common_stats:{type:11,type_name:"badoo.bma.CommonStats",number:24,label:1},shared_friends_stats:{type:11,type_name:"badoo.bma.SharedFriendsStats",number:11,label:1},star_rating_stats:{type:11,type_name:"badoo.bma.StarRatingStats",number:7,label:1},initial_chat_screen_stats:{type:11,type_name:"badoo.bma.InitialChatScreenStats",number:26,label:1},spotlight_stats:{type:11,type_name:"badoo.bma.SpotlightStats",number:8,label:1},verification_stats:{type:11,type_name:"badoo.bma.VerificationStats",number:13,label:1},tn_source:{type:11,type_name:"badoo.bma.TrustedNetworkStats",number:2,label:1},friend_or_celebrity_sharing:{type:11,type_name:"badoo.bma.FriendOrCelebritySharingStats",number:6,label:1},in_app_notification_stats:{type:11,type_name:"badoo.bma.InAppNotificationStats",number:19,label:1},promoted_video_stats:{type:11,type_name:"badoo.bma.PromotedVideoStats",number:25,label:1},dwarfs_stats:{type:11,type_name:"badoo.bma.DwarfsStats",number:28,label:1},vip_stats:{type:11,type_name:"badoo.bma.VipStats",number:22,label:1},facebook_app_request_stats:{type:11,type_name:"badoo.bma.FacebookAppRequestStats",number:9,label:1},video_stats:{type:11,type_name:"badoo.bma.VideoStats",number:18,label:1},pnb_promo_banner_stats:{type:11,type_name:"badoo.bma.PNBPromoBannerStats",number:17,label:1}}}}()),function(){function e(e,s){return e.write('<div class="ovl-body"> <div class="ovl-promo ovl-promo--mosaic ovl-promo--mosaic-green"> ').section(s.get(["_PHOTO"],!1),s,{block:t},{}).write(' </div> <div class="ovl-content"> <h1>Rise up again!</h1> <p class="x-large">').reference("message",s,["s"]).write('</p> </div> <div class="ovl-buttons"> <div class="btn btn--lime"> <span class="btn-txt">Rise up</span> <span class="b-link js-riseup-again"></span> </div> </div> <div class="ovl-hint">').reference("cost",s).write('</div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(' <div class="brick brick--xxlg brick--stroke"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> ').section(t.get(["_MATCHES"],!1),t,{block:s},{}).write(" </div> ")}function s(e){return e.write(' <div class="brick brick--sm"> <i class="ico-feature ico-feature--vote"></i> </div> ')}return $u.dust.register("payment_services/wizards/services/popup.riseup-again",e),e.s={_PHOTO:t},t.s={_MATCHES:s},e}(),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.RiseUpAgainView||(B.HoN_v3.Overlays.RiseUpAgainView=$class(B.DustView,{template:"payment_services/wizards/services/popup.riseup-again",setPurchaseInfo:function(e){return this.set({_PHOTO:e.getApplicationFeature().getDisplayImages().map(function(e){return{src:e.getDisplayImages(),_MATCHES:e.getBadgeType()===$p.NotificationBadgeType.NOTIFICATION_BADGE_TYPE_MUTUAL}}),message:e.getApplicationFeature().getDisplayMessage(),cost:e.getCost()})}})),B.Ovl.HoN_v3_RiseUpAgain||(B.Ovl.HoN_v3_RiseUpAgain=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_RiseUpAgain",type:"riseup-again",simple_close:!1,purchase_info:null,NOTIFICATION_TYPE:"riseup-again",RISEUP_OVL_TYPE:"riseup",RISEUP_OVL_URL:"/billing/riseup-ws.phtml?activation_place=176",_$e:null,init:function(){$super(this,arguments),this.render(),this._$e=$e.on({".js-riseup-again":this.onClickRiseUp},this)},destroy:function(e){e&&this._sendStatRequest($p.CommonStatsEventType.COMMON_EVENT_DISMISS),$e.un(this._$e)},render:function(){var e=new B.HoN_v3.Overlays.RiseUpAgainView;e.setPurchaseInfo(this.purchase_info),this._render(e),this._sendStatRequest($p.CommonStatsEventType.COMMON_EVENT_SHOW)},_sendStatRequest:function(e){var t=(new $p.ServerAppStats).setClientNotificationStats((new $p.ClientNotificationStats).setNotificationId(this.NOTIFICATION_TYPE).setEvent(e));new $gpb.Rpc($p.MessageType.SERVER_APP_STATS,t).request()},onClickRiseUp:function(){B.Ovl.open({type:this.RISEUP_OVL_TYPE,url:this.RISEUP_OVL_URL}),this._sendStatRequest($p.CommonStatsEventType.COMMON_EVENT_CLICK)}})),B.HoN_v3.FacebookPromoController||(!function(){function e(e,o){return e.write('<div class="ovl-body"> <div class="ovl-promo ovl-promo--mosaic ovl-promo--mosaic-dblue"> <div class="social-connect social-connect--fb-friends"> <h1>Check out Facebook friends of friends!</h1> <div class="fb-people-friends').section(o.get(["_SEARCH_F"],!1),o,{block:t},{}).section(o.get(["_SEARCH_M"],!1),o,{block:s},{}).section(o.get(["_SEARCH_N"],!1),o,{block:i},{}).write('"></div> </div> </div> <div class="ovl-buttons js-wrap"> <div class="social-connect-txt_"> <div class="inline switcher switcher--lg switcher--colored"> <input type="checkbox" id="fbfriends-switcher" class="js-fb-permissions-switcher" data-url="').reference("social_network_url",o).write('"> <label for="fbfriends-switcher"> <span class="switcher__state switcher__state--on">On</span><span class="switcher__state switcher__state--off">Off</span> </label> </div> <span class="inline large social-connect-txt">Show Facebook friends of friends in the Game</span> </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e){return e.write(" fb-people-friends--female")}function s(e){return e.write(" fb-people-friends--male")}function i(e){return e.write(" fb-people-friends--all")}return $u.dust.register("overlays/popup.facebook-promo",e),e.s={_SEARCH_F:t,_SEARCH_M:s,_SEARCH_N:i},e}(),B.HoN_v3.FacebookPromoView=$class(B.DustView,{template:"overlays/popup.facebook-promo",setSex:function(e){var t;switch(e){case $p.SexType.UNKNOWN:t="_SEARCH_N";break;case $p.SexType.MALE:t="_SEARCH_M";break;case $p.SexType.FEMALE:t="_SEARCH_F"}return this.set(t,!0)}}),B.HoN_v3.FacebookPromoViewController=$class($u.Observable,{$e:null,switcher:null,constructor:function(){$super(this,arguments),this.$e=$e.on(".js-fb-permissions-switcher",this.onPermissonSwitch,this)},onCancel:function(){this.getSwitcher().checked=!1},getSwitcher:function(){return this.switcher||(this.switcher=$el.down(document,".js-fb-permissions-switcher")),this.switcher},onPermissonSwitch:function(){return this.fire("permission-switch"),!0},destroy:function(){$e.un(this.$e),this.$e=null,this.switcher=null}}),$gpb.exists("badoo.bma.ServerGetEncounters","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetEncounters=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetEncounters",t.prototype._descriptor={fields:{number:{type:5,number:3,label:2},search_context:{type:14,type_name:"badoo.bma.SearchType",number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:6,label:1},offset:{type:5,number:2,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:7,label:1},last_person_id:{type:9,number:4,label:1},requested_person_ids:{type:9,number:5,label:3}}}}(),B.HoN_v3.FacebookPromoController=$class($u.Observable,{sex:null,viewController:null,$r:null,$e:null,watch_$t:null,wnd:null,constructor:function(){$super(this,arguments),this.viewController=new B.HoN_v3.FacebookPromoViewController,this.viewController.on({"permission-switch":this.onPermissionSwitch},this),this.watch_$t=new $t(this.check,this,500),this.$e=B.HoN_v3.on({"social-account:linked":this.onAccountLinked,"social-account:cancel":this.onAccountCancel},this),this.getEncountersSettings()
},destroy:function(){this.sex=null,this.viewController.destroy(),this.viewController=null,B.HoN_v3.un($e),this.$e=null,this.watch_$t.clear(),this.watch_$t=null,this.wnd=null,this.$r&&(this.$r.abort(),this.$r=null)},render:function(){return this.sendShowHit(),(new B.HoN_v3.FacebookPromoView).setSex(this.sex)},check:function(){this.wnd.closed?(this.wnd=null,this.viewController.onCancel()):this.watch_$t.set()},onAccountLinked:function(){this.fire("permission-set")},onAccountCancel:function(){this.viewController.onCancel()},getEncountersSettings:function(){this.$r&&this.$r.abort();var e=(new $p.SearchSettingsContext).setSearchResponseContext($p.SearchType.ENCOUNTERS);this.$r=new $gpb.Rpc($p.MessageType.SERVER_GET_ENCOUNTER_SETTINGS,e).on($p.MessageType.CLIENT_ENCOUNTER_SETTINGS,this.onEncountersSettings,this).request()},onEncountersSettings:function(e,t){e&&this.fire("error");var s=t.getGender();this.sex=2===s.length?$p.SexType.UNKNOWN:$p.SexType.MALE==s[0]?$p.SexType.MALE:$p.SexType.FEMALE,this.fire("load")},onReject:function(){this.sendRejectHit()},onPermissionSwitch:function(){this.sendClickHit(),this.wnd=window.open("/facebook/verify.phtml?rt="+$r.prototype.rt,"auth","width=600,height=400"),this.watch_$t.set()},sendShowHit:function(){this.sendEventHit($p.InviteStatsActionType.INVITE_STATS_ACTION_TYPE_SEEN)},sendClickHit:function(){this.sendEventHit($p.InviteStatsActionType.INVITE_STATS_ACTION_TYPE_CONNECT)},sendRejectHit:function(){this.sendEventHit($p.InviteStatsActionType.INVITE_STATS_ACTION_TYPE_IGNORE)},sendEventHit:function(e){var t=new $p.ServerAppStats,s=new $p.InviteStats;s.setActionType(e).setClientSource($p.ClientSource.CLIENT_SOURCE_FACEBOOK_PROMO).setProviderType($p.ExternalProviderType.EXTERNAL_PROVIDER_TYPE_FACEBOOK),t.setInviteStats(s),new $gpb.Rpc($p.MessageType.SERVER_APP_STATS,t).request()}})),B.Ovl.FacebookPromo=new $class(B.Ovl.View,{name:"Ovl.FbPromo",type:"hon-v3-facebook-promo",init:function(){$super(this,arguments),this.controller=new B.HoN_v3.FacebookPromoController,this.controller.on({load:this.render,"permission-set":this.permissonSet},this)},permissonSet:function(){B.Ovl.open({type:"hon-v3-notify",blockName:"ADDED"})},render:function(){this._render(this.controller.render())},destroy:function(e){e&&this.controller.onReject(),this.controller.destroy(),$super(this,arguments)}}),$gpb.exists("badoo.bma.ServerGetCity","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetCity=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetCity",t.prototype._descriptor={fields:{city_id:{type:5,number:1,label:1},latitude:{type:1,number:4,label:1},user_id:{type:9,number:2,label:1},longitude:{type:1,number:3,label:1}}}}(),$gpb.exists("badoo.bma.ServerUpdateLocation","message")||($gpb.exists("badoo.bma.CellID","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CellID=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CellID",t.prototype._descriptor={fields:{home_country_code:{type:9,number:6,label:1},mcc:{type:9,number:4,label:2},location_area_id:{type:9,number:2,label:2},signal_strength:{type:9,number:5,label:1},cell_id:{type:9,number:1,label:2},mnc:{type:9,number:3,label:2},imsi:{type:9,number:7,label:1}}}}(),$gpb.exists("badoo.bma.VisitingPlace","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VisitingPlace=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VisitingPlace",t.prototype._descriptor={fields:{not_interested:{type:8,number:8,label:1},title:{type:9,number:2,label:1},longitude:{type:1,number:4,label:1},leave_timestamp:{type:3,number:6,label:1},range:{type:5,number:7,label:1},latitude:{type:1,number:3,label:1},enter_timestamp:{type:3,number:5,label:1},id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.AndroidWifi","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AndroidWifi=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.AndroidWifi",t.prototype._descriptor={fields:{timestamp:{type:3,number:5,label:1},signal_strength:{type:5,number:3,label:1},connected:{type:8,number:4,label:1},name:{type:9,number:1,label:2},ssid:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.BluetoothInfo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.BluetoothInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.BluetoothInfo",t.prototype._descriptor={fields:{mac:{type:9,number:1,label:1},name:{type:9,number:2,label:1},android_class:{type:5,number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerUpdateLocation=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerUpdateLocation",t.prototype._descriptor={fields:{cell_id:{type:11,type_name:"badoo.bma.CellID",number:2,label:3},places_visited:{type:11,type_name:"badoo.bma.VisitingPlace",number:7,label:3},wifi:{type:11,type_name:"badoo.bma.Hashtable",number:3,label:1},current_timestamp:{type:3,number:5,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:1,label:3},android_wifis:{type:11,type_name:"badoo.bma.AndroidWifi",number:4,label:3},bluetooth_info:{type:11,type_name:"badoo.bma.BluetoothInfo",number:6,label:3}}}}()),B.HoN_v3.GeolocationModel||(B.HoN_v3.GeolocationModel=$class($u.Observable,{updateLocationRequest:null,destroy:function(){this.abortCityRequest(),this.updateLocationRequest&&(this.updateLocationRequest.abort(),this.updateLocationRequest=null)},save:function(e,t,s,i){this.updateLocationRequest&&this.updateLocationRequest.abort();var o=this.getUpdateQuery(e,t);this.updateLocationRequest=new $gpb.Rpc($p.MessageType.SERVER_UPDATE_LOCATION,o),s&&this.updateLocationRequest.on($gpb.Rpc.SpecialEvent.ON_REQ_DONE,s,i||window),this.updateLocationRequest.request()},saveInBackground:function(e,t,s,i){var o=new $gpb.Rpc.Batch;o.addCommand($p.MessageType.SERVER_UPDATE_LOCATION,this.getUpdateQuery(e,t));var n=new $gpb.Rpc($p.MessageType.SERVER_BACKGROUND_REQUEST,o);s&&n.on($gpb.Rpc.SpecialEvent.ON_REQ_DONE,s,i||window),n.request()},getCity:function(e,t){this.abortCityRequest();var s=(new $p.ServerGetCity).setLongitude(t).setLatitude(e);return this.cityRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_CITY,s).on($p.MessageType.CLIENT_CITY,this.onCity,this).request(),this},getCoordinates:function(e){this.abortCityRequest();var t=(new $p.ServerGetCity).setCityId(+e);return this.cityRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_CITY,t).on($p.MessageType.CLIENT_CITY,this.onCity,this).request(),this},onCity:function(e,t){this.cityRequest=null,this.fire("location:coordinates",t)},abortCityRequest:function(){this.cityRequest&&(this.cityRequest.abort(),this.cityRequest=null)},getUpdateQuery:function(e,t){var s=new $p.ServerUpdateLocation,i=new $p.GeoLocation;return i.setLongitude(t).setLatitude(e),s.addLocation(i),s}})),function(){function e(e,o){return e.section(o.get(["POPUP_TIMER"],!1),o,{block:t},{}).write(" ").section(o.get(["POPUP_FAIL"],!1),o,{block:s},{}).write(" ").section(o.get(["POPUP_INFO"],!1),o,{block:i},{})}function t(e){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <div class="location-timer"> <div class="scale scale--xsm js-dist-timer" data-control-type="timer" data-line-width="3" data-size="48" data-style="LIGHT" data-background="#2b65f8" data-no-gap="true"></div> </div> <p>Press Allow button in your browser</p> </div> <div class="location-arrow"></div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div> ')}function s(e){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Please try again in a few seconds</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Close</span> <span class="b-link js-ovl-close"></span> </div> </div> </div> ')}function i(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="large">To continue, you need to change your browser settings so we can see your approximate location.</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Find out how</span> <span class="b-link js-ovl-open" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("ovl_url",t).write('"></span> </div> <div class="btn"> <span class="btn-txt">Go back</span> <span class="b-link js-ovl-close"></span> </div> </div> </div> ')}return $u.dust.register("profile/popup.enable-location-timer",e),e.s={POPUP_TIMER:t,POPUP_FAIL:s,POPUP_INFO:i},e}(),B.HoN_v3.GeoLocation||(B.HoN_v3.GeoLocation=new $class({name:"GeoLocation",enabled:0,state:"*",lat:0,lon:0,last:0,freq:60,cache:30,wait:30,from:"",err_msg:"",supported:!1,_inited:!1,constructor:function(){B.on({"app:init":this.init},this),B.App.enabled&&this.init(),this.err_msg=$u.dust.render("profile/popup.enable-location-timer",{},"POPUP_FAIL")},init:function(){this._inited||navigator.geolocation&&(this.supported=!0,this.toggle_geolocation(!0),this.ready_=this.ready.bind(this),this.error_=this.error.bind(this),this.t=new $t(this.requestBackground,this),this.last?this.t.set(Math.max(1e3,1e3*this.freq-this.last)):this.enabled&&this.t.set(1e3),this._inited=!0)},destroy:function(){this._inited&&(this.t&&this.t.clear(),this.t=null,this.toggle_geolocation(!1),this._inited=!1)},ask:function(e){this.from=e?e:"",this.request()},requestBackground:function(){this.from="background",this.request()},request:function(){navigator.geolocation.getCurrentPosition(this.ready_,this.error_,{enableHighAccuracy:!0,timeout:1e3*this.wait,maximumAge:1e3*this.cache})},ready:function(e){this.send(e.coords.latitude,e.coords.longitude)},error:function(e){var t=e.code===e.PERMISSION_DENIED;t&&B.Ovl.open({type:"cloud",html:this.err_msg}),this.send(0,0,e.code,t)},send:function(e,t,s,i){this.lat=e,this.lon=t,s||B.HoN_v3.fire("location:background",e,t,this.from),i||this.t.set(1e3*this.freq)},toggle_geolocation:function(e){$el.tgl(document.body,"geolocation",e)}})),function(){function e(e,s){return e.write('<div class="ovl-body"> ').section(s.get(["VIEWER"],!1),s,{block:t},{}).write(" ").section(s.get(["OWNER"],!1),s,{block:l},{}).write(' <div class="ovl-content"> <div class="location-options"> <div class="location-option"> <p>Get the mobile app and make it easy to find people nearby!</p> <div class="btn btn--sm btn--blue"> <i class="ico ico--xsm ico--white ico--mobile"><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="/ws/get-app-ovl?ref=web-ovl-share-location"></span></i><span class="btn-txt">Get the mobile app</span> </div> </div> <div class="lgrey location-options__or"><span class="location-options__or_">or</span></div> <div class="location-option"> <p>Turn on location services in your browser and meet people nearby!</p> <div class="btn btn--sm btn--blue"> <i class="ico ico--xsm ico--white ico--location"><span class="b-link js-dist-link"></span></i><span class="btn-txt">Turn on location</span> </div> </div> </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(' <div class="ovl-promo"> ').section(t.get(["HEADER"],!1),t,{block:s},{}).write(" ").section(t.get(["DISTANCE"],!1),t,{block:n},{}).write(" </div> ")}function s(e,t){return e.write(" <h1> ").section(t.get(["MALE"],!1),t,{block:i},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:o},{}).write(" </h1> ")}function i(e){return e.write("Find out how close he is!")}function o(e){return e.write("Find out how close she is!")}function n(e,t){return e.write(' <div class="location-distance"> ').section(t.get(["SELF"],!1),t,{block:r},{}).write(" ").section(t.get(["OTHER"],!1),t,{block:a},{}).write(" </div> ")}function r(e,t){return e.write('<div class="location-distance__user location-distance__user--self"><img src="').reference("userpic",t).write('" alt=""></div>')}function a(e,t){return e.write('<div class="location-distance__user location-distance__user--other"><img src="').reference("userpic",t).write('" alt=""></div>')}function l(e,t){return e.write(' <div class="ovl-promo"> <h1>Meet people nearby on ').reference("PAGE_partner_name",t).write('!</h1> <div class="location-nearby"> ').section(t.get(["CRITERIA_MALE"],!1),t,{block:_},{}).write(" ").section(t.get(["CRITERIA_FEMALE"],!1),t,{block:c},{}).write(" ").section(t.get(["CRITERIA_OTHER"],!1),t,{block:u},{}).write(" </div> </div> ")}function _(e,t){return e.write('<img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/location/location-nearby-male.1.png"}).write('" alt="">')}function c(e,t){return e.write('<img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/location/location-nearby-female.1.png"}).write('" alt="">')}function u(e,t){return e.write('<img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/location/location-nearby-other.1.png"}).write('" alt="">')}return $u.dust.register("profile/popup.enable-location",e),e.s={VIEWER:t,OWNER:l},t.s={HEADER:s,DISTANCE:n},s.s={MALE:i,FEMALE:o},n.s={SELF:r,OTHER:a},l.s={CRITERIA_MALE:_,CRITERIA_FEMALE:c,CRITERIA_OTHER:u},e}(),B.HoN_v3.DistanceOvl=new $class(B.Ovl.View,{name:"Ovl.Distance",type:"distance",content_tpl:"profile/popup.enable-location",simple_close:!1,url:"",try_again:"",delay:50,progress:null,progress_t:null,from:"",cssArrowSelector:function(){var e=$u.ua;return"ff"==e||"ie10"==e||"ie11"==e?"arr_"+e.substring(0,2):"edge"==e?"arr_ie":"cr"==e?"arr_webkit":"wk"==e?!1:"arr_other"}(),init:function(e){$super(this,arguments),this.render(e.user),this.try_again=$u.dust.render("profile/popup.enable-location-timer",{},"POPUP_FAIL"),this.from="profile",$e.on({".js-dist-link":this.startCount,".js-dist-cancel":this.stopCount},this),B.on("geo:update",this.success,this)},destroy:function(){this.stopCount(),$e.un({".js-dist-link":this.startCount,".js-dist-cancel":this.stopCount},this),this.progress=this.progress_t=null,$super(this,arguments)},showWarn:function(){B.Ovl.open({type:"cloud",html:$u.tpl(this.try_again,{url:this.url})})},toggle:function(){this._render($u.dust.render("profile/popup.enable-location-timer",{},"POPUP_TIMER")),$el.tgl(this._el,"step_2")},startCount:function(){B.HoN_v3.GeoLocation.ask("profile"),this.toggle(),this.cssArrowSelector&&$el.add(this._el,this.cssArrowSelector);var e=$el.down(this._el,".js-dist-timer");this.progress=$c.get(e,"timer"),this.progress.restart({autorun:!0,animationLength:1e3*this.delay}),this.progress_t=new $t(this.showWarn,this,1e3*this.delay),this.progress_t.set()},stopCount:function(e){this.cssArrowSelector&&$el.del(this._el,this.cssArrowSelector),this.progress_t&&this.progress_t.clear(),this.progress&&(this.progress.stop(),this.progress=null),e&&this.render()},success:function(){this.close()},render:function(e){var t=e.own_profile?e.profile:e.curr_user.profile;if(1==B.Encounters.Filter.settings.gender.length)var s=B.Encounters.Filter.settings.gender[0];var i=e.own_profile,o={VIEWER:!i&&{HEADER:{MALE:e.person.getGender()===$p.SexType.MALE,FEMALE:e.person.getGender()===$p.SexType.FEMALE},DISTANCE:{SELF:{userpic:t.getProfilePhoto().getPreviewUrl()},OTHER:{userpic:e.profile.getProfileImageId()}}},OWNER:i&&{PAGE_partner_name:$l.get("partner","title"),CRITERIA_MALE:s===$p.SexType.MALE,CRITERIA_FEMALE:s===$p.SexType.FEMALE,CRITERIA_OTHER:!s},mobile_app_url:""};this._render($u.dust.render(this.content_tpl,o))}}),$l.register({section:"browsers",lang:"en-us",translations:{Chrome:"Chrome","Internet Explorer":"Internet Explorer",Firefox:"Firefox",Safari:"Safari",Opera:"Opera"}}),function(){function e(e,s){return e.write('<div class="ovl-body"> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> <div class="ovl-content"> <i class="unsupported-browser-ico"></i> <p class="xxx-large b">We\'ll stop supporting your browser soon.</p> <p class="large">You\'re using a very old version of ').reference("browser_name",s).write(". Update it now to enjoy the full ").reference("PAGE_partner_name",s).write(' experience.</p> <div class="browsers-list"> <p class="large b">Download a new browser:</p> ').section(s.get(["_DOWNLOAD_BROWSER"],!1),s,{block:t},{}).write(" </div> </div> </div>")}function t(e,t){return e.write('<a href="').reference("download_url",t).write('" class="browsers-list__i" target="_blank"> <i class="browsers-list__ico browsers-list__ico--').reference("icon_class",t).write('"></i><br>').reference("title",t).write(" </a>")}return $u.dust.register("overlays/popup.unsupported-browser",e),e.s={_DOWNLOAD_BROWSER:t},e}(),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.UnsupportedBrowserView||(B.HoN_v3.Overlays.UnsupportedBrowserView=$class(B.DustView,{template:"overlays/popup.unsupported-browser",BROWSERS_MAP:{ie:{name:$l.get("browsers","Internet Explorer"),icon:"ie",url:"http://windows.microsoft.com/ie"},cr:{name:$l.get("browsers","Chrome"),icon:"chrome",url:"http://www.google.com/chrome"},ff:{name:$l.get("browsers","Firefox"),icon:"firefox",url:"http://www.firefox.com"}},constructor:function(){$super(this,arguments),this.set("PAGE_partner_name",B.HoN_v3.Partner.get_name())},setCurrentBrowser:function(e){return this.set("browser_name",this.BROWSERS_MAP[e].name)},setNewBrowsers:function(e){return this.set("_DOWNLOAD_BROWSER",e.map(this.getBrowserData,this))},getBrowserData:function(e){var t=this.BROWSERS_MAP[e];return{icon_class:t.icon,download_url:t.url,title:t.name}}})),B.Ovl.UnsupportedBrowser=new $class(B.Ovl.View,{name:"Ovl.UnsupportedBrowser",type:"unsupported-browser",simple_close:!1,init:function(){$super(this,arguments);var e=(new B.HoN_v3.Overlays.UnsupportedBrowserView).setCurrentBrowser($u.ua.replace(/(ie)\d+/,"$1")).setNewBrowsers(this.getNewBrowsers());this._render(e)},destroy:function(){$super(this,arguments)},getNewBrowsers:function(){var e=["cr","ff"];return"windows"==$u.platform&&e.unshift("ie"),e}}),B.HoN_v3.Awards={},$gpb.exists("badoo.bma.ServerGetAward","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetAward=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetAward",t.prototype._descriptor={fields:{award_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:1}}}}(),B.HoN_v3.Awards.Model=$class(B.HoN_v3.Models.BaseModel,{award:null,_awardRequest:null,awardId:null,destroy:function(){this.abort(),this.award=null,this.awardId=null,$super(this,arguments)},setAwardId:function(e){return this.awardId=e,this},fetch:function(e){$super(this,arguments),this._awardRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_AWARD,this.getAwardQuery()).on($p.MessageType.CLIENT_AWARD,this.onAwardRequestReady,this).setJinbaRequest(e).request()},getAward:function(){return this.award},abort:function(){this.destroyAwardRequest()},destroyAwardRequest:function(){this._awardRequest&&(this._awardRequest.destroy(),this._awardRequest=null)},getAwardQuery:function(){return(new $p.ServerGetAward).setAwardId(this.awardId)},onAwardRequestReady:function(e,t){this.destroyAwardRequest(),e?this.fetchError(e):(this.award=t,this.fetchReady())}}),function(){function e(e,s){return e.write('<div class="ovl-body"> <div class="ovl-promo"> ').section(s.get(["AWARD"],!1),s,{block:t},{}).write(" ").section(s.get(["_AWARD"],!1),s,{block:v},{}).write(" </div> ").section(s.get(["SELF_EXISTING_AWARD"],!1),s,{block:T},{}).write(" ").section(s.get(["SELF_EARNED_AWARD"],!1),s,{block:w},{}).write(" ").section(s.get(["VIEWER_AWARD"],!1),s,{block:C},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(' <i class="award award--full ').section(t.get(["_ACTIVE"],!1),t,{block:s},{}).write(" ").section(t.get(["_MATCHED"],!1),t,{block:i},{}).write(" ").section(t.get(["_HOTTEST"],!1),t,{block:o},{}).write(" ").section(t.get(["_PICKY"],!1),t,{block:n},{}).write(" ").section(t.get(["_VOTER"],!1),t,{block:r},{}).write(" ").section(t.get(["_CHATTY"],!1),t,{block:a},{}).write(" ").section(t.get(["_CHECKED"],!1),t,{block:l},{}).write(" ").section(t.get(["_FRIENDLY"],!1),t,{block:_},{}).write(" ").section(t.get(["_LIKED"],!1),t,{block:c},{}).write(" ").section(t.get(["_PROFILE_COMPLETE"],!1),t,{block:u},{}).write(" ").section(t.get(["_FB_STAR"],!1),t,{block:p},{}).write(" ").section(t.get(["_TW_STAR"],!1),t,{block:d},{}).write(" ").section(t.get(["_GLOBE"],!1),t,{block:h},{}).write(" ").section(t.get(["_INVITER"],!1),t,{block:b},{}).write(" ").section(t.get(["_LANGUAGE"],!1),t,{block:m},{}).write(" ").section(t.get(["_SCORE"],!1),t,{block:E},{}).write(" ").section(t.get(["_VIP"],!1),t,{block:f},{}).write(" ").section(t.get(["_PHOTO_OF_THE_DAY"],!1),t,{block:g},{}).write(' "></i> ')}function s(e){return e.write("award--active")}function i(e){return e.write("award--matched")}function o(e){return e.write("award--hottest")}function n(e){return e.write("award--picky")}function r(e){return e.write("award--voter")}function a(e){return e.write("award--chatty")}function l(e){return e.write("award--checked")}function _(e){return e.write("award--friendly")}function c(e){return e.write("award--liked")}function u(e){return e.write("award--profile-complete")}function p(e){return e.write("award--fb-star")}function d(e){return e.write("award--tw-star")}function h(e){return e.write("award--globe")}function b(e){return e.write("award--inviter")}function m(e){return e.write("award--language")}function E(e){return e.write("award--score")}function f(e){return e.write("award--vip")}function g(e){return e.write("award--photo")}function v(e,t){return e.write(' <img src="').reference("img_src",t).write('" alt="" width="320" height="320"> ')}function T(e,t){return e.write(' <div class="ovl-content"> <h1>').reference("award_name",t).write('</h1> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:O},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:y},{}).write(' </p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_ACTIVATE_AWARDS"],!1),t,{block:R},{}).write(" ").section(t.get(["BUTTON_SHARE_AWARDS"],!1),t,{block:S},{}).write(" </div> ")}function O(e,t){return e.write("You got this award on <span>").reference("award_date",t).write("</span>")}function y(e,t){return e.write("You got this award on <span>").reference("award_date",t).write("</span>")}function R(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Activate your award</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}function S(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Share your award</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}function w(e,t){return e.write(' <div class="ovl-content"> <h1>Congratulations</h1> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:I},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:N},{}).write(' </p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_ACTIVATE_AWARDS"],!1),t,{block:A},{}).write(" </div> ")}function I(e,t){return e.write("You've earned an award:<br><b>").reference("award_name",t).write("</b> on ").reference("PAGE_partner_name",t).write("!")}function N(e,t){return e.write("You've earned an award:<br><b>").reference("award_name",t).write("</b> on ").reference("PAGE_partner_name",t).write("!")}function A(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Activate your award</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}function C(e,t){return e.write(' <div class="ovl-content"> <h1>').reference("award_name",t).write('</h1> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:P},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:$},{}).write(' </p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_GET_YOURS"],!1),t,{block:L},{}).write(" </div> ")}function P(e,t){return e.reference("user_name",t).write(" got this award on <span>").reference("award_date",t).write("</span>")}function $(e,t){return e.reference("user_name",t).write(" got this award on <span>").reference("award_date",t).write("</span>")}function L(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Find out how to get yours</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}return $u.dust.register("awards/popup.awards-show",e),e.s={AWARD:t,_AWARD:v,SELF_EXISTING_AWARD:T,SELF_EARNED_AWARD:w,VIEWER_AWARD:C},t.s={_ACTIVE:s,_MATCHED:i,_HOTTEST:o,_PICKY:n,_VOTER:r,_CHATTY:a,_CHECKED:l,_FRIENDLY:_,_LIKED:c,_PROFILE_COMPLETE:u,_FB_STAR:p,_TW_STAR:d,_GLOBE:h,_INVITER:b,_LANGUAGE:m,_SCORE:E,_VIP:f,_PHOTO_OF_THE_DAY:g},T.s={MALE:O,FEMALE:y,BUTTON_ACTIVATE_AWARDS:R,BUTTON_SHARE_AWARDS:S},w.s={MALE:I,FEMALE:N,BUTTON_ACTIVATE_AWARDS:A},C.s={MALE:P,FEMALE:$,BUTTON_GET_YOURS:L},e}(),B.HoN_v3.Awards.View=$class(B.DustView,{template:"awards/popup.awards-show",SHARED_URL:"/ws/awards/share.phtml?award_id={awardId}",setAward:function(e){var t=e.getShared(),s={type:"hon-v3-badges-sharing",url:$u.tpl(this.SHARED_URL,{awardId:e.getAwardId()})};return this.set({_AWARD:{img_src:e.getPromoBlock().getImageId()[0]},SELF_EXISTING_AWARD:{award_name:e.getTitle(),award_date:e.getPromoBlock().getHeader(),MALE:B.Session.getUserGender()===$p.SexType.MALE,FEMALE:B.Session.getUserGender()===$p.SexType.FEMALE}}),t?this.set("SELF_EXISTING_AWARD/BUTTON_ACTIVATE_AWARDS",s):this.set("SELF_EXISTING_AWARD/BUTTON_SHARE_AWARDS",s),this}}),B.HoN_v3.Awards.Controller=$class(B.HoN_v3.BaseAsyncController,{awardId:null,model:null,setOvlData:function(e){this.awardId=e.awardId+""},destroy:function(){this.model&&(this.model.destroy(),this.model=null),this.awardId=null,$super(this,arguments)},init:function(e){this.model=new B.HoN_v3.Awards.Model,this.model.setAwardId(this.awardId).fetch(e,this.onModelDone,this.onModelError,this)},onModelDone:function(){this.viewReady()},onModelError:function(){B.Ovl.close()},getView:function(){var e=new B.HoN_v3.Awards.View;return e.setAward(this.model.getAward()),e}}),B.Ovl.Award=new $class(B.Ovl.Base,{type:"hon-v3-show-award",controllerType:B.HoN_v3.Awards.Controller}),B.HoN_v3.ChooseTiwOverlay||(B.HoN_v3.ChooseTiwOverlay={},function(){function e(e){return e.write('<div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Please choose if you’re here to make new friends, chat or date.</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Continue</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}return $u.dust.register("people-nearby/popup.empty-iht",e),e}(),B.HoN_v3.ChooseTiwOverlay.View=$class(B.DustView,{template:"people-nearby/popup.empty-iht"}),B.HoN_v3.ChooseTiwOverlay.Controller=$class(B.HoN_v3.BaseController,{getView:function(){return new B.HoN_v3.ChooseTiwOverlay.View}})),B.Ovl.ConfirmPush=new $class(B.Ovl.Base,{type:"hon-v3-choose-tiw",controllerType:B.HoN_v3.ChooseTiwOverlay.Controller}),B.HoN_v3.SignoutOvlController||(!function(){function e(e,t){return e.write('<div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Do you really want to sign out?</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Yes</span> <a href="').reference("signout_url",t).write('" class="b-link"></a> </div> <div class="btn btn--sm btn--white"> <span class="btn-txt">No</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}return $u.dust.register("sidebar/popup.signout",e),e}(),B.HoN_v3.SignoutOvlView=$class(B.DustView,{template:"sidebar/popup.signout",constructor:function(){$super(this,arguments),this.set({signout_url:"/signout?rt="+$r.prototype.rt})}}),B.HoN_v3.SignoutOvlController=$class(B.HoN_v3.BaseController,{getView:function(){return new B.HoN_v3.SignoutOvlView}})),B.Ovl.SignOut=new $class(B.Ovl.View,{name:"Ovl.SignOut",type:"hon-v3-signout",controller:null,init:function(){$super(this,arguments),this.controller=new B.HoN_v3.SignoutOvlController,this._render(this.controller.getView())},destroy:function(){this.controller.destroy(),this.controller=null,$super(this,arguments)}}),B.HoN_v3.UnlinkPhoneOvlController||($gpb.exists("badoo.bma.ClientUserRemoveVerify","message")||($gpb.exists("badoo.bma.FormFailure","message")||($gpb.exists("badoo.bma.ServerErrorMessage","message")||($gpb.exists("badoo.bma.ServerErrorType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerErrorType=new $gpb.Enum("badoo.bma.ServerErrorType");t._values=[0,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,9e3,9001,9002,9003,9010,9011,9012,9100,9101,9102,9110,9111,9112,9113,9120,9121,9122,1e4,10001,10011,10002,10003,10403,10404,10405,10406,10407],t.UNKNOWN_SERVER_ERROR_TYPE=0,t.SERVER_ERROR_TYPE_DUPLICATE_EMAIL=13,t.SERVER_ERROR_TYPE_BLOCKED_ACCOUNT=14,t.SERVER_ERROR_TYPE_CAPTCHA_REQUIRED=15,t.SERVER_ERROR_TYPE_LOCATION_REQUIRED=17,t.SERVER_ERROR_TYPE_MULTIMEDIA_DISABLED=18,t.SERVER_ERROR_TYPE_LOCATION_SHARING_DISABLED=19,t.SERVER_ERROR_TYPE_INVALID_PERSON_ID=20,t.SERVER_ERROR_TYPE_EXTERNAL_PROVIDER_TOKEN_EXPIRED=21,t.SERVER_ERROR_TYPE_PERMISSION_DENIED=22,t.SERVER_ERROR_TYPE_CANT_LOAD_AWARD=23,t.SERVER_ERROR_TYPE_ILLEGAL_ARGUMENT=24,t.SERVER_ERROR_TYPE_UNDERAGE_USER=25,t.SERVER_ERROR_TYPE_FEATURE_NOT_CONFIGURABLE=26,t.SERVER_ERROR_TYPE_ASYNC_NOT_SUPPORTED=27,t.SERVER_ERROR_TYPE_BACKGROUND_MODE_NOT_SUPPORTED=28,t.SERVER_ERROR_TYPE_NO_PRODUCTS_AVAILABLE=30,t.SERVER_ERROR_TYPE_UNKNOWN_COUNTRY=31,t.SERVER_ERROR_TYPE_FEATURE_UNAVAILABLE=32,t.SERVER_ERROR_TYPE_SAVE_FAILURE=33,t.SERVER_ERROR_TYPE_UNKNOWN_RESOURCE=34,t.SERVER_ERROR_TYPE_NOT_DELETABLE=35,t.SERVER_ERROR_TYPE_EXTERNAL_PROVIDER_DATA_INCOMPLETE=36,t.SERVER_ERROR_TYPE_PREMATCH_EXPIRED=37,t.SERVER_ERROR_TYPE_INCORRECT_PASSWORD=38,t.SERVER_ERROR_TYPE_COMMENT_TOO_SHORT=39,t.SERVER_ERROR_TYPE_CHAT_ERROR=40,t.SERVER_ERROR_TYPE_REQUEST_INCOMPLETE=41,t.SERVER_ERROR_TYPE_DATA_UNAVAILABLE=42,t.SERVER_ERROR_TYPE_RATE_LIMIT_EXCEEDED=43,t.SERVER_ERROR_SURVEY_INCOMPLETE=45,t.SERVER_ERROR_TYPE_NON_FATAL_ERROR=46,t.SERVER_ERROR_TYPE_PAYMENT_IN_PROGRESS=47,t.SERVER_ERROR_TYPE_CLIENT_UNKNOWN_WIRE_VERSION=9e3,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_TOO_LONG=9001,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_TOO_SHORT=9002,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_PARSE_ERROR=9003,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_INVALID=9010,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_BODY_MISSING=9011,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_BODY_INVALID=9012,t.SERVER_ERROR_TYPE_SERVER_INTERNAL_ERROR=9100,t.SERVER_ERROR_TYPE_SERVER_NOT_IMPLEMENTED=9101,t.SERVER_ERROR_TYPE_SERVER_VERSION_NOT_SUPPORTED=9102,t.SERVER_ERROR_TYPE_SERVER_PROXY_UNRESOLVED=9110,t.SERVER_ERROR_TYPE_SERVER_PROXY_TIMED_OUT=9111,t.SERVER_ERROR_TYPE_SERVER_PROXY_IO_ERROR=9112,t.SERVER_ERROR_TYPE_SERVER_PROXY_EARLY_CLOSE=9113,t.SERVER_ERROR_TYPE_SERVER_PROXY_HTTP_NOT_FOUND=9120,t.SERVER_ERROR_TYPE_SERVER_PROXY_HTTP_ERROR=9121,t.SERVER_ERROR_TYPE_SERVER_PROXY_HTTP_GARBAGE=9122,t.SERVER_ERROR_TYPE_SERVER_OLD_INTERNAL_ERROR=1e4,t.SERVER_ERROR_TYPE_SERVER_CONNECTION_OVERTAKE=10001,t.SERVER_ERROR_TYPE_USER_RECONNECTED_ANOTHER_DEVICE_WITH_DEACTIVATE=10011,t.SERVER_ERROR_TYPE_SERVER_TEMPORARILY_UNAVAILABLE=10002,t.SERVER_ERROR_TYPE_GENERAL_SERVER_ERROR_WITH_MESSAGE=10003,t.SERVER_ERROR_TYPE_SESSION_LOST=10403,t.SERVER_ERROR_TYPE_INVALID_CLIENT_IP=10404,t.SERVER_ERROR_TYPE_BANNED_CLIENT_IP=10405,t.SERVER_ERROR_TYPE_BANNED_EMAIL_DOMAIN=10406,t.SERVER_ERROR_TYPE_AUTHENTICATION_REQUIRED=10407}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerErrorMessage=function(){$gpb.Message.apply(this,arguments)
};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerErrorMessage",t.prototype._descriptor={fields:{error_eta:{type:3,number:6,label:1},type:{type_name:"badoo.bma.ServerErrorType",number:7,label:1,type:14,options:{"default":"UNKNOWN_SERVER_ERROR_TYPE"}},error_message:{type:9,number:2,label:2},feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:3,label:1},error_id:{type:9,number:4,label:1},error_code:{type:9,number:1,label:2},error_title:{type:9,number:5,label:1}}}}()),$gpb.exists("badoo.bma.FieldError","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FieldError=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FieldError",t.prototype._descriptor={fields:{field_name:{type:9,number:1,label:2},error:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.FormField","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FormField=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FormField",t.prototype._descriptor={fields:{key:{type:9,number:1,label:1},value:{type:9,number:2,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FormFailure=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FormFailure",t.prototype._descriptor={fields:{form_data:{type:11,type_name:"badoo.bma.Hashtable",number:4,label:1},failure:{type:11,type_name:"badoo.bma.ServerErrorMessage",number:2,label:1},errors:{type:11,type_name:"badoo.bma.FieldError",number:1,label:3},captcha_url:{type:9,number:3,label:1},str_form_data:{type:11,type_name:"badoo.bma.FormField",number:5,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientUserRemoveVerify=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientUserRemoveVerify",t.prototype._descriptor={fields:{verified_source:{type:11,type_name:"badoo.bma.ClientUserVerifiedGet",number:3,label:1},success:{type:8,number:1,label:1},form:{type:11,type_name:"badoo.bma.FormFailure",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ServerUserRemoveVerify","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerUserRemoveVerify=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerUserRemoveVerify",t.prototype._descriptor={fields:{external_provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1},verification_type:{type:14,type_name:"badoo.bma.UserVerificationMethodType",number:1,label:2}}}}(),function(){function e(e,t){return e.write('<div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Do you want to unlink your phone number?</p> <p class="x-large phone-number">').reference("phone_number",t).write('</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Unlink</span> <span class="b-link js-unlink-phone"></span> </div> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}return $u.dust.register("settings/popup.unlink-phone",e),e}(),B.HoN_v3.UnlinkPhoneOvlView=$class(B.DustView,{template:"settings/popup.unlink-phone",setPhoneNumber:function(e){return this.set("phone_number",e)}}),B.HoN_v3.UnlinkPhoneOvlViewController=$class(B.HoN_v3.BaseViewController,{getClickHandlers:function(){return{".js-unlink-phone":this.unlinkPhone}},unlinkPhone:function(){this.fire("unlink_phone")}}),B.HoN_v3.UnlinkPhoneOvlController=$class(B.HoN_v3.BaseAsyncController,{viewController:null,phoneNumber:null,unlinkPhoneRequest:null,init:function(){B.HoN_v3.Models.Cache.CurrentUserCache.fetch(this.ready,this)},destroy:function(){this.unlinkPhoneRequest&&this.unlinkPhoneRequest.destroy(),this.viewController.destroy(),this.unlinkPhoneRequest=this.phoneNumber=this.viewController=null,$super(this,arguments)},ready:function(e){e.getUser().getVerifiedInformation().getMethods().forEach(function(e){e.getType()===$p.UserVerificationMethodType.VERIFY_SOURCE_PHONE_NUMBER&&(this.phoneNumber=e.getVerificationData())},this),this.viewReady()},renderComplete:function(){this.viewController=new B.HoN_v3.UnlinkPhoneOvlViewController,this.viewController.on("unlink_phone",this.unlinkPhone,this)},getView:function(){return(new B.HoN_v3.UnlinkPhoneOvlView).setPhoneNumber(this.phoneNumber)},unlinkPhone:function(){var e=(new $p.ServerUserRemoveVerify).setVerificationType($p.UserVerificationMethodType.VERIFY_SOURCE_PHONE_NUMBER);this.unlinkPhoneRequest=new $gpb.Rpc($p.MessageType.SERVER_USER_REMOVE_VERIFY,e).on($p.MessageType.CLIENT_USER_REMOVE_VERIFY,this.onUnlinkPhone,this).request()},onUnlinkPhone:function(){B.Ovl.close()}})),B.Ovl.UnlinkPhone=new $class(B.Ovl.Base,{type:"hon-v3-unlink-phone",controllerType:B.HoN_v3.UnlinkPhoneOvlController}),B.HoN_v3.LocationOvl||(B.HoN_v3.LocationOvl={},function(){function e(e){return e.write('<div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">To see how close other users are, you need to turn on the \'Show distance\' option in Settings.</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Show my distance</span> <span class="b-link js-show-distance"></a> </div> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}return $u.dust.register("profile/popup.location",e),e}(),B.HoN_v3.LocationOvl.View=$class(B.DustView,{template:"profile/popup.location"}),B.HoN_v3.LocationOvl.ViewController=$class(B.HoN_v3.BaseViewController,{getClickHandlers:function(){return{".js-show-distance":this.showDistance}},showDistance:function(){var e=(new $p.AppSettings).setPrivacyShowDistance(!0);(new B.HoN_v3.Models.AppSettingsModel).update(null,e,this.onPrivacySaved,null,this)},onPrivacySaved:function(){this.fire("ovl-next")}}),B.HoN_v3.LocationOvl.Controller=$class(B.HoN_v3.BaseAsyncController,{viewController:null,renderComplete:function(){this.viewController=new B.HoN_v3.LocationOvl.ViewController,this.viewController.on("ovl-next",this.onOvlNext,this)},request:function(){B.HoN_v3.Models.Cache.AppSettingsCache.fetch(this.onAppSettings,this)},onAppSettings:function(e){var t=e.getSettings();t.getPrivacyShowDistance()?this.fire("ovl-next"):this.fire("view-ready")},onOvlNext:function(){this.fire("ovl-next")},getView:function(){return new B.HoN_v3.LocationOvl.View}})),B.Ovl.ShareLocation=new $class(B.Ovl.Base,{name:"Ovl.ShareLocation",type:"hon-v3-share-location",user:null,controllerType:B.HoN_v3.LocationOvl.Controller,init:function(e){$super(this,arguments),this.user=e.user},createController:function(){var e=$super(this,arguments);return e.on({"ovl-close":this.onClose,"ovl-next":this.onNext},this),e},onClose:function(){this.close()},onNext:function(){B.Ovl.open({type:"distance",user:this.user},!0)}}),B.HoN_v3.ReactivationAccountOvl||(B.HoN_v3.ReactivationAccountOvl={},function(){function e(e){return e.write('<div class="ovl-body"> <div class="ovl-content"> <h1>Reactivate account</h1> <p class="x-large">You hid your profile a while ago. This means it isn’t shown in People Nearby and Encounters.</p> <p class="x-large">Do you want to unhide it so more people will see you?</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Reactivate</span> <span class="b-link js-reactivation-account"></span> </div> <div class="btn btn--white"> <span class="btn-txt">Not now</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}return $u.dust.register("overlays/popup.reactivation-account",e),e}(),B.HoN_v3.ReactivationAccountOvl.View=$class(B.DustView,{template:"overlays/popup.reactivation-account"}),B.HoN_v3.ReactivationAccountOvl.ViewController=$class(B.HoN_v3.BaseViewController,{getClickHandlers:function(){return{".js-reactivation-account":this.reactivationAccount}},reactivationAccount:function(){this.fire("reactivation_account")}}),B.HoN_v3.ReactivationAccountOvl.Controller=$class(B.HoN_v3.BaseController,{viewController:null,destroy:function(){this.viewController.destroy(),this.viewController=null,$super(this,arguments)},renderComplete:function(){this.viewController=new B.HoN_v3.ReactivationAccountOvl.ViewController,this.viewController.on("reactivation_account",this.reactivationAccount,this)},getView:function(){return new B.HoN_v3.ReactivationAccountOvl.View},reactivationAccount:function(){var e=(new $p.AppSettings).setHideAccount(!1);(new B.HoN_v3.Models.AppSettingsModel).update(null,e,this.onReactivationAccount,null,this)},onReactivationAccount:function(){B.Ovl.close()}})),B.Ovl.ReactivationAccount=new $class(B.Ovl.Base,{type:"hon-v3-reactivation-account",controllerType:B.HoN_v3.ReactivationAccountOvl.Controller}),B.HoN_v3.DeleteChatOvl||(B.HoN_v3.DeleteChatOvl={},function(){function e(e,i){return e.write('<div class="ovl-body ovl-body--narrow"> <form data-ovl-type="ovl" ').section(i.get(["_OVL_URL"],!1),i,{block:t},{}).write('> <div class="ovl-content"> <p class="x-large">Do you want to delete this conversation?</p> ').section(i.get(["SECRET_COMMENT"],!1),i,{block:s},{}).write(' </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"><span class="btn-txt">Delete</span><a href="').reference("delete_url",i).write('" class="b-link js-im-confirm-delete"></a></div> <div class="btn btn--sm btn--white"><span class="btn-txt">Cancel</span><span class="b-link js-ovl-close"></span></div> </div> </form> </div>')}function t(e,t){return e.write(' data-ovl-url="').reference("url",t).write('"')}function s(e,t){return e.write(' <textarea name="message" class="textarea js-secret-comment" placeholder="Leave a secret comment on ').reference("user_name",t).write('\'s profile for other girls (optional)" rows="3"></textarea> <div class="can_enter grey small char-counter right"></div> <div class="input-error">Comment must be at least 4 symbols.</div> ')}return $u.dust.register("connections/popup.contact-delete",e),e.s={_OVL_URL:t,SECRET_COMMENT:s},e}(),B.HoN_v3.DeleteChatOvl.View=$class(B.DustView,{template:"connections/popup.contact-delete",setSecretComment:function(e){return this.set("SECRET_COMMENT",{user_name:e})}}),B.HoN_v3.DeleteChatOvl.ViewController=$class(B.HoN_v3.BaseViewController,{MIN_COMMENT_LENGTH:3,MAX_COMMENT_LENGTH:300,constructor:function(){$super(this,arguments),this.commentEl=$el.down(this.container,".js-secret-comment"),this.commentEl&&(this.charCount=new $u.CharCount(this.commentEl,this.MAX_COMMENT_LENGTH))},destroy:function(){this.charCount&&(this.charCount.destroy(),this.charCount=null),this.commentEl=null,$super(this,arguments)},close:function(){B.Ovl.close()},getClickHandlers:function(){return{".js-im-confirm-delete":this.onConfirmDelete}},onConfirmDelete:function(){if(this.toggleError(!1),this.commentEl&&this.commentEl.value){if(!this.validateComment(this.commentEl.value))return this.toggleError(!0),void 0;this.fire("secretComment:sent",this.commentEl.value)}this.fire("user:removed"),B.Ovl.close()},validateComment:function(e){return e.length>this.MIN_COMMENT_LENGTH&&e.length<=this.MAX_COMMENT_LENGTH},toggleError:function(e){var t=this.getElement("form");return $el.tgl(t,"error",e),this}}),B.HoN_v3.DeleteChatOvl.Model=$class(B.HoN_v3.Models.BaseModel,{clientSource:$p.ClientSource.CLIENT_SOURCE_CHAT,commentModel:null,userModel:null,chatUser:null,jinbaRequest:null,destroy:function(){this.commentModel&&(this.commentModel.destroy(),this.commentModel=null),this.userModel&&(this.userModel.destroy(),this.userModel=null),this.chatUser=null,this.jinbaRequest=null,$super(this,arguments)},setChatUser:function(e){this.chatUser=e},setJinbaRequest:function(e){this.jinbaRequest=e},fetchSecretCommentEnabled:function(){this.getSecretCommentsPossible()?(this.userModel=this.createUserModel(),this.userModel.fetch(this.jinbaRequest,this.onUserReady,this.onUserError,this)):this.fire("secretCommentsEnabled:ready",!1)},sendComment:function(e){this.commentModel=new B.HoN_v3.SecretComments.Model(this.chatUser.getUserId(),this.clientSource),this.commentModel.send(e)},getChatUserName:function(){return this.chatUser.getName()},getSecretCommentsPossible:function(){var e=B.Features.get("ALLOW_SECRET_COMMENTS");return e&&e.enabled&&B.Session.getUserGender()===$p.SexType.FEMALE&&this.chatUser.getGender()===$p.SexType.MALE},createUserModel:function(){return(new B.HoN_v3.Models.UserModel).setUserId(this.chatUser.getUserId()).setProjection([$p.UserField.USER_FIELD_IS_SECRET_COMMENT_ENABLED]).setClientSource(this.clientSource)},onUserReady:function(e){var t=e.getUser().getIsSecretCommentsEnabled();this.fire("secretCommentsEnabled:ready",t)},onUserError:function(){this.fire("secretCommentsEnabled:error")}}),B.HoN_v3.DeleteChatOvl.Controller=$class(B.HoN_v3.BaseAsyncController,{viewController:null,model:null,canSendSecretComment:null,constructor:function(){$super(this,arguments),this.model=(new B.HoN_v3.DeleteChatOvl.Model).on({"secretCommentsEnabled:ready":this.onSecretCommentEnabledReady,"secretCommentsEnabled:error":this.onSecretCommentEnabledError},this)},init:function(){$super(this,arguments),this.model.fetchSecretCommentEnabled()},renderComplete:function(e){this.viewController=new B.HoN_v3.DeleteChatOvl.ViewController(e).on({"secretComment:sent":this.onSecretComment,"user:removed":this.onUserRemoved},this)},destroy:function(){this.viewController&&(this.viewController.destroy(),this.viewController=null),this.model&&(this.model.destroy(),this.model=null),this.chatUser=null,this.canSendSecretComment=null,$super(this,arguments)},setOvlData:function(e){this.model.setChatUser(e.chatUser)},setJinbaRequest:function(e){this.model.setJinbaRequest(e)},getView:function(){var e=new B.HoN_v3.DeleteChatOvl.View;return this.canSendSecretComment&&e.setSecretComment(this.model.getChatUserName()),e},onSecretComment:function(e){this.model.sendComment(e)},onUserRemoved:function(){B.HoN_v3.IM.$e.fire("user:removeActive")},onSecretCommentEnabledError:function(){this.viewController.close()},onSecretCommentEnabledReady:function(e){this.canSendSecretComment=e,this.viewReady()}})),B.Ovl.DeleteChat=new $class(B.Ovl.Base,{type:"hon-v3-delete-chat",controllerType:B.HoN_v3.DeleteChatOvl.Controller}),B.HoN_v3.ShowGiftOvl||(B.HoN_v3.ShowGiftOvl={},function(){function e(e,a){return e.write('<div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <h3> ').section(a.get(["SENDER"],!1),a,{block:t},{}).write(" ").section(a.get(["RECEIVER"],!1),a,{block:s},{}).write(' <span class="brick brick--xsm"> <span class="brick-img"><img src="').reference("user_photo",a).write('" class="brick-img" alt=""></span> </span> </h3> ').section(a.get(["GIFT"],!1),a,{block:i},{}).write(' <div class="flex flex--middle show-gift-tag"><span class="x-large show-gift-tag__txt">').reference("msg",a).write('</span></div> </div> <div class="ovl-buttons"> ').section(a.get(["BUTTON_PUBLIC_SEND"],!1),a,{block:o},{}).write(" ").section(a.get(["BUTTON_SENDER_SEND"],!1),a,{block:n},{}).write(" ").section(a.get(["BUTTON_CHAT"],!1),a,{block:r},{}).write(' </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div>')}function t(e){return e.write("A gift from you")}function s(e,t){return e.write('A gift from <a href="').reference("profile_url",t).write('" class="link app" rel="profile-view">').reference("name",t).write("</a>")}function i(e,t){return e.write(' <div class="show-gift-img"><img src="').reference("src",t).write('" width="200" height="200" alt=""></div> ')}function o(e,t){return e.write(' <div class="btn btn--blue"> <span class="btn-txt">Send your gift</span> <span class="b-link js-ovl-open" data-ovl-type="gifts" data-ovl-url="').reference("gift_ovl_url",t).write('"></span> </div> ')}function n(e){return e.write(' <div class="btn btn--blue"> <span class="btn-txt">Send another gift</span> <span class="b-link js-send-another"></span> </div> ')}function r(e){return e.write(' <div class="btn btn--blue"> <span class="btn-txt">Chat now</span> <a class="b-link js-chat-now"></a> </div> ')}return $u.dust.register("gifts/popup.show-gift",e),e.s={SENDER:t,RECEIVER:s,GIFT:i,BUTTON_PUBLIC_SEND:o,BUTTON_SENDER_SEND:n,BUTTON_CHAT:r},e}(),B.HoN_v3.ShowGiftOvl.View=$class(B.DustView,{template:"gifts/popup.show-gift",setSender:function(e,t,s){return this.set("BUTTON_SENDER_SEND",e).set("SENDER",e).set("BUTTON_CHAT",!e).set("RECEIVER",!e&&{name:t,profile_url:s})},setGiftImage:function(e){return this.set("GIFT",{src:e})},setGiftText:function(e){return this.set("msg",e)},setSenderPhoto:function(e){return this.set("user_photo",e)},setGiftDisabled:function(e){return e&&this.set("BUTTON_SENDER_SEND",!1),this},setChatDisabled:function(e){return e&&this.set("BUTTON_CHAT",!1),this}}),B.HoN_v3.ShowGiftOvl.ViewController=$class(B.HoN_v3.BaseViewController,{getClickHandlers:function(){return{".js-chat-now":this.onChatNow,".js-send-another":this.onSendAnother}},onSendAnother:function(){B.HoN_v3.IM.$e.fire("gifts:open"),B.Ovl.close()},onChatNow:function(){B.Ovl.close(),B.HoN_v3.IM.$e.fire("chat:focus")}}),B.HoN_v3.ShowGiftOvl.Controller=$class(B.HoN_v3.BaseController,{viewController:null,PROFILE_URL:"/profile/0{userId}",setOvlData:function(e){this.gift=e.gift,this.sender=e.sender,this.chatUser=e.chatUser},renderComplete:function(){this.viewController=new B.HoN_v3.ShowGiftOvl.ViewController},getProfileUrl:function(e){return $u.tpl(this.PROFILE_URL,{userId:e.getUserId()})},getView:function(){var e=this.sender.getProfilePhoto(),t=e.getSquareFaceUrl()||e.getPreviewUrl(),s=this.sender.getUserId()===B.Session.getUserId(),i=this.chatUser.getIsBlocked()||this.chatUser.getIsDeleted(),o=!this.chatUser.getAllowSendGift();return(new B.HoN_v3.ShowGiftOvl.View).setSender(s,this.sender.getName(),this.getProfileUrl(this.sender)).setGiftImage(this.gift.getGift().getLargeUrl()).setGiftText(this.gift.getText()).setSenderPhoto(t).setChatDisabled(i).setGiftDisabled(o||i)}})),B.Ovl.ShowGift=new $class(B.Ovl.Base,{name:"Ovl.ShowGift",type:"hon-v3-show-gift",gift:null,controllerType:B.HoN_v3.ShowGiftOvl.Controller,init:function(e){$super(this,arguments),this.gift=e.gift}}),B.HoN_v3.UpdateLocationtOvl||(B.HoN_v3.UpdateLocationtOvl={},function(){function e(e,t){return e.write('<div class="ovl-body"> <div class="ovl-content"> <h1>Update your location?</h1> <p class="x-large">You\'ve just changed your search region. Do you want to update your current location from ').reference("current_location",t).write(" to ").reference("location_from_PNB",t).write(' too?</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Update my location</span> <span class="b-link js-update-location"></span> </div> <div class="btn btn--white"> <span class="btn-txt">Skip</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}return $u.dust.register("overlays/popup.update-location",e),e}(),B.HoN_v3.UpdateLocationtOvl.View=$class(B.DustView,{template:"overlays/popup.update-location",setLocation:function(e,t){return this.set({current_location:e,location_from_PNB:t})}}),B.HoN_v3.UpdateLocationtOvl.ViewController=$class(B.HoN_v3.BaseViewController,{getClickHandlers:function(){return{".js-update-location":this.updateLocation}},updateLocation:function(){this.fire("update_location")}}),B.HoN_v3.UpdateLocationtOvl.Controller=$class(B.HoN_v3.BaseController,{viewController:null,location:null,setOvlData:function(e){this.location=e.location},destroy:function(){this.viewController.destroy(),this.viewController=null,$super(this,arguments)},renderComplete:function(){this.viewController=new B.HoN_v3.UpdateLocationtOvl.ViewController,this.viewController.on("update_location",this.updateLocation,this)},getView:function(){return(new B.HoN_v3.UpdateLocationtOvl.View).setLocation(this.location.current_location.name,this.location.location_from_PNB.name)},updateLocation:function(){var e=(new $p.Integer).setValue(this.location.location_from_PNB.id);new $gpb.Rpc($p.MessageType.SERVER_SAVE_LOCATION,e).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,this.onUpdateLocation).request()},onUpdateLocation:function(){B.Ovl.close(),B.HoN_v3.Models.Cache.CurrentUserCache.invalidate(),B.App.reload()}})),B.Ovl.UpdateLocation=new $class(B.Ovl.Base,{type:"hon-v3-update-location",controllerType:B.HoN_v3.UpdateLocationtOvl.Controller}),B.Ovl.HoN_v3_UnsubscribeView=new $class(B.Ovl.View,{name:"Ovl.HoN_v3_UnsubscribeView",type:"hon-v3-unsubscribe",destroy:function(){B.App.app_link("mm","/game"),$super(this,arguments)}}),$l.register({section:"paid_wizards",lang:"en-us",translations:{PAID_WIZARDS:{TEXTS_BY_AGGREGATOR_AND_SERVICE:{DEFAULT:{DEFAULT:{COST:"Cost of service &ndash; {{price}} {{taxes}}.",CONDITIONS:'To use this feature, you need to send a text message from your mobile phone to our system. Enter the exact text that you see written in the instructions above, and then send that text message to the special short number listed. This service is currently available only for the specified mobile operators. You can access all of {{PAGE_partner_name}}\'s premium features with just one click when you make a payment on {{PAGE_partner_name}} using a pre-authorised payment method. You can make changes to your pre-authorised payment method anytime in your <a href="{{payment_settings_url}}">payment settings</a>.\r\n                    <br>Payments are processed by Social Online Payments Ltd.',TAXES_EXCLUDED:"excluding tax",TAXES_INCLUDED:"including tax",BMA_PAYMENT_TITLE:"Cell phone bill",BMA_INTRO:"This feature costs {{price_in_credits}} {{price_credits_name}} - refill now! The more credits you buy, the cheaper they are:",BMA_STORED_INFO:"You will be charged using your stored payment details."}},ALLbadooCredits:{DEFAULT:{COST:"Cost of service: {{price}} {{credits}}",CONDITIONS:'By completing this payment, your {{PAGE_partner_name}} credit balance will be debited {{price}} {{credits}}. The next time you purchase credits you can select Auto Top-up and your credit balance will be topped up automatically when you fall below {{threshold_value}} {{threshold_value_credits}}. This purchase is non-refundable. You can access all of {{PAGE_partner_name}}\'s premium features with just one click when you make a payment on {{PAGE_partner_name}} using a pre-authorised payment method. You can make changes to your pre-authorised payment method anytime in your <a href="{{payment_settings_url}}">payment settings</a>.\r\n                    <br>Payments are processed by Social Online Payments Ltd.',CONDITIONS_TOP_UP:'By completing this payment, your {{PAGE_partner_name}} credit balance will be debited {{price}} {{credits}}. Your credit balance will be automatically topped up when you fall below {{threshold_value}} {{threshold_value_credits}}. This purchase is non-refundable. You can access all of {{PAGE_partner_name}}\'s premium features with just one click when you make a payment on {{PAGE_partner_name}} using a pre-authorised payment method. You can make changes to your pre-authorised payment method anytime in your <a href="{{payment_settings_url}}">payment settings</a>.\r\n                    <br>Payments are processed by Social Online Payments Ltd.',BMA_PAYMENT_TITLE:"Credits",BMA_PACKAGE_PRICE:"{{amount}} {{credits}}"}}},BUTTONS:{GO_TO_PAYPAL:"Pay with PayPal"},CLOUD_TEXT:{USER_TIRED_FOR_NEARBY:"You cannot Rise Up until you've read or deleted your {{num}} {{unread_messages}}.",USER_TIRED_FOR_ENCOUNTERS:"You cannot get any Extra Displays until your {{num}} {{unread_messages}} have been read or deleted.",RETURN_DENIAL:"We have not been able to charge PayPal account, due to missing funds or this being blocked. Please check the above to attempt using PayPal again, or use a different payment method.",INTERNAL_ERROR:"Unfortunately we have encountered a problem and have not been able to complete your request this time. You have not been charged and we are attempting to fix the issue right now. Please check again later to order the desired service again.",CANCEL_PAY:"Your payment was cancelled, we hope you decide to try again.",ERROR_MSISDN_ALREADY_IN_USE_BUT_NOT_ACTIVE:"Oops! Looks like the phone number {{msisdn}} is already in use. To activate Super Powers for this account, you will first need to send {{stop_word}} to {{short_code}} from this phone number, and then start a new subscription.",CREDIT_CARD_ERROR_TIMEOUT:"We have not been able to complete the transaction this time, but we will continue trying for the next 5 minutes.",CREDIT_CARD_ERROR_TEMPORARY:"Sorry we couldn't process this payment, please try again.",CREDIT_CARD_RETURN_DENIAL:"We have not been able to charge your card ending in **{{ending_number}}. Please try using a different credit card or an alternative payment method.",SPOTLIGHT_THANK:"You’ll be featured in a few minutes!",ONE_CLICK_SPOTLIGHT_THANK:"Thank you! You’ll be featured shortly.",GIFT_THANK:"Your gift will be delivered shortly.",ONE_CLICK_GIFT_THANK:"Your gift will be delivered shortly.",CHATUNBLOCKER_THANK:"Your message will be delivered shortly.",CHATUNBLOCKER_THANK_NO_MESSAGE:"You are ready to chat now!",ONE_CLICK_CHATUNBLOCKER_THANK:"Your message will be delivered shortly.",ONE_CLICK_CHATUNBLOCKER_THANK_NO_MESSAGE:"You are ready to chat now!",VIP_THANK:"Your VIP membership will be activated in a few minutes.",RISEUP_THANK:"Your profile will be placed back at the top of the entire network within 5 minutes.",QUOTA_THANK:"You can now continue chatting with new people!",QUOTAVOTES_THANK:"You'll soon have extra votes to keep playing Encounters.",EXTRASHOWS_THANK:"You'll be shown to more people in Encounters soon!",ONE_CLICK_EXTRASHOWS_THANK:"Thank you! You'll get your extra shows shortly.",SPOTLIGHT_PENDING_THANK:"You will be featured immediately after your payment is confirmed.",GIFT_PENDING_THANK:"Your gift will be delivered immediately after your payment is confirmed.",RISEUP_PENDING_THANK:"Your profile will be in top position shortly after your payment is confirmed.",QUOTA_PENDING_THANK:"You will be able to continue chatting and meeting new contacts after your payment is confirmed.",QUOTAVOTES_PENDING_THANK:"You will be able to make extra votes in the Encounters game after your payment is confirmed.",EXTRASHOWS_PENDING_THANK:"You will be shown to more people in the Encounters game after your payment is confirmed.",CONGRATULATIONS_SPP:"Your Super Powers will be activated shortly. Enjoy!",ERROR_UPLOAD_PHOTO:"You need to add some photos first!<br>\r\nAdd photos of yourself and start meeting new people in your local area.",ERROR_UPLOAD_PHOTO_EXCL_ATTENTION_MALE:"You’ve got no photo. He won’t give you his exclusive attention if he can’t see your face.",ERROR_UPLOAD_PHOTO_EXCL_ATTENTION_FEMALE:"You’ve got no photo. She won’t give you her exclusive attention if she can’t see your face.",CREDIT_CARD_LIMIT_REACHED:"You have hit your daily limit for credit card payments. Please try again later.",BADOOCREDITPACKTOPUP_THANK:"{{amount}} {{PAGE_partner_name}} {{credits}} have been added to your account!",ERROR_SELECTING_UNAVAILABLE_PAYMENT_TYPE:"Sorry, your preferred payment method is currently not supported by your system.",WAIT_FOR_PAY:"Your payment has been submitted successfully. We are waiting for its confirmation.",BADOOCREDITPACKTOPUP_PENDING_THANK:"Please wait while service is provided.",PULL_THANK_PROCESSING:"We'll let you know when you can start enjoying your increased popularity!",SPP_THANK_PROCESSING:"We'll let you know when you can start enjoying your Super Powers!",VIP_THANK_PROCESSING:"Your VIP membership will be activated in a few minutes.",READYTOCHAT_THANK:"You will be displayed to more people.",RISEUP_THANK_PROCESSING:"We'll let you know when your payment is cleared and you can start enjoying your increased popularity.",QUOTA_THANK_PROCESSING:"We'll let you know when your payment is cleared and you can start enjoying increased Contact Limit.",QUOTAVOTES_THANK_PROCESSING:"We'll let you know when your payment is cleared and you can start enjoying Extra Votes.",EXTRASHOWS_THANK_PROCESSING:"We'll let you know when your payment is cleared and you can start enjoying extra attention in Encounters.",BADOOCREDITPACKTOPUP_THANK_PROCESSING:"We'll let you know when your payment is cleared and you can start enjoying {{PAGE_partner_name}} credits.",SPP_SMS_DELIVERY_FAIL:"We were unable to charge your cell phone account and thus were unable to activate your Super Powers. Please follow the direction below carefully and your Super Powers will be activated automatically within 24 hours:\r\n<br>Please make sure that your mobile phone, with the number {{user_number}}, is turned on and has a balance of at least {{price}} available on the account.",SPP_PHONE_TURNED_OFF:"We were unable to charge your mobile phone account and thus were forced to turn off your Super Powers. Please follow the direction below carefully and your Super Powers will be re-activated automatically within 24 hours:\r\n<br>Please ensure that your mobile phone, with number {{user_number}}, is turned on and has a balance of at least {{price}} available on the account.",SPP_SMS_DELIVERY_FAIL_FR:"We were unable to charge your mobile phone account and thus were unable to activate your Super Powers. Please follow the direction below carefully and your Super Powers will be activated automatically within 24 hours:\r\n<br>Please ensure that your mobile phone is turned on and has a balance of at least {{price}} available on the account.",SPP_PHONE_TURNED_OFF_FR:"We were unable to charge your mobile phone account and thus were forced to turn off your Super Powers. Please follow the direction below carefully and your Super Powers will be re-activated automatically within 24 hours:\r\n<br>Please ensure that your mobile phone is turned on and has a balance of at least {{price}} available on the account.",BMA_SMS_REPLY_YES:"Once you receive the text message that was sent to the number +{{msisdn}}, send {{reply_text}} to {{short_code}}.",BMA_PHONE_NUMBER_USED:"It looks like that number - {{msisdn}} – is already attached to a profile. Please use a different number.",CHARGEBACK:"Your payment was refunded.",CREDIT_CARD_RETURN_DENIAL_NO_ENDING:"We have not been able to charge your card. Please try using a different credit card or an alternative payment method.",AWAITING_PAYMENT_RESULT:"Your payment has been submitted successfully. We are waiting for its confirmation.",ERROR_ANY_PAYMENT_TYPE_UNAVAILABLE:"We are sorry but it seems there is no available payment methods for you right now. Please return back in a while.",AGGREGATOR_TURNED_OFF:'Your stored payment method isn\'t supported on this platform, you can remove it in <a href="{{url_settings}}" class="link">payment settings</a>.',PAYPAL_LIMIT_REACHED:"You have hit your daily limit for Paypal payments. Please try again later.",ADYEN_LIMIT_REACHED:"You have hit your maximum spend limit on {{payment_name}} today, please try another payment method or try again tomorrow.",SMS_LIMIT_REACHED:"You have hit your maximum spending limit on SMS today. Please try another payment method or try again tomorrow.",MERCADOPAGO_LIMIT_REACHED:"You have hit your maximum spend limit on MercadoPago today, please try another payment method or try again tomorrow.",OTHER_LIMIT_REACHED:"You have hit your maximum spending limit on this payment method for today. Please try another payment method or try again tomorrow.",ALREADY_PROCESSED:"Congrats! Your purchase is already processed.",CREDIT_CARD_ERROR_ISSUER_UNAVAILABLE:"Sorry, we were unable to process your payment. Have you tried asking your bank to enable international payments?",ERROR_TIMEOUT:"We have not been able to complete the transaction this time, but we will continue trying for the next few minutes.",SMS_DELIVERY_FAIL:"We were unable to charge your cell phone account and thus were unable to activate your Super Powers. Please follow the direction below carefully and your Super Powers will be activated automatically within 24 hours:\r\n<br>Please make sure that your cell phone, with the number {{user_number}}, is turned on and has a balance of at least {{price}} available on the account.",TELEPHONE_IS_TURNED_OFF:"We were unable to charge your cell phone account and thus were forced to turn off your Super Powers. Please follow the direction below carefully and your Super Powers will be re-activated automatically within 24 hours:\r\n<br>Please ensure that your mobile phone, with number {{user_number}}, is turned on and has a balance of at least {{price}} available on the account.",SPP_THANK:"Your Super Powers will be activated in a few minutes.",BADOOCREDITPACKTOPUP_THANK_NO_AMOUNT:"Credits have been successfully added to your account.",STEP_CLOUD_LACK_OF_CREDITS:"The service is only available if you have enough credits",ERROR_SURVEY_NO_CHOICE:"Please choose an option",ERROR_SURVEY_INCORRECT_CHOICE:"Invalid option has been selected",ERROR_UPLOAD_PHOTO_SPP:"You need to add some photos first!<br>\r\nUpload your best photos to be able to activate Super Powers.",HON_SUBSCRIPTION_THANK_PROCESSING:"Reveal your Fans for a month",MOBILE_RISEUP_THANK:"You'll be at the top of People Nearby soon!",ONE_CLICK_MOBILE_RISEUP_THANK:"Thank you! Your profile will be in first place shortly.",INCOMPLETE_USER_DATA:"Please fill in all required fields in your profile such as name, city, gender, etc.",SUBSCRIPTION_ALREADY_ACTIVE:"Oops. You already have an active subscription",SUBSCRIPTION_ALREADY_ACTIVE_MSISDN:"Oops...You are already subscribed with the following phone number: +{{msisdn}} in {{country_name}}.",SUBSCRIPTION_AWAITING_PAYMENT:"You have attempted to buy a subscription previously, please wait for confirmation.",SUBSCRIPTION_AWAITING_RENEWAL:"You have a subscription awaiting approval, please wait for confirmation.",HON_EXTRA_SHOWS_THANK_PROCESSING:"Your picture will get shown more times in the Hot or Not game.",PAYMENT_FAILED:"Your payment failed, please try again.",HON_SUBSCRIPTION_THANK_PENDING:"Please wait while service is provided.",STICKERS_THANK:"Your stickers are available to use in chat.",STICKERS_PENDING_THANK:"Your stickers will be available to use in chat immediately after your payment is confirmed.",SPP_PENDING_THANK:"Your Super Powers will be activated shortly.<br>Enjoy!",DELAYED_PAYMENT_PENDING_RESULT:"We have begun to process your {{payment_name}} payment. Please complete your purchase by submitting the information provided to you by {{payment_name}}.",TOO_MANY_PAYMENT_WIZARD_REQUESTS:"Oops, looks like you've made too many payment requests. Please try again in a few seconds."}}}}),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.DirectCloud||(B.HoN_v3.Overlays.DirectCloud={},function(){function e(e,s){return e.section(s.get(["DIRECT_CLOUD"],!1),s,{block:t},{})
}function t(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">').reference("TEXTBLOCK_text",t,["s"]).write('</p> </div> <div class="ovl-buttons"> <div class="btn btn--white"> <span class="btn-txt">Close</span> <span class="b-link js-ovl-close"></span> </div> </div> </div> ')}return $u.dust.register("payment_services/wizards/popup.cloud-direct-link",e),e.s={DIRECT_CLOUD:t},e}(),B.HoN_v3.Overlays.DirectCloud.View=$class(B.DustView,{template:"payment_services/wizards/popup.cloud-direct-link",block:"DIRECT_CLOUD",setText:function(e){return this.set("TEXTBLOCK_text",e)}}),B.HoN_v3.Overlays.DirectCloud.Controller=$class(B.HoN_v3.BaseController,{lexemId:null,getView:function(){return(new B.HoN_v3.Overlays.DirectCloud.View).setText($l.get("paid_wizards",["PAID_WIZARDS","CLOUD_TEXT"])[this.lexemId])},setOvlData:function(e){this.lexemId=e.lexemId}})),B.Ovl.HoN_v3_DirectCloud=new $class(B.Ovl.Base,{type:"direct-cloud",controllerType:B.HoN_v3.Overlays.DirectCloud.Controller}),$gpb.exists("badoo.bma.ServerSaveUser","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerSaveUser=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerSaveUser",t.prototype._descriptor={fields:{save_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:2,label:1},return_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:3,label:1},user:{type:11,type_name:"badoo.bma.User",number:1,label:1}}}}(),B.HoN_v3.UpdateInfo={},function(){function e(e,s){return e.section(s.get(["FORGOT_PASSWORD"],!1),s,{block:t},{}).write(" ").section(s.get(["FORGOT_PASSWORD_RESULT"],!1),s,{block:r},{}).write(" ").section(s.get(["SIGN_IN"],!1),s,{block:a},{}).write(" ").section(s.get(["SIGN_UP_INTRO"],!1),s,{block:E},{}).write(" ").section(s.get(["SIGN_UP"],!1),s,{block:T},{}).write(" ").section(s.get(["SIGN_UP_SUCCESS"],!1),s,{block:ot},{}).write(" ").section(s.get(["SIGN_UP_SUCCESS_BLACKLIST"],!1),s,{block:at},{}).write(" ").section(s.get(["SIGN_UP_RESEND"],!1),s,{block:ct},{}).write(" ").section(s.get(["SIGN_UP_NEWEMAIL"],!1),s,{block:mt},{}).write(" ").section(s.get(["SIGN_UP_REALLOW"],!1),s,{block:Ot},{}).write(" ").section(s.get(["CREATE_NEW_PASSWORD"],!1),s,{block:yt},{}).write(" ").section(s.get(["ADDITIONAL_INFO"],!1),s,{block:Pt},{}).write(" ").section(s.get(["SIGN_UP_REALLOW_ERROR"],!1),s,{block:Zt},{}).write(" ").section(s.get(["SIGN_IN_UPDATE_INFO"],!1),s,{block:es},{}).write(" ").section(s.get(["SIGN_UP_REALLOW_SUCCESS"],!1),s,{block:Os},{}).write(" ").section(s.get(["DELETED_USER"],!1),s,{block:ys},{}).write(" ").section(s.get(["BLOCKED_USER"],!1),s,{block:As},{}).write(" ").section(s.get(["AUTO_RESET_PASSWORD"],!1),s,{block:Ps},{}).write(" ").section(s.get(["EMAIL_BLOCKED"],!1),s,{block:$s},{}).write(" ").section(s.get(["EMAIL_NOT_BLOCKED"],!1),s,{block:Ls},{}).write(" ").section(s.get(["TOO_YOUNG"],!1),s,{block:Ds},{})}function t(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Forgot your password?</h2> <form action="#" method="post" data-ovl-url="').reference("url_action",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p> Enter your email address below and we\'ll send you instructions to create a new password.<br>\r\n<b>Make sure you enter the same email address you used to create your profile.</b>\n</p> <div class="form__row').section(t.get(["_ERROR"],!1),t,{block:s},{}).write('"> ').helper("ie",t,{block:i},{}).write(' <input type="text" name="email" id="email" class="input" placeholder="Email address" value="').reference("email",t).write('" tabindex="1" autofocus> ').section(t.get(["_EMAIL_ERROR"],!1),t,{block:o},{}).write(" ").section(t.get(["MISPRINT_ERROR"],!1),t,{block:n},{}).write(' </div> <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(' </div> </div> <div class="ovl-buttons"> <button class="btn btn--blue"><span class="btn-txt">Get new password</span></button> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function s(e){return e.write(" error")}function i(e){return e.write('<!--[if lte IE 9]><label for="email">Email address</label><![endif]-->')}function o(e,t){return e.write(' <span class="input-error">').reference("error",t).write("</span> ")}function n(e,t){return e.write(' <span class="input-hint">Did you mean this instead? <span class="p-link js-ovl-next" data-ovl-url="').reference("misprint_url",t).write('">No, change back</span></span> ')}function r(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Check your email</h2> <div class="ovl-content"> <p class="x-large">An email with instructions for creating a new password has been sent to <b>').reference("email",t).write('</b></p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Continue</span><span class="b-link js-ovl-close"></span></div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function a(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Sign in</h2> <form action="#" method="post" data-ovl-type="ovl" data-ovl-url="').reference("url_action",t).write('"> <div class="ovl-content"> <p class="x-large">This sign-in box is for existing users only. You can sign up via Facebook.</p> <div class="form__row').section(t.get(["_EMAIL_ERROR"],!1),t,{block:l},{}).section(t.get(["_ERROR_FOR_ALL"],!1),t,{block:_},{}).write('"> ').helper("ie",t,{block:c},{}).write(' <input type="text" name="email" id="email" class="input" value="').reference("email",t).write('" placeholder="Email address" tabindex="1" autofocus> ').section(t.get(["EMAIL_ERROR"],!1),t,{block:u},{}).write(" ").section(t.get(["ERROR_FOR_ALL"],!1),t,{block:p},{}).write(' </div> <div class="form__row').section(t.get(["_PASSWORD_ERROR"],!1),t,{block:d},{}).write('"> ').helper("ie",t,{block:h},{}).write(' <input type="password" name="password" id="password" class="input" placeholder="Password" tabindex="2"> ').section(t.get(["PASSWORD_ERROR"],!1),t,{block:b},{}).write(" ").section(t.get(["BUTTON_FORGOT"],!1),t,{block:m},{}).write(' </div> <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(' </div> </div> <div class="ovl-buttons"> <button class="btn btn--blue" tabindex="3"><span class="btn-txt">Sign in</span></button> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function l(e){return e.write(" error")}function _(e){return e.write(" error")}function c(e){return e.write('<!--[if lte IE 9]><label for="email">Email address</label><![endif]-->')}function u(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function p(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function d(e){return e.write(" error")}function h(e){return e.write('<!--[if lte IE 9]><label for="password">Password</label><![endif]-->')}function b(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function m(e,t){return e.write('<span class="input-hint"><i class="icon ico--grey ico--question"><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("forgot_url",t).write('"></span></i><span class="p-link grey">Forgot your password?</span></span>')}function E(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header"> ').section(t.get(["HEADER_SIGN_IN"],!1),t,{block:f},{}).write(" ").section(t.get(["HEADER_INVITE"],!1),t,{block:g},{}).write(' </h2> <div class="ovl-content"> <p class="x-large">If you do not register with Facebook, <b>you will not get access to:</b></p> <ul class="sign-features"> <li class="x-large sign-features__item">All areas of the app</li> <li class="x-large sign-features__item">The hottest people on Facebook</li> <li class="x-large sign-features__item">Your friends and their rating</li> </ul> <p class="grey">We respect your privacy and we will never post anything to Facebook without your permission.</p> </div> <div class="ovl-buttons ovl-buttons--narrow"> <a href="').reference("url_signup_facebook",t).write('" class="btn btn--blue" onClick="window.open(this.href, \'auth\', \'width=600,height=400\'); return false;"><span class="btn-txt">Sign up with Facebook</span></a> ').section(t.get(["SIGNUP_BY_INVITE"],!1),t,{block:v},{}).write(' </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function f(e,t){return e.write('Sign up <span>or <a href="#" class="js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_signin",t).write('">Sign in</a></span>')}function g(e){return e.write("Sign up with your email")}function v(e,t){return e.write(' <div class="btn btn--white"><span class="btn-txt">Continue with email</span><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_signup",t).write('"></span></div> ')}function T(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header"> ').section(t.get(["HEADER_SIGN_UP"],!1),t,{block:O},{}).write(" ").section(t.get(["HEADER_INVITE"],!1),t,{block:y},{}).write(' </h2> <form action="#" method="post" data-ovl-type="ovl" data-ovl-url="').reference("url_action",t).write('"> <div class="ovl-content"> ').section(t.get(["FULLNAME_FIELD"],!1),t,{block:R},{}).write(" ").section(t.get(["EMAIL_FIELD"],!1),t,{block:C},{}).write(" ").section(t.get(["BIRTHDAY_FIELD"],!1),t,{block:k},{}).write(' <div class="form__row"> ').helper("ie",t,{block:Q},{}).write(" ").reference("HTMLBLOCK_DATALIST_LOCATION",t,["s"]).write(" </div> ").section(t.get(["GENDER_FIELD"],!1),t,{block:z},{}).write(" ").section(t.get(["CAPTCHA"],!1),t,{block:st},{}).write(' </div> <div class="ovl-buttons"> <button class="btn btn--blue" type="submit" name="create_profile" tabindex="8"><span class="btn-txt">Sign up</span></button> </div> </form> ').section(t.get(["COOKIE_LAW"],!1),t,{block:it},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function O(e,t){return e.write('Sign up <span>or <a href="#" class="js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_signin",t).write('">Sign in</a></span>')}function y(e){return e.write("Sign up with your email")}function R(e,t){return e.write(' <div class="form__row').section(t.get(["_FULLNAME_ERROR"],!1),t,{block:S},{}).write('"> ').helper("ie",t,{block:w},{}).write(' <input type="text" name="fullname" id="fullname" value="').reference("fullname",t).write('" class="input" placeholder="First name" maxlength="30" tabindex="1" ').section(t.get(["_DISABLED"],!1),t,{block:I},{}).write(" ").section(t.get(["_AUTOFOCUS"],!1),t,{block:N},{}).write("> ").section(t.get(["FULLNAME_ERROR"],!1),t,{block:A},{}).write(" </div> ")}function S(e){return e.write(" error")}function w(e){return e.write('<!--[if lte IE 9]><label for="fullname">First name</label><![endif]-->')}function I(e){return e.write(" disabled")}function N(e){return e.write(" autofocus")}function A(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function C(e,t){return e.write(' <div class="form__row').section(t.get(["_EMAIL_ERROR"],!1),t,{block:P},{}).write('"> ').helper("ie",t,{block:$},{}).write(" ").section(t.get(["EMAIL_FIELD"],!1),t,{block:L},{}).write(" ").section(t.get(["EMAIL_ERROR"],!1),t,{block:M},{}).write(" ").section(t.get(["MISPRINT_ERROR"],!1),t,{block:U},{}).write(" </div> ")}function P(e){return e.write(" error")}function $(e){return e.write('<!--[if lte IE 9]><label for="email">Email address</label><![endif]-->')}function L(e,t){return e.write('<input type="text" name="email" id="email" class="input" placeholder="Email address" value="').reference("email",t).write('" tabindex="2" ').section(t.get(["_DISABLED"],!1),t,{block:D},{}).write(" ").section(t.get(["_AUTOFOCUS"],!1),t,{block:B},{}).write(">")}function D(e){return e.write(" disabled")}function B(e){return e.write(" autofocus")}function M(e,t){return e.write('<span class="input-error">').reference("TEXTBLOCK_error",t,["s"]).write("</span>")}function U(e,t){return e.write('<span class="input-hint js-email_misprint-error">Did you mean this instead? <span class="p-link js-ovl-next" data-ovl-url="').reference("misprint_url",t).write('">No, change back</span></span>')}function k(e,t){return e.write(' <div class="form__row').section(t.get(["_BIRTHDAY_ERROR"],!1),t,{block:H},{}).write('"> <div class="select select--day" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="day" class="select-value" value="').reference("day_selected",t).write('"> <span class="select-label').section(t.get(["_DAY_SELECT_DEFAULT"],!1),t,{block:F},{}).write('" tabindex="3">').section(t.get(["DAY_SELECT_DEFAULT"],!1),t,{block:V},{}).reference("day_name_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["DAY_SELECT"],!1),t,{block:x},{}).write(' </ul> </div> </div><!-- --><div class="select select--month" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="month" class="select-value" value="').reference("month_selected",t).write('"> <span class="select-label').section(t.get(["_MONTH_SELECT_DEFAULT"],!1),t,{block:Y},{}).write('" tabindex="4">').section(t.get(["MONTH_SELECT_DEFAULT"],!1),t,{block:G},{}).reference("month_name_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["MONTH_SELECT"],!1),t,{block:W},{}).write(' </ul> </div> </div><!-- --><div class="select select--year" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="year" class="select-value" value="').reference("year_selected",t).write('"> <span class="select-label').section(t.get(["_YEAR_SELECT_DEFAULT"],!1),t,{block:j},{}).write('" tabindex="5">').section(t.get(["YEAR_SELECT_DEFAULT"],!1),t,{block:K},{}).reference("year_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["YEAR_SELECT"],!1),t,{block:q},{}).write(" </ul> </div> </div> ").section(t.get(["BIRTHDAY_ERROR"],!1),t,{block:X},{}).write(" </div> ")}function H(e){return e.write(" error")}function F(e){return e.write(" placeholder")}function V(e){return e.write("Day")}function x(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function Y(e){return e.write(" placeholder")}function G(e){return e.write("Month")}function W(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function j(e){return e.write(" placeholder")}function K(e){return e.write("Year")}function q(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function X(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function Q(e){return e.write('<!--[if lte IE 9]><span class="label">Type your location</span><![endif]-->')}function z(e,t){return e.write(' <div class="form__row').section(t.get(["_GENDER_ERROR"],!1),t,{block:J},{}).write('"> <label class="lgrey">Gender</label> <div class="radio radio--male"> <input type="radio" name="gender" id="male" value="M" ').section(t.get(["_MALE_SELECTED"],!1),t,{block:Z},{}).write(' tabindex="7"> <label for="male">Male</label> </div> <div class="radio radio--female"> <input type="radio" name="gender" id="female" value="F" ').section(t.get(["_FEMALE_SELECTED"],!1),t,{block:et},{}).write('> <label for="female">Female</label> </div> ').section(t.get(["GENDER_ERROR"],!1),t,{block:tt},{}).write(" </div> ")}function J(e){return e.write(" error")}function Z(e){return e.write(' checked="checked"')}function et(e){return e.write(' checked="checked"')}function tt(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function st(e,t){return e.write(' <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(" </div> ")}function it(e,t){return e.write(' <div class="sign-hint"> By continuing, you\'re confirming that you\'ve read and agree to our <a href="').reference("url_terms",t).write('" class="lgrey" target="_blank">Terms and Conditions</a>, <a href="').reference("url_privacy",t).write('" class="lgrey" target="_blank">Privacy Policy</a> and <a href="').reference("url_cookie",t).write('" class="lgrey" target="_blank">Cookie Policy</a>\n</div> ')}function ot(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Congratulations, ').reference("name",t).write('</h2> <div class="ovl-content"> <p>You now have your very own profile on ').reference("PAGE_partner_name",t).write('! To complete your registration, click the link in the email that we sent to:</p> <div class="sign-email"><b>').reference("email",t).write('</b></div> <div class="ovl-hint"> <span class="p-link grey js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_resend",t).write("\">Didn't get the email?</span> </div> ").section(t.get(["FACEBOOK_LOGIN"],!1),t,{block:nt},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function nt(e,t){return e.write(' <div class="sign-separator"></div> <p class="lgrey">Don’t want to wait for the confirmation email? Use your Facebook account to instantly complete registration.</p> ').section(t.get(["FACEBOOK_BUTTON"],!1),t,{block:rt},{}).write(" ")}function rt(e,t){return e.write(' </div> <div class="ovl-buttons"> <div class="btn btn--white"><span class="btn-txt">Connect with Facebook</span><a href="').reference("url_signup_facebook",t).write('" class="b-link" onClick="window.open(this.href, \'auth\', \'width=600,height=400\'); return false;" data-reg="page_confirm_email/click_sign_in_with_fb"></a></div> </div> ')}function at(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Congratulations, ').reference("name",t).write('</h2> <div class="ovl-content"> <p>You now have your very own profile on ').reference("PAGE_partner_name",t).write('! To complete your registration, send an email from this email account, as shown in the example:</p> <div class="sign-email"> <div class="sign-email__item"> From: <b>').reference("email",t).write('</b><br> </div> <div class="sign-email__item"> To: <b>').reference("unblock_email",t).write('</b><br> </div> <div class="sign-email__item"> Subject: <b>Confirmation</b>\n</div> </div> </div> <div class="ovl-hint"> <span class="p-link grey js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_another",t).write('">Use another email</span> </div> ').section(t.get(["FACEBOOK_LOGIN"],!1),t,{block:lt},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function lt(e,t){return e.write(' <div class="sign-separator"></div> <p class="lgrey">Don’t want to wait for the confirmation email? Use your Facebook account to instantly complete registration.</p> ').section(t.get(["FACEBOOK_BUTTON"],!1),t,{block:_t},{}).write(" ")}function _t(e,t){return e.write(' <div class="ovl-buttons"> <div class="btn btn--white"><span class="btn-txt">Connect with Facebook</span><a href="').reference("url_signup_facebook",t).write('" class="b-link" onClick="window.open(this.href, \'auth\', \'width=600,height=400\'); return false;" data-reg="page_confirm_email/click_sign_in_with_fb"></a></div> </div> ')}function ct(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Check your email</h2> <form action="#" method="post" data-ovl-url="').reference("url_action",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p>Check to see if your email is correct, or enter a different address:</p> <div class="form__row').section(t.get(["_EMAIL_ERROR"],!1),t,{block:ut},{}).write('"> ').helper("ie",t,{block:pt},{}).write(' <input type="text" name="email" id="email" class="input" placeholder="Email address" value="').reference("email",t).write('" tabindex="1" autofocus> ').section(t.get(["EMAIL_ERROR"],!1),t,{block:dt},{}).write(" ").section(t.get(["MISPRINT_ERROR"],!1),t,{block:ht},{}).write(" </div> ").section(t.get(["CAPTCHA"],!1),t,{block:bt},{}).write(' </div> <div class="ovl-buttons"><button type="submit" class="btn btn--blue"><span class="btn-txt">Resend email</span></button></div> </form> <div class="sign-separator"> <b class="lgrey sign-separator__txt">OR</b> </div> <span>Check your email account\'s junk or spam folder, just in case our email landed there. If it is in there, please remember to mark it as <b class="b">Not junk/spam</b>.</span> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function ut(e){return e.write(" error")}function pt(e){return e.write('<!--[if lte IE 9]><label for="email">Email address</label><![endif]-->')}function dt(e,t){return e.write('<span class="input-error">').reference("TEXTBLOCK_error",t).write("</span>")}function ht(e,t){return e.write('<span class="input-hint js-email_misprint-error">Did you mean this instead? <span class="p-link js-ovl-next" data-ovl-url="').reference("misprint_url",t).write('">No, change back</span></span>')}function bt(e,t){return e.write(' <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(" </div> ")}function mt(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Enter a new email address</h2> <form action="#" method="post" data-ovl-url="').reference("url_action",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p>Enter a new email address to complete your registration, we will send a verification email.</p> <div class="form__row').section(t.get(["_EMAIL_ERROR"],!1),t,{block:Et},{}).write('"> ').helper("ie",t,{block:ft},{}).write(' <input type="text" name="email" id="email" class="input" placeholder="Email address" value="').reference("email",t).write('" tabindex="1" autofocus> ').section(t.get(["EMAIL_ERROR"],!1),t,{block:gt},{}).write(" ").section(t.get(["MISPRINT_ERROR"],!1),t,{block:vt},{}).write(" </div> ").section(t.get(["CAPTCHA"],!1),t,{block:Tt},{}).write(' </div> <div class="ovl-buttons"><button class="btn btn--blue"><span class="btn-txt">Send verification</span></button></div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function Et(e){return e.write(" error")}function ft(e){return e.write('<!--[if lte IE 9]><label for="email">Email address</label><![endif]-->')}function gt(e,t){return e.write('<span class="input-error">').reference("TEXTBLOCK_error",t).write("</span>")}function vt(e,t){return e.write('<span class="input-hint js-email_misprint-error">Did you mean this instead? <a href="').reference("misprint_url",t).write('" class="js-ovl-next">No, change back</a></span>')}function Tt(e,t){return e.write(' <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(" </div> ")}function Ot(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Problem with your email</h2> <form action="#" method="post" data-ovl-url="').reference("url_action",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p>Your email account settings have been set to block all messages from us, so we are unable to send any more emails. To reallow delivery, send an email from this email account, as shown in the example:</p> <div class="sign-email"> <div class="sign-email__item"> From: <b>').reference("email",t).write('</b><br> </div> <div class="sign-email__item"> To: <b>').reference("unblock_email",t).write('</b><br> </div> <div class="sign-email__item"> Subject: <b>Confirmation</b>\n</div> </div> </div> <div class="ovl-buttons"> <button class="btn btn--blue"><span class="btn-txt">I have just sent the email</span></button> </div> <div class="ovl-hint"> <span class="p-link grey js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_another",t).write('">Or skip it for now</span> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function yt(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Create new password</h2> <form action="#" method="post" data-ovl-url="').reference("url_action",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p>Create a new password, which you will easily remember:</p> <div class="form__row').section(t.get(["_PASSWORD_ERROR"],!1),t,{block:Rt},{}).write(' js-password-strength"> ').helper("ie",t,{block:St},{}).write(' <input type="password" name="password" id="password" class="input" data-control-type="password-strength" placeholder="Password" value="').reference("password",t).write('" autofocus> ').section(t.get(["PASSWORD_ERROR"],!1),t,{block:wt},{}).write(' <div class="input-hint"> <div id="js-password-strength-messages" class="js_pw_info"> <span class="password-hint password-hint--info">Password must be at least 5 characters</span> <span class="password-hint password-hint--short">Password: <b class="hint-pass hint-pass--short">Too short</b></span> <span class="password-hint password-hint--weak">Password: <b class="hint-pass hint-pass--weak">Weak</b></span> <span class="password-hint password-hint--medium">Password: <b class="hint-pass hint-pass--average">Average</b></span> <span class="password-hint password-hint--strong">Password: <b class="hint-pass hint-pass--strong">Strong</b></span> </div> </div> </div> <div class="form__row').section(t.get(["_REPASSWORD_ERROR"],!1),t,{block:It},{}).write('"> ').helper("ie",t,{block:Nt},{}).write(' <input type="password" name="repassword" id="repassword" class="input" placeholder="Confirm password" value="').reference("repassword",t).write('"> ').section(t.get(["REPASSWORD_ERROR"],!1),t,{block:At},{}).write(" </div> ").section(t.get(["CHECKCODE"],!1),t,{block:Ct},{}).write(' </div> <div class="ovl-buttons"> <button class="btn btn--blue"><span class="btn-txt">Update</span></button> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function Rt(e){return e.write(" error")}function St(e){return e.write('<!--[if lte IE 9]><label for="password">Password</label><![endif]-->')}function wt(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function It(e){return e.write(" error")}function Nt(e){return e.write('<!--[if lte IE 9]><label for="repassword">Confirm password</label><![endif]-->')}function At(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function Ct(e,t){return e.write(' <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(" </div> ")}function Pt(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">You’re nearly there...</h2> <form action="#" method="post" data-ovl-url="').reference("url_action",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p>Please enter some additional details:</p> ').section(t.get(["FULLNAME_FIELD"],!1),t,{block:$t},{}).write(" ").section(t.get(["BIRTHDAY_FIELD"],!1),t,{block:Bt},{}).write(" ").section(t.get(["LOCATION_FIELD"],!1),t,{block:Kt},{}).write(" ").section(t.get(["GENDER_FIELD"],!1),t,{block:qt},{}).write(' </div> <div class="ovl-buttons"> <button type="submit" name="create_profile" class="btn btn--blue" tabindex="8"> <span class="btn-txt">Continue</span> </button> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function $t(e,t){return e.write(' <div class="js-row-fullname form__row').section(t.get(["_FULLNAME_ERROR"],!1),t,{block:Lt},{}).write('"> <input type="text" name="fullname" id="fullname" class="input" placeholder="First name" value="').reference("fullname",t).write('" maxlength="30" tabindex="1" autofocus> ').section(t.get(["FULLNAME_ERROR"],!1),t,{block:Dt},{}).write(" </div> ")}function Lt(e){return e.write(" error")}function Dt(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function Bt(e,t){return e.write(' <div class="js-row-dob form__row').section(t.get(["_BIRTHDAY_ERROR"],!1),t,{block:Mt},{}).write('"> <div class="select select--day" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="day" class="select-value" value="').reference("day_selected",t).write('"> <span class="select-label').section(t.get(["_DAY_SELECT_DEFAULT"],!1),t,{block:Ut},{}).write('" tabindex="3">').section(t.get(["DAY_SELECT_DEFAULT"],!1),t,{block:kt},{}).reference("day_name_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["DAY_SELECT"],!1),t,{block:Ht},{}).write(' </ul> </div> </div><!-- --><div class="select select--month" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="month" class="select-value" value="').reference("month_selected",t).write('"> <span class="select-label').section(t.get(["_MONTH_SELECT_DEFAULT"],!1),t,{block:Ft},{}).write('" tabindex="4">').section(t.get(["MONTH_SELECT_DEFAULT"],!1),t,{block:Vt},{}).reference("month_name_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["MONTH_SELECT"],!1),t,{block:xt},{}).write(' </ul> </div> </div><!-- --><div class="select select--year" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="year" class="select-value" value="').reference("year_selected",t).write('"> <span class="select-label').section(t.get(["_YEAR_SELECT_DEFAULT"],!1),t,{block:Yt},{}).write('" tabindex="5">').section(t.get(["YEAR_SELECT_DEFAULT"],!1),t,{block:Gt},{}).reference("year_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["YEAR_SELECT"],!1),t,{block:Wt},{}).write(" </ul> </div> </div> ").section(t.get(["BIRTHDAY_ERROR"],!1),t,{block:jt},{}).write(" </div> ")}function Mt(e){return e.write(" error")}function Ut(e){return e.write(" placeholder")}function kt(e){return e.write("Day")}function Ht(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function Ft(e){return e.write(" placeholder")}function Vt(e){return e.write("Month")}function xt(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function Yt(e){return e.write(" placeholder")}function Gt(e){return e.write("Year")}function Wt(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function jt(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function Kt(e,t){return e.write(' <div class="js-row-city form__row"> ').reference("HTMLBLOCK_DATALIST_LOCATION",t,["s"]).write(" </div> ")}function qt(e,t){return e.write(' <div class="js-row-gender form__row').section(t.get(["_GENDER_ERROR"],!1),t,{block:Xt},{}).write('"> <label>Gender</label> <div class="radio radio--male"> <input type="radio" name="gender" id="male" value="M" ').section(t.get(["_MALE_SELECTED"],!1),t,{block:Qt},{}).write(' tabindex="7"> <label for="male">Male</label> </div> <div class="radio radio--female"> <input type="radio" name="gender" id="female" value="F" ').section(t.get(["_FEMALE_SELECTED"],!1),t,{block:zt},{}).write('> <label for="female">Female</label> </div> ').section(t.get(["GENDER_ERROR"],!1),t,{block:Jt},{}).write(" </div> ")}function Xt(e){return e.write(" error")}function Qt(e){return e.write(' checked="checked"')}function zt(e){return e.write(' checked="checked"')}function Jt(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function Zt(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Problem with your email</h2> <div class="ovl-content"> <p>Sorry, we did not receive the confirmation email from you yet. Please wait a few minutes more, or check that everything was correct and try again.</p> </div> <div class="ovl__buttons"> <div class="btn btn--blue"><span class="btn-txt">Continue</span><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("url_action",t).write('"></span></div> </div> <div class="ovl-hint"> <a href="').reference("url_another",t).write('" class="lgrey">Or skip it for now</a> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')
}function es(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Update your info...</h2> <form class="no_autoloader" action="#" method="post" data-ovl-url="').reference("post_url",t).write('" data-ovl-type="ovl"> <div class="ovl-content"> <p class="large">Add these last important details to allow the best people to meet up with you on ').reference("PAGE_partner_name",t).write(":</p> ").section(t.get(["name_expected"],!1),t,{block:ts},{}).write(" ").section(t.get(["birthdate_expected"],!1),t,{block:os},{}).write(" ").section(t.get(["location_expected"],!1),t,{block:ms},{}).write(" ").section(t.get(["gender_expected"],!1),t,{block:Es},{}).write(' </div> <div class="ovl-buttons"> <button class="btn btn--blue" tabindex="3"><span class="btn-txt">Continue</span></button> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function ts(e,t){return e.write(' <div class="js-row-name form__row').section(t.get(["_NAME_ERROR"],!1),t,{block:ss},{}).write('"> <input type="text" name="name" id="name" class="input" placeholder="Name" value="').reference("name",t).write('" maxlength="30" tabindex="1"> ').section(t.get(["name_error"],!1),t,{block:is},{}).write(" </div> ")}function ss(e){return e.write(" error")}function is(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function os(e,t){return e.write(' <div class="js-row-dob form__row').section(t.get(["_BIRTHDATE_ERROR"],!1),t,{block:ns},{}).write('"> <div class="select select--day" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="day" class="select-value" value="').reference("day_selected",t).write('"> <span class="select-label').section(t.get(["_DAY_SELECT_DEFAULT"],!1),t,{block:rs},{}).write('" tabindex="3">').section(t.get(["DAY_SELECT_DEFAULT"],!1),t,{block:as},{}).reference("day_name_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["DAY_SELECT"],!1),t,{block:ls},{}).write(' </ul> </div> </div><!-- --><div class="select select--month" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="month" class="select-value" value="').reference("month_selected",t).write('"> <span class="select-label').section(t.get(["_MONTH_SELECT_DEFAULT"],!1),t,{block:_s},{}).write('" tabindex="4">').section(t.get(["MONTH_SELECT_DEFAULT"],!1),t,{block:cs},{}).reference("month_name_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["MONTH_SELECT"],!1),t,{block:us},{}).write(' </ul> </div> </div><!-- --><div class="select select--year" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="year" class="select-value" value="').reference("year_selected",t).write('"> <span class="select-label').section(t.get(["_YEAR_SELECT_DEFAULT"],!1),t,{block:ps},{}).write('" tabindex="5">').section(t.get(["YEAR_SELECT_DEFAULT"],!1),t,{block:ds},{}).reference("year_selected",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["YEAR_SELECT"],!1),t,{block:hs},{}).write(" </ul> </div> </div> ").section(t.get(["birthdate_error"],!1),t,{block:bs},{}).write(" </div> ")}function ns(e){return e.write(" error")}function rs(e){return e.write(" placeholder")}function as(e){return e.write("Day")}function ls(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function _s(e){return e.write(" placeholder")}function cs(e){return e.write("Month")}function us(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function ps(e){return e.write(" placeholder")}function ds(e){return e.write("Year")}function hs(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("text",t,["s"]).write("</li> ")}function bs(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function ms(e,t){return e.write(' <div class="js-row-city form__row"> ').reference("HTMLBLOCK_DATALIST_LOCATION",t,["s"]).write(" </div> ")}function Es(e,t){return e.write(' <div class="js-row-gender form__row').section(t.get(["_GENDER_ERROR"],!1),t,{block:fs},{}).write('"> <label>Gender</label> <div class="radio radio--male"> <input type="radio" name="gender" id="male" value="M" ').section(t.get(["_MALE_SELECTED"],!1),t,{block:gs},{}).write(' tabindex="7"> <label for="male">Male</label> </div> <div class="radio radio--female"> <input type="radio" name="gender" id="female" value="F" ').section(t.get(["_FEMALE_SELECTED"],!1),t,{block:vs},{}).write('> <label for="female">Female</label> </div> ').section(t.get(["gender_error"],!1),t,{block:Ts},{}).write(" </div> ")}function fs(e){return e.write(" error")}function gs(e){return e.write(' checked="checked"')}function vs(e){return e.write(' checked="checked"')}function Ts(e,t){return e.write('<span class="input-error">').reference("error",t).write("</span>")}function Os(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Success!</h2> <div class="ovl-content"> <p>Your email is now unblocked and you can go back to meeting new people.</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Continue</span><a href="').reference("url_action",t).write('" class="b-link"></a></div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function ys(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Sign in</h2> <div class="ovl-content"> <p class="b x-large">Welcome back!</p> <p> ').section(t.get(["TO_MALE"],!1),t,{block:Rs},{}).write(" ").section(t.get(["TO_FEMALE"],!1),t,{block:Ss},{}).write(" </p> ").section(t.get(["FORM"],!1),t,{block:ws},{}).write(" ").section(t.get(["DONE"],!1),t,{block:Ns},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function Rs(e){return e.write("We're delighted you want to reactivate your profile! Sign in now, and start meeting fun new people in your area.")}function Ss(e){return e.write("We're delighted you want to reactivate your profile! Sign in now, and start meeting fun new people in your area.")}function ws(e,t){return e.write(' <b>Enter the characters you see:</b> </div> <div class="ovl-buttons"> <form action="#" method="post" autocomplete="off" id="signup_form" data-ovl-url="').reference("post_url",t).write('" data-ovl-type="ovl"> ').reference("HTMLBLOCK_PAGE_hidden_form",t,["s"]).write(' <input type="hidden" name="burl" value="').reference("burl",t).write('"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(' <button type="submit" name="create_profile" id="create_profile" class="btn btn--blue" ').section(t.get(["_DISABLED"],!1),t,{block:Is},{}).write('><span class="btn-txt">Get back at it!</span></button> </form> </div> ')}function Is(e){return e.write(" disabled")}function Ns(e,t){return e.write(' <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Done. Get back at it!</span><a href="').reference("url_done",t).write('" class="b-link"></a></div> </div> ')}function As(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Sign in</h2> <div class="ovl-content"> <p class="b x-large">Your account has been blocked</p> <p>Your account has been blocked as a result of violations of <a href="').reference("terms_url",t).write('">Terms and Conditions of Use</a>.</p> ').section(t.get(["_REASON"],!1),t,{block:Cs},{}).write(' </div> <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Continue</span><a href="').reference("url_action",t).write('" class="b-link"></a></div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function Cs(e,t){return e.reference("HTMLBLOCK_reason",t)}function Ps(e){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Sign in</h2> <div class="ovl-content"> <p class="b x-large">For security we have reset your password</p> <p>To continue please check the link we have sent you.</p> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function $s(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Unsubscribed</h2> <div class="ovl-content"> <p class="x-large">Your email has been removed from the subscription list!</p> </div> <div class="ovl-buttons"> <a href="').reference("url_action",t).write('" class="btn btn--blue"><span class="btn-txt">Continue</span></a> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function Ls(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Oops...</h2> <div class="ovl-content"> <p class="x-large">Unsubscription service is temporarily unavailable. Please try later.</p> </div> <div class="ovl-buttons"> <a href="').reference("url_action",t).write('" class="btn btn--blue"><span class="btn-txt">Continue</span></a> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function Ds(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <h2 class="ovl-header">Oops... You have not yet reached ').reference("min_age",t).write(' years yet!</h2> <div class="ovl-content"> <p class="x-large">Before that age you can not use ').reference("PAGE_partner_name",t).write(". Please come again when you turn ").reference("min_age",t).write(' years old.</p> </div> <div class="ovl-buttons"> <a href="').reference("url_action",t).write('" class="btn btn--blue"><span class="btn-txt">Continue</span></a> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}return $u.dust.register("overlays/popup.unsigned",e),e.s={FORGOT_PASSWORD:t,FORGOT_PASSWORD_RESULT:r,SIGN_IN:a,SIGN_UP_INTRO:E,SIGN_UP:T,SIGN_UP_SUCCESS:ot,SIGN_UP_SUCCESS_BLACKLIST:at,SIGN_UP_RESEND:ct,SIGN_UP_NEWEMAIL:mt,SIGN_UP_REALLOW:Ot,CREATE_NEW_PASSWORD:yt,ADDITIONAL_INFO:Pt,SIGN_UP_REALLOW_ERROR:Zt,SIGN_IN_UPDATE_INFO:es,SIGN_UP_REALLOW_SUCCESS:Os,DELETED_USER:ys,BLOCKED_USER:As,AUTO_RESET_PASSWORD:Ps,EMAIL_BLOCKED:$s,EMAIL_NOT_BLOCKED:Ls,TOO_YOUNG:Ds},t.s={_ERROR:s,_EMAIL_ERROR:o,MISPRINT_ERROR:n},a.s={_EMAIL_ERROR:l,_ERROR_FOR_ALL:_,EMAIL_ERROR:u,ERROR_FOR_ALL:p,_PASSWORD_ERROR:d,PASSWORD_ERROR:b,BUTTON_FORGOT:m},E.s={HEADER_SIGN_IN:f,HEADER_INVITE:g,SIGNUP_BY_INVITE:v},T.s={HEADER_SIGN_UP:O,HEADER_INVITE:y,FULLNAME_FIELD:R,EMAIL_FIELD:C,BIRTHDAY_FIELD:k,GENDER_FIELD:z,CAPTCHA:st,COOKIE_LAW:it},R.s={_FULLNAME_ERROR:S,_DISABLED:I,_AUTOFOCUS:N,FULLNAME_ERROR:A},C.s={_EMAIL_ERROR:P,EMAIL_FIELD:L,EMAIL_ERROR:M,MISPRINT_ERROR:U},L.s={_DISABLED:D,_AUTOFOCUS:B},k.s={_BIRTHDAY_ERROR:H,_DAY_SELECT_DEFAULT:F,DAY_SELECT_DEFAULT:V,DAY_SELECT:x,_MONTH_SELECT_DEFAULT:Y,MONTH_SELECT_DEFAULT:G,MONTH_SELECT:W,_YEAR_SELECT_DEFAULT:j,YEAR_SELECT_DEFAULT:K,YEAR_SELECT:q,BIRTHDAY_ERROR:X},z.s={_GENDER_ERROR:J,_MALE_SELECTED:Z,_FEMALE_SELECTED:et,GENDER_ERROR:tt},ot.s={FACEBOOK_LOGIN:nt},nt.s={FACEBOOK_BUTTON:rt},at.s={FACEBOOK_LOGIN:lt},lt.s={FACEBOOK_BUTTON:_t},ct.s={_EMAIL_ERROR:ut,EMAIL_ERROR:dt,MISPRINT_ERROR:ht,CAPTCHA:bt},mt.s={_EMAIL_ERROR:Et,EMAIL_ERROR:gt,MISPRINT_ERROR:vt,CAPTCHA:Tt},yt.s={_PASSWORD_ERROR:Rt,PASSWORD_ERROR:wt,_REPASSWORD_ERROR:It,REPASSWORD_ERROR:At,CHECKCODE:Ct},Pt.s={FULLNAME_FIELD:$t,BIRTHDAY_FIELD:Bt,LOCATION_FIELD:Kt,GENDER_FIELD:qt},$t.s={_FULLNAME_ERROR:Lt,FULLNAME_ERROR:Dt},Bt.s={_BIRTHDAY_ERROR:Mt,_DAY_SELECT_DEFAULT:Ut,DAY_SELECT_DEFAULT:kt,DAY_SELECT:Ht,_MONTH_SELECT_DEFAULT:Ft,MONTH_SELECT_DEFAULT:Vt,MONTH_SELECT:xt,_YEAR_SELECT_DEFAULT:Yt,YEAR_SELECT_DEFAULT:Gt,YEAR_SELECT:Wt,BIRTHDAY_ERROR:jt},qt.s={_GENDER_ERROR:Xt,_MALE_SELECTED:Qt,_FEMALE_SELECTED:zt,GENDER_ERROR:Jt},es.s={name_expected:ts,birthdate_expected:os,location_expected:ms,gender_expected:Es},ts.s={_NAME_ERROR:ss,name_error:is},os.s={_BIRTHDATE_ERROR:ns,_DAY_SELECT_DEFAULT:rs,DAY_SELECT_DEFAULT:as,DAY_SELECT:ls,_MONTH_SELECT_DEFAULT:_s,MONTH_SELECT_DEFAULT:cs,MONTH_SELECT:us,_YEAR_SELECT_DEFAULT:ps,YEAR_SELECT_DEFAULT:ds,YEAR_SELECT:hs,birthdate_error:bs},Es.s={_GENDER_ERROR:fs,_MALE_SELECTED:gs,_FEMALE_SELECTED:vs,gender_error:Ts},ys.s={TO_MALE:Rs,TO_FEMALE:Ss,FORM:ws,DONE:Ns},ws.s={_DISABLED:Is},As.s={_REASON:Cs},e}(),$l.register({section:"user",lang:"en-us",translations:{GENDERS:{M:{short_name:"M",full_name:"Male"},F:{short_name:"F",full_name:"Female"}},DATES:{TODAY:"Today"},GENDERS_TEXT:{M:"man",F:"woman"},MONTHS_TEXT:{January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December"},SIGN_UP_DATE:{DAY:"day",MONTH:"month",YEAR:"year"},MONTHS_TEXT_SHORT:{January:"Jan",February:"Feb",March:"Mar",April:"Apr",May:"May",June:"Jun",July:"Jul",August:"Aug",September:"Sep",October:"Oct",November:"Nov",December:"Dec"}}}),$l.register({section:"signup",lang:"en-us",translations:{INVITE_MESSAGE:"Hey! I'm here now",LOADING:"Loading...",NOTE:"Start typing and select your city from the list",NOTHING_FOUND_SELECT:"Select from the list",NOTHING_FOUND_TEXT:"City not found",I_AM_HERE_TOO:"I am here too :)",USER_RESTORE:"Congratulations! You have saved your profile from nearly certain death.",TYPE_LOCATION:"Type your location",PLEASE_SELECT:"Please select",SIGNUP_ERROR:{LOCATION:"Select your location",INCORRECT_LOCATION:"Incorrect city",SPECIFY_LOCATION:"Specify your location",INCORRECT_CITY_IN_COUNTRY:"Please specify your current city {{in_country}}",EMAIL:{email_empty:"Enter your email address",email_wrong:"Incorrect email address",email_exist:'Email already in system. <a href="{{signin_url}}">Sign in instead</a>',email_not_confirmed:"Confirm your account: please check your email and follow the link to verify this address",unknown:"Internal error",email_too_long:"Email too long",email_exists:"Email already in system"},PASSWORD:{password_empty:"Create a password",password_length_short:"Password too short",password_confirm_empty:"Re-type password",password_confirm_error:"Passwords don't match",password_length_long:"Password too long"},GENDER:{0:"Select your gender",gender_changed_already:"Please send a request to customer support if your gender is not correct.",bad_gender:"Incorrect gender"},CHECKCODE:{empty:"Enter symbols",incorrect:"Incorrect symbols"},FNAME:{name_empty:"Enter your first name",name_short:"First name too short",name_long:"First name too long",name_wrong:"Field cannot contain numbers or symbols",name_internal:"Internal error",name_black:"First name is on a black list",name_incorrect:"Incorrect first name"},SNAME:{name_empty:"Enter your last name",name_short:"Last name too short",name_long:"Last name too long",name_wrong:"Field cannot contain numbers or symbols",name_internal:"Internal error",name_black:"Last name is in our black list",name_incorrect:"Incorrect last name"},FULLNAME:{name_empty:"Enter your name",name_short:"Name too short",name_long:"Name too long",name_internal:"Internal error",name_wrong:"Name field cannot contain numbers or symbols",name_incorrect:"Incorrect name"},BIRTHDATE:{bad:"Select your date of birth",bad_age:"You must be at least {{number}} {{years}} old",bad_year_month:"Select the year and month",bad_month_day:"Select the month and day",bad_year_day:"Select the year and day",bad_year:"Select your year of birth",bad_month:"Select your month of birth",bad_day:"Select your day of birth",incorrect:"Incorrect date",already_changed:"Please send a request to customer support if your date of birth is not correct.",bad_age_teen:"You must be at least 13 years old",bad_age_too_young:"You must be at least 13 years old",bad_age_too_old:"You can't be older than 18 years old"},NAME:{name_empty:"Please enter your name",name_short:"Name too short",name_long:"Name too long",name_wrong:"Field cannot contain numbers or symbols",name_internal:"Internal error",name_incorrect:"Incorrect name"},ICQ:{0:"Select whether or not you have ICQ",icq_empty:"Enter your ICQ UIN",icq_wrong:"Invalid ICQ UIN",icq_exist:'ICQ UIN already in system. <a href = "{{url}}">Sign in instead</a>'},STATUS:{status_empty:"Select your current status"},IHT:{please_select:"Please select"}}}}),B.HoN_v3.UpdateInfo.View=$class(B.DustView,{block:"SIGN_IN_UPDATE_INFO",template:"overlays/popup.unsigned",MONTH_NAMES:["January","February","March","April","May","June","July","August","September","October","November","December"],constructor:function(){$super(this,arguments),this.set("PAGE_partner_name",$l.get("partner").title)},setRequiredName:function(){return this.set("name_expected",{name_error:{error:$l.get("signup",["SIGNUP_ERROR","FULLNAME","name_incorrect"])}})},setRequiredBirtday:function(e,t){var s,i,o=[],n=[],r=[];for(s=t;s>=e;s--)r.push({value:s,text:s});for(s=1;32>s;s++)i=10>s?"0"+s:s,o.push({value:i,text:s});for(s=0;s<this.MONTH_NAMES.length;s++){var a=s+1;i=10>a?"0"+a:a,n.push({value:i,text:$l.get("user",["MONTHS_TEXT",this.MONTH_NAMES[s]])})}return this.set("birthdate_expected",{_DAY_SELECT_DEFAULT:!0,_MONTH_SELECT_DEFAULT:!0,_YEAR_SELECT_DEFAULT:!0,DAY_SELECT_DEFAULT:!0,MONTH_SELECT_DEFAULT:!0,YEAR_SELECT_DEFAULT:!0,DAY_SELECT:o,MONTH_SELECT:n,YEAR_SELECT:r,birthdate_error:{error:$l.get("signup",["SIGNUP_ERROR","BIRTHDATE","incorrect"])}})},setRequiredLocation:function(e){return this.set("location_expected",{HTMLBLOCK_DATALIST_LOCATION:e})},setRequiredGender:function(){return this.set("gender_expected",{gender_error:{error:$l.get("signup",["SIGNUP_ERROR","BIRTHDATE","bad_gender"])}})}}),function(){function e(e,s){return e.section(s.get(["DATALIST_LOCATION"],!1),s,{block:t},{}).write(" ").section(s.get(["LIST"],!1),s,{block:g},{})}function t(e,t){return e.write(" ").section(t.get(["SIGNUP_ISOLATED_HINT"],!1),t,{block:s},{}).write(" ").section(t.get(["UPDATE_ISOLATED_HINT"],!1),t,{block:i},{}).write(' <div class="search-field').section(t.get(["_ACTIVE"],!1),t,{block:o},{}).section(t.get(["_ERROR"],!1),t,{block:n},{}).section(t.get(["_EMPTY"],!1),t,{block:r},{}).write(' js-location-list" ').section(t.get(["_CLIENT_SIDE"],!1),t,{block:a},{}).write(' data-url="').reference("url",t).write('" data-control-type="location-list"> <div class="search-field_"> <input type="hidden" name="location_id" value="').reference("location_id",t).write('"> <input type="text" id="location_field').reference("id",t).write('" class="input').section(t.get(["_SMALL"],!1),t,{block:_},{}).write('" value="').reference("location",t).write('" autocomplete="off" ').section(t.get(["_AUTOFOCUS"],!1),t,{block:c},{}).write(' placeholder="').reference("placeholder",t).write('" tabindex="').reference("tabindex",t).write('" ').section(t.get(["_DISABLE"],!1),t,{block:u},{}).write('> <i class="icon ico--grey ico--search"></i> <i class="icon ico--grey ico--cross-sm js-control-reset"></i> </div> ').section(t.get(["HINT"],!1),t,{block:p},{}).write(" ").section(t.get(["ERROR"],!1),t,{block:b},{}).write(' <div class="datalist bc"> <ul class="options"> ').reference("HTMLBLOCK_LIST",t,["s"]).write(' </ul> <div class="datalist-hint"> ').section(t.get(["MANUAL_SELECT_ENABLED"],!1),t,{block:m},{}).write(" ").section(t.get(["MANUAL_SELECT_DISABLED"],!1),t,{block:f},{}).write(" </div> </div> </div> ")}function s(e){return e.write("Your location is set automatically")}function i(e){return e.write("In this country, you can only use your actual location.")}function o(e){return e.write(" active")}function n(e){return e.write(" error")}function r(e){return e.write(" empty")}function a(e,t){return e.write(" data-client-side").section(t.get(["_SEARCH_COUNTRIES"],!1),t,{block:l},{})}function l(e){return e.write(" data-search-countries")}function _(e){return e.write(" input--sm")}function c(e){return e.write(" autofocus")}function u(e){return e.write(" disabled")}function p(e,t){return e.write(' <div class="input-hint"> ie:\n').section(t.get(["LINK"],!1),t,{block:d},{}).write(" ").section(t.get(["NO_LINK"],!1),t,{block:h},{}).write(" </div> ")}function d(e,t){return e.write(' <span tabindex="-1" class="p-link js-location-list-hint" data-value="').reference("location_id",t).write('" data-label="').reference("location_name",t).write('">').reference("location",t).write("</span> ")}function h(e,t){return e.write(" <span>").reference("location",t).write("</span> ")}function b(e,t){return e.write(' <div class="input-error">').reference("error",t).write("</div> ")}function m(e,t){return e.write(' <span class="lgrey datalist-hint__text">Enter a city name or</span><span class="lgrey datalist-hint__nothing">City not found. Try again or</span> ').section(t.get(["PLACE_DEFAULT"],!1),t,{block:E},{}).write(" ")}function E(e,t){return e.write(' <a href="').reference("more_location_url",t).write('" class="p-link js-ovl-open" data-ovl-url="').reference("more_location_url",t).write('" data-ovl-type="').reference("ovl_type",t).write('" tabindex="-1">select from the list</a> ')}function f(e){return e.write(' <span class="lgrey datalist-hint__text">Enter city name</span><span class="lgrey datalist-hint__nothing">City not found. Please try again.</span> ')}function g(e,t){return e.write(" ").section(t.get(["ITEM"],!1),t,{block:v},{}).write(" ")}function v(e,t){return e.write('<li class="option').section(t.get(["_FIRST_CHILD"],!1),t,{block:T},{}).write('" data-value="').reference("value",t).write('">').reference("HTMLBLOCK_CITY",t,["s"]).write("</li>")}function T(e){return e.write(" hover selected")}return $u.dust.register("components/block.datalist-location",e),e.s={DATALIST_LOCATION:t,LIST:g},t.s={SIGNUP_ISOLATED_HINT:s,UPDATE_ISOLATED_HINT:i,_ACTIVE:o,_ERROR:n,_EMPTY:r,_CLIENT_SIDE:a,_SMALL:_,_AUTOFOCUS:c,_DISABLE:u,HINT:p,ERROR:b,MANUAL_SELECT_ENABLED:m,MANUAL_SELECT_DISABLED:f},a.s={_SEARCH_COUNTRIES:l},p.s={LINK:d,NO_LINK:h},m.s={PLACE_DEFAULT:E},g.s={ITEM:v},v.s={_FIRST_CHILD:T},e}(),B.HoN_v3.UpdateInfo.LocationView=$class(B.DustView,{template:"components/block.datalist-location",constructor:function(){$super(this,arguments),this.set({DATALIST_LOCATION:{ERROR:{error:$l.get("signup",["SIGNUP_ERROR"]).INCORRECT_LOCATION},_CLIENT_SIDE:{_SEARCH_COUNTRIES:!0},tabindex:-1,placeholder:$l.get("signup","TYPE_LOCATION"),HTMLBLOCK_LIST:"",MANUAL_SELECT_ENABLED:{PLACE_DEFAULT:{ovl_type:"hon-v3-location-bma"}}}})}}),B.HoN_v3.UpdateInfo.ViewController=$class(B.HoN_v3.BaseViewController,{userFields:null,constructor:function(){$super(this,arguments),this.form=this.getElement("form"),this.$eV=$e.add(this.form,"submit",this._onFormSubmit,this);var e=this.getElement(".js-ovl-close");e&&$el.add(e,"hidden")},destroy:function(){this.$eV&&($e.del(this.$eV),this.$eV=null),this.form=null,this.userFields=null,$super(this,arguments)},setUserFields:function(e){this.userFields=e},_onFormSubmit:function(){var e,t=$el.select(".form__row");for(e=0;e<t.length;e++)$el.del(t[e],"error");var s=$r.serialize(this.form),i={},o=!1;for(e=0;e<this.userFields.length;e++)switch(this.userFields[e]){case $p.UserField.USER_FIELD_DOB:if(s.day&&s.month&&s.year){var n=$u.tpl("{year}-{month}-{day}",s);this._isValidDate(+s.day,+s.month,+s.year)?i.dob=n:(this.showFieldError("dob"),o=!0)}else this.showFieldError("dob"),o=!0;break;case $p.UserField.USER_FIELD_NAME:s.name?i.fullname=s.name:(this.showFieldError("name"),o=!0);break;case $p.UserField.USER_FIELD_GENDER:var r=this._getGender(s.gender);r?i.gender=r:(this.showFieldError("gender"),o=!0);break;case $p.UserField.USER_FIELD_CITY:var a=this._getLocationId(s.location_id);a?i.locationId=a:(this.showFieldError("city"),o=!0)}o||this.fire("submit",i)},_getGender:function(e){var t;switch(e){case"M":t=$p.SexType.MALE;break;case"F":t=$p.SexType.FEMALE}return t},_getLocationId:function(e){var t;return e=String(e),e=e.split("_"),e[2]&&(t=parseInt(e[2],10)),t},showFieldError:function(e){var t=this.getElement(".js-row-"+e);t&&$el.add(t,"error")},_isValidDate:function(e,t,s){var i=new Date(s,t-1,e);return i&&i.getMonth()+1==t&&i.getDate()==Number(e)}}),B.HoN_v3.UpdateInfo.Controller=$class(B.HoN_v3.BaseController,{MAX_AGE:99,MIN_AGE:18,MIN_HON_AGE:13,constructor:function(){$super(this,arguments),this.model=new B.HoN_v3.Models.UserModel,this.minUserAge=B.HoN_v3.Partner.match("web")?this.MIN_HON_AGE:this.MIN_AGE},setOvlData:function(e){this.dataType=e.data.dataType||[],this.userFields=e.data.userFields||[]},destroy:function(){this.viewController&&(this.viewController.destroy(),this.viewController=null),this.model.destroy(),this.model=null,$super(this,arguments)},renderComplete:function(e){this.viewController=new B.HoN_v3.UpdateInfo.ViewController(e),this.viewController.setUserFields(this.userFields),this.viewController.on({submit:this.onSubmitForm},this)},getView:function(){for(var e=new B.HoN_v3.UpdateInfo.View,t=0;t<this.userFields.length;t++)switch(this.userFields[t]){case $p.UserField.USER_FIELD_DOB:var s=(new Date).getFullYear()-this.MAX_AGE,i=(new Date).getFullYear()-this.minUserAge;e.setRequiredBirtday(s,i);break;case $p.UserField.USER_FIELD_NAME:e.setRequiredName();break;case $p.UserField.USER_FIELD_GENDER:e.setRequiredGender();break;case $p.UserField.USER_FIELD_CITY:e.setRequiredLocation(new B.HoN_v3.UpdateInfo.LocationView)}return e},onSubmitForm:function(e){var t=new $p.User,s=new $p.UserFieldFilter,i=[];t.setUserId(B.Session.getUserId());for(var o=0;o<this.userFields.length;o++)switch(this.userFields[o]){case $p.UserField.USER_FIELD_DOB:t.setDob(e.dob),i.push($p.UserField.USER_FIELD_DOB);break;case $p.UserField.USER_FIELD_NAME:t.setName(e.fullname),i.push($p.UserField.USER_FIELD_NAME);break;case $p.UserField.USER_FIELD_GENDER:t.setGender(e.gender),i.push($p.UserField.USER_FIELD_GENDER);break;case $p.UserField.USER_FIELD_CITY:var n=new $p.City;n.setId(e.locationId).setName(""),t.setCity(n),i.push($p.UserField.USER_FIELD_CITY)}s.setProjection(i);var r=(new $p.ServerSaveUser).setUser(t).setSaveFieldFilter(s);this.model.update(null,r,this.onSaveUserReady,this.onSaveUserError,this)},onSaveUserReady:function(){location.reload()},onSaveUserError:function(){location.reload()}}),B.Ovl.UpdateInfo=new $class(B.Ovl.Base,{type:"hon-v3-update-info",simple_close:!1,close_by_escape:!1,controllerType:B.HoN_v3.UpdateInfo.Controller}),B.Ovl.GiftsBase=$class(B.Ovl.Billing,{name:"Ovl.GiftsBase",type:"gifts",re_gift:/^gift_type_([\d_]+.*)$/,_form:null,_count:null,input_el:null,btn_el:null,btn_disabled:null,$e_ovl_gifts:null,init:function(){$super(this,arguments),this.input_el=$("gifts_gift_id"),this.btn_el=$("gifts_select"),this.scroll_el=$el.down(this._el,".js-gift-wrap"),this.scroll_wrap=$c.get(this.scroll_el,"scrollable"),this.btn_disabled=!0,this.$e_ovl_gifts=$e.on({".js-gift-type":this.on_click_gift,".js-gift-switch":this.gift_switch},this),$("gift_text")&&(this._count=new $u.CharCount("gift_text",B.HoN_v3.GiftsHelper.MESSAGE_MAX_CHARS)),""!=this.input_el.value&&this._set_gift(this.input_el.value)},destroy:function(){this.$e_ovl_gifts&&$e.un(this.$e_ovl_gifts),this._form=null,this._count&&(this._count.destroy(),this._count=null),this.input_el=null,this.btn_el=null,this.scroll_el=null,this.scroll_wrap=null,this.btn_disabled=null,$super(this,arguments)},_set_gift:function(e){this.input_el.value=e,this.btn_disabled&&this.enable_submit(),$el.add($("gifts-message"),"gifts-msg--visible")},on_click_gift:function(e){var t=this.re_gift.exec(e.id);if(t){this._set_gift(t[1]);var s=$el.down(this.get_element(),"#gift_frame"),i=$el.down(s,".active");i&&$el.del(i,"active"),$el.add($el.up(e,".js-gift-item"),"active")}},gift_switch:function(e){for(var t=$("gift_section"),s=$("gift_switch_group"),i=$el.select(s,".js-gift-switch"),o=0;o<i.length;o++)$el.del(t,i[o].getAttribute("data-type"));$el.add(t,e.getAttribute("data-type")),this.set_active(s,e),this.scroll_wrap.redraw()},set_active:function(e,t){var s=$el.up(t,".js-gift-switch-wrap"),i=$el.down(e,".active");i&&$el.del(i,"active"),$el.add(s,"active")},enable_submit:function(){this.btn_disabled=null,$el.del(this.btn_el,"disabled"),this.btn_el.disabled=!1,$c.del($c.get(this.btn_el.parentNode,"tooltip"),"tooltip")}}),$u.get_the_visible_part||($u.get_the_visible_part=function(e){var t,s=e,i=e.getBoundingClientRect(),o={available:{top:1e3,bottom:1e3,left:1e3,right:1e3},truncated:{top:0,bottom:0,left:0,right:0}},n=o.truncated,r=o.available;for(r.top=i.top,r.left=i.left,r.bottom=window.innerHeight-i.bottom,r.right=window.innerWidth-i.right,n.top=Math.max(n.top,-r.top),n.bottom=Math.max(n.bottom,-r.bottom),n.left=Math.max(n.left,-r.left),n.right=Math.max(n.right,-r.right);(s=s.parentNode)&&s!=document.body&&"fixed"!=$el.style(s,"position");)if(!(s.scrollHeight<=s.offsetHeight||"hidden"===$el.style(s,"overflow-y"))&&(t=s.getBoundingClientRect(),r.top=Math.min(r.top,i.top-t.top),r.left=Math.min(r.left,i.left-t.left),r.bottom=Math.min(r.bottom,t.bottom-i.bottom),r.right=Math.min(r.right,t.right-i.right),n.top=Math.max(n.top,-r.top),n.bottom=Math.max(n.bottom,-r.bottom),n.left=Math.max(n.left,-r.left),n.right=Math.max(n.right,-r.right),n.top+n.bottom>i.height||n.left+n.right>i.width)){o.invisible=!0;break}return o.top=i.top+n.top,o.bottom=i.bottom-n.bottom,o.left=i.left+n.left,o.right=i.right-n.right,o.width=o.right-o.left,o.height=o.bottom-o.top,o}),$u.OvlHoleBase||($u.OvlHoleBase=$class({_el:null,css_tpl:null,tooltip_css_tpl:null,constructor:function(e){this._el=e,this.d_make_hole=$t.debounce(this._make_hole,100,this),$e.add(window,"resize",this.d_make_hole,this),this._make_hole(!0)},destroy:function(){this._make_hole(!1),$e.del(window,"resize",this.d_make_hole,this),this.d_make_hole.clear(),this._el=this.d_make_hole=null},_make_hole:function(e){var t=$el.down(document,".ovl-fade"),s=$el.down(document,".js-ovl-tooltip");if(t.style.cssText="transition: none;",$u.reflow(t),t.style.cssText="",e!==!1){if("ie8"!=$u.ua){var i=$u.get_the_visible_part(this._el),o={x:i.left+i.width/2,y:i.top+i.height/2};if(i.invisible||!o.x&&!o.x)return}"ie8"!=$u.ua&&"ie9"!=$u.ua&&(t.style.cssText=$u.tpl(this.css_tpl,o)),s&&(this.tooltip_css_tpl="position: absolute; left: {x}px; top: {y}px;",s.style.cssText=$u.tpl(this.tooltip_css_tpl,o))}}})),$u.OvlHoleHon||($u.OvlHoleHon=$class($u.OvlHoleBase,{css_tpl:"background: radial-gradient(1px at {x}px {y}px, rgba(0, 0, 0, 0) 55px, rgba(0, 0, 0, .4) 56px,rgba(0, 0, 0, .4) 60px, rgba(0, 0, 0, .8) 61px, rgba(0, 0, 0, 0.6) 66px, rgba(0, 0, 0, .6) 30px);opacity: 1;transition: none;"})),B.Ovl.HoN_v3_Spotlight=$class(B.Ovl.Billing,{name:"Ovl.HoN_v3_Spotlight",type:"spotlight",$e_spotlight:null,_input:null,_containers:null,_next_ovl:null,photos:null,tpl:'<div class="ovl-frame js-ovl-wrap"><div class="js-ovl-content">{html}</div><div class="loader loader--lg loader--black ovl-frame-loader"><span class="loader_"></span></div></div><div class="ovl-align"></div>',_me:null,_last_visible_in_spotlight:null,_len:null,SPOTLIGHT_ONLINE_STATUS_HIDDEN:0,init:function(e){$super(this,arguments),$e.fire($("sidebar"),"mouseleave"),e.vars&&(e.vars.ovl_share_spotlight_url&&(this._next_ovl={url:e.vars.ovl_share_spotlight_url,type:e.vars.ovl_share_spotlight_type}),e.vars.spotlight_photos&&(this.photos=e.vars.spotlight_photos)),this._input=$el.down(this._el,".js-photo-id"),this.$e_spotlight=$e.on({".js-photo-viewer-next":this._next,".js-photo-viewer-prev":this._prev},this),this._len=this.photos.length,this._containers=$el.select(this._el,".js-photo-wrap"),this._add_me(),this._set_img_src(this.photos[0].photo_url),B.Ovl.set_context($u.OvlHoleHon,$el.down(this._me,".js-spotlight-user")),this._draw(),B.HoN_v3.Spotlight.list_inited=!1},destroy:function(e){B.HoN_v3.Spotlight.list_inited=!0,$super(this,arguments),this._remove_me(),$e.un(this.$e_spotlight),e&&this._next_ovl&&window.setTimeout(B.Ovl.open.bind(B.Ovl,this._next_ovl),0),this._next_ovl=null,this.$e_spotlight=this._next_ovl=this._input=this._len=this._containers=this.photos=null
},_next:function(){this.photos.push(this.photos.shift()),this._redraw()},_prev:function(){this.photos.unshift(this.photos.pop()),this._redraw()},_draw:function(){if(this._len<3){$el.remove(this._containers.shift()),this._len<2&&$el.remove(this._containers.pop());for(var e=0;e<this._len;e++)$el.down(this._containers[e],"img").src=this.photos[e].photo_url;this._input.value=this.photos[0].photo_id}else this._prev()},_redraw:function(){if(2==this._len){var e=this._containers[0].className;return this._containers[0].className=this._containers[1].className,this._containers[1].className=e,this._input.value=this.photos[0].photo_id,this._set_img_src(this.photos[0].photo_url),void 0}this._input.value=this.photos[1].photo_id,this._set_img_src(this.photos[1].photo_url),this._containers.forEach(function(e,t){$el.down(e,"img").src=this.photos[t].photo_url}.bind(this))},_set_img_src:function(e){$el.down(this._me,"img").src=e},_add_me:function(){for(var e=$("spotlight"),t=$el.select($el.down(e,".js-spotlight-real-cnt"),".js-spotlight-item"),s=t[0],i=0;i<t.length;i++)$el.has(t[i],"hidden")||(this._last_visible_in_spotlight=t[i]);this._last_visible_in_spotlight&&$el.add(this._last_visible_in_spotlight,"hidden"),this._me=$u.tpl2el((new B.HoN_v3.SpotlightItemView).setOnlineStatus(this.SPOTLIGHT_ONLINE_STATUS_HIDDEN).setUserId(B.Session.getUserId()).toString()),s?s.parentNode.insertBefore(this._me,s):$el.down(e,".js-spotlight-real-cnt").appendChild(this._me)},_remove_me:function(){this._last_visible_in_spotlight&&$el.del(this._last_visible_in_spotlight,"hidden"),$el.remove(this._me),this._me=this._last_visible_in_spotlight=null}}),B.Ovl.HoN_v3_SpotlightAgain=new $class(B.Ovl.HoN_v3_Spotlight,{type:"spotlight-again",html:"",_init:function(e){return this.html=(new B.HoN_v3.SpotlightPopupView).setPurchaseInfo(e.purchaseInfo).setWizardParams(67,$r.prototype.rt),this.photos=e.purchaseInfo.getAlbum().getPhotos().map(function(e){return{photo_id:e.getId(),photo_url:e.getPreviewUrl()}}),$super(this,arguments)}}),B.Ovl.HoN_v3_Spotlight=new B.Ovl.HoN_v3_Spotlight,B.HoN_v3.SendGift||(B.HoN_v3.SendGift={},$gpb.exists("badoo.bma.ServerGetGiftProductList","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetGiftProductList=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetGiftProductList",t.prototype._descriptor={fields:{user_id:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.GiftProductList","message")||($gpb.exists("badoo.bma.GiftSection","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.GiftSection=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GiftSection",t.prototype._descriptor={fields:{id:{type:5,number:1,label:1},name:{type:9,number:2,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.GiftProductList=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GiftProductList",t.prototype._descriptor={fields:{text_suggestions_male:{type:9,number:3,label:3},sections:{type:11,type_name:"badoo.bma.GiftSection",number:2,label:3},gift_products:{type:11,type_name:"badoo.bma.GiftProduct",number:1,label:3},text_suggestions_female:{type:9,number:4,label:3}}}}()),B.HoN_v3.SendGift.Model=$class($u.Observable,{BUY_URL:"/billing/gifts.phtml",recepientUserId:null,destroy:function(){this._abort(),$super(this,arguments)},fetch:function(e){this.$r_gifts||this.$r_user||(this._loadGifts(e),this._loadUser(e))},getGifts:function(){return this._data_gifts},getCredits:function(){return this._data_user&&this._data_user.getCredits()},makeBuyUrlParams:function(e){return $r.toQueryString(e)},sendGift:function(e,t,s,i,o){if(!this.$r_send){var n,r,a={to_user_id:e,gift_type:t,gift_text:s||""};i&&(a.hide_gift="hide_gift"),n=$u.tpl(this.BUY_URL),o&&(r=this.makeBuyUrlParams(o),r&&(n+="?"+r)),this.$r_send=new $r(n,{method:"POST",params:a,ready:this._onSend,error:this._onSendError},this)}},setRecepientUserId:function(e){return this.recepientUserId=e,this},_abort:function(){this._abortGifts(),this._abortUser()},_loadGifts:function(e){var t=(new $p.ServerGetGiftProductList).setUserId(this.recepientUserId);this.$r_gifts=new $gpb.Rpc($p.MessageType.SERVER_GET_GIFT_PRODUCT_LIST,t).on($p.MessageType.CLIENT_GIFT_PRODUCT_LIST,this._onLoadGifts,this).setJinbaRequest(e).request()},_onLoadGifts:function(e,t){this.$r_gifts=null,e||(this._data_gifts=t,this._loaded())},_abortGifts:function(){this.$r_gifts&&(this.$r_gifts.destroy(),this.$r_gifts=null)},_loadUser:function(e){var t=(new $p.ServerGetUser).setUserId(B.Session.getUserId()).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_CREDITS])).setClientSource($p.ClientSource.CLIENT_SOURCE_UNSPECIFIED);this.$r_user=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,t).setJinbaRequest(e).on($p.MessageType.CLIENT_USER,this._onLoadUser,this).request()},_onLoadUser:function(e,t){this.$r_user=null,e||(this._data_user=t,this._loaded())},_abortUser:function(){this.$r_user&&(this.$r_user.destroy(),this.$r_user=null)},_loaded:function(){this.$r_gifts||this.$r_user||this.fire("ready")},_onSend:function(e){this.$r_send=null,this.fire("send:ready",e)},_onSendError:function(){this.$r_send=null}}),function(){function e(e,s){return e.write('<div class="gifts gifts--all gifts--by-price"> <div class="gifts__content js-gift-wrap" data-control-type="scrollable"> <div class="js-scroller"> <div id="gift_frame" class="gifts-roll"> ').section(s.get(["GIFT_GROUP"],!1),s,{block:t},{}).write(" </div> </div> </div> </div>")}function t(e,t){return e.write("<!-- -->").section(t.get(["GIFT_HEAD"],!1),t,{block:s},{}).write("<!-- -->").section(t.get(["GIFTS"],!1),t,{block:i},{}).write("<!-- -->")}function s(e,t){return e.write('<!-- --><div class="flex flex--justify flex--bottom gifts__title"> <b class="large">').reference("group_title",t).write('</b> <b class="grey">').reference("num",t).write(" ").reference("credits",t).write("</b> </div><!-- -->")}function i(e,t){return e.write('<div class="gift gift--hover').section(t.get(["_ACTIVE"],!1),t,{block:o},{}).write(' js-gift-item"> <img src="').reference("img_url",t).write('" width="60" height="60" alt=""> <span class="b-link js-gift-type js-im-gift-type" title="').reference("gift_title",t).write('" data-gift-id="').reference("giftId",t).write('"></span> </div>')}function o(e){return e.write(" active")}return $u.dust.register("gifts/block.gifts-list-by-price",e),e.s={GIFT_GROUP:t},t.s={GIFT_HEAD:s,GIFTS:i},i.s={_ACTIVE:o},e}(),B.HoN_v3.GiftsViewExpensiveList=$class(B.DustView,{template:"gifts/block.gifts-list-by-price",setGiftsGroups:function(e,t){for(var s,i={GIFT_GROUP:[]},o=this._makeGroups(e,t),n=0;n<o.length;n++)s=o[n],s.gifts&&s.gifts.length>0&&i.GIFT_GROUP.push({GIFT_HEAD:{group_title:s.name,num:s.cost,credits:$l.get_num_dependent("credits",s.cost)},GIFTS:s.gifts.map(this._prepareGiftList,this)});return this.set(i)},_makeGroups:function(e,t){for(var s,i,o,n,r={},a=[],l=0;l<t.length;l++)r[t[l].getId()]={name:B.HoN_v3.GiftsHelper.getSectionNameById(t[l].getId()),gifts:[],cost:0};for(var l=0;l<e.length;l++){s=e[l],i=s.getSectionIds();for(var _=0;_<i.length;_++)n=i[_],n in r&&r[n].gifts.push(s)}for(var c in r)o=r[c],o.gifts.length&&(o.cost=o.gifts[0].getCost(),a.push(o));return a.sort(this._sortGroups),a},_sortGroups:function(e,t){return e.cost-t.cost},_prepareGiftList:function(e){var t=e.getProductId();return{_ACTIVE:t==this.defaultGiftId,giftId:t,img_url:e.getThumbUrl(),gift_title:B.HoN_v3.GiftsHelper.getGiftTitle(t)}}}),function(){function e(e,s){return e.section(s.get(["POPUP"],!1),s,{block:t},{})}function t(e,t){return e.write(' <div class="ovl-body"> <form action="#" method="post" class="js-send-gift-form no_autoloader"> <h2 class="ovl-header">Send a gift</h2> <input type="hidden" name="gift_id" class="js-send-gift-current-id" value="').reference("defaultGiftId",t).write('"> <div class="ovl-content"> <div class="gifts gifts--all gifts--by-price"> <div class="gifts__content ovl-scroll js-gift-wrap" data-control-type="scrollable"> <div class="ovl-scroll_ js-scroller"> <div id="gift_frame" class="gifts-roll"> ').section(t.get(["GIFT_GROUP"],!1),t,{block:s},{}).write(' </div> </div> </div> <div id="gifts-message" class="gifts-msg').section(t.get(["_GIFT_SELECTED"],!1),t,{block:r},{}).write('"> <input type="text" name="gift_text" id="gift_text" class="input input--sm" placeholder="Type your message here"> <span id="gift_text_count" class="f-right small grey gifts-msg__counter">50</span> <div class="checkbox"> <input type="checkbox" name="hide_gift" id="hide-gift" value="hide_gift" ').section(t.get(["_SEND_HIDDEN"],!1),t,{block:a},{}).write('> <label for="hide-gift">Private?</label> </div> </div> </div> </div> <div class="ovl-buttons"> ').section(t.get(["PROCESS_BTN"],!1),t,{block:l},{}).write(" ").section(t.get(["CONTINUE_BTN"],!1),t,{block:u},{}).write(" </div> ").section(t.get(["COST_OF_SERVICE"],!1),t,{block:h},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </form> </div> ')}function s(e,t){return e.write("<!-- -->").section(t.get(["GIFT_HEAD"],!1),t,{block:i},{}).write("<!-- -->").section(t.get(["GIFTS"],!1),t,{block:o},{}).write("<!-- -->")}function i(e,t){return e.write('<!-- --><div class="flex flex--justify flex--bottom gifts__title"> <b class="large">').reference("group_title",t).write('</b> <b class="grey">').reference("num",t).write(" ").reference("credits",t).write("</b> </div><!-- -->")}function o(e,t){return e.write('<div class="gift gift--hover').section(t.get(["_ACTIVE"],!1),t,{block:n},{}).write(' js-gift-item"> <img src="').reference("img_url",t).write('" width="60" height="60" alt=""> <span class="b-link js-gift-type" title="').reference("gift_title",t).write('" data-gift-id="').reference("giftId",t).write('"></span> </div>')}function n(e){return e.write(" active")}function r(e){return e.write(" gifts-msg--visible")}function a(e){return e.write(" checked")}function l(e,t){return e.write(' <div class="gifts__btn" data-control-type="tooltip"> <button type="submit" id="gifts_select" class="btn btn--blue" ').section(t.get(["_DISABLED"],!1),t,{block:_},{}).write('> <span class="btn-txt">Send</span> <span class="tooltip"> ').section(t.get(["TOOLTIP"],!1),t,{block:c},{}).write(" </span> </button> </div> ")}function _(e){return e.write(" disabled")}function c(e){return e.write(' <span class="tooltip-txt">You must first choose one of the gifts shown above</span> ')}function u(e,t){return e.write(' <div class="gifts__btn" data-control-type="tooltip"> <button type="submit" id="gifts_select" class="btn btn--blue" ').section(t.get(["_DISABLED"],!1),t,{block:p},{}).write('> <span class="btn-txt">Continue</span> <span class="tooltip"> ').section(t.get(["TOOLTIP"],!1),t,{block:d},{}).write(" </span> </button> </div> ")}function p(e){return e.write(" disabled")}function d(e){return e.write(' <span class="tooltip-txt">You must first choose one of the gifts shown above</span> ')}function h(e,t){return e.write(' <div class="ovl-hint').section(t.get(["_HIDDEN"],!1),t,{block:b},{}).write(' js-send-gift-cost-block"> Cost of service: <span class="js-send-gift-cost">').reference("num",t).write('</span> <span class="js-send-gift-credits">').reference("credits",t).write("</span>\n</div> ")}function b(e){return e.write(" hidden")}return $u.dust.register("gifts/popup.gifts-by-price",e),e.s={POPUP:t},t.s={GIFT_GROUP:s,_GIFT_SELECTED:r,_SEND_HIDDEN:a,PROCESS_BTN:l,CONTINUE_BTN:u,COST_OF_SERVICE:h},s.s={GIFT_HEAD:i,GIFTS:o},o.s={_ACTIVE:n},l.s={_DISABLED:_,TOOLTIP:c},u.s={_DISABLED:p,TOOLTIP:d},h.s={_HIDDEN:b},e}(),B.HoN_v3.SendGift.View=$class(B.DustView,{template:"gifts/popup.gifts-by-price",block:"POPUP",setDefaultGiftId:function(e){return this.defaultGiftId=e,this.set("defaultGiftId",e)},setServiceCost:function(e,t){return this.set("COST_OF_SERVICE",{_HIDDEN:!e,num:t,credits:$l.get_num_dependent("credits",t)}),this},setGifts:function(e){var t,s={GIFT_GROUP:[]},i=this._makeGroups(e);s._GIFT_SELECTED=!!this.defaultGiftId;for(var o=0;o<i.length;o++)t=i[o],t.gifts&&t.gifts.length>0&&s.GIFT_GROUP.push({GIFT_HEAD:{group_title:t.name,num:t.cost,credits:$l.get_num_dependent("credits",t.cost)},GIFTS:this._prepareGiftList(t.gifts)});return this.set(s)},setEnoughMoney:function(e){var t={},s=!!this.defaultGiftId;return t.PROCESS_BTN=e&&{_DISABLED:!s},t.CONTINUE_BTN=!e&&{_DISABLED:!s},this.set(t)},_makeGroups:function(e){for(var t,s,i,o,n=e.getGiftProducts(),r=e.getSections(),a={},l=[],_=0;_<r.length;_++)a[r[_].getId()]={name:B.HoN_v3.GiftsHelper.getSectionNameById(r[_].getId()),gifts:[],cost:0};for(var _=0;_<n.length;_++){t=n[_],s=t.getSectionIds();for(var c=0;c<s.length;c++)o=s[c],o in a&&a[o].gifts.push(t)}for(var u in a)i=a[u],i.gifts.length&&(i.cost=i.gifts[0].getCost(),l.push(i));return l.sort(this._sortGroups),l},_sortGroups:function(e,t){return e.cost-t.cost},_prepareGiftList:function(e){return e.map(function(e){var t=e.getProductId();return{_ACTIVE:t==this.defaultGiftId,giftId:t,img_url:e.getThumbUrl(),gift_title:B.HoN_v3.GiftsHelper.getGiftTitle(t)}},this)}}),B.HoN_v3.SendGift.ViewController=$class(B.HoN_v3.BaseViewController,{$e:null,form:null,char_count:null,constructor:function(){$super(this,arguments);var e=this.getElement("#gift_text");e&&(this.char_count=new $u.CharCount(e.id,B.HoN_v3.GiftsHelper.MESSAGE_MAX_CHARS)),this.form=new $u.Form(this.getElement(".js-send-gift-form"),{on_submit:this._onSend},this),this.$e=$e.on({".js-gift-type":this._onClickGift},this)},destroy:function(){$e.un(this.$e),this.$e=null,this.form.destroy(),this.form=null,this.char_count&&(this.char_count.destroy(),this.char_count=null),$super(this,arguments)},changeGift:function(e,t){var s,i=this.getElement(".js-send-gift-current-id");i.value=e,$el.del(this.getElement(".active"),"active"),s=$el.up(this.container.querySelector('.js-gift-type[data-gift-id="'+e+'"]'),".js-gift-item"),$el.add(s,"active"),$el.add(this.getElement("#gifts-message"),"gifts-msg--visible"),this.getElement("#gifts_select").removeAttribute("disabled"),$el.del(this.getElement(".js-send-gift-cost-block"),"hidden"),this.getElement(".js-send-gift-cost").innerHTML=t,this.getElement(".js-send-gift-credits").innerHTML=$l.get_num_dependent("credits",t)},_onClickGift:function(e){this.fire("select-gift",e.getAttribute("data-gift-id"))},_onSend:function(){this.fire("send",this.getElement(".js-send-gift-current-id").value,this.getElement("#gift_text").value,this.getElement("#hide-gift").checked)}}),B.HoN_v3.SendGift.Controller=$class(B.HoN_v3.BaseAsyncController,{model:null,viewController:null,defaultGiftType:null,toUserId:null,buyParams:null,$e_model:null,init:function(e){this._initModel(e)},destroy:function(){this.model&&(this.model.un(this.$e_model),this.model.destroy(),this.model=this.$e_model=null),this.viewController&&(this.viewController.un(this.$e_view_controller),this.viewController.destroy(),this.viewController=this.$e_view_controller=null),this.defaultGiftType=null,this.toUserId=null,$super(this,arguments)},setToUserId:function(e){return this.toUserId=e,this},setDefaultGiftId:function(e){return this.defaultGiftId=e,this},setBuyParams:function(e){return this.buyParams=e,this},getView:function(){var e,t=this.model.getCredits(),s=(new B.HoN_v3.SendGift.View).setDefaultGiftId(this.defaultGiftId).setGifts(this.model.getGifts());return e=this.defaultGiftId?this._getGiftCost(this.defaultGiftId):0,s.setServiceCost(!!e,e).setEnoughMoney(t>=e),s},renderComplete:function(e){this._initViewController(e)},_initModel:function(e){this.model=(new B.HoN_v3.SendGift.Model).setRecepientUserId(this.toUserId),this.$e_model=this.model.on({ready:this._onModelReady,"send:ready":this._onSendReady},this),this.model.fetch(e)},_initViewController:function(e){this.viewController=new B.HoN_v3.SendGift.ViewController(e),this.$e_view_controller=this.viewController.on({send:this._sendGift,"select-gift":this._onSelectGift},this)},_onModelReady:function(){this.viewReady()},_onSendReady:function(e){B.Ovl.open(e)},_sendGift:function(e,t,s){this.model.sendGift(this.toUserId,e,t,s,this.buyParams)},_onSelectGift:function(e){this.viewController.changeGift(e,this._getGiftCost(e))},_getGiftCost:function(e){for(var t,s=this.model.getGifts().getGiftProducts(),i=0;i<s.length;i++)if(s[i].getProductId()==e){t=s[i].getCost();break}return t}})),B.Ovl.SendGift=new $class(B.Ovl.GiftsBase,{name:"Ovl.HoN_v3_Gifts",EXPENSIVE_GIFTS:!0,controller:null,$e_controller:null,_init:function(e,t){if(this.EXPENSIVE_GIFTS){var s=$r.fromQueryString(e.url),i={};delete t.html,this.controller=new B.HoN_v3.SendGift.Controller,this.$e_controller=this.controller.on({"view-ready":this._viewReady},this),s.from&&(i.from=s.from),s.messenger&&(i.messenger=s.messenger),s.activation_place&&(i.activation_place=s.activation_place),s.gift_default_type=+s.gift_default_type,s.gift_default_type||(s.gift_default_type=null),this.controller.setToUserId(s.to_user_id).setDefaultGiftId(s.gift_default_type).setBuyParams(i),this.controller.request()}return $super(this,arguments)},init:function(){return this.EXPENSIVE_GIFTS?void 0:$super(this,arguments)},destroy:function(){return this.EXPENSIVE_GIFTS?(this.controller.un(this.$e_controller),this.controller.destroy(),this.controller=this.$e_controller=null,void 0):($super(this,arguments),void 0)},_viewReady:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el)}}),B.Ovl.SpotlightBaseView=$class(B.Ovl.View,{name:"Ovl.SpotlightBaseView"}),B.Ovl.SpotlightBase=$class(B.Ovl.SpotlightBaseView,{name:"Ovl.SpotlightBase",type:null,tpl:'<div class="ovl-frame ovl-frame--spotlight js-ovl-wrap"><div class="js-ovl-content">{html}</div><div class="loader loader--lg loader--black ovl-frame-loader"><span class="loader_"></span></div></div>',spotlight_el:null,init:function(){$super(this,arguments),this.spotlight_el=$("sp_hl"),this.create_spotlight()},destroy:function(e){e&&this.close_url&&new $r(this.close_url),this.close_url=null,this.destroy_spotlight(),$super(this,arguments)},create_spotlight:function(){if(this.spotlight_el){window.scroll(0,0),this.spotlight_el.parentNode.removeChild(this.spotlight_el);var e=$("sp_line").getBoundingClientRect();this.spotlight_el.style.top=e.top+"px",$el.add(document.documentElement,"sl_wrap"),document.body.appendChild(this.spotlight_el)}},destroy_spotlight:function(){this.spotlight_el&&(this.spotlight_el.parentNode.removeChild(this.spotlight_el),$el.del(document.documentElement,"sl_wrap"))},set_photo:function(e){var t=$("sl_hl_me");t&&(t.src=e)}}),B.Ovl.SpotlightPromo=new $class(B.Ovl.SpotlightBase,{name:"Ovl.SpotlightPromo",type:"spotlight-promo",next_btn_el:null,next_url:null,next_id:null,close_link:null,re_img:/^slp_([\d_]+)$/,$e:null,init:function(){$super(this,arguments);var e=$el.down(this._el,".js-ovl-close");this.close_url=e.getAttribute("href"),this.$e=$e.on({".slp":this.select_photo,".js-spotlight-next":this.open_next},this),this.next_btn_el=$el.down(this._el,".js-spotlight-next"),this.next_url=this.next_btn_el.getAttribute("data-ovl-url"),this.next_id=this.next_btn_el.getAttribute("data-photo-id")},destroy:function(){$e.un(this.$e),this.next_btn_el=null,$super(this,arguments)},select_photo:function(e){var t=this.re_img.exec(e.id);if(t){var s=$el.down(this._el,".active");s&&$el.del(s,"active"),$el.add($el.up(e,".box"),"active"),e=$el.down(e.parentNode,"img"),e&&this.set_photo(e.src),this.set_next_id(t[1])}},set_next_id:function(e){e&&(this.next_id=e)},open_next:function(){B.Ovl.open({type:"spotlight-promo-select",url:this.next_url,params:{photo_id:this.next_id}})}}),B.PhotoViewer=$class($u.Observable,{name:"PhotoViewer",el_wrap:null,photos:null,start_id:null,base_class:null,total:0,current:0,support_transitions:null,show_image_timer:null,$p:null,$e:null,image:null,old_image:null,is_blocked:!0,constructor:function(e){$super(this,arguments),this.el_wrap=e.el_wrap,this.photos=e.photos,this.start_id=+e.start_id,this.base_class=e.base_class,this.total=this.photos.length,this.support_transitions=$e.supported("transitionend"),this.$e=$e.on({".js-photo-viewer-prev":this.prev,".js-photo-viewer-next":this.next,".js-photo-viewer-share":this.share},this),this.show_image_timer=new $t(this.show_image,this,50),this.set_current(),this.preload_first()},destroy:function(){this.show_image_timer.clear(),this.show_image_timer=null,this.$e&&($e.un(this.$e),this.$e=null),this.$p&&(B.ImagePreloadQueue.un(this.$p),this.$p=null),$super(this,arguments)},set_current:function(){var e,t;for(e=0;e<this.total;e++)if(t=this.photos[e].id,t===this.start_id){this.current=e;break}},preload_first:function(){var e=this.photos[this.current].url;B.ImagePreloadQueue.append([e]),$el.tgl(this.el_wrap,"loading",!0),this.wait_for_first(e)},preload_pack:function(){var e,t=this.current-1,s=this.current+1;0>t&&(t=this.total-1),s>this.total-1&&(s=0),e=[this.photos[t].url,this.photos[s].url],B.ImagePreloadQueue.append(e)},wait_for_first:function(e){B.ImagePreloadQueue.has_preloaded(e)?this.first_ready():this.$p=B.ImagePreloadQueue.on({load:this.first_ready.bind(this,e),error:this.first_ready.bind(this,e)},this)},first_ready:function(e,t,s){if(this.fire("preloaded",t,s),e&&t){if(t!==e)return;B.ImagePreloadQueue.un(this.$p),this.$p=null}this.image_ready(),this.preload_pack()},image_ready:function(){this.image=new Image,this.image.src=this.photos[this.current].url,this.image.className=this.base_class,this.el_wrap.appendChild(this.image),this.show_image_timer.set()},show_image:function(){this.show_image_timer.clear(),this.support_transitions?$e.add(this.image,"transitionend",this.unblock,this):this.unblock(),$el.add(this.image,this.base_class),$el.add(this.image,"visible")},unblock:function(){this.support_transitions&&$e.del(this.image,"transitionend",this.unblock,this),this.fire("change",this.current),this.old_image&&($el.remove(this.old_image),this.old_image=null),$el.tgl(this.el_wrap,"loading",!1),this.old_image=this.image,this.is_blocked=!1},prev:function(){this.is_blocked||(this.is_blocked=!0,this.current-=1,this.current<0&&(this.current=this.total-1),this.preload_pack(),this.image_ready())},next:function(){this.is_blocked||(this.is_blocked=!0,this.current+=1,this.current>this.total-1&&(this.current=0),this.preload_pack(),this.image_ready())},share:function(e){this.fire("share",e,this.photos[this.current])}}),B.Ovl.SpotlightPromo_SelectBase=$class(B.Ovl.SpotlightBase,{name:"Ovl.SpotlightPromo_SelectBase",type:"",base_class:"",success_type:"",cur_photo_id:null,photos:null,close_url:null,open_url:null,facebook_stat_url:null,twitter_stat_url:null,success_popup:null,viewer:null,$e_viewer:null,photo_id:null,init:function(e){$super(this,arguments),this.cur_photo_id=e.cur_photo_id,this.photos=e.photos,this.close_url=e.close_url,this.open_url=e.open_url,this.facebook_stat_url=e.facebook_stat_url,this.twitter_stat_url=e.twitter_stat_url,this.success_popup=e.success_popup,this.photos&&(this.viewer=new B.PhotoViewer({el_wrap:$el.down(this._el,".js-photo-viewer"),photos:this.photos,start_id:this.cur_photo_id,base_class:this.base_class}),this.$e_viewer=this.viewer.on({share:this.share,change:this.change},this),this.$comet=$r.comet.on({"spotlight:badge_shared":this.twitter_done},this),new $r(this.open_url))},destroy:function(){this.viewer&&(this.viewer.un(this.$e_viewer),this.$e_viewer=null,this.viewer.destroy(),this.viewer=null),this.$comet&&$r.comet.un(this.$comet),this.open_url=null,$super(this,arguments)},_fb_share:function(e,t){new $r(this.facebook_stat_url,{params:{click:"1",photo:t}}),$u.fb.call(function(t){return t?(new $r(this.facebook_stat_url,{params:{cancel:"1"}}),void 0):(FB.ui({method:"share",href:e},this.fb_done.bind(this)),void 0)},this,!0)},_twitter_share:function(e,t){new $r(this.twitter_stat_url,{params:{click:"1",photo:t}}),window.open(e,"BadgeSharing","toolbar=no,width=650,height=550")},share:function(e,t){var s=e.getAttribute("data-share-type"),i=t[s+"_url"];switch(this.photo_id=t.id,s){case"facebook":this._fb_share(i,this.photo_id);break;case"twitter":this._twitter_share(i,t.id)}},twitter_done:function(){B.Ovl.open({type:this.success_type,html:this.success_popup})},fb_done:function(e){if(e){if(e.error_code)return new $r(this.facebook_stat_url,{method:"post",params:{res:e,cancel:"1"}}),void 0;new $r(this.facebook_stat_url,{params:{photo:this.photo_id,share_id:e.post_id}}),this.close(),B.Ovl.open({type:this.success_type,html:this.success_popup})}},change:function(e){var t=this.photos[e].small_url;this.set_photo(t)}}),B.Ovl.HoN_v3_SpotlightPromo_Select=new $class(B.Ovl.SpotlightPromo_SelectBase,{name:"Ovl.HoN_v3_SpotlightPromo_Select",type:"hon-v3-spotlight-promo-select",simple_close:!1,tpl:'<div class="ovl-frame js-ovl-wrap"><div class="js-ovl-content">{html}</div><div class="loader loader--lg loader--black ovl-frame-loader"><span class="loader_"></span></div></div><div class="ovl-align"></div>',base_class:"ovl-photos__img",success_type:"ovl",SPOTLIGHT_ONLINE_STATUS_HIDDEN:0,init:function(){$super(this,arguments),$e.fire($("sidebar"),"mouseleave"),B.HoN_v3.Spotlight.is_ready()?this.prepare():B.on("spotlight:userlist_loaded",this.prepare,this)},prepare:function(){this._add_me(),this._set_img_src(this.photos[0].small_url),B.Ovl.set_context($u.OvlHoleHon,$el.down(this._me,".js-spotlight-user")),B.HoN_v3.Spotlight.list_inited=!1},destroy:function(){B.HoN_v3.Spotlight.list_inited=!0,$e.del(window,"scroll",this._make_hole,this),this._remove_me(),$super(this,arguments)},change:function(e){$super(this,arguments),this._set_img_src(this.photos[e].small_url)},_set_img_src:function(e){this._me||this._add_me(),$el.down(this._me,"img").src=e},_add_me:function(){for(var e=$el.down($("spotlight"),".js-spotlight-real-cnt"),t=$el.select(e,".js-spotlight-item"),s=t[0],i=0;i<t.length;i++)$el.has(t[i],"hidden")||(this._last_visible_in_spotlight=t[i]);this._last_visible_in_spotlight&&$el.add(this._last_visible_in_spotlight,"hidden"),this._me=$u.tpl2el((new B.HoN_v3.SpotlightItemView).setOnlineStatus(this.SPOTLIGHT_ONLINE_STATUS_HIDDEN).setUserId(B.Session.getUserId()).toString()),s?s.parentNode.insertBefore(this._me,s):e.appendChild(this._me)},_remove_me:function(){this._last_visible_in_spotlight&&$el.del(this._last_visible_in_spotlight,"hidden"),$el.remove(this._me),this._me=this._last_visible_in_spotlight=null}}),B.Ovl.FreeSpotlight=new $class(B.Ovl.View,{name:"Ovl.FreeSpotlight",type:"free-spotlight",photo:null,notification_id:null,show_circle_timer:null,circle_delay:1e3,SPOTLIGHT_ONLINE_STATUS_HIDDEN:0,init:function(){$super(this,arguments),B.HoN_v3.Spotlight.list_inited=!1,this.show_circle_timer=new $t(this.init_circle,this,this.circle_delay),this.show_circle_timer.set(),this.$e=$e.on(".js-give-free-spotlight",this.put_in_spotlight,this),new $gpb.Rpc($p.MessageType.SERVER_NOTIFICATION_CONFIRMATION,(new $p.String).setValue(this.notification_id)).request()},send_stats:function(e){var t=(new $p.ClientNotificationStats).setNotificationId(this.notification_id).setEvent(e),s=(new $p.ServerAppStats).setClientNotificationStats(t);new $gpb.Rpc($p.MessageType.SERVER_APP_STATS,s).request()},init_circle:function(){B.HoN_v3.Spotlight.config.tpl&&(this._add_me(),this._set_img_src(this.photo),B.Ovl.set_context($u.OvlHoleHon,$el.down(this._me,".js-spotlight-user")))},put_in_spotlight:function(){var e=new $p.PurchaseTransactionSetup;e.setFeature($p.FeatureType.ALLOW_ADD_TO_SPOTLIGHT_FOR_FREE),new $gpb.Rpc($p.MessageType.SERVER_PURCHASE_TRANSACTION,e).on($p.MessageType.CLIENT_PURCHASE_RECEIPT,this.on_server_reply,this).request(),this.send_stats($p.CommonStatsEventType.COMMON_EVENT_CLICK)},on_server_reply:function(e,t){if(!e){var s=t.getPurchaseSuccess();s?(this.close(),B.Ovl.open({type:"hon-v3-notify",blockName:"ADDED"})):this.close()}},destroy:function(e){e&&this.send_stats($p.CommonStatsEventType.COMMON_EVENT_DISMISS),B.HoN_v3.Spotlight.list_inited=!0,$super(this,arguments),this._remove_me(),this.show_circle_timer&&(this.show_circle_timer.clear(),this.show_circle_timer=null),$e.un(this.$e)},_add_me:function(){for(var e=$el.select($el.down($("spotlight"),".js-spotlight-real-cnt"),".js-spotlight-item"),t=e[0],s=0;s<e.length;s++)$el.has(e[s],"hidden")||(this._last_visible_in_spotlight=e[s]);this._last_visible_in_spotlight&&$el.add(this._last_visible_in_spotlight,"hidden"),this._me=$u.tpl2el((new B.HoN_v3.SpotlightItemView).setOnlineStatus(this.SPOTLIGHT_ONLINE_STATUS_HIDDEN).setUserId(B.Session.getUserId()).toString()),t?$el.dom.prepend(t,this._me):$el.down(this._el,".js-spotlight-real-cnt").appendChild(this._me)},_set_img_src:function(e){$el.down(this._me,"img").src=e},_remove_me:function(){this._last_visible_in_spotlight&&$el.del(this._last_visible_in_spotlight,"hidden"),$el.remove(this._me),this._me=this._last_visible_in_spotlight=null}}),B.Ovl.HoN_v3_EducationBase||(B.Ovl.HoN_v3_EducationBase=$class(B.Ovl.View,{name:"Ovl.HoN_v3_EducationBase",type:"education-base",$b_hon_v3_e:null,init:function(){$super(this,arguments),this.render(),this.$b_hon_v3_e=B.HoN_v3.on({"education-overlay:close":this.close},this)},destroy:function(){$super(this,arguments),this.$b_hon_v3_e&&(B.HoN_v3.un(this.$b_hon_v3_e),this.$b_hon_v3_e=null)},render:function(){}})),function(){function e(e,s){return e.write('<div class="ovl-body"> <div class="ovl-promo ovl-promo--mosaic ovl-promo--mosaic-dblue"> ').section(s.get(["FRIENDS_PERMISSION"],!1),s,{block:t},{}).write(" ").section(s.get(["EMAIL_PERMISSION"],!1),s,{block:o},{}).write(" ").section(s.get(["WORK_EDUCATION_PERMISSION"],!1),s,{block:l},{}).write(' </div> <div class="ovl-content"> ').section(s.get(["SWITCHER_CHECKBOX"],!1),s,{block:b},{}).write(" ").section(s.get(["SWITCHER_LINK"],!1),s,{block:m},{}).write(" ").section(s.get(["SWITCHER_BUTTON"],!1),s,{block:E},{}).write(' <span class="inline large social-connect-txt"> ').section(s.get(["FRIENDS_BOTTOM_TEXT"],!1),s,{block:f},{}).write(" ").section(s.get(["FRIENDS_EMAIL_BOTTOM_TEXT"],!1),s,{block:g},{}).write(" ").section(s.get(["EMAIL_BOTTOM_TEXT"],!1),s,{block:v},{}).write(" ").section(s.get(["WORK_EDUCATION_BOTTOM_TEXT"],!1),s,{block:T},{}).write(' </span> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(' <div class="social-connect"> <h1>Why give permission?</h1> <p class="xx-large social-connect__subtitle"> ').section(t.get(["FRIENDS_SUBTITLE"],!1),t,{block:s},{}).write(" ").section(t.get(["FRIENDS_EMAIL_SUBTITLE"],!1),t,{block:i},{}).write(' </p> <div class="fb-page" data-href="https://www.facebook.com/').reference("fb_page_url_part",t).write('" data-width="500" data-height="230" data-hide-cover="false" data-show-facepile="true" data-show-posts="false"><div class="fb-xfbml-parse-ignore"></div></div> </div> ')}function s(e){return e.write("<b>Friends</b> permission helps us connect you with friends who are already here.")}function i(e){return e.write("<b>Email</b> and <b>friends</b> permissions help us connect you with friends and new matches.")}function o(e,t){return e.write(' <div class="social-connect"> <h1>Why give permission?</h1> <p class="xx-large social-connect__subtitle"><b>Email</b> permission helps us tell you about new matches and friends.</p> <div class="fb-people-vote').section(t.get(["_SEARCH_F"],!1),t,{block:n},{}).section(t.get(["_SEARCH_M"],!1),t,{block:r},{}).section(t.get(["_SEARCH_N"],!1),t,{block:a},{}).write('"></div> </div> ')}function n(e){return e.write(" fb-people-vote--female")}function r(e){return e.write(" fb-people-vote--male")}function a(e){return e.write(" fb-people-vote--all")}function l(e,t){return e.write(' <div class="social-connect"> <h1>Why give permission?</h1> <p class="xx-large social-connect__subtitle"> ').section(t.get(["MALE"],!1),t,{block:_},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:c},{}).write(" ").section(t.get(["ANY"],!1),t,{block:u},{}).write(' </p> <div class="fb-people-vote').section(t.get(["_SEARCH_F"],!1),t,{block:p},{}).section(t.get(["_SEARCH_M"],!1),t,{block:d},{}).section(t.get(["_SEARCH_N"],!1),t,{block:h},{}).write('"></div> </div> ')
}function _(e,t){return e.write("If you show your work and education on your profile, you'll get more attention from guys on ").reference("partner_name",t).write(".")}function c(e,t){return e.write("If you show your work and education on your profile, you'll get more attention from girls on ").reference("partner_name",t).write(".")}function u(e,t){return e.write("If you show your work and education on your profile, you'll get more attention from people on ").reference("partner_name",t).write(".")}function p(e){return e.write(" fb-people-vote--female")}function d(e){return e.write(" fb-people-vote--male")}function h(e){return e.write(" fb-people-vote--all")}function b(e,t){return e.write(' <div class="inline switcher switcher--lg switcher--colored"> <input type="checkbox" id="fbconnect-switcher"> <label for="fbconnect-switcher"> <span class="switcher__state switcher__state--on">On</span><span class="switcher__state switcher__state--off js-fb-permissions-switcher" data-url="').reference("url",t).write('">Off</span> </label> </div> ')}function m(e,t){return e.write(' <div class="inline switcher switcher--lg switcher--colored"> <label> <span class="switcher__state switcher__state--on">On</span><span class="switcher__state switcher__state--off">Off</span> <a href="').reference("url",t).write('" class="b-link"></a> </label> </div> ')}function E(e,t){return e.write(' <div class="inline switcher switcher--lg switcher--colored js-wrap"> <label> <span class="switcher__state switcher__state--on">On</span><span class="switcher__state switcher__state--off">Off</span> <span class="b-link ').reference("js_class",t).write('" data-jst-class="loading" data-provider="fb"></span> </label> </div> ')}function f(e){return e.write("Enable <b>friends</b> permission to find your friends, and make new ones too.")}function g(e,t){return e.write("Enable <b>friends</b> and <b>email</b> permissions to find your friends and get notified about new matches on ").reference("partner_name",t).write(".")}function v(e,t){return e.write("Enable <b>email</b> permission to get notified about important events, matches and friends on ").reference("partner_name",t).write(".")}function T(e){return e.write("Please give us permission to access your work and education info.")}return $u.dust.register("overlays/popup.facebook-permission",e),e.s={FRIENDS_PERMISSION:t,EMAIL_PERMISSION:o,WORK_EDUCATION_PERMISSION:l,SWITCHER_CHECKBOX:b,SWITCHER_LINK:m,SWITCHER_BUTTON:E,FRIENDS_BOTTOM_TEXT:f,FRIENDS_EMAIL_BOTTOM_TEXT:g,EMAIL_BOTTOM_TEXT:v,WORK_EDUCATION_BOTTOM_TEXT:T},t.s={FRIENDS_SUBTITLE:s,FRIENDS_EMAIL_SUBTITLE:i},o.s={_SEARCH_F:n,_SEARCH_M:r,_SEARCH_N:a},l.s={MALE:_,FEMALE:c,ANY:u,_SEARCH_F:p,_SEARCH_M:d,_SEARCH_N:h},e}(),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.EducationAccessFailedView||(B.HoN_v3.Overlays.EducationAccessFailedView=$class(B.DustView,{template:"overlays/popup.facebook-permission",constructor:function(){$super(this,arguments);var e=B.HoN_v3.Partner.get_name(),t=B.Session.getUserGender(),s={};switch(t){case $p.SexType.FEMALE:s={MALE:{partner_name:e},_SEARCH_M:!0};break;case $p.SexType.MALE:s={FEMALE:{partner_name:e},_SEARCH_F:!0};break;default:s={ANY:{partner_name:e},_SEARCH_N:!0}}return this.set({SWITCHER_BUTTON:{js_class:"js-education-import"},WORK_EDUCATION_BOTTOM_TEXT:!0,WORK_EDUCATION_PERMISSION:s})}})),B.Ovl.HoN_v3_EducationAccessFailed||(B.Ovl.HoN_v3_EducationAccessFailed=new $class(B.Ovl.HoN_v3_EducationBase,{name:"Ovl.HoN_v3_EducationAccessFailed",type:"education-access-failed",simple_close:!1,init:function(){$super(this,arguments),this.render()},render:function(){this._render(new B.HoN_v3.Overlays.EducationAccessFailedView)}})),function(){function e(e,s){return e.section(s.get(["NO_SOCIAL_CONNECTION"],!1),s,{block:t},{}).write(" ").section(s.get(["WORK_EDUCATION_UPDATE"],!1),s,{block:p},{}).write(" ").section(s.get(["WORK_EDUCATION_NOT_FOUND"],!1),s,{block:g},{})}function t(e,t){return e.write(' <div class="ovl-body"> <div class="ovl-promo"> <p class="b xx-large left">Update your work and education</p> <div class="brick brick--xxxlg"> <div class="brick-img"><img src="').reference("user_pic",t).write('" alt=""></div> </div> <div class="x-large"> ').section(t.get(["TEXT_FB"],!1),t,{block:s},{}).write(" ").section(t.get(["TEXT_FB_VK"],!1),t,{block:n},{}).write(' </div> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_FB"],!1),t,{block:l},{}).write(" ").section(t.get(["BUTTON_VK"],!1),t,{block:u},{}).write(' </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function s(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:i},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:o},{}).write(" ")}function i(e,t){return e.write("Want to know where ").reference("name",t).write(" works and studied? Just update your own work and education from Facebook.")}function o(e,t){return e.write("Want to know where ").reference("name",t).write(" works and studied? Just update your own work and education from Facebook.")}function n(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:r},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:a},{}).write(" ")}function r(e,t){return e.write("Want to know where ").reference("name",t).write(" works and studied? Just update your own work and education from Facebook or VKontakte.")}function a(e,t){return e.write("Want to know where ").reference("name",t).write(" works and studied? Just update your own work and education from Facebook or VKontakte.")}function l(e,t){return e.write(' <div class="btn btn--facebook btn--social js-wrap"> <i class="ico ico--lg ico--white ico--facebook-lg"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="fb"></span> </i> <span class="btn-txt"> ').section(t.get(["SINGLE"],!1),t,{block:_},{}).write(" ").section(t.get(["MANY"],!1),t,{block:c},{}).write(' </span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function _(e){return e.write("Update now")}function c(e){return e.write("Facebook")}function u(e){return e.write(' <div class="btn btn--vk btn--social js-wrap"> <i class="ico ico--lg ico--white ico--vk-lg"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="vk"></span> </i> <span class="btn-txt">VKontakte</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function p(e,t){return e.write(' <div class="ovl-body"> <h2 class="ovl-header">Update your work and education</h2> <form method="post" class="form"> <div class="ovl-content left"> <p class="b x-large"> ').section(t.get(["MALE"],!1),t,{block:d},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:h},{}).write(" </p> ").section(t.get(["EDUCATION_SELECTOR"],!1),t,{block:b},{}).write(" ").section(t.get(["WORK_SELECTOR"],!1),t,{block:E},{}).write(' </div> <div class="ovl-buttons"> <div class="btn btn--blue js-wrap"> <span class="btn-txt">Save information</span> <div class="loader loader--white"><div class="loader_"></div></div> <span class="b-link js-education-form-submit js-toggle" data-jst-class="loading"></span> </div> </div> </form> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function d(e,t){return e.write("Add your work and education to see where ").reference("name",t).write(" works and studied.")}function h(e,t){return e.write("Add your work and education to see where ").reference("name",t).write(" works and studied.")}function b(e,t){return e.write(' <div class="table"> <div class="table-cell"><b>Your education</b></div> <div class="table-cell"> <div class="select select--sm" data-control-type="select"> <input type="hidden" name="university_id" value="').reference("value",t).write('" class="select-value"> <div tabindex="0" class="select-label">').reference("option",t).write('</div> <div class="select-options"> <ul class="options"> ').section(t.get(["_ITEM"],!1),t,{block:m},{}).write(" </ul> </div> </div> </div> </div> ")}function m(e,t){return e.write('<li class="option" data-value="').reference("value",t).write('">').reference("option",t).write("</li>")}function E(e,t){return e.write(' <div class="table"> <div class="table-cell"><b>Your work</b></div> <div class="table-cell"> <div class="select select--sm" data-control-type="select"> <input type="hidden" name="job_id" value="').reference("value",t).write('" class="select-value"> <div tabindex="0" class="select-label">').reference("option",t).write('</div> <div class="select-options"> <ul class="options"> ').section(t.get(["_ITEM"],!1),t,{block:f},{}).write(" </ul> </div> </div> </div> </div> ")}function f(e,t){return e.write('<li class="option" data-value="').reference("value",t).write('">').reference("option",t).write("</li>")}function g(e,t){return e.write(' <div class="ovl-body"> <div class="ovl-content"> <h1>No work or education found!</h1> <p class="x-large">It seems you don\'t have work and education filled in. Please update your ').reference("provider",t).write(" profile, then click the button below to add the info to ").reference("PAGE_partner_name",t).write('.</p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_FB"],!1),t,{block:v},{}).write(" ").section(t.get(["BUTTON_VK"],!1),t,{block:T},{}).write(' </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div> ')}function v(e){return e.write(' <div class="btn btn--facebook btn--social js-wrap"> <i class="ico ico--lg ico--white ico--facebook-lg"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="fb"></span> </i> <span class="btn-txt">Update from Facebook</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function T(e){return e.write(' <div class="btn btn--vk btn--social js-wrap"> <i class="ico ico--lg ico--white ico--vk-lg"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="vk"></span> </i> <span class="btn-txt">Update from VKontakte</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}return $u.dust.register("overlays/popup.work-education",e),e.s={NO_SOCIAL_CONNECTION:t,WORK_EDUCATION_UPDATE:p,WORK_EDUCATION_NOT_FOUND:g},t.s={TEXT_FB:s,TEXT_FB_VK:n,BUTTON_FB:l,BUTTON_VK:u},s.s={MALE:i,FEMALE:o},n.s={MALE:r,FEMALE:a},l.s={SINGLE:_,MANY:c},p.s={MALE:d,FEMALE:h,EDUCATION_SELECTOR:b,WORK_SELECTOR:E},b.s={_ITEM:m},E.s={_ITEM:f},g.s={BUTTON_FB:v,BUTTON_VK:T},e}(),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.EducationNotFoundView||(B.HoN_v3.Overlays.EducationNotFoundView=$class(B.DustView,{template:"overlays/popup.work-education",block:"WORK_EDUCATION_NOT_FOUND",constructor:function(e){$super(this,arguments),this.set({partner_name:B.HoN_v3.Partner.get_name(),BUTTON_VK:1!==e,BUTTON_FB:1===e,provider:1!==e?"VKontakte":"Facebook",PAGE_partner_name:$l.get("partner","title")})}})),B.Ovl.HoN_v3_EducationNotFound||(B.Ovl.HoN_v3_EducationNotFound=new $class(B.Ovl.HoN_v3_EducationBase,{name:"Ovl.HoN_v3_EducationNotFound",type:"education-not-found",simple_close:!1,render:function(){this._render(new B.HoN_v3.Overlays.EducationNotFoundView(this.provider_id))}})),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.EducationShowHiddenView||(B.HoN_v3.Overlays.EducationShowHiddenView=$class(B.DustView,{template:"overlays/popup.work-education",block:"WORK_EDUCATION_UPDATE",setData:function(e,t,s,i,o,n,r,a){var l={name:e,EDUCATION_SELECTOR:s.length&&{_ITEM:s,value:i,option:o},WORK_SELECTOR:n.length&&{_ITEM:n,value:r,option:a}};switch(t){case $p.SexType.MALE:l.MALE=!0;break;case $p.SexType.FEMALE:l.FEMALE=!0}return this.set(l)}})),B.Ovl.HoN_v3_EducationShowHidden||(B.Ovl.HoN_v3_EducationShowHidden=new $class(B.Ovl.HoN_v3_EducationBase,{name:"Ovl.HoN_v3_EducationShowHidden",type:"education-show-hidden",simple_close:!1,userName:null,educationOptions:null,educationCurrentValue:null,educationCurrentId:null,workOptions:null,workCurrentValue:null,workCurrentId:null,userGender:null,init:function(e){this.userName=e.userName,this.userGender=e.userGender,this.educationOptions=e.educationOptions,this.educationCurrentValue=e.educationCurrentValue,this.educationCurrentId=e.educationCurrentId,this.workOptions=e.workOptions,this.workCurrentValue=e.workCurrentValue,this.workCurrentId=e.workCurrentId,$super(this,arguments)},destroy:function(){this.userName=null,this.userGender=null,this.educationOptions=null,this.educationCurrentValue=null,this.educationCurrentId=null,this.workOptions=null,this.workCurrentValue=null,this.workCurrentId=null,$super(this,arguments)},render:function(){var e=(new B.HoN_v3.Overlays.EducationShowHiddenView).setData(this.userName,this.userGender,this.educationOptions,this.educationCurrentValue,this.educationCurrentId,this.workOptions,this.workCurrentValue,this.workCurrentId);this._render(e)}})),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.EducationUpdateView||(B.HoN_v3.Overlays.EducationUpdateView=$class(B.DustView,{template:"overlays/popup.work-education",block:"NO_SOCIAL_CONNECTION",setData:function(e,t,s,i,o){var n=i&&o,r={user_pic:e,name:t,BUTTON_FB:{SINGLE:o&&!n,MANY:n},BUTTON_VK:i,TEXT_FB_VK:n,TEXT_FB:o&&!n};switch(s){case $p.SexType.MALE:r.MALE=!0;break;case $p.SexType.FEMALE:r.FEMALE=!0}return this.set(r)}})),B.Ovl.HoN_v3_EducationUpdate||(B.Ovl.HoN_v3_EducationUpdate=new $class(B.Ovl.HoN_v3_EducationBase,{name:"Ovl.HoN_v3_EducationUpdate",type:"education-update",simple_close:!1,userName:null,userPic:null,userGender:null,vk_enabled:null,fb_enabled:null,init:function(e){this.userName=e.userName,this.userPic=e.userPic,this.userGender=e.userGender,this.vk_enabled=e.vk_enabled,this.fb_enabled=e.fb_enabled,$super(this,arguments)},destroy:function(){this.userPic=null,this.userName=null,this.userGender=null,this.vk_enabled=null,this.fb_enabled=null,$super(this,arguments)},render:function(){var e=(new B.HoN_v3.Overlays.EducationUpdateView).setData(this.userPic,this.userName,this.userGender,this.vk_enabled,this.fb_enabled);this._render(e)}})),function(){function e(e,n){return e.write('<div class="ovl-body ovl-body--narrow js-ovl-wrap" data-type="').reference("type",n).write('"> <div class="ovl-content"> <p class="x-large break-word"> ').section(n.get(["TEXT_SEND_MSG"],!1),n,{block:t},{}).write(" ").section(n.get(["TEXT_PLACE_VOTE"],!1),n,{block:s},{}).write(" ").section(n.get(["TEXT_VISITORS"],!1),n,{block:i},{}).write(" ").section(n.get(["TEXT_LIKERS"],!1),n,{block:o},{}).write(' </p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">OK</span> <span class="b-link js-chrome-pushes-allow"></span> </div> <div class="btn btn--sm btn--white"> <span class="btn-txt">Skip</span> <span class="b-link js-chrome-pushes-deny"></span> </div> </div> </div>')}function t(e,t){return e.write("Want to be notified in your browser when ").reference("user_name",t).write(" replies?")}function s(e,t){return e.write("Want to be notified in your browser when ").reference("user_name",t).write(" rates you back?")}function i(e){return e.write("Want to be notified in your browser when you have new visitors?")}function o(e){return e.write("Want to be notified in your browser when someone likes you?")}return $u.dust.register("overlays/popup.confirm-push",e),e.s={TEXT_SEND_MSG:t,TEXT_PLACE_VOTE:s,TEXT_VISITORS:i,TEXT_LIKERS:o},e}(),B.Ovl.ConfirmPushClass=$class(B.Ovl.View,{name:"Ovl.ConfirmPush",type:"push-confirm",simple_close:!1,init:function(){$super(this,arguments);var e={partner:$l.get("partner","title"),user_name:this.user_name,type:this.ttype,TEXT_SEND_MSG:"message"===this.ttype,TEXT_PLACE_VOTE:"vote"===this.ttype,TEXT_VISITORS:"visitors"===this.ttype,TEXT_LIKERS:"likers"===this.ttype};this._render(new B.DustView(this.view,e)),new $r(this.url_stats,{params:{dialog:"pre",event:"show",place:this.ttype},method:"get"})}}),B.Ovl.ConfirmPush=new $class(B.Ovl.ConfirmPushClass,{view:"overlays/popup.confirm-push"}),B.Ovl.Nointerest=new $class(B.Ovl.View,{name:"B.Ovl.Nointerest",type:"nointerest",_fully_inited:!1,_init:function(e,t){return t.ovl?(t=t.ovl,"cloud"==t.type&&(t.tpl=this.cloud_tpl,B.IM.fire("user_delete_confirmed",$el.down(document,".im_initial_cancel"))),this._fully_inited=!0,$super(this,arguments)):(this._fully_inited=!1,B.IM.fire("user_delete_confirmed",$el.down(document,".im_initial_cancel")),B.fire("ga:track",t.gaData),"close")},_destroy:function(){this._fully_inited&&(this._fully_inited=!1,$super(this,arguments))}}),B.HoN_v3.DeleteAccount||(B.HoN_v3.DeleteAccount={}),B.HoN_v3.DeleteAccount.Base||(B.HoN_v3.DeleteAccount.Base={},B.HoN_v3.DeleteAccount.Base.ViewController=$class(B.HoN_v3.BaseViewController,{wrap:null,constructor:function(e){$super(this,arguments),this.wrap=e},destroy:function(){this.wrap=null,$super(this,arguments)}}),B.HoN_v3.DeleteAccount.Base.Controller=$class(B.HoN_v3.BaseAsyncController,{destroy:function(){this.unbindEvents(),$super(this,arguments)},renderComplete:function(e){this.bindEvents(e)},bindEvents:function(e){this.unbindEvents(),this.viewController=new this.createViewController(e)},unbindEvents:function(){this.viewController&&(this.viewController.destroy(),this.viewController=null)},createViewController:function(){},viewReady:function(){new $t(this._viewReady,this).set(0)},_viewReady:function(){this.fire("view-ready")}})),B.HoN_v3.DeleteAccount.FirstStep||(B.HoN_v3.DeleteAccount.FirstStep={},$gpb.exists("badoo.bma.ClientDeleteAccountAlternatives","message")||($gpb.exists("badoo.bma.DeleteAccountAlternative","message")||($gpb.exists("badoo.bma.DeleteAccountAlternativeType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.DeleteAccountAlternativeType=new $gpb.Enum("badoo.bma.DeleteAccountAlternativeType");t._values=[1,2,3,4,5,6,7],t.DELETE_ACCOUNT_OPTION_HIDE=1,t.DELETE_ACCOUNT_OPTION_FREEZE=2,t.DELETE_ACCOUNT_OPTION_CLEAR=3,t.DELETE_ACCOUNT_OPTION_DISABLE_NOTIFICATIONS=4,t.DELETE_ACCOUNT_OPTION_SIGN_OUT=5,t.DELETE_ACCOUNT_OPTION_DELETE=6,t.DELETE_ACCOUNT_OPTION_ONLY_LIKE_OR_VISIT=7}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.DeleteAccountAlternative=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.DeleteAccountAlternative",t.prototype._descriptor={fields:{text:{type:9,number:2,label:1},type:{type:14,type_name:"badoo.bma.DeleteAccountAlternativeType",number:1,label:2}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientDeleteAccountAlternatives=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientDeleteAccountAlternatives",t.prototype._descriptor={fields:{promo:{type:11,type_name:"badoo.bma.PromoBlock",number:2,label:1},alternatives:{type:11,type_name:"badoo.bma.DeleteAccountAlternative",number:1,label:3}}}}()),B.HoN_v3.DeleteAccount.FirstStep.ViewController=$class(B.HoN_v3.DeleteAccount.Base.ViewController,{$e:null,constructor:function(){$super(this,arguments),this.$e=$e.on({".js-delete-account-radio":this.onRadioChange,".js-delete-profile-continue":this.onContinue,".js-delete-profile-stay":this.onStay},this)},destroy:function(){$e.un(this.$e),this.$e=null,$super(this,arguments)},onRadioChange:function(){return this.getRadioValue()==$p.DeleteAccountAlternativeType.DELETE_ACCOUNT_OPTION_DELETE?$el.del(this.getContinueBtn(),"hidden"):$el.add(this.getContinueBtn(),"hidden"),!0},onContinue:function(){this.fire("continue")},onStay:function(){return this.fire("stay"),!0},getForm:function(){return this._form||(this._form=$el.down(this.wrap,".js-delete-account-form")),this._form},getRadioValue:function(){return $r.serialize(this.getForm()).reason_radio},getContinueBtn:function(){return this._continueBtn||(this._continueBtn=$el.down(this.wrap,".js-delete-profile-continue")),this._continueBtn},getFormData:function(){return{reason_radio:this.getRadioValue()}}}),function(){function e(e,s){return e.section(s.get(["STEP_1"],!1),s,{block:t},{}).write(" ").section(s.get(["STEP_2"],!1),s,{block:_},{}).write(" ").section(s.get(["STEP_3"],!1),s,{block:c},{}).write(" ").section(s.get(["STEP_4"],!1),s,{block:b},{}).write(" ").section(s.get(["REASON_TYPE_HIDE_CONFIRMATION"],!1),s,{block:f},{}).write(" ").section(s.get(["REASON_TYPE_CLEAR_CONFIRMATION"],!1),s,{block:g},{}).write(" ").section(s.get(["CONFIRM_PASSWORD"],!1),s,{block:v},{})}function t(e,t){return e.write(' <div class="ovl-body"> <form method="post" class="js-delete-account-form" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("continue_url",t).write('" autocomplete="off"> <div class="ovl-content delete-profile"> <p class="xxx-large b"> ').section(t.get(["TITLE"],!1),t,{block:s},{}).write(' </p> <p class="x-large"> ').section(t.get(["DESCRIPTION"],!1),t,{block:n},{}).write(' </p> <div class="report report--grey"> ').section(t.get(["RADIOS"],!1),t,{block:l},{}).write(' </div> </div> <div class="ovl-buttons delete-profile__button"> <div class="btn btn--blue"> <span class="btn-txt">Stay on ').reference("PAGE_partner_name",t).write('</span> <span class="b-link js-delete-profile-stay"></span> </div> <div> <span class="grey link hidden js-delete-profile-continue">Continue</span> </div> </div> </form> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div> ')}function s(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:i},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:o},{}).write(" ")}function i(e){return e.write("Are you sure you want to delete your account?")}function o(e){return e.write("Are you sure you want to delete your account?")}function n(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:r},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:a},{}).write(" ")}function r(e,t){return e.write("This will disable your profile, which means you'll be missed by all those great new people nearby who join ").reference("PAGE_partner_name",t).write(" every day. If you'd rather just take a break or start over, you can:")}function a(e,t){return e.write("This will disable your profile, which means you'll be missed by all those great new people nearby who join ").reference("PAGE_partner_name",t).write(" every day. If you'd rather just take a break or start over, you can:")}function l(e,t){return e.write(' <div> <span class="radio"> <input type="radio" name="reason_radio" id="delete-account-first-radio-').reference("value",t).write('" class="js-delete-account-radio" value="').reference("value",t).write('"> <label for="delete-account-first-radio-').reference("value",t).write('">').reference("text",t).write("</label> </span> </div> ")}function _(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="xx-large">').reference("title",t).write('</p> <p class="x-large"> ').reference("description",t).write(' </p> <div class="delete-profile__spp"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--spp"></i> <!-- ??? --> <div class="btn btn--blue"> <span class="btn-txt">Get Free Super Powers</span> <span class="b-link js-delete-profile-get-spp"></span> </div> </div> </div> <div class="ovl-buttons"> <div> <span class="grey link js-delete-profile-continue">Delete your account</span> </div> </div> </div> ')}function c(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <form method="post" id="del_reason_form" class="js-delete-account-form" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("continue_url",t).write('" autocomplete="off"> <div class="ovl-content"> <p class="xx-large"> ').section(t.get(["MALE"],!1),t,{block:u},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:p},{}).write(' </p> <input type="hidden" name="ovl" value="1"> ').reference("HTMLBLOCK_PAGE_hidden_form",t,["s"]).write(' <div class="report report--comment"> <div class="js-wrap"> ').section(t.get(["RADIOS"],!1),t,{block:d},{}).write(' </div> <div class="report__comment js-delete-account-input-wrap"> <textarea name="reason_text" id="js-settings-reason" class="textarea js-delete-account-input" placeholder="Give us more details if you\'d like to" rows="3"></textarea> </div> </div> </div> <div class="ovl-buttons delete-profile__button"> <div class="btn btn--blue"> <span class="btn-txt">Stay on ').reference("PAGE_partner_name",t).write('</span> <span class="b-link js-ovl-close"></span> </div> <div> <span class="grey link js-delete-profile-continue hidden">Continue</span> </div> </div> </form> </div> ')}function u(e){return e.write("We're sad you're leaving. Why do you want to delete your account?")}function p(e){return e.write("We're sad you're leaving. Why do you want to delete your account?")}function d(e,t){return e.write(' <div class="delete-profile__reason-hint-1"> <span class="radio"> <input type="radio" name="reason_radio" id="delete-account-third-radio-').reference("value",t).write('" value="').reference("value",t).write('" class="js-delete-account-radio js-toggle" data-jst-type="set" data-jst-class="delete-profile__reason-hint-').reference("index",t).write('"> <label for="delete-account-third-radio-').reference("value",t).write('">').reference("text",t).write("</label> </span> ").section(t.get(["HINT"],!1),t,{block:h},{}).write(" </div> ")}function h(e,t){return e.write(' <div class="delete-profile__reason-hint"> <i class="ico ico--xsm ico--color ico--idea delete-profile__reason-icon"></i> <span class="delete-profile__reason-hint_">').reference("hint",t,["s"]).write("</span> </div> ")}function b(e,t){return e.write(' <div class="ovl-body"> <h2 class="ovl-header">Account deleted</h2> <div class="ovl-content"> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:m},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:E},{}).write(' </p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Close</span> <a href="').reference("main_page_url",t).write('" class="b-link"></a> </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross"><a href="').reference("main_page_url",t).write('" class="b-link"></a></i></div> </div> ')}function m(e){return e.write("Your account has been deleted. If you change your mind and want to restore your account please follow the instructions in the email we send you.")}function E(e){return e.write("Your account has been deleted. If you change your mind and want to restore your account please follow the instructions in the email we send you.")}function f(e){return e.write(' <div class="ovl-body"> <h2 class="ovl-header">Account hidden</h2> <div class="ovl-content"> <p class="x-large">No one can find you using Google search. To be visible on Google again, go to your Settings and enable public search under Privacy.</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">OK</span> <span class="b-link js-ovl-close"></span> </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross"><span class="b-link js-ovl-close"></span></i></div> </div> ')}function g(e){return e.write(' <div class="ovl-body"> <h2 class="ovl-header">Clear account</h2> <div class="ovl-content"> <p class="x-large">All messages, profile visits, likes and favorites will be permanently cleared.</p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">OK</span> <span class="b-link js-ovl-close"></span> </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross"><span class="b-link js-ovl-close"></span></i></div> </div> ')}function v(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="xx-large">Please type your current password to delete account:</p> <div class="form__row"> <div class="b form-label"> <label for="password" class="form-label__value">Current password</label> </div> <div class="form-field js-error-wrap').section(t.get(["_ERROR"],!1),t,{block:T},{}).write('"> <input type="password" name="current_password" id="password" class="input input--sm js-password-input"> <i class="icon ico--grey ico--question js-delete-profile-reset-password" data-control-type="tooltip"> <span class="tooltip"> <span class="tooltip-txt">Forgot your password?</span> </span> </i> <div class="input-error js-input-error">Current password is incorrect</div> </div> </div> </div> <div class="ovl-buttons"> <span class="btn btn--blue"> <span class="btn-txt">Stay on ').reference("PAGE_partner_name",t).write('</span> <span class="b-link js-ovl-close"></span> </span> <div> <span class="grey link js-delete-profile-delete">Delete your account.</span> </div> </div> </div> ')}function T(e){return e.write(" error")}return $u.dust.register("settings/popup.delete-profile",e),e.s={STEP_1:t,STEP_2:_,STEP_3:c,STEP_4:b,REASON_TYPE_HIDE_CONFIRMATION:f,REASON_TYPE_CLEAR_CONFIRMATION:g,CONFIRM_PASSWORD:v},t.s={TITLE:s,DESCRIPTION:n,RADIOS:l},s.s={MALE:i,FEMALE:o},n.s={MALE:r,FEMALE:a},c.s={MALE:u,FEMALE:p,RADIOS:d},d.s={HINT:h},b.s={MALE:m,FEMALE:E},v.s={_ERROR:T},e}(),B.HoN_v3.DeleteAccount.FirstStep.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"STEP_1",setGender:function(e){var t;return t=e===$p.SexType.MALE?"MALE":"FEMALE",this.set("TITLE/"+t,!0).set("DESCRIPTION/"+t,!0)},setAccountAlternatives:function(e){var t=e.getAlternatives().map(this.getRadio,this);return this.set("RADIOS",t)},getRadio:function(e){return{value:e.getType(),text:e.getText()}},setPartnerName:function(e){return this.set("DESCRIPTION/PAGE_partner_name",e).set("PAGE_partner_name",e)}}),B.HoN_v3.DeleteAccount.FirstStep.Controller=$class(B.HoN_v3.DeleteAccount.Base.Controller,{deleteAccountRequest:null,init:function(){this.deleteAccountRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_DELETE_ACCOUNT_ALTERNATIVES).on($p.MessageType.CLIENT_DELETE_ACCOUNT_ALTERNATIVES,this.ready,this).request()},destroy:function(){this.abortRequest(),this.deleteAccountRequest=null,$super(this,arguments)},ready:function(e,t){return e?(this.fire("error"),void 0):(this.clientDeleteAccountAlternatives=t,this.viewReady(),void 0)},abortRequest:function(){this.deleteAccountRequest&&this.deleteAccountRequest.destroy()},getView:function(){return(new B.HoN_v3.DeleteAccount.FirstStep.View).setGender(B.Session.getUserGender()).setPartnerName($l.get("partner","title")).setAccountAlternatives(this.clientDeleteAccountAlternatives)},bindEvents:function(){$super(this,arguments),this.viewController.on({"continue":this.onContinue,stay:this.onStay},this)},onContinue:function(){this.viewController.getFormData();this.fire("continue",this.clientDeleteAccountAlternatives.getPromo())},onStay:function(){var e=this.viewController.getFormData();if(!e.reason_radio)return this.alternativeProcessed(),void 0;var t=parseInt(e.reason_radio),s=(new $p.Integer).setValue(t);this.deleteAccountAlternativeType=t,this.abortRequest(),this.deleteAccountRequest=new $gpb.Rpc($p.MessageType.SERVER_DELETE_ACCOUNT_ALTERNATIVE,s).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,this.alternativeProcessed,this).request()},alternativeProcessed:function(){switch(this.deleteAccountAlternativeType){case $p.DeleteAccountAlternativeType.DELETE_ACCOUNT_OPTION_CLEAR:B.Ovl.open({type:"hon-v3-delete-account-clear-confirmation"});break;case $p.DeleteAccountAlternativeType.DELETE_ACCOUNT_OPTION_HIDE:B.Ovl.open({type:"hon-v3-delete-account-hide-confirmation"});break;case $p.DeleteAccountAlternativeType.DELETE_ACCOUNT_OPTION_SIGN_OUT:window.location.href="/signout?rt="+$r.prototype.rt;break;case $p.DeleteAccountAlternativeType.DELETE_ACCOUNT_OPTION_DISABLE_NOTIFICATIONS:B.App.app_link("settings","/settings?edit=notifications");break;default:this.fire("stay")}},createViewController:function(e){return new B.HoN_v3.DeleteAccount.FirstStep.ViewController(e)}})),B.Ovl.DeleteAccountFirstStep=new $class(B.Ovl.View,{name:"Ovl.FbPromo",type:"hon-v3-delete-account-first-step",controller:null,init:function(){$super(this,arguments),this.controller=new B.HoN_v3.DeleteAccount.FirstStep.Controller(this._el).on({stay:this.close,"continue":this.next2,"view-ready":this.render},this).request()
},render:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el)},destroy:function(){this.controller.destroy(),this.controller=null,$super(this,arguments)}}),B.HoN_v3.DeleteAccount.SecondStep||(B.HoN_v3.DeleteAccount.SecondStep={},B.HoN_v3.DeleteAccount.SecondStep.ViewController=$class(B.HoN_v3.DeleteAccount.Base.ViewController,{$e:null,constructor:function(){$super(this,arguments),this.$e=$e.on({".js-delete-profile-continue":this.onContinue,".js-delete-profile-get-spp":this.onGetSPP},this)},destroy:function(){$e.un(this.$e),this.$e=null,$super(this,arguments)},onContinue:function(){this.fire("continue")},onGetSPP:function(){return this.fire("getSPP"),!0}}),B.HoN_v3.DeleteAccount.SecondStep.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"STEP_2",setPromoBlock:function(e){return this.set("title",e.getHeader()).set("description",e.getMssg())}}),B.HoN_v3.DeleteAccount.SecondStep.Controller=$class(B.HoN_v3.DeleteAccount.Base.Controller,{promo:null,constructor:function(e){this.promo=e,$super(this,arguments)},destroy:function(){this.promo=null,$super(this,arguments)},init:function(){this.viewReady()},getView:function(){return(new B.HoN_v3.DeleteAccount.SecondStep.View).setPromoBlock(this.promo)},bindEvents:function(){$super(this,arguments),this.viewController.on({"continue":this.onContinue,getSPP:this.onGetSPP},this)},onContinue:function(){this.fire("continue")},onGetSPP:function(){var e=(new $p.String).setValue(this.promo.getId());new $gpb.Rpc($p.MessageType.SERVER_PROMO_ACCEPTED,e).request(),B.Ovl.open({type:"hon-v3-delete-account-spp"})},createViewController:function(e){return new B.HoN_v3.DeleteAccount.SecondStep.ViewController(e)}})),B.Ovl.DeleteAccountSecondStep=new $class(B.Ovl.View,{name:"Ovl.FbPromo",type:"hon-v3-account-delete-second-step",controller:null,init:function(e){$super(this,arguments),this.controller=new B.HoN_v3.DeleteAccount.SecondStep.Controller(e.promo).on({"view-ready":this.render,"continue":this.next2},this).request()},render:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el)},destroy:function(){this.controller.destroy(),this.controller=null,$super(this,arguments)}}),B.HoN_v3.DeleteAccount.ThirdStep||(B.HoN_v3.DeleteAccount.ThirdStep={},$gpb.exists("badoo.bma.ClientDeleteAccountInfo","message")||($gpb.exists("badoo.bma.DeleteAccountReasonType","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.DeleteAccountReasonType=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.DeleteAccountReasonType",t.prototype._descriptor={fields:{text:{type:9,number:2,label:2},reason_code:{type:9,number:1,label:2},hint:{type:9,number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientDeleteAccountInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientDeleteAccountInfo",t.prototype._descriptor={fields:{delete_account_reasons:{type:11,type_name:"badoo.bma.DeleteAccountReasonType",number:1,label:3}}}}()),B.HoN_v3.DeleteAccount.ThirdStep.ViewController=$class(B.HoN_v3.DeleteAccount.Base.ViewController,{$e:null,constructor:function(){$super(this,arguments),this.$e=$e.on({".js-delete-account-radio":this.onRadioChange,".js-delete-profile-continue":this.onContinue},this)},destroy:function(){$e.un(this.$e),this.$e=null,$super(this,arguments)},onRadioChange:function(){return this.getRadioValue()?$el.del(this.getContinueBtn(),"hidden"):$el.add(this.getContinueBtn(),"hidden"),this.fire("radio-change"),!0},onContinue:function(){this.fire("continue")},setError:function(e){$el.tgl(this.getInputWrap(),"error",e)},getForm:function(){return this._form||(this._form=$el.down(this.wrap,".js-delete-account-form")),this._form},getRadioValue:function(){return $r.serialize(this.getForm()).reason_radio},getInputWrap:function(){return this._inputWrap||(this._inputWrap=$el.down(this.wrap,".js-delete-account-input-wrap")),this._inputWrap},getInput:function(){return this._input||(this._input=$el.down(this.wrap,".js-delete-account-input")),this._input},getContinueBtn:function(){return this._continueBtn||(this._continueBtn=$el.down(this.wrap,".js-delete-profile-continue")),this._continueBtn},getFormData:function(){return{reason:this.getRadioValue(),text:this.getInput().value}}}),B.HoN_v3.DeleteAccount.ThirdStep.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"STEP_3",radiosList:["first_radio","second_radio","third_radio","fourth_radio","fifth_radio","sixth_radio","seventh_radio"],setGender:function(e){var t;return t=e===$p.SexType.MALE?"MALE":"FEMALE",this.set(t,!0)},setData:function(e){var t=e.getDeleteAccountReasons().map(this.getRadio);return this.set("RADIOS",t)},getRadio:function(e,t){var s=e.getReasonCode(),i={value:s,text:e.getText(),index:t};return"r_other"!=s&&(i["HINT/hint"]=e.getHint()),i},setPartnerName:function(e){return this.set("PAGE_partner_name",e)}}),B.HoN_v3.DeleteAccount.ThirdStep.Controller=$class(B.HoN_v3.DeleteAccount.Base.Controller,{deleteAccountInfoRequest:null,destroy:function(){this.abortRequest(),this.deleteAccountInfoRequest=null,$super(this,arguments)},init:function(){this.deleteAccountInfoRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_DELETE_ACCOUNT_INFO).on($p.MessageType.CLIENT_DELETE_ACCOUNT_INFO,this.ready,this).request()},abortRequest:function(){this.deleteAccountInfoRequest&&this.deleteAccountInfoRequest.destroy()},ready:function(e,t){return e?(this.fire("error"),void 0):(this.clientDeleteAccountInfo=t,this.viewReady(),void 0)},getView:function(){return(new B.HoN_v3.DeleteAccount.ThirdStep.View).setGender(B.Session.getUserGender()).setData(this.clientDeleteAccountInfo).setPartnerName($l.get("partner","title"))},bindEvents:function(){$super(this,arguments),this.viewController.on({"continue":this.onContinue,"radio-change":this.onRadioChange},this)},onRadioChange:function(){this.viewController.setError(!1)},onContinue:function(){var e=this.viewController.getFormData();return"r_other"===e.reason&&""===e.text?(this.viewController.setError(!0),void 0):(this.viewController.setError(!1),this.fire("continue",e),void 0)},createViewController:function(e){return new B.HoN_v3.DeleteAccount.ThirdStep.ViewController(e)}})),B.Ovl.DeleteAccountThirdStep=new $class(B.Ovl.View,{name:"Ovl.FbPromo",type:"hon-v3-account-delete-third-step",controller:null,init:function(){$super(this,arguments),this.controller=(new B.HoN_v3.DeleteAccount.ThirdStep.Controller).on({close:this.close,"continue":this.next2,"view-ready":this.render},this).request()},render:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el)},destroy:function(){this.controller.destroy(),this.controller=null,$super(this,arguments)}}),B.HoN_v3.DeleteAccount.FourthStep||(B.HoN_v3.DeleteAccount.FourthStep={},$gpb.exists("badoo.bma.ServerDeleteAccount","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerDeleteAccount=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerDeleteAccount",t.prototype._descriptor={fields:{text:{type:9,number:2,label:1},reason_code:{type:9,number:1,label:1},current_password:{type:9,number:3,label:1}}}}(),B.HoN_v3.DeleteAccount.FourthStep.ViewController=$class(B.HoN_v3.DeleteAccount.Base.ViewController,{$e:null,constructor:function(){$super(this,arguments),this.$e=$e.on({".js-delete-profile-delete":this.onDelete,".js-delete-profile-reset-password":this.onPasswordReset},this)},destroy:function(){$e.un(this.$e),this.$e=null,$super(this,arguments)},onDelete:function(){var e=this.getElement(".js-password-input").value;this.fire("delete",e)},onPasswordReset:function(){this.fire("password-reset")}}),B.HoN_v3.DeleteAccount.FourthStep.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"CONFIRM_PASSWORD",setPartnerName:function(e){return this.set("PAGE_partner_name",e)},setError:function(e){return this.set("_ERROR",e)}}),B.HoN_v3.DeleteAccount.FourthStep.Controller=$class(B.HoN_v3.DeleteAccount.Base.Controller,{data:null,hasError:!1,constructor:function(e){this.accountDeleteReason=e,$super(this,arguments)},destroy:function(){this.data=null,this.hasError=null,$super(this,arguments)},init:function(){this.viewReady()},getView:function(){return(new B.HoN_v3.DeleteAccount.FourthStep.View).setPartnerName($l.get("partner","title")).setError(this.hasError)},bindEvents:function(){$super(this,arguments),this.viewController.on({"delete":this.onDelete,"password-reset":this.onPasswordReset},this)},onDelete:function(e){var t=(new $p.ServerDeleteAccount).setReasonCode(this.accountDeleteReason.reason).setText(this.accountDeleteReason.text).setCurrentPassword(e);new $gpb.Rpc($p.MessageType.SERVER_DELETE_ACCOUNT,t).on($p.MessageType.CLIENT_DELETE_ACCOUNT_SUCCESS,this.onDeleteRequest,this).request()},onPasswordReset:function(){B.Ovl.open({type:"hon-v3-reset-password"})},onDeleteRequest:function(e){e?e.getType()===$p.ServerErrorType.SERVER_ERROR_TYPE_INCORRECT_PASSWORD?(this.hasError=!0,this.viewReady()):this.fire("error",e):this.fire("continue")},createViewController:function(e){return new B.HoN_v3.DeleteAccount.FourthStep.ViewController(e)}})),B.Ovl.DeleteAccountFourthStep=new $class(B.Ovl.View,{name:"Ovl.FbPromo",type:"hon-v3-account-delete-fourth-step",controller:null,init:function(e){$super(this,arguments),this.controller=new B.HoN_v3.DeleteAccount.FourthStep.Controller(e.accountDeleteReason).on({"continue":this.next2,"view-ready":this.render},this).request()},render:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el)},destroy:function(){this.controller.destroy(),this.controller=null,$super(this,arguments)}}),B.HoN_v3.DeleteAccount.SPP||(B.HoN_v3.DeleteAccount.SPP={},function(){function e(e,l){return e.write('<div class="ovl-body ovl-payment-promo"> <div class="ovl-header ovl-header--orange"> <h1 class="center"> ').section(l.get(["TRIAL_SPP_TITLE"],!1),l,{block:t},{}).write(" ").section(l.get(["TRIAL_SPP_END_TITLE"],!1),l,{block:s},{}).write(" ").section(l.get(["ACCOUNT_DELETE_SPP_TITLE"],!1),l,{block:i},{}).write(' </h1> </div> <div class="ovl-content"> <div class="payment-promo-ovl"> <i class="ico-feature ico-feature--xlg ico-feature--spp"></i> <p class="b xx-large"> ').section(l.get(["TRIAL_SPP_TXT"],!1),l,{block:o},{}).write(" ").section(l.get(["TRIAL_SPP_END_TXT"],!1),l,{block:n},{}).write(" ").section(l.get(["ACCOUNT_DELETE_SPP_TXT"],!1),l,{block:r},{}).write(' </p> <div class="payment-info"> ').section(l.get(["WANT_YOU_FOLDER_SPP_OFF"],!1),l,{block:a},{}).write(" ").section(l.get(["POPULARITY"],!1),l,{block:p},{}).write(" ").section(l.get(["FAVORITE_ADDITION_SPP_OFF"],!1),l,{block:d},{}).write(' </div> <a href="').reference("url",l).write('" class="x-large app" rel="').reference("state",l).write('">...and much more!</a> </div> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt"> ').section(l.get(["GO_IT_BTN"],!1),l,{block:m},{}).write(" ").section(l.get(["SPP_BACK"],!1),l,{block:E},{}).write(" </span> ").section(l.get(["_PAYMENT_OVL"],!1),l,{block:f},{}).write(" ").section(l.get(["_CLOSE_BUTTON"],!1),l,{block:g},{}).write(' </div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e){return e.write("Try Super Powers for free!")}function s(e){return e.write("Get Super Powers back!")}function i(e){return e.write("Enjoy Super Powers for free!")}function o(e){return e.write("To say thanks for joining us, we're giving you free Super Powers for 3 days.")}function n(e){return e.write("Your Super Powers trial has now ended. We hope you enjoyed using your powers.")}function r(e){return e.write("To say thanks for staying with us, we're giving you free Super Powers for 3 days.")}function a(e,t){return e.write(' <div class="payment-info__item"> <div class="payment-info__ico payment-info__ico--top"> <div class="payment-info__photo"><img src="').reference("userpic",t).write('" alt=""></div> <i class="ico-feature ico-feature--vote"></i> </div> <p> ').section(t.get(["SEARCH_M"],!1),t,{block:l},{}).write(" ").section(t.get(["SEARCH_F"],!1),t,{block:_},{}).write(" ").section(t.get(["SEARCH_N"],!1),t,{block:c},{}).write(" </p> ").section(t.get(["_LINK"],!1),t,{block:u},{}).write(" </div> ")}function l(e){return e.write("See the guys who liked you, instantly.")}function _(e){return e.write("See the girls who liked you, instantly.")}function c(e){return e.write("See the people who liked you, instantly.")}function u(e,t){return e.write('<a href="').reference("url",t).write('" rel="').reference("rel",t).write('" class="b-link app"></a>')}function p(e,t){return e.write(' <div class="payment-info__item"> <div class="payment-info__ico payment-info__ico--bottom"> <div class="payment-info__photo"><img src="').reference("userpic",t).write('" alt=""></div> <i class="ico-feature ico-feature--hot"></i> </div> <p>Be the first to chat to popular users</p> </div> ')}function d(e,t){return e.write(' <div class="payment-info__item"> <div class="payment-info__ico payment-info__ico--top payment-info__ico--favorite"> <div class="payment-info__photo">').section(t.get(["_SINGLE_PHOTO"],!1),t,{block:h},{}).write('</div> <i class="ico-feature ico-feature--favorite"></i> </div> <p>Find out who added you as a Favorite.</p> ').section(t.get(["_LINK"],!1),t,{block:b},{}).write(" </div> ")}function h(e,t){return e.write('<img src="').reference("userpic",t).write('" alt="">')}function b(e,t){return e.write('<a href="').reference("url",t).write('" rel="').reference("rel",t).write('" class="b-link app"></a>')}function m(e){return e.write("Got it!")}function E(e){return e.write("Get Super Powers back!")}function f(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-url="').reference("url",t).write('" data-ovl-type="payment"></span>')}function g(e){return e.write('<span class="b-link js-ovl-close"></span>')}return $u.dust.register("payment_services/overlays/popup.trial-spp",e),e.s={TRIAL_SPP_TITLE:t,TRIAL_SPP_END_TITLE:s,ACCOUNT_DELETE_SPP_TITLE:i,TRIAL_SPP_TXT:o,TRIAL_SPP_END_TXT:n,ACCOUNT_DELETE_SPP_TXT:r,WANT_YOU_FOLDER_SPP_OFF:a,POPULARITY:p,FAVORITE_ADDITION_SPP_OFF:d,GO_IT_BTN:m,SPP_BACK:E,_PAYMENT_OVL:f,_CLOSE_BUTTON:g},a.s={SEARCH_M:l,SEARCH_F:_,SEARCH_N:c,_LINK:u},d.s={_SINGLE_PHOTO:h,_LINK:b},e}(),B.HoN_v3.DeleteAccount.SPP.View=$class(B.DustView,{template:"payment_services/overlays/popup.trial-spp",PHOTOS:{MALE:[$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-male1.2.png",$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-male2.2.png",$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-male3.2.png"],FEMALE:[$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-female1.2.png",$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-female2.2.png",$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-female3.2.png"],ALL:[$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-female1.2.png",$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-male2.2.png",$r.images_root+"/v2/-/-/i/hotornot_v2/overlays/spp/spp-female3.2.png"]},constructor:function(){$super(this,arguments),this.set({ACCOUNT_DELETE_SPP_TXT:!0,ACCOUNT_DELETE_SPP_TITLE:!0,GO_IT_BTN:!0,_CLOSE_BUTTON:!0})},setGender:function(e){var t,s;return e.length>1?(t="ALL",s="N"):e[0]===$p.SexType.MALE?(t="MALE",s="M"):e[0]===$p.SexType.FEMALE&&(t="FEMALE",s="F"),this.set("WANT_YOU_FOLDER_SPP_OFF/SEARCH_"+s,!0).set("WANT_YOU_FOLDER_SPP_OFF/userpic",this.PHOTOS[t][0]).set("POPULARITY/userpic",this.PHOTOS[t][1]).set("FAVORITE_ADDITION_SPP_OFF/_SINGLE_PHOTO/userpic",this.PHOTOS[t][2])}}),B.HoN_v3.DeleteAccount.SPP.Controller=$class(B.HoN_v3.DeleteAccount.Base.Controller,{settingsRequest:null,destroy:function(){B.HoN_v3.Models.Cache.EncounterSettingsCache.cancel(this.settingsRequest)},init:function(){this.settingsRequest=B.HoN_v3.Models.Cache.EncounterSettingsCache.fetch(this.ready,this)},ready:function(e){this.searchGender=e.getSettings().getGender(),this.viewReady()},getView:function(){return(new B.HoN_v3.DeleteAccount.SPP.View).setGender(this.searchGender)}})),B.Ovl.DeleteAccountSPP=new $class(B.Ovl.View,{name:"Ovl.DeleteAccountSPP",type:"hon-v3-delete-account-spp",init:function(){$super(this,arguments),this.controller=(new B.HoN_v3.DeleteAccount.SPP.Controller).on({"view-ready":this.render},this).request()},render:function(){this._render(this.controller.getView())},destroy:function(){this.controller.destroy(),$super(this,arguments)}}),B.HoN_v3.DeleteAccount.Success||(B.HoN_v3.DeleteAccount.Success={},B.HoN_v3.DeleteAccount.Success.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"STEP_4",constructor:function(){$super(this,arguments),this.set("main_page_url","/")},setGender:function(e){var t;return t=e==$p.SexType.MALE?"MALE":"FEMALE",this.set(t,!0)}}),B.HoN_v3.DeleteAccount.Success.Controller=$class(B.HoN_v3.DeleteAccount.Base.Controller,{init:function(){this.viewReady()},getView:function(){return(new B.HoN_v3.DeleteAccount.Success.View).setGender(B.Session.getUserGender())}})),B.Ovl.DeleteAccountSuccess=new $class(B.Ovl.View,{name:"Ovl.DeleteAccountSuccess",type:"hon-v3-account-delete-success",init:function(){$super(this,arguments),this.controller=(new B.HoN_v3.DeleteAccount.Success.Controller).on("view-ready",this.render,this).request()},render:function(){this._render(this.controller.getView()),this.controller.renderComplete(this._el)},destroy:function(){this.controller.destroy(),$super(this,arguments)}}),B.HoN_v3.DeleteAccount.HideConfirmation||(B.HoN_v3.DeleteAccount.HideConfirmation={},B.HoN_v3.DeleteAccount.HideConfirmation.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"REASON_TYPE_HIDE_CONFIRMATION"}),B.HoN_v3.DeleteAccount.HideConfirmation.Controller=$class(B.HoN_v3.BaseController,{getView:function(){return new B.HoN_v3.DeleteAccount.HideConfirmation.View}})),B.Ovl.DeleteAccountHideConfirmation=new $class(B.Ovl.Base,{type:"hon-v3-delete-account-hide-confirmation",controllerType:B.HoN_v3.DeleteAccount.HideConfirmation.Controller}),B.HoN_v3.DeleteAccount.ClearConfirmation||(B.HoN_v3.DeleteAccount.ClearConfirmation={},B.HoN_v3.DeleteAccount.ClearConfirmation.View=$class(B.DustView,{template:"settings/popup.delete-profile",block:"REASON_TYPE_CLEAR_CONFIRMATION"}),B.HoN_v3.DeleteAccount.ClearConfirmation.Controller=$class(B.HoN_v3.BaseController,{getView:function(){return new B.HoN_v3.DeleteAccount.ClearConfirmation.View}})),B.Ovl.DeleteAccountClearConfirmation=new $class(B.Ovl.Base,{type:"hon-v3-delete-account-clear-confirmation",controllerType:B.HoN_v3.DeleteAccount.ClearConfirmation.Controller}),B.HoN_v3.ResetPassword||(B.HoN_v3.ResetPassword={},B.HoN_v3.ResetPassword.View=$class(B.DustView,{template:"overlays/popup.unsigned",block:"FORGOT_PASSWORD_RESULT",setEmail:function(e){return this.set("email",e)}}),B.HoN_v3.ResetPassword.Controller=$class(B.HoN_v3.BaseAsyncController,{resetRequest:null,profileRequest:null,requestCount:null,email:null,destroy:function(){this.resetRequest&&(this.resetRequest.destroy(),this.resetRequest=null),this.profileRequest&&(this.profileRequest.destroy(),this.profileRequest=null),this.requestCount=null,this.email=null,$super(this,arguments)},init:function(){this.requestCount=2;var e=(new $p.ServerGetUser).setUserId(B.Session.getUserId()).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_EMAIL])).setClientSource($p.ClientSource.CLIENT_SOURCE_FORGOT_PASSWORD);this.profileRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,e).on($p.MessageType.CLIENT_USER,this.profileReady,this).request(),this.resetRequest=new $gpb.Rpc($p.MessageType.SERVER_PASSWORD_REQUEST).on($p.MessageType.CLIENT_PASSWORD_RESENT,this.passwordReady,this).request()},profileReady:function(e,t){return e?(this.fire("error"),void 0):(this.email=t.getEmail(),this.requestCount--,this.tryRender(),void 0)},passwordReady:function(e){return e?(this.fire("error"),void 0):(this.requestCount--,this.tryRender(),void 0)},tryRender:function(){0===this.requestCount&&this.viewReady()},getView:function(){return(new B.HoN_v3.ResetPassword.View).setEmail(this.email)}})),B.Ovl.ResetPassword=new $class(B.Ovl.View,{name:"Ovl.ResetPassword",type:"hon-v3-reset-password",init:function(){$super(this,arguments),this.controller=(new B.HoN_v3.ResetPassword.Controller).on({"view-ready":this.render},this).request()},render:function(){this._render(this.controller.getView()),this.controller.renderComplete()},destroy:function(){this.controller.destroy(),$super(this,arguments)}}),B.HoN_v3.SettingsConfirmEmailPassword||(B.HoN_v3.SettingsConfirmEmailPassword={},$l.register({section:"settings",lang:"en-us",translations:{SYSTEM_ERROR:"Internal error",PASSWD_SHORT:"New password too short",PASSWD_EMPTY:"Re-enter new password",PASSWD_MISMATCH:"Passwords don't match",EMAIL_EXISTS:"Email already in system",EMAIL_EMPTY:"Enter your email address",EMAIL_WRONG:"Incorrect email address",EMAIL_CURRENT:"This is your current email address",PASSWD_EMPTY2:"Enter your new password",EMAIL_EMPTY2:"Enter new email address",COUNTRY_ID_EMPTY:"Country not selected",PHONE_INCORRECT:"Incorrect number",PASSWD_EMPTY3:"Create a password",NOTICE_MSG_PASSWD_CHANGED:"Your password has been changed.",NOTICE_MSG_EMAIL_CHANGED:"A confirmation email has been sent to #EMAIL#. Follow the directions in the email to complete this change of email address.",NOTICE_MSG_EMAIL_CHANGED2:"Your email address has been changed to #EMAIL#",ICQ_EMPTY2:"Enter new ICQ number",ICQ_WRONG:"Invalid ICQ number",ICQ_EXISTS:"ICQ number already in system",ICQ_CURRENT:"This is your current ICQ number",NOTICE_MSG_ICQ_CHANGED:"A confirmation message has been sent to ICQ #ICQ#. Follow the directions in the message to complete this change of ICQ number.",NOTICE_MSG_ICQ_CHANGED2:"Your ICQ number has been changed to #ICQ#",NOTICE_MSG_FOR_ICQ_CHANGED:"To confirm your ICQ number attachment, click the link",DELETE_REASON_EMPTY:"Enter the reason",WRONG_PASSWORD:"Current password is incorrect",PASSWORD_CHANGED:"Your password has been changed.",EMAIL_CHANGED:"A confirmation has been sent to {email}. Follow the directions in the email to complete your change of address.",OLDPASS_EMPTY:"Enter your current password",OLDPASS_WRONG:"Current password is incorrect",CHECKCODE_EMPTY:"Enter symbols",CHECKCODE_INCORRECT:"Incorrect symbols",TITLE_START:"{{PAGE_partner_name}} &ndash;&nbsp;",DELIMETERS:{dot:".",space:"",comma:",",union:"and",either:"or"},SETTINGS_JS_TEXTS:{default_confirm_msg:"You have not saved your changes yet.\r\nClick OK to close this block, or click Cancel to continue editing and save your profile settings.",tpl_confirm_msg:'You have not saved your changes yet.\r\nClick OK to close this block, or click Cancel to continue editing and save "{section}".',edit_notifications:"Notifications by email",edit_privacy:"Privacy",edit_photos:"Photos and videos",edit_language:"Language",edit_system:"System settings"},ERROR_CUSTOM_ADDRESS:{url_zerostart:"Address cannot start with 0",url_too_short:"Address too short, min {{login_len_min}} characters",url_too_long:"Address too long, max {{login_len_max}} characters",url_info:"Incorrect characters",url_exist:"This address is already taken"},DELETE_PAYMENT_INFO_CONFIRM:{delete_str_title:"Delete payment information?",delete_str_del:"Delete",delete_str_or:"or",delete_str_cancel:"Cancel"},SETTINGS:{WHO_CAN_SEE_PROFILE:{TITLE:"Who can view your profile?",VALUES:{ALL:"Anyone",REGISTERED:"Only members"}},SIGNIN_SECURITY_LEVEL:{TITLE:"Sign in security level",VALUES:{HIGH:"High, email and password not saved",MEDIUM:"Medium, email saved",LOW:"Low, email and password saved"}},CAN_BE_FOUND_BY_EMAIL:{TITLE:"Let others find me by my email address",VALUES:{ON:"Yes",OFF:"No"}},WHO_CAN_COMMENT:{TITLE:"Who can comment on your photos and videos?",VALUES:{ANY:"Any members with access to album",NOBODY:"Nobody"}},WATERMARKS_ON_PHOTOS:{TITLE:"Watermarks on your photos and videos",COMMENT:"Changes may take up to 24 hours to implement.",VALUES:{ON:"On",OFF:"Off"}},INTERFACE_LANGUAGE:{TITLE:"Your language"},EMAIL:{TITLE:"Email address",UNCONFIRMED:"{{email_wait}} &ndash; waiting for confirmation"},MESSAGES_BY_EMAIL:{TITLE:"Messages",VALUES:{ON:"On",OFF:"Off"}},GIFTS_BY_EMAIL:{TITLE:"Gifts",VALUES:{ON:"On",OFF:"Off"}},ALERTS_BY_EMAIL:{TITLE:"Other notifications",VALUES:{ON:"On",OFF:"Off"}},NOTIFICATION_SOUNDS_BADOO:{TITLE:"Notification sounds",VALUES:{ON:"On",OFF:"Off"}},MEETS_BY_EMAIL:{TITLE:"Matches",VALUES:{ON:"On",OFF:"Off"}},WANT_YOU_BY_EMAIL:{TITLE:"Liked you",VALUES:{ON:"On",OFF:"Off"}},VISITORS_BY_EMAIL:{TITLE:"Visitors",VALUES:{ON:"On",OFF:"Off"}},BUMP_AND_PLACES_BY_EMAIL:{TITLE:"Bumped into & places",VALUES:{ON:"On",OFF:"Off"}},BUMP_BY_EMAIL:{TITLE:"Bumped into",VALUES:{ON:"On",OFF:"Off"}},YOUR_PLACES_BY_EMAIL:{TITLE:"Your places",VALUES:{ON:"On",OFF:"Off"}},ICQ:{TITLE:"ICQ UIN",UNCONFIRMED:"ICQ UIN {{icq_wait}} &ndash; waiting for confirmation",DEFAULT_VALUE:"Not set yet"},SHOW_MY_ONLINE_STATUS:{TITLE:"Show my online status",VALUES:{ON:"Yes",OFF:"No"}},SHOW_MY_DISTANCE:{TITLE:"Show my distance",VALUES:{ON:"Yes",OFF:"No"}},FAVORITE_BY_EMAIL:{TITLE:"Favorited you",VALUES:{ON:"On",OFF:"Off"}},FRIENDS_BY_EMAIL:{TITLE:"Friend requests",VALUES:{ON:"On",OFF:"Off"}},IN_APP_PEOPLE_ONLINE_REMINDER:{TITLE:"People online reminder",VALUES:{ON:"On",OFF:"Off"}},SHOW_ONLY_TO_PEOPLE_I_LIKE:{TITLE:"Show me only to people I like and visit",VALUES:{ON:"Yes",OFF:"No"}},PROFILE_CAN_BE_SHARED_BY_OTHERS:{TITLE:"Let others share my profile",VALUES:{ON:"Yes",OFF:"No"}},ENABLE_SECRET_COMMENTS:{TITLE:"Show secret comments in my profile",VALUES:{ON:"Yes",OFF:"No"}}},SECTIONS:{PRIVACY:{TITLE:"Privacy"},PHOTOS:{TITLE:"Photos and videos"},INTERFACE_LANGUAGE:{TITLE:"Language"},NOTIFICATIONS_BY_EMAIL:{TITLE:"Email and browser notifications"},NOTIFICATIONS_BY_ICQ:{TITLE:"Notifications by ICQ"}},SETTING_PAGES:{PROFILE:"Profile settings",NOTIFICATION:"Notification settings",CUSTOMIZATION:"Profile customization",INVISIBILITY:"Invisible mode",MOBILE:"Cell phone settings",PAYMENT:"Payment settings",LOCATION:"Location settings",DELETE:"Delete profile",PASSWORD:"Change password",EMAIL:"Change email address",CHANGE_ICQ:"Change ICQ number",SET_ICQ:"Set ICQ number",UNFREEZE:"Unhide profile",VERIFIED:"Verified status settings",NETWORK:"Your network settings",MESSAGES:"Message settings"},DELETE_ACTIVE_SUBSCRIPTION_CONFIRM:{delete_str_title:"Close this subscription?",delete_str_del:"Unsubscribe",delete_str_or:"or",delete_str_cancel:"Cancel"},DELETE_ACTIVE_TOPUP_CONFIRM:{delete_str_title:"Do you really want to turn off Auto Refill?",delete_str_del:"Yes, turn it off",delete_str_or:"or",delete_str_cancel:"Cancel"},CAPTCHA:{TITLE:"What are the symbols?"},DELETE_CLEAN_PROFILE_CONFIRM:{delete_str_title:"Clean profile",delete_str_ok:"Yes",delete_str_or:"",delete_str_cancel:"No",delete_str_message:"This will permanently delete all your messages and other content!"},HON_TITLES:{TITLE:"{{PAGE_partner_name}} &ndash; Settings",SECTION_BASIC:"Your basic info",SECTION_ACCOUNT:"Your account",SECTION_HIDE_ACCOUNT:"Unhide profile",SECTION_NOTIFICATIONS:"Notifications",SECTION_LANGUAGE:"Language",SECTION_BLOCKED:"Blocked users",SECTION_PRIVATE_PHOTOS:"Private photo access",SECTION_VERIFIED_STATUS:"Verified status settings",SECTION_PRIVACY:"Privacy",SECTION_PAYMENT:"Payment settings",SECTION_INVISIBLE:"Invisible mode",SECTION_MESSAGE:"Message settings"},HON_DESCRIPTIONS:{SECTION_INVISIBLE:"While it's fun to be a ghost sometimes, remember that with great power comes great responsibility. If people can't see you, they won't know how much fun you are to hang out and chat with.",SECTION_MESSAGE:"When a user contacts you again after you've clicked the 'I'm not interested' button, how would you like us to deal with him or her?",SECTION_VERIFIED_STATUS_MALE:"{{partner_name}} is a no fake-zone! Prove to other users that you're you by getting Verified status.",SECTION_VERIFIED_STATUS_FEMALE:"Once you've proven your identity and become Verified, you can choose to only receive messages from other Verified users.",SECTION_HIDE_ACCOUNT:"Your account is currently hidden"},HON_FIELDS:{NAME:"Name",BIRTH_DATE:"Date of birth",GENDER:"Gender",LANGUAGE:"Interface language",EMAIL:"Email",PASSWORD:"Password",NEW_PASSWORD:"New password",CONFIRM_PASSWORD:"Confirm password",CONNECTED_VIA:"Connected via",SOCIAL_ACCOUNTS:"Your social accounts",HIDE_ACCOUNT:"To meet new people and appear in People nearby and Encounters again, just click the unhide button:",NOTIFICATION_MEW_MESSAGE:"Messages",NOTIFICATION_NEW_FAN:"Liked you",NOTIFICATION_MATCHES:"Matches",NOTIFICATION_GIFTS:"Gifts",NOTIFICATION_VISITORS:"Visitors",NOTIFICATION_OTHER:"Other notifications",NOTIFICATION_FAVORITE:"Favorited you",NOTIFICATION_FRIEND_REQUEST:"Friend requests",NOTIFICATION_BUMP:"Bumped into",NOTIFICATION_BUMP_AND_PLACES:"Bumped into & places",NOTIFICATION_PLACES:"Your places",NOTIFICATION_SCORE_AWARDS:"Score and awards",NOTIFICATION_FRIEND_JOINED:"Friends joined",PRIVATE_NONE:"No one can see your private photos",NOTIFICATION_ALERTS:"Alerts",NOTIFICATION_SOUNDS:"Notification sounds",IN_APP_PEOPLE_ONLINE_REMINDER:"People online reminder",GET_INFO:"Get info from {{provider_name}}",SHOW_VERIFIED_STATUS:"Show the verification section in my profile",CONTACT_WITH_VERIFIED_STATUS:"Only Verified users can contact me",BLOCKED_USERS_MALE:{SINGULAR:"You've blocked one person",PLURAL:"You've blocked {{num}} {{people}}"},BLOCKED_USERS_FEMALE:{SINGULAR:"You've blocked one person",PLURAL:"You've blocked {{num}} {{people}}"},PRIVATE:{SINGULAR:"One person can see your private photos",PLURAL:"{{num}} {{people}} can see your private photos"},PRIVACY_PROFILE_VIEW:{TITLE:"Who can view my profile?",VALUES:{All:"Any user",Registered:"Only members"}},PRIVACY_SEARCH_BY_NAME:{TITLE:"Show in search results",VALUES:{On:"Yes",Off:"No"}},PRIVACY_SHARE_PROFILE:{TITLE:"Let others share my profile",VALUES:{Yes:"Yes",No:"No"}},PRIVACY_SHOW_DISTANCE:{TITLE:"Show distance",VALUES:{Yes:"Yes",No:"No"}},INVISIBLE_CONCEAL_MY_PRESENCE:{TITLE:"Hide my presence from other users",VALUES:{Yes:"Yes",No:"No"}},INVISIBLE_DONT_LIST_ME:{TITLE:"Don't show me as a visitor on people's profiles",VALUES:{Yes:"Yes",No:"No"}},INVISIBLE_DONT_SHOW_SPP:{TITLE:"Hide my Super Powers from other users",VALUES:{Yes:"Yes",No:"No"}},MESSAGE:{DO_NOTHING:"Let me decide on a message by message basis when this happens",DELETE:"Delete all messages from this user",BLOCK:"Block this user from being able to message me again"},PAYMENT_BALANCE:{TITLE:"Current balance",CREDITS:"You have {{amount}} {{credits}}.",BTN_REFILL:"Refill",BTN_TOPUP:"Refill"},PAYMENT_REFILL:{TITLE:"Automatic Refill",BTN_ON:"On",BTN_OFF:"Off"},PAYMENT_SPP:{TITLE:"Super Powers package",SUBSCRIBED:"You are subscribed to the Super Powers package.",SUBSCRIBED_INFO:"Your Super Powers are still active and they will next renew on {{date}}. You will be charged {{price}}.",NOT_SUBSCRIBED:"You are not subscribed",NOT_SUBSCRIBED_HAS_SPP:"You are not subscribed. Your Super Powers are still active, but they will stop on {{date}}.",NOT_SUBSCRIBED_HAS_VIP:"Your Super Powers are free with VIP membership!"},PAYMENT_METHOD:{TITLE:"Payment method",NO_METHOD:"You haven't set up a payment method yet. When you make a payment on {{partner_name}} using a method we can store (e.g. card or PayPal), you can access all of {{partner_name}}'s premium features with just one click.",HAS_METHOD:"A valid payment method gives you the possibility to use all premium features with just one click. It's good to have one."},VIP:{TITLE:"VIP membership",SUBSCRIBED:"You're a VIP member. Change subscription.",NOT_SUBSCRIBED:"You're not currently a VIP member. Get VIP membership."}},SOCIAL_SERVICES:{phone:"Phone",facebook:"Facebook",vkontakte:"VKontakte",hyves:"Hyves",google:"Google+",ok:"Odnoklassniki",yandex:"Yandex",linkedin:"LinkedIn",twitter:"Twitter",instagram:"Instagram"}}}),function(){function e(e,s){return e.section(s.get(["EDIT_ONLY_ONCE"],!1),s,{block:t},{}).write(" ").section(s.get(["UNLINK"],!1),s,{block:n},{}).write(" ").section(s.get(["UPDATE"],!1),s,{block:a},{}).write(" ").section(s.get(["UPDATE_NICE_DATA_ERROR"],!1),s,{block:d},{}).write(" ").section(s.get(["CURRENT_PASSWORD"],!1),s,{block:m},{}).write(" ").section(s.get(["DELETE_PROFILE_CURRENT_PASSWORD"],!1),s,{block:v},{}).write(" ").section(s.get(["TURN_OFF_TOPUP"],!1),s,{block:y},{}).write(" ").section(s.get(["CONFIRM_EMAIL_PASSWORD"],!1),s,{block:R},{})
}function t(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <h2>Attention</h2> <p class="x-large">You changed your birthday or gender. You will not be able to edit them again. Are you sure that your changes are correct and final?</p> </div> <div class="ovl-buttons"> <form action="').reference("form_action",t).write('" method="post" class="no_autoloader"> ').section(t.get(["_HIDDEN_FIELD"],!1),t,{block:s},{}).write(' <button type="submit" class="btn btn--sm btn--blue"> <span class="btn-txt"> ').section(t.get(["MALE"],!1),t,{block:i},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:o},{}).write(' </span> </button> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </form> </div> </div> ')}function s(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function i(e){return e.write("I'm sure")}function o(e){return e.write("I'm sure")}function n(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Do you want to unlink your ').reference("provider_name",t).write(' account?</p> </div> <div class="ovl-buttons"> <form action="').reference("form_action",t).write('" method="post" class="no_autoloader"> ').section(t.get(["_HIDDEN_FIELD"],!1),t,{block:r},{}).write(' <button type="submit" class="btn btn--sm btn--blue"> <span class="btn-txt">Unlink</span> </button> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </form> </div> </div> ')}function r(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function a(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large"> ').section(t.get(["EDIT_FULL"],!1),t,{block:l},{}).write(" ").section(t.get(["EDIT_NAME"],!1),t,{block:_},{}).write(" ").section(t.get(["EDIT_NAME_AND_BIRTHDAY"],!1),t,{block:c},{}).write(" ").section(t.get(["EDIT_NAME_AND_GENDER"],!1),t,{block:u},{}).write(' </p> </div> <div class="ovl-buttons"> <form action="').reference("form_action",t).write('" method="post" class="no_autoloader"> ').section(t.get(["_HIDDEN_FIELD"],!1),t,{block:p},{}).write(' <div class="btn btn--sm btn--blue"> <span class="btn-txt">Update</span> <a href="').reference("url",t).write('" class="b-link js-settings-update" data-unlink-winwidth="').reference("width",t).write('" data-unlink-winheight="').reference("height",t).write('"></a> <div class="loader loader--white"><div class="loader_"></div></div> </div> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </form> </div> </div> ')}function l(e,t){return e.write("Do you want to update your name, birthday and gender from ").reference("provider_name",t).write("?")}function _(e,t){return e.write("Do you want to update your name from ").reference("provider_name",t).write("?")}function c(e,t){return e.write("Do you want to update your name and birthday from ").reference("provider_name",t).write("?")}function u(e,t){return e.write("Do you want to update your name and gender from ").reference("provider_name",t).write("?")}function p(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function d(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <h2>Sorry, can\'t update info using this account.</h2> <p class="x-large"> ').section(t.get(["NAME_SHORT"],!1),t,{block:h},{}).write(" ").section(t.get(["NAME_INCORRECT"],!1),t,{block:b},{}).write(' <br>Please edit your name using service\'s account settings. Then try again.\n</p> </div> <div class="ovl-buttons"> <div class="btn btn--white"> <span class="btn-txt">Continue</span> <a href="').reference("url",t).write('" class="b-link" rel="profile-view"></a> </div> </div> </div> ')}function h(e){return e.write("Your name is too short or contains inappropriate symbols.")}function b(e){return e.write("Invalid name.")}function m(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <form action="').reference("form_action",t).write('" method="post" id="password_form" class="no_autoloader js-password-form"> <div class="ovl-content"> <p class="x-large">Please type in your current password to save changes:</p> ').section(t.get(["_HIDDEN_FIELD"],!1),t,{block:E},{}).write(' <div class="form__row"> <div class="b left form-label"> <label class="inline" for="password">Current password</label><span class="middle"></span> </div> <div class="form-field js-error-wrap ').section(t.get(["_HAS_ERROR"],!1),t,{block:f},{}).write('"> <input type="password" name="current_password" id="password" class="input input--sm js-password-input" value="').reference("password",t).write('" autofocus> <span class="icon ico--grey ico--question tooltip-wrap js-ovl-open" data-ovl-type="').reference("forget_type",t).write('" data-control-type="tooltip"> <span class="tooltip bl"><span class="tooltip-txt">Forgot your password?</span></span> </span> <div class="input-error js-input-error">').reference("error",t).write("</div> </div> </div> ").section(t.get(["CAPTCHA"],!1),t,{block:g},{}).write(' </div> <div class="ovl-buttons"> <button type="submit" class="btn btn--sm btn--blue"> <span class="btn-txt">Save</span> </button> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </div> </form> </div> ')}function E(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function f(e){return e.write("error")}function g(e,t){return e.write(' <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(" </div> ")}function v(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <form method="post" id="password_form" class="form" data-ovl-url="').reference("continue_url",t).write('" data-ovl-type="hon-v3-delete-profile-done"> <div class="ovl-content"> <p class="xx-large">Please type your current password to delete account:</p> ').section(t.get(["_HIDDEN_FIELD"],!1),t,{block:T},{}).write(' <div class="form__row"> <div class="b form-label"> <label class="inline" for="password">Current password</label><span class="middle"></span> </div> <div class="form-field js-error-wrap').section(t.get(["_ERROR"],!1),t,{block:O},{}).write('"> <input type="password" name="current_password" id="password" class="input input--sm" value="').reference("password",t).write('"> <i class="icon ico--grey ico--question tooltip-wrap js-ovl-open" data-control-type="tooltip" data-ovl-type="').reference("forget_type",t).write('" data-ovl-url="').reference("forget_url",t).write('"><span class="tooltip tl"><span class="tooltip-txt">Forgot your password?</span></span></i> <div class="input-error js-input-error">').reference("error",t).write('</div> </div> </div> <div class="form__row"> ').reference("HTMLBLOCK_CAPTCHA",t,["s"]).write(' </div> </div> <div class="ovl-buttons"> <button type="submit" class="btn btn--sm btn--blue"><span class="btn-txt">Delete account</span></button> <div class="btn btn--sm btn--white"><span class="btn-txt">Cancel</span><span class="b-link js-ovl-close"></span></div> </div> </form> </div> ')}function T(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function O(e){return e.write(" error")}function y(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">Are you sure you want to turn off Auto Refill?</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Turn off</span> <a data-href="').reference("url",t).write('" class="b-link js-turn-off-confirmation"></a> </div> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div> ')}function R(e,t){return e.write(' <div class="ovl-body ovl-body--narrow"> <div class="ovl-content"> <p class="x-large">').reference("text",t).write('</p> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--blue"> <span class="btn-txt">Continue</span> <span class="b-link js-ovl-close"></span> </div> </div> </div> ')}return $u.dust.register("settings/popup.confirm",e),e.s={EDIT_ONLY_ONCE:t,UNLINK:n,UPDATE:a,UPDATE_NICE_DATA_ERROR:d,CURRENT_PASSWORD:m,DELETE_PROFILE_CURRENT_PASSWORD:v,TURN_OFF_TOPUP:y,CONFIRM_EMAIL_PASSWORD:R},t.s={_HIDDEN_FIELD:s,MALE:i,FEMALE:o},n.s={_HIDDEN_FIELD:r},a.s={EDIT_FULL:l,EDIT_NAME:_,EDIT_NAME_AND_BIRTHDAY:c,EDIT_NAME_AND_GENDER:u,_HIDDEN_FIELD:p},d.s={NAME_SHORT:h,NAME_INCORRECT:b},m.s={_HIDDEN_FIELD:E,_HAS_ERROR:f,CAPTCHA:g},v.s={_HIDDEN_FIELD:T,_ERROR:O},e}(),B.HoN_v3.SettingsConfirmEmailPassword.BaseView=$class(B.DustView,{template:"settings/popup.confirm",block:"CONFIRM_EMAIL_PASSWORD"}),B.HoN_v3.SettingsConfirmEmailPassword.EmailView=$class(B.HoN_v3.SettingsConfirmEmailPassword.BaseView,{setEmail:function(e){return this.set("text",$u.tpl($l.get("settings","EMAIL_CHANGED"),{email:e}))}}),B.HoN_v3.SettingsConfirmEmailPassword.PasswordView=$class(B.HoN_v3.SettingsConfirmEmailPassword.BaseView,{constructor:function(){$super(this,arguments),this.set("text",$l.get("settings","PASSWORD_CHANGED"))}}),B.HoN_v3.SettingsConfirmEmailPassword.Controller=$class(B.HoN_v3.BaseAsyncController,{setOvlData:function(e){this.type=e.field},request:function(){B.HoN_v3.Models.Cache.CurrentUserCache.fetch(this.onUser,this)},onUser:function(e){this.email=e.getUser().getEmail(),this.viewReady()},getView:function(){switch(this.type){case"email":return(new B.HoN_v3.SettingsConfirmEmailPassword.EmailView).setEmail(this.email);case"password":return new B.HoN_v3.SettingsConfirmEmailPassword.PasswordView}}})),B.HoN_v3.Overlays.SettingsConfirmEmailPassword=new $class(B.Ovl.Base,{type:"hon-v3-confirm-email-password",controllerType:B.HoN_v3.SettingsConfirmEmailPassword.Controller}),B.HoN_v3.SettingsAccountConfirm||(B.HoN_v3.SettingsAccountConfirm={},B.HoN_v3.SettingsAccountConfirm.View=$class(B.DustView,{template:"settings/popup.confirm",block:"CURRENT_PASSWORD",constructor:function(){$super(this,arguments),this.set("forget_type","hon-v3-reset-password")},setCaptcha:function(e){return this.set("CAPTCHA/HTMLBLOCK_CAPTCHA",e)},setPassword:function(e){return this.set("password",e)},setError:function(e){return this.set({error:e,_HAS_ERROR:!!e})}}),B.HoN_v3.SettingsAccountConfirm.Model=$class($u.Observable,{constructor:function(e,t,s){$super(this,arguments),this.type=e,this.password=t,this.fieldValue=s},destroy:function(){this.type=null,this.request&&(this.request.destroy(),this.request=null)},fetch:function(){var e,t,s;switch(this.type){case"email":e=$p.MessageType.SERVER_CHANGE_EMAIL,s=$p.MessageType.CLIENT_EMAIL_CHANGED,t=(new $p.ServerChangeEmail).setCurrentPassword(this.password).setUpdatedEmail(this.fieldValue);break;case"password":e=$p.MessageType.SERVER_CHANGE_PASSWORD,s=$p.MessageType.CLIENT_CHANGE_PASSWORD,t=(new $p.ServerChangePassword).setCurrentPassword(this.password).setUpdatedPassword(this.fieldValue)}this.request=new $gpb.Rpc(e,t).on(s,this.ready,this).request()},ready:function(e,t){this.fire("ready",e,t)}}),B.HoN_v3.SettingsAccountConfirm.ViewController=$class(B.HoN_v3.BaseViewController,{constructor:function(){$super(this,arguments),this.form=new $u.Form(this.getElement(".js-password-form"),{on_submit:this.submit},this),$e.add(this.getElement(".js-password-input"),"input",this.input,this)},destroy:function(){$e.del(this.getElement(".js-password-input"),"input",this.input,this),$super(this,arguments)},input:function(e){this.fire("input",e.value)},submit:function(e){this.fire("submit",e.current_password.value,e.checkcode.value)}}),B.HoN_v3.SettingsAccountConfirm.Controller=$class(B.HoN_v3.BaseAsyncController,{captchaController:null,error:null,model:null,CAPTCHA_CONTEXT_MAP:{password:"CHANGE_PASSWORD",email:"CHANGE_EMAIL"},setOvlData:function(e){this.type=e.field,this.captchaContext=this.CAPTCHA_CONTEXT_MAP[this.type],this.fieldValue=e.fieldValue},destroy:function(){this.captchaController&&(this.captchaController.destroy(),this.captchaController=null),this.viewController&&(this.viewController.destroy(),this.viewController=null),this.model&&(this.model.destroy(),this.model=null),this.error=null,$super(this,arguments)},init:function(){this.captchaController=new B.HoN_v3.Captcha.Controller(this.captchaContext).on({"on-update":this.captchaReady,"on-success":this.captchaSuccess},this)},updateCaptcha:function(){this.captchaController.request()},createViewController:function(e){this.viewController=new B.HoN_v3.SettingsAccountConfirm.ViewController(e).on({submit:this.submit,input:this.input},this)},input:function(e){this.passwordInputValue=e},submit:function(e,t){this.captchaController.checkCaptcha(t),this.password=e,this.error=null},captchaReady:function(){this.viewReady()},captchaSuccess:function(){this.model&&this.model.destroy(),this.model=new B.HoN_v3.SettingsAccountConfirm.Model(this.type,this.password,this.fieldValue),this.model.on("ready",this.onModelReady,this),this.model.fetch()},onModelReady:function(e,t){switch(this.type){case"email":this.emailChangeRequest(e);break;case"password":this.passwordChangeRequest(e,t)}},emailChangeRequest:function(e){if(e){var t=e.getType();switch(t){case $p.ServerErrorType.SERVER_ERROR_TYPE_ILLEGAL_ARGUMENT:B.fire("settings:invalid-email"),B.Ovl.close();break;case $p.ServerErrorType.SERVER_ERROR_TYPE_INCORRECT_PASSWORD:this.error="Invalid password",this.updateCaptcha();break;default:this.fire("error")}}else this.success()},passwordChangeRequest:function(e,t){return e?(this.fire("error"),void 0):t?(this.error=$l.get("settings","WRONG_PASSWORD"),this.updateCaptcha(),void 0):(this.success(),void 0)},success:function(){B.fire("settings:saved-password-email",this.type),B.Ovl.open({type:"hon-v3-confirm-email-password",field:this.type})},getView:function(){return(new B.HoN_v3.SettingsAccountConfirm.View).setCaptcha(this.captchaController.getView()).setError(this.error).setPassword(this.passwordInputValue)},renderComplete:function(e){this.createViewController(e),this.captchaController.renderComplete(e)}})),B.Ovl.HoN_v3_settings_confirm=new $class(B.Ovl.Base,{type:"hon-v3-settings-captcha",controllerType:B.HoN_v3.SettingsAccountConfirm.Controller});