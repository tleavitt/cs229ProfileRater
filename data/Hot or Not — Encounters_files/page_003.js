B.HoN_v3.ModeratedPhotos||(B.HoN_v3.ModeratedPhotos={},$gpb.exists("badoo.bma.ClientModeratedPhotos","message")||($gpb.exists("badoo.bma.Album","message")||($gpb.exists("badoo.bma.RatedPhoto","message")||($gpb.exists("badoo.bma.PhotoRating","message")||($gpb.exists("badoo.bma.PhotoRateType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoRateType=new $gpb.Enum("badoo.bma.PhotoRateType");t._values=[0,1,2,3,4,5,6,11,12,13,14,15,21,22,23,24,25],t.UNKNOWN_PHOTO_RATE_TYPE=0,t.PHOTO_RATE_TYPE_EXCELLENT=1,t.PHOTO_RATE_TYPE_GOOD=2,t.PHOTO_RATE_TYPE_OK=3,t.PHOTO_RATE_TYPE_BAD=4,t.PHOTO_RATE_TYPE_BLOCKED=5,t.PHOTO_RATE_TYPE_CALCULATING=6,t.PHOTO_RATE_TYPE_STAR_ONE=11,t.PHOTO_RATE_TYPE_STAR_TWO=12,t.PHOTO_RATE_TYPE_STAR_THREE=13,t.PHOTO_RATE_TYPE_STAR_FOUR=14,t.PHOTO_RATE_TYPE_STAR_FIVE=15,t.PHOTO_RATE_TYPE_STAR_UNKNOWN=21,t.PHOTO_RATE_TYPE_STAR_PENDING=22,t.PHOTO_RATE_TYPE_STAR_OTHER=23,t.PHOTO_RATE_TYPE_STAR_PRIVATE=24,t.PHOTO_RATE_TYPE_STAR_NOT_PERSONAL=25}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoRating=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoRating",t.prototype._descriptor={fields:{display_rating:{type:9,number:2,label:1},rating:{type:5,number:1,label:1},rate_type:{type_name:"badoo.bma.PhotoRateType",number:4,label:1,type:14,options:{"default":"UNKNOWN_PHOTO_RATE_TYPE"}},rate_action_message:{type:9,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.RatedPhoto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RatedPhoto",t.prototype._descriptor={fields:{rating:{type:11,type_name:"badoo.bma.PhotoRating",number:3,label:1},small_photo_id:{type:9,number:1,label:1},blocked:{type:8,number:2,label:1}}}}()),$gpb.exists("badoo.bma.PhotoSize","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoSize=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoSize",t.prototype._descriptor={fields:{width:{type:5,number:1,label:1},height:{type:5,number:2,label:1}}}}(),$gpb.exists("badoo.bma.AlbumType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AlbumType=new $gpb.Enum("badoo.bma.AlbumType");t._values=[1,2,3,4,5,6,7,8],t.ALBUM_TYPE_WITH_ID=1,t.ALBUM_TYPE_PHOTOS_OF_ME=2,t.ALBUM_TYPE_OTHER_PHOTOS=3,t.ALBUM_TYPE_PRIVATE_PHOTOS=4,t.ALBUM_TYPE_SPOTLIGHT_PHOTOS=5,t.ALBUM_TYPE_MY_RATING=6,t.ALBUM_TYPE_ENCOUNTERS=7,t.ALBUM_TYPE_CHAT_RECENT=8}(),$gpb.exists("badoo.bma.Photo","message")||($gpb.exists("badoo.bma.Point","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Point=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Point",t.prototype._descriptor={fields:{y:{type:5,number:2,label:1},x:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.EmbeddedVideo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.EmbeddedVideo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.EmbeddedVideo",t.prototype._descriptor={fields:{url:{type:9,number:1,label:1},is_pending_moderation:{type:8,number:3,label:1},is_processing:{type:8,number:2,label:1}}}}(),$gpb.exists("badoo.bma.ExternalProviderType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderType=new $gpb.Enum("badoo.bma.ExternalProviderType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],t.UNKNOWN_EXTERNAL_PROVIDER_TYPE=0,t.EXTERNAL_PROVIDER_TYPE_FACEBOOK=1,t.EXTERNAL_PROVIDER_TYPE_VKONTAKTE=2,t.EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI=3,t.EXTERNAL_PROVIDER_TYPE_GOOGLE_PLUS=4,t.EXTERNAL_PROVIDER_TYPE_MYSPACE=5,t.EXTERNAL_PROVIDER_TYPE_HYVES=6,t.EXTERNAL_PROVIDER_TYPE_PHOTOBUCKET=7,t.EXTERNAL_PROVIDER_TYPE_YAHOO=8,t.EXTERNAL_PROVIDER_TYPE_GOOGLE=9,t.EXTERNAL_PROVIDER_TYPE_AOL=10,t.EXTERNAL_PROVIDER_TYPE_MSN=11,t.EXTERNAL_PROVIDER_TYPE_INSTAGRAM=12,t.EXTERNAL_PROVIDER_TYPE_YANDEX=13,t.EXTERNAL_PROVIDER_TYPE_LINKEDIN=14,t.EXTERNAL_PROVIDER_TYPE_TWITTER=15,t.EXTERNAL_PROVIDER_TYPE_PAYPAL=16,t.EXTERNAL_PROVIDER_TYPE_PHONEBOOK=17,t.EXTERNAL_PROVIDER_TYPE_EMAIL=18,t.EXTERNAL_PROVIDER_TYPE_HOT_OR_NOT=19,t.EXTERNAL_PROVIDER_TYPE_BADOO=20,t.EXTERNAL_PROVIDER_TYPE_FOURSQUARE=21,t.EXTERNAL_PROVIDER_TYPE_PINTEREST=22,t.EXTERNAL_PROVIDER_TYPE_YOUTUBE=23,t.EXTERNAL_PROVIDER_TYPE_HUGGLE=24,t.EXTERNAL_PROVIDER_TYPE_SWARM=25,t.EXTERNAL_PROVIDER_TYPE_CLIPBOARD=26}(),$gpb.exists("badoo.bma.FeatureType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FeatureType=new $gpb.Enum("badoo.bma.FeatureType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,68,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,10001,10002,10003,10004,10005,10006,10007,10008],t.UNKNOWN_FEATURE_TYPE=0,t.ALLOW_VIEW_PHOTOS=1,t.ALLOW_OPEN_CHAT=2,t.ALLOW_VIEW_MESSAGE_DETAILS=3,t.ALLOW_VIEW_PERSONAL_INFO=4,t.ALLOW_ADD_FAVOURITE=5,t.ALLOW_OPEN_MESSAGES=6,t.ALLOW_OPEN_FRIENDS=7,t.ALLOW_OPEN_FAVOURITES=8,t.ALLOW_OPEN_VISITORS=9,t.ALLOW_OPEN_PEOPLE_NEARBY=10,t.ALLOW_OPEN_ENCOUNTERS=11,t.ALLOW_OPEN_YOU_WANT=12,t.ALLOW_OPEN_WANT_YOU=13,t.ALLOW_OPEN_MUTUALS=14,t.ALLOW_ENCOUNTERS_VOTE=15,t.ALLOW_EDIT_PROFILE=16,t.ALLOW_BLOCK_USER=17,t.ALLOW_SEND_CHAT=18,t.ALLOW_SUPER_POWERS=19,t.ALLOW_LOAD_PEOPLE_NEARBY=20,t.ALLOW_LOAD_WANT_YOU=21,t.ALLOW_VIEW_CHAT_DELIVERY=22,t.ALLOW_OPEN_BLOCKED=23,t.ALLOW_INVITE_EMAIL=24,t.ALLOW_INVITE_PHONE=25,t.ALLOW_REGISTER_GENDER_PREF=26,t.ALLOW_SUPER_POWERS_RENEW=27,t.ALLOW_RISEUP=28,t.ALLOW_EDIT_LOCATION=29,t.ALLOW_CHAT_SPECIAL_DELIVERY=30,t.ALLOW_ENCOUNTERS_PROFILE=31,t.ALLOW_PRIORITY_SHOWS=32,t.ALLOW_REPORT_ABUSE=33,t.ALLOW_LOAD_SPOTLIGHT=34,t.ALLOW_ADD_TO_SPOTLIGHT=35,t.ALLOW_SHOW_CREDITS=36,t.ALLOW_MANAGE_PAYMENTS=37,t.ALLOW_TOPUP=38,t.ALLOW_INTERESTS=39,t.ALLOW_AMOBEE=40,t.ALLOW_FIKSU=41,t.ALLOW_OPEN_MATCHES=42,t.ALLOW_ADD_WANT_YOU=43,t.ALLOW_ADD_MUTUAL=44,t.ALLOW_ADD_YOU_WANT=45,t.ALLOW_OPEN_WANT_YOU_PROFILE=46,t.ALLOW_LOAD_YOU_WANT=47,t.ALLOW_BBM_INVITES=48,t.ALLOW_LOAD_FANS=49,t.ALLOW_LOAD_FAVORITES=50,t.ALLOW_LOAD_FRIENDS=51,t.ALLOW_ADD_FANS=52,t.ALLOW_ADD_FAVORITES=53,t.ALLOW_ADD_FRIENDS=54,t.ALLOW_ADD_VISITORS_TODAY=55,t.ALLOW_LOAD_VISITORS_MONTH=56,t.ALLOW_SPP_ONLY_CHAT=57,t.ALLOW_VERIFY=58,t.ALLOW_VIEW_FAVOURITES=59,t.ALLOW_SEND_GIFTS=60,t.ALLOW_PHOTO_RATING=61,t.ALLOW_ONLINE_STATUS_ACTION=62,t.ALLOW_RATE_IN_PHOTO_RATING=63,t.ALLOW_SOCIAL=64,t.ALLOW_LOAD_SOCIAL_NETWORK=65,t.ALLOW_AUTO_TOPUP=68,t.ALLOW_MULTIMEDIA=70,t.ALLOW_CREDITS_REWARDS=72,t.ALLOW_LOCATION_SHARING=73,t.ALLOW_AWARDS=74,t.ALLOW_PROFILE_RATING=75,t.ALLOW_VIRAL_FLOW=76,t.ALLOW_PROFILE_SEARCH=77,t.ALLOW_OPEN_FACEBOOK_INVITES=78,t.ALLOW_OPEN_LOCAL_HOT=79,t.ALLOW_ADD_TO_LOCAL_HOT=80,t.ALLOW_PROMOTED_VIDEOS=81,t.ALLOW_LOAD_VISITORS_WEEK=82,t.ALLOW_ADD_PEOPLE_NEARBY=83,t.ALLOW_FRIENDS_OF_FRIENDS=84,t.ALLOW_OPEN_SOCIAL_FRIEND_CONNECTION=85,t.ALLOW_LOAD_LOCAL_HOT=86,t.ALLOW_OPEN_UNIVERSITY_HOT_LIST=87,t.ALLOW_LOAD_UNIVERSITY_HOT_LIST=88,t.ALLOW_OPEN_FRIENDS_HOT_LIST=89,t.ALLOW_LOAD_FRIENDS_HOT_LIST=90,t.ALLOW_JUMP_THE_QUEUE_INVITES=91,t.ALLOW_BUMPED_INTO=92,t.ALLOW_EXTEND_MATCH=93,t.ALLOW_INVITE_PHONEBOOK=94,t.ALLOW_SHARED_FRIENDS=95,t.ALLOW_PROFILE_SHARING=96,t.ALLOW_HOTTEST_FRIENDS=97,t.ALLOW_RUSH_HOUR=98,t.ALLOW_SECRET_COMMENTS=99,t.ALLOW_REWIND=100,t.ALLOW_LOAD_FAVOURITED_YOU=101,t.ALLOW_COMMON_PLACES=102,t.ALLOW_POPULARITY=103,t.ALLOW_OPEN_MOBILE_APP_PROMO=104,t.ALLOW_SUPER_POWERS_TRIAL=105,t.ALLOW_UPLOAD_VIDEO=106,t.ALLOW_VIEW_FACEBOOK_PHOTOS=107,t.ALLOW_CONTACTS_FOR_CREDITS=108,t.ALLOW_PRIVATE_PHOTOS=109,t.ALLOW_SMILE=110,t.ALLOW_STICKERS=111,t.ALLOW_UNLOCK_STICKER_PACK=112,t.ALLOW_GIFTS=113,t.ALLOW_LOAD_POPULARITY=114,t.ALLOW_OPEN_COMMON_PLACE=115,t.ALLOW_ADD_TO_SPOTLIGHT_FOR_FREE=116,t.ALLOW_SEARCH_LOCATION_CHANGE=117,t.ALLOW_PAID_VIP=118,t.ALLOW_PAID_VIP_RENEW=119,t.ALLOW_PHOTO_OF_THE_DAY=120,t.ALLOW_EXTENDED_SEARCH=121,t.ALLOW_BUMBLE_VIBEE=122,t.ALLOW_ADD_TO_SPOTLIGHT_FOR_SHARING=123,t.ALLOW_QUICK_CHECKIN_TOOL=124,t.ALLOW_UNITED_FRIENDS=125,t.ALLOW_EXPERIMENTAL_POPULARITY=10001,t.ALLOW_EXPERIMENTAL_PAYMENTS=10002,t.ALLOW_EXPERIMENTAL_RUSH_HOUR=10003,t.ALLOW_EXPERIMENTAL_GIFTS=10004,t.ALLOW_EXPERIMENTAL_STICKERS=10005,t.ALLOW_EXPERIMENTAL_CRUSH_ON_FRIENDS=10006,t.ALLOW_EXPERIMENTAL_VIEW_PHOTOS_IN_PROFILES=10007,t.ALLOW_EXPERIMENTAL_VIEW_MY_CHANCES=10008}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Photo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Photo",t.prototype._descriptor={fields:{rating:{type:11,type_name:"badoo.bma.PhotoRating",number:7,label:1},large_url:{type:9,number:3,label:1},is_pending_moderation:{type:8,number:17,label:1},is_new:{type:8,number:20,label:1},can_set_as_profile_photo:{type:8,number:8,label:1},is_liked:{type:8,number:13,label:1},is_photo_of_me:{type:8,number:9,label:1},square_face_url:{type:9,number:12,label:1},preview_url:{type:9,number:2,label:1},large_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:4,label:1},face_bottom_right:{type:11,type_name:"badoo.bma.Point",number:6,label:1},video:{type:11,type_name:"badoo.bma.EmbeddedVideo",number:14,label:1},moderation_message:{type:9,number:19,label:1},is_removed_by_moderation:{type:8,number:18,label:1},external_provider_source:{type:14,type_name:"badoo.bma.ExternalProviderType",number:15,label:1},face_top_left:{type:11,type_name:"badoo.bma.Point",number:5,label:1},id:{type:9,number:1,label:1},restriction_feature:{type:14,type_name:"badoo.bma.FeatureType",number:16,label:1},is_profile_photo:{type:8,number:10,label:1}}}}()),$gpb.exists("badoo.bma.AlbumAccessLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AlbumAccessLevel=new $gpb.Enum("badoo.bma.AlbumAccessLevel");t._values=[1,2,3,4,5],t.MUST_CHAT_FIRST=1,t.CAN_REQUEST=2,t.ALREADY_REQUESTED=3,t.ACCESS_GRANTED=4,t.MUST_GO_NATIVE=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Album=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Album",t.prototype._descriptor={fields:{allow_edit:{type:8,number:12,label:1},requires_moderation:{type:8,number:11,label:1},preview_image_id:{type:9,number:5,label:1},uid:{type:9,number:1,label:2},date_modified:{type:3,number:2,label:1},accessable:{type:8,number:9,label:2},is_upload_forbidden:{type:8,number:15,label:1},photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:17,label:3},instruction:{type:9,number:14,label:1},album_type:{type:14,type_name:"badoo.bma.AlbumType",number:19,label:1},access_type:{type:5,number:8,label:1},preview_photo_ids:{type:9,number:6,label:3},photo_rating:{type:11,type_name:"badoo.bma.RatedPhoto",number:16,label:3},photos:{type:11,type_name:"badoo.bma.Photo",number:18,label:3},owner_id:{type:9,number:4,label:2},adult:{type:8,number:10,label:2},count_of_photos:{type:5,number:13,label:1},large_photo_ids:{type:9,number:7,label:3},caption:{type:9,number:21,label:1},access_level:{type:14,type_name:"badoo.bma.AlbumAccessLevel",number:20,label:1},name:{type:9,number:3,label:2}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientModeratedPhotos=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientModeratedPhotos",t.prototype._descriptor={fields:{albums:{type:11,type_name:"badoo.bma.Album",number:1,label:3}}}}()),B.HoN_v3.ModeratedPhotos.Model=$class($u.Observable,{moderatedPhotosRequest:null,photos:null,destroy:function(){this.abortModeratedPhotosRequest(),this.photos=null,$super(this,arguments)},fetch:function(e){this.getModeratedPhotos(e)},getModeratedPhotos:function(e){this.moderatedPhotosRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_MODERATED_PHOTOS).on($p.MessageType.CLIENT_MODERATED_PHOTOS,this.onModeratedPhotos,this).setJinbaRequest(e).request()},abortModeratedPhotosRequest:function(){this.moderatedPhotosRequest&&(this.moderatedPhotosRequest.destroy(),this.moderatedPhotosRequest=null)},onModeratedPhotos:function(e,t){if(!e){var o=t.getAlbums();o?(this.sendAcknowledge(),this.photos=Array.prototype.concat.apply([],o.filter(function(e){return!!e.getPhotos()}).map(function(e){return e.getPhotos()})),this.fire("ready")):this.fire("no-photos")}},sendAcknowledge:function(){new $gpb.Rpc($p.MessageType.SERVER_ACKNOWLEDGE_MODERATED_PHOTOS).request()},getPhotos:function(){return this.photos},hasVideo:function(){return this.photos.some(function(e){return!!e.getVideo()})},allowUploadVideo:function(){var e=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO);return e.getEnabled()}}),function(){function e(e,o){return e.section(o.get(["TITLE"],!1),o,{block:t},{}).write(' <section class="section-empty"> <div class="moderated-photos-block"> <h1> ').section(o.get(["TITLE_PLURAL"],!1),o,{block:s},{}).write(" ").section(o.get(["TITLE_SINGLE"],!1),o,{block:i},{}).write(" ").section(o.get(["TITLE_VIDEO"],!1),o,{block:r},{}).write(" ").section(o.get(["TITLE_MIXED"],!1),o,{block:E},{}).write(' </h1> <p class="x-large"> ').section(o.get(["MESSAGE_PLURAL"],!1),o,{block:O},{}).write(" ").section(o.get(["MESSAGE_SINGLE"],!1),o,{block:L},{}).write(" ").section(o.get(["MESSAGE_VIDEO"],!1),o,{block:l},{}).write(" ").section(o.get(["MESSAGE_MIXED"],!1),o,{block:A},{}).write(' </p> <div class="moderated-photos js-moderated-photos"> ').section(o.get(["_PHOTOS"],!1),o,{block:T},{}).write(' </div> <div class="photo-rules"> <div class="ol"> <ol class="x-large"> ').section(o.get(["PHOTO_RULES"],!1),o,{block:P},{}).write(" ").section(o.get(["MIXED_RULES"],!1),o,{block:R},{}).write(' </ol> </div> </div> <div class="buttons"> <div class="btn btn--blue"> <span class="btn-txt">Add another</span> <a class="b-link app" href="').reference("add_url",o).write('" rel="').reference("add_state",o).write('"></a> </div> <div class="btn btn--white"> <span class="btn-txt">Continue</span> <a class="b-link app" href="').reference("continue_url",o).write('" rel="').reference("continue_state",o).write('"></a> </div> </div> </div> </section> ').section(o.get(["_PHOTO_TPL"],!1),o,{block:m},{})}function t(e,t){return e.write(" ").section(t.get(["SINGLE"],!1),t,{block:o},{}).write(" ").section(t.get(["PLURAL"],!1),t,{block:_},{}).write(" ").section(t.get(["VIDEO"],!1),t,{block:n},{}).write(" ").section(t.get(["MIXED"],!1),t,{block:a},{}).write(" ")}function o(e){return e.write("Your photo has been moderated")}function _(e){return e.write("Your photos have been moderated")}function n(e){return e.write("Your video has been moderated")}function a(e){return e.write("Your photos and videos have been moderated")}function s(e){return e.write("Your photos have been moderated")}function i(e){return e.write("Your photo has been moderated")}function r(e){return e.write("Your video has been moderated")}function E(e){return e.write("Your photos and videos have been moderated")}function O(e,t){return e.write("Unfortunately, your photos are not in line with ").reference("PAGE_partner_name",t).write(" guidelines:")}function L(e,t){return e.write("Unfortunately, your photo is not in line with ").reference("PAGE_partner_name",t).write(" guidelines:")}function l(e,t){return e.write("Unfortunately, your video is not in line with ").reference("PAGE_partner_name",t).write(" guidelines:")}function A(e,t){return e.write("Unfortunately, your photos and videos are not in line with ").reference("PAGE_partner_name",t).write(" guidelines:")}function T(e,t){return e.write(" ").section(t.get(["_PHOTO"],!1),t,{block:d},{}).write(" ").section(t.get(["_SEPARATOR1"],!1),t,{block:b},{}).write(" ").section(t.get(["_SEPARATOR2"],!1),t,{block:p},{}).write(" ").section(t.get(["_MORE"],!1),t,{block:u},{}).write(" ")}function d(e,t){return e.write('<div class="moderated-photo"> <div class="moderated-photo__img-wrap"> <img src="').reference("url",t).write('" class="moderated-photo__img" alt=""> <div class="moderated-photo__mask" style="width: ').reference("width",t).write('px;"></div> </div> <mark class="brick brick--xsm brick--yellow brick--stroke moderated-photo__badge"> <i class="ico ico--attention"></i> </mark> </div>')}function b(e){return e.write('<div class="moderated-nowrap">')}function p(e){return e.write("</div>")}function u(e){return e.write('<div class="btn btn--white moderated-more js-moderated-more"> <i class="ico ico--lg ico--gray ico--etc-lg"> <span class="b-link js-moderated-photo-expand"></span> </i> </div>')}function P(e){return e.write(" <li>Photos must feature only you or you with friends. They should also identify you easily and show your face clearly.</li> <li>Photos without you in them, showing children, and erotic or inappropriate videos are not allowed.</li> ")}function R(e){return e.write(" <li>Photos and videos must feature only you or you with friends. They should also identify you easily and show your face clearly.</li> <li>Photos and videos without you in them, showing children, and erotic or inappropriate videos are not allowed.</li> ")}function m(e,t){return e.write('<div class="moderated-photo"> <div class="moderated-photo__img-wrap"> <img src="').reference("url",t).write('" class="moderated-photo__img" alt=""> <i class="moderated-photo__mask" style="width: ').reference("width",t).write('px;"></i> </div> <mark class="brick brick--xsm brick--yellow moderated-photo__badge"> <i class="ico ico--attention"></i> </mark> </div>')}return $u.dust.register("photos/block.moderated",e),e.s={TITLE:t,TITLE_PLURAL:s,TITLE_SINGLE:i,TITLE_VIDEO:r,TITLE_MIXED:E,MESSAGE_PLURAL:O,MESSAGE_SINGLE:L,MESSAGE_VIDEO:l,MESSAGE_MIXED:A,_PHOTOS:T,PHOTO_RULES:P,MIXED_RULES:R,_PHOTO_TPL:m},t.s={SINGLE:o,PLURAL:_,VIDEO:n,MIXED:a},T.s={_PHOTO:d,_SEPARATOR1:b,_SEPARATOR2:p,_MORE:u},e}(),B.HoN_v3.ModeratedPhotos.BaseView||(B.HoN_v3.ModeratedPhotos.BaseView=$class(B.DustView,{template:"photos/block.moderated",PHOTO_WIDTH:120,getPhoto:function(e){return{url:e.getPreviewUrl(),width:this.PHOTO_WIDTH}}})),B.HoN_v3.ModeratedPhotos.MainView=$class(B.HoN_v3.ModeratedPhotos.BaseView,{ADD_ANOTHER_BUTTON_URL_TPL:"/profile/0{user_id}?unfolded_upload=1",ADD_ANOTHER_BUTTON_STATE:"profile-edit",setTitle:function(e,t){return this.set("TITLE"+this.getBlockSuffix(e,t),!0)},setMessage:function(e,t){return this.set("MESSAGE"+this.getBlockSuffix(e,t),{PAGE_partner_name:$l.get("partner").title})},setRules:function(e){return this.set(e?"MIXED_RULES":"PHOTO_RULES",!0)},setPhotos:function(e){return this.set("_PHOTOS/_PHOTO",e.map(this.getPhoto,this))},setMorePhotosButton:function(){return this.set("_PHOTOS/_MORE",!0)},setAddAnotherButton:function(e){return this.set({add_url:$u.tpl(this.ADD_ANOTHER_BUTTON_URL_TPL,{user_id:e}),add_state:this.ADD_ANOTHER_BUTTON_STATE})},setContinueButton:function(e,t){return this.set({continue_state:e,continue_url:t})},getBlockSuffix:function(e,t){var o;return o=e?t-1==0?"VIDEO":"MIXED":t>1?"PLURAL":"SINGLE","_"+o}}),B.HoN_v3.ModeratedPhotos.ExpandedView=$class(B.HoN_v3.ModeratedPhotos.BaseView,{block:"_PHOTOS",setPhotos:function(e){return this.set("_PHOTO",e.map(this.getPhoto,this))}}),B.HoN_v3.ModeratedPhotos.TitleView=$class(B.DustView,{template:"photos/block.moderated",block:"TITLE",setTitle:function(e,t){return this.set(this.getBlockName(e,t),!0)},getBlockName:function(e,t){var o;return o=e?t-1==0?"VIDEO":"MIXED":t>1?"PLURAL":"SINGLE"}}),B.HoN_v3.ModeratedPhotos.ViewController=$class($u.Observable,{wrap:null,$e:null,constructor:function(e){$super(this,arguments),this.wrap=e,this.$e=$e.on({".js-moderated-photo-expand":this.onExpandPhotosClick},this)},destroy:function(){this.wrap=null,$e.un(this.$e),this.$e=null,$super(this,arguments)},onExpandPhotosClick:function(){this.fire("expand-photos")},expandPhotos:function(e){var t=$el.down(this.wrap,".js-moderated-more");$el.dom.replace(t,$u.tpl2el(e.toString()))}}),B.HoN_v3.ModeratedPhotos.Controller=$class(B.HoN_v3.BaseRootController,{model:null,viewController:null,continueState:null,DEFAULT_CONTINUE_STATE:{state:"mm",url:"/game"},PHOTO_DISPLAY_COUNT:2,init:function(e){this.continueState=B.HoN_v3.ModeratedPhotoManager.get_continue_state()||this.DEFAULT_CONTINUE_STATE,B.HoN_v3.ModeratedPhotoManager.mark_as_seen(),this.model=new B.HoN_v3.ModeratedPhotos.Model,this.model.on({ready:this.onDataReady,"no-photos":this.onNoPhotos},this),this.model.fetch(e)},getView:function(){var e=this.model.getPhotos(),t=this.model.hasVideo(),o=e.length,_=new B.HoN_v3.ModeratedPhotos.MainView;return o>this.PHOTO_DISPLAY_COUNT&&(e=e.slice(0,this.PHOTO_DISPLAY_COUNT),_.setMorePhotosButton()),_.setTitle(t,o).setMessage(t,o).setPhotos(e).setRules(this.model.allowUploadVideo()).setAddAnotherButton(B.Session.getUserId()).setContinueButton(this.continueState.state,this.continueState.url)},getTitle:function(){var e=this.model.hasVideo(),t=this.model.getPhotos();return(new B.HoN_v3.ModeratedPhotos.TitleView).setTitle(e,t.length)},renderComplete:function(e){this.viewController=new B.HoN_v3.ModeratedPhotos.ViewController(e),this.viewController.on({"expand-photos":this.onExpandPhotos},this)},destroy:function(){this.continueState=null,this.model.destroy(),this.model=null,this.viewController&&(this.viewController.destroy(),this.viewController=null),$super(this,arguments)},onDataReady:function(){this.viewReady()},onNoPhotos:function(){B.App.app_link(this.continueState.state,this.continueState.url)},onExpandPhotos:function(){this.viewController.expandPhotos((new B.HoN_v3.ModeratedPhotos.ExpandedView).setPhotos(this.model.getPhotos().slice(this.PHOTO_DISPLAY_COUNT)))}}));