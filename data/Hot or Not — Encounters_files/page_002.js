if(B.Encounters||(B.Encounters=new $u.Observable),function(){function e(e,t){return e.write('<div id="mm_cc" class="loading">\n<header id="profile-header" class="section-header section-header--medium"></header>\n<section class="flex flex--column big-photo js-mm-gallery">\n<div class="big-photo__gallery">\n<div class="photo-gallery">\n<div class="photo-gallery__photo js-mm-photo-holder">\n<img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="" class="js-mm-photo">\n</div>\n<div class="photo-gallery__video">\n<div class="inline">\n<i class="ico ico--lg ico--white ico--video-play-lg"><span class="b-link js-video-play"></span></i>\n</div><span class="middle"></span>\n</div>\n<div class="photo-gallery__arrow-l js-gallery-arr"><i class="photo-gallery__arrow-l-ico"></i><span class="b-link js-gallery-prev"></span></div>\n<div class="photo-gallery__arrow-r js-gallery-arr"><i class="photo-gallery__arrow-r-ico"></i><span class="b-link js-gallery-next"></span></div>\n<div class="photo-gallery__video-button hidden">\n<div class="btn btn--sm btn--transparent btn--ico">\n<i class="ico ico--white ico--video"><span class="b-link js-scroll-to-video js-gallery-img"></span></i>\n</div>\n</div>\n<div class="photo-gallery__corner js-gallery-corner">\n<div class="photo-gallery__corner_">\n<div class="photo-gallery__counter js-gallery-counter hidden">\n<div class="inline">\n<i class="icon ico--white ico--camera"></i>\n<span class="js-gallery-photo-current"></span>/<span class="js-gallery-photo-total js-gallery-total"></span>\n</div><span class="middle"></span>\n</div>\n<div class="photo-gallery__miniatures-wrap js-gallery-carousel-wrap" style="width: 0; height: 0;">\n<div class="photo-gallery__miniatures js-gallery-carousel">\n<div class="photo-gallery__prev-page js-gallery-prev-page js-gallery-prev-page-container">\n<i class="icon ico--white ico--arrow-l"></i>\n<a href="#" class="b-link js-gallery-prev-page"></a>\n</div>\n<div class="photo-gallery__photos-wrap js-gallery-photos-wrap">\n<div class="photo-gallery__photos js-gallery-photos"></div>\n</div>\n<div class="photo-gallery__next-page js-gallery-next-page js-gallery-next-page-container">\n<i class="icon ico--white ico--arrow-r"></i>\n<a href="#" class="b-link js-gallery-next-page"></a>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class="photo-gallery__abuse">\n<div class="btn btn--sm btn--transparent btn--ico tooltip-wrap js-mm-abuse" data-control-type="tooltip">\n<i class="icon ico--white ico--flag"></i>\n<div class="tooltip"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/game",path:"HON_GAME/REPORT_PHOTO"}).write('</span></div>\n<span class="b-link js-mm-abuse-ovl js-ovl-open" data-ovl-type="hon-v3-abuse-photo" data-ovl-url=""></span>\n</div>\n</div>\n</div>\n<div class="photo-ovl-fade"></div>\n<span class="b-link gallery-blocker js-mm-blocker-link" data-jst-target="mm_cc" data-jst-class="notenoughphotos-ovl"></span>\n</div>\n<div class="big-photo__footer">\n<div class="banner-container js-banner-slot"></div>\n</div>\n</section>\n<section class="game-profile js-mm-info-wrap js-mm-more-info-fx">\n<div class="js-mm-more-info"></div>\n</section>\n<div class="loader loader--lg loader--white"><div class="loader_"></div></div>\n<span class="blocker"></span>\n</div>')}return $u.dust.register("hotornot_v2/game/block.game",e),e}(),function(){function e(e,i){return e.write('<div class="flex flex--middle profile-header">\n').section(i.get(["highlight_buttons"],!1),i,{block:t},{}).write('\n<div class="flex__item flex__item--expand profile-header__txt">\n<div class="flex flex--middle name-wrap">\n<i class="online-status online-status--').reference("online_status",i).write(' tooltip-wrap" data-control-type="tooltip">\n<span class="tooltip"><span class="tooltip-txt">').section(i.get(["person_status"],!1),i,{block:s},{}).write('</span></span>\n</i>\n<h1 class="flex__item flex__item--dynamic profile-header__name">\n').reference("name",i).exists(i.get(["age"],!1),i,{block:n},{}).write('\n<span class="b-link js-profile-header-toggle"></span>\n</h1>\n<div class="flex__item flex__item--fixed profile-header__icons">').reference("icons_html",i,["s"]).write('</div>\n</div>\n<div class="flex flex--middle common-info-wrap').section(i.get(["hide_common_info"],!1),i,{block:r},{}).write('">\n<div class="flex__item flex__item--fixed common-info-wrap_">\n').exists(i.get(["is_external"],!1),i,{"else":a,block:h},{}).write("\n</div>\n").section(i.get(["social_connect"],!1),i,{block:b},{}).write("\n").section(i.get(["add_secret_comments"],!1),i,{block:E},{}).write("\n").section(i.get(["add_interests"],!1),i,{block:g},{}).write("\n").section(i.get(["work_education"],!1),i,{block:m},{}).write('\n</div>\n</div>\n<div class="flex__item flex__item--fixed profile-menu js-wrap">\n').exists(i.get(["has_share"],!1),i,{block:O},{}).write("\n").section(i.get(["ok_share_button"],!1),i,{block:y},{}).write("\n").notexists(i.get(["is_facebook_friend"],!1),i,{block:I},{}).write("\n</div>\n</div>")}function t(e,t){return e.write('\n<div class="flex__item flex__item--fixed profile-header__btn js-profile-header-buttons">\n<div class="btn-game btn-game--hot').exists(t.get(["yes"],!1),t,{block:i},{}).write(' tooltip-wrap js-profile-header-vote-yes" data-control-type="tooltip">\n<i class="btn-game__ico"></i><span class="middle"></span>\n<div class="tooltip tooltip--delayed-show bc"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/TOOLTIP_KEYBOARD_YES"}).write('</span></div>\n<span class="b-link js-profile-header-vote" data-choice="yes"></span>\n</div>\n<div class="btn-game btn-game--not').exists(t.get(["no"],!1),t,{block:o},{}).write(' tooltip-wrap js-profile-header-vote-no" data-control-type="tooltip">\n<i class="btn-game__ico"></i><span class="middle"></span>\n<div class="tooltip tooltip--delayed-show bc"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/TOOLTIP_KEYBOARD_NO"}).write('</span></div>\n<span class="b-link js-profile-header-vote" data-choice="no"></span>\n</div>\n<mark class="mark mark--red mark--fixed btn-game__mark-hot js-profile-header-rush-hour-wrap hidden">\n<span class="js-profile-header-rush-hour-num">').reference("rush_hour_num",t).write('</span>\n<span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("info_ovl_url",t).write('"></span>\n</mark>\n</div>\n')}function i(e){return e.write(" active")}function o(e){return e.write(" active")}function s(e,t){return e.reference("active_long",t)}function n(e,t){return e.write('<span class="profile-header__age">, ').reference("age",t).write("</span>")}function r(e){return e.write(" common-info-wrap--hide")}function a(e,t){return e.write("\n").exists(t.get(["friends"],!1),t,{block:l},{}).write("<!--\n-->").exists(t.get(["has_secret_comments"],!1),t,{block:u},{}).write("<!--\n-->").exists(t.get(["has_common_interests"],!1),t,{block:d},{}).write("\n")}function l(e,t){return e.write("\n").exists(t.get(["hottest_friends"],!1),t,{"else":_,block:c},{}).write("\n")}function _(e,t){return e.write('\n<div class="common-info loading">\n<div class="common-info__count').exists(t.get(["friends_loading"],!1),t,{block:p},{}).write(' js-profile-header-shared-friends-wrap">\n<div class="loader loader--sm"><div class="loader_"></div></div>\n<span class="common-info__count-cnt js-profile-header-shared-friends-num">').reference("friends_in_common",t).write("</span>\n</div>\n<span>").helper("declination",t,{},{word:"shared_friend_br",num:t.get(["friends_in_common"],!1)}).write('</span>\n<span class="b-link js-profile-header-toggle"></span>\n</div>\n')}function p(e){return e.write(" loading")}function c(e,t){return e.write('\n<div class="common-info">\n<div class="common-info__count">\n<span class="common-info__count-cnt">').reference("hottest_friends",t).write("</span>\n</div>\n<span>").helper("declination",t,{},{word:"hottest_friend_br",num:t.get(["hottest_friends"],!1)}).write('</span>\n<span class="b-link js-profile-header-toggle"></span>\n</div>\n')}function u(e,t){return e.write('\n<div class="common-info common-info--hide">\n<div class="common-info__count">\n<span class="common-info__count-cnt js-profile-header-secret-comments-num">').reference("secret_comment_count",t).write('</span>\n</div>\n<span class="js-profile-header-secret-comments-label">').helper("declination",t,{},{word:"secret_comments_br",num:t.get(["secret_comment_count"],!1)}).write('</span>\n<span class="b-link js-profile-header-secret-comments"></span>\n</div>\n')}function d(e,t){return e.write('\n<div class="common-info common-info--hide">\n<div class="common-info__count">\n<span class="common-info__count-cnt">').reference("interests_in_common",t).write("</span>\n</div>\n<span>").helper("declination",t,{},{word:"interest_in_common_br",num:t.get(["interests_in_common"],!1)}).write('</span>\n<span class="b-link js-profile-header-toggle"></span>\n</div>\n')}function h(e,t){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--').reference("external_provider",t).write('-sm tooltip-wrap" data-control-type="tooltip">\n<span class="tooltip bl" data-drop-direction="true"><span class="tooltip-txt">').reference("string_external_friend_hint",t).write('</span></span>\n</i>\n<span class="inline">').reference("string_external_friend",t,["s"]).write("</span>\n</div>\n")}function b(e,t){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--').reference("external_provider",t).write('-sm"></i>\n<span class="inline lgrey link"></span>\n</div>\n')}function E(e){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--secret-comments"></i>\n<span class="inline lgrey link"></span>\n</div>\n')}function g(e){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--add-interests"></i>\n<span class="inline lgrey link"></span>\n</div>\n')}function m(e,t){return e.write('\n<div class="common-info common-info--work-education">\n<span class="inline ellipsis">\n').section(t.get(["work"],!1),t,{block:f},{}).write("\n").section(t.get(["education"],!1),t,{block:T},{}).write("\n").section(t.get(["show_link"],!1),t,{block:v},{}).write('\n</span><span class="middle"></span>\n</div>\n')}function f(e,t){return e.write("\n").reference("work",t).write("<br>\n")}function T(e,t){return e.write("\n").reference("education",t).write("\n")}function v(e,t){return e.write('\n<span class="p-link js-profile-education-show-all">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/SHOW_WORKANDEDUCATION"}).write("</span>\n")}function O(e,t){return e.write('\n<div class="btn btn--white btn--ico tooltip-wrap" data-control-type="tooltip">\n<i class="icon ico--share"></i>\n<div class="tooltip bc"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/SHARE"}).write('</span></div>\n<span class="b-link js-fb-ui-dialog" data-fb-ui-dlg-id="').reference("share_dialog_id",t).write('"></span>\n</div>\n')}function y(e,t){return e.write('\n<div class="btn btn--white btn--ico tooltip-wrap" data-control-type="tooltip">\n<i class="icon ico--share"></i>\n<div class="tooltip bc"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/SHARE"}).write('</span></div>\n<span class="b-link js-header-popup-share" data-control-type="popup" data-url-tpl="').reference("url_tpl",t).write('" data-width="800" data-height="700" tabindex="-1"></span>\n</div>\n')}function I(e,t){return e.write('\n<div class="btn btn--white btn--ico tooltip-wrap js-wrap" data-control-type="tooltip">\n<i class="icon ico--profile"></i>\n<div class="tooltip bc"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/PROFILE"}).write('</span></div>\n<span class="b-link js-profile-header-toggle js-profile-header-toggle-button"></span>\n</div>\n')}return $u.dust.register("hotornot_v2/game/profile-header2",e),e.s={highlight_buttons:t,person_status:s,age:n,hide_common_info:r,is_external:a,social_connect:b,add_secret_comments:E,add_interests:g,work_education:m,has_share:O,ok_share_button:y,is_facebook_friend:I},t.s={yes:i,no:o},a.s={friends:l,has_secret_comments:u,has_common_interests:d},l.s={hottest_friends:_},_.s={friends_loading:p},m.s={work:f,education:T,show_link:v},e}(),function(){function e(e,l){return e.write('<span class="photo-gallery__photos-item').exists(l.get(["active"],!1),l,{block:t},{}).exists(l.get(["is_private_locked"],!1),l,{block:i},{}).exists(l.get(["is_not_moderated_locked"],!1),l,{block:o},{}).write(' js-gallery-photo">\n<img src="').reference("preview_url",l).write('" alt="">\n').exists(l.get(["is_fb_blocked"],!1),l,{block:s},{}).write("\n").exists(l.get(["is_private_locked"],!1),l,{block:n},{}).write("\n").exists(l.get(["is_not_moderated_locked"],!1),l,{block:r},{}).write("\n").exists(l.get(["is_private"],!1),l,{block:a},{}).write('\n<span class="b-link js-gallery-img" data-id="').reference("id",l).write('" data-url="').reference("large_url",l).write('"></span>\n</span>')}function t(e){return e.write(" active")}function i(e){return e.write(" photo-gallery__photos-item--private")}function o(e){return e.write(" photo-gallery__photos-item--not-moderated")}function s(e,t){return e.write('\n<span class="photo-gallery__photos-stub">\n<i class="inline ico ico--white ico--facebook-sm"></i><span class="inline">').reference("fb_photos_total",t).write('</span><span class="middle"></span>\n</span>\n')}function n(e,t){return e.write('\n<span class="photo-gallery__photos-stub">\n<i class="inline ico ico--white ico--lock"></i><span class="inline">').reference("private_total_count",t).write('</span><span class="middle"></span>\n</span>\n')}function r(e){return e.write('\n<span class="photo-gallery__photos-stub">\n<i class="inline ico ico--white ico--hand"></i><span class="middle"></span>\n</span>\n')}function a(e){return e.write('\n<i class="ico ico--white ico--lock"></i>\n')}return $u.dust.register("hotornot_v2/game/miniature",e),e.s={active:t,is_private_locked:i,is_not_moderated_locked:o,is_fb_blocked:s,is_private_locked:n,is_not_moderated_locked:r,is_private:a},e}(),function(){function e(e,o){return e.write('<section class="section-empty">\n<i class="section-empty__ico section-empty__ico--people"></i>\n').exists(o.get(["can_filter_expand"],!1),o,{"else":t,block:i},{}).write("\n</section>")}function t(e,t){return e.write('\n<p class="xx-large">').helper("lang",t,{},{group:"hon/game",path:"HON_GAME_EMPTY_QUEUE/CHANGE_FILTER"}).write('</p>\n<div class="btn btn--blue"><span class="btn-txt">').helper("lang",t,{},{group:"hon/game",path:"HON_GAME_EMPTY_QUEUE/INVITE_FRIENDS"}).write('</span><span class="b-link js-ovl-open" data-ovl-type="hon-import-overlay" data-ovl-url="').reference("hon_game_invite_url",t).write('"></span></div>\n')}function i(e,t){return e.write("\n<h1>").helper("lang",t,{},{group:"hon/game",path:"HON_GAME_EMPTY_QUEUE/EXPAND_SEARCH_TITLE"}).write('</h1>\n<p class="xx-large">').helper("lang",t,{},{group:"hon/game",path:"HON_GAME_EMPTY_QUEUE/EXPAND_SEARCH_BODY"}).write('</p>\n<div class="btn btn--blue"><span class="btn-txt">').helper("lang",t,{},{group:"hon/game",path:"HON_GAME_EMPTY_QUEUE/CHANGE_PREFERENCES"}).write('</span><span class="b-link js-tiw-filter-open" data-fx-wrap="sidebar-filter"></span></div>\n')}return $u.dust.register("hotornot_v2/game/empty-queue",e),e.s={can_filter_expand:t},e}(),function(){function e(e,i){return e.write('<div class="photo-ovl-frame">\n<i class="photo-ovl-ico photo-ovl-ico--photo-up-xlg"></i>\n<p class="xx-large photo-ovl__title">').reference("message",i,["s"]).write('</p>\n<span class="btn btn--blue"><span class="btn-txt">').helper("lang",i,{},{group:"hon/game",path:"HON_GAME_PHOTO_OVL/ADD_PHOTOS_NOW"}).write("</span>").exists(i.get(["profile_upload_url"],!1),i,{block:t},{}).write('</span>\n<span class="btn btn--white"><span class="btn-txt">').helper("lang",i,{},{group:"hon/game",path:"HON_GAME_PHOTO_OVL/LATER"}).write('</span><span class="b-link js-toggle" data-jst-target="mm_cc" data-jst-class="notenoughphotos-ovl"></span></span>\n</div><span class="middle"></span>')}function t(e,t){return e.write('<a href="').reference("profile_upload_url",t).write('" class="b-link app" rel="profile-edit"></a>')}return $u.dust.register("hotornot_v2/game/photo-ovl",e),e.s={profile_upload_url:t},e}(),$l.register({section:"hon/profile_header",lang:"en-us",translations:{HON_HEADER:{GET_MOBILE_APP:"Get the link to mobile app",USING_MOBILE_APP:"Currently using {{PAGE_partner_name}} on mobile",EXTERNAL_PROVIDER_FACEBOOK:"facebook",EXTERNAL_PROVIDER_VK:"vk",EXTERNAL_PROVIDER_ODNOKLASSNIKI:"ok",EXTERNAL_FRIEND_MALE:"your {provider_name_upper}<br>friend",EXTERNAL_FRIEND_MALE_HINT:"Your friend isn't on {{PAGE_partner_name}} yet. If you think they would like {{PAGE_partner_name}} vote Yes and send them a request.",EXTERNAL_FRIEND_FEMALE:"your {provider_name_upper}<br>friend",EXTERNAL_FRIEND_FEMALE_HINT:"Your friend isn't on {{PAGE_partner_name}} yet. If you think they would like {{PAGE_partner_name}} vote Yes and send them a request.",SHARE:"Share",PROFILE:"Profile",UNDO:"Undo",TOOLTIP_KEYBOARD_YES:'Or press <span class="btn-game__shortcut">1</span> on keyboard',TOOLTIP_KEYBOARD_NO:'Or press <span class="btn-game__shortcut">2</span> on keyboard',SHOW_WORKANDEDUCATION:"Show all",MATCH:{VIEWER_MALE:{MALE:"Matched",FEMALE:"Matched"},VIEWER_FEMALE:{MALE:"Matched",FEMALE:"Matched"}},VOTE_HOT:{VIEWER_MALE:{MALE:"You liked him",FEMALE:"You liked her"},VIEWER_FEMALE:{MALE:"You liked him",FEMALE:"You liked her"}},VOTE_NOT:{VIEWER_MALE:{MALE:"You didn’t like him",FEMALE:"You didn’t like her"},VIEWER_FEMALE:{MALE:"You didn’t like him",FEMALE:"You didn’t like her"}},IMPORSIBLE_VOTE:{DIFFERENT_COUNTRY:"Sorry, you can’t rate people in other countries yet",NO_PHOTOS:{MALE:"Sorry, you can’t rate people who don’t have profile photos",FEMALE:"Sorry, you can’t rate people who don’t have profile photos"},SEARCH_CRITERIA:{VIEWER_MALE:{MALE:"Sorry, you can’t rate him due to his game settings",FEMALE:"Sorry, you can’t rate her due to her game settings"},VIEWER_FEMALE:{MALE:"Sorry, you can’t rate him due to his game settings",FEMALE:"Sorry, you can’t rate her due to her game settings"}},OTHER:{VIEWER_MALE:{MALE:"Sorry, you can’t rate him at present",FEMALE:"Sorry, you can’t rate her at present"},VIEWER_FEMALE:{MALE:"Sorry, you can’t rate him at present",FEMALE:"Sorry, you can't rate her at present"}}}}}}),$l.register({section:"hon/game",lang:"en-us",translations:{HON_GAME:{TITLE:"{{PAGE_partner_name}} &mdash; Encounters",REPORT_PHOTO:"Report photo"},HON_GAME_PHOTO_OVL:{TO_SEE_MALE_ONE:"To see all of {{name}}'s photos, please add <b>just one more photo showing only you:</b>",TO_SEE_MALE_MANY:"To see all of {{name}}'s photos, please add <b>{{num}} {{photos}} showing only you:</b>",TO_SEE_FEMALE_ONE:"To see all of {{name}}'s photos, please add <b>just one more photo showing only you:</b>",TO_SEE_FEMALE_MANY:"To see all of {{name}}'s photos, please add <b>{{num}} {{photos}} showing only you:</b>",ADD_PHOTOS_NOW:"Add photos now",LATER:"Later"},HON_GAME_EMPTY_QUEUE:{CHANGE_FILTER:"There’s no one else who fits your preferences. Change your search filter, or come back again tomorrow! In the meantime:",EXPAND_SEARCH_TITLE:"Expand your search",EXPAND_SEARCH_BODY:"Sorry, no one fits your preferences.<br>Search for people of other ages?",INVITE_FRIENDS:"Invite your friends",CHANGE_PREFERENCES:"Change your preferences"}}}),$l.register({section:"hon/secret_comments",lang:"en-us",translations:{HON_SECRET_COMMENTS:{SECRET_COMMENTS:"Secret comments",EMPTY:"Be the first to add a secret comment about {{username}}. This is just for girls – guys can’t write comments or even see them!",PLACEHOLDER:"Add your comment (Enter to send)",ERROR:"Comment must be at least {{num_symbols}} {{symbols}}.",HINT:"Other girls can see your comments, but the profile owner can't!"}}}),B.PhotoGalleryView=$class($u.Observable,{name:"PhotoGalleryView",wrap_el:null,photo_tpl:null,dust:!1,photos:null,hotkeys:!0,viewer_has_photos:!0,start_id:null,total:0,photo_url_tpl:null,wait_for_animation:!1,el_slwrap:null,el_slider:null,el_total:null,el_counter:null,el_arr_prev_page:null,el_arr_next_page:null,el_corner:null,el_carousel:null,el_carousel_wrap:null,old_el:null,image_list:[],is_rtl:null,is_ie8:null,client_total:null,old_num:0,current_num:0,future_num:null,first_num:0,last_num:0,current_x:0,is_blocking:!1,allow_controls:!1,infinite_scroll:!1,is_corner_mouseenter:!1,has_gap:null,has_arrows_class:"gallery_has_arrows",ANIMATION_TIME:500,UPDATE_TIME:100,timer_blocking:null,timer_preparing:null,$e:null,rtl_map:{37:39,39:37},constructor:function(e){$super(this,arguments),$config(this,e),this.el_slwrap=$el.down(this.wrap_el,".js-gallery-photos-wrap"),this.el_slider=$el.down(this.wrap_el,".js-gallery-photos"),this.el_counter=$el.down(this.wrap_el,".js-gallery-counter"),this.el_total=$el.down(this.wrap_el,".js-gallery-photo-total"),this.el_current_num=$el.down(this.wrap_el,".js-gallery-photo-current"),this.el_arr_prev_page=$el.down(this.wrap_el,".js-gallery-prev-page-container"),this.el_arr_next_page=$el.down(this.wrap_el,".js-gallery-next-page-container"),this.el_corner=$el.down(this.wrap_el,".js-gallery-corner"),this.el_carousel=$el.down(this.wrap_el,".js-gallery-carousel"),this.el_carousel_wrap=$el.down(this.wrap_el,".js-gallery-carousel-wrap"),this.is_rtl="rtl"===$el.dir(),this.is_ie8="ie8"===$u.ua,this.client_total=this.photos.length,this.timer_blocking=new $t(this.update_layout,this),this.timer_preparing=new $t(this.unblock_controls,this),this.is_corner_mouseenter=!1,this.bind_events(),this.set_move_type(),this.update_counter(),this.el_corner&&this.create_corner(),this.client_total&&this.update_cache()},destroy:function(){this.destroy_corner(),this.wrap_el=null,this.photo_tpl=null,this.photos=null,this.el_slider=null,this.el_total=null,this.is_rtl=null,this.is_ie8=null,this.image_list=null,this.old_el=null,this.has_gap=null,this.timer_blocking&&(this.timer_blocking.clear(),this.timer_blocking=null),this.timer_preparing&&(this.timer_preparing.clear(),this.timer_preparing=null),this.unbind_events(),this.el_carousel=null,this.el_carousel_wrap=null},bind_events:function(){this.hotkeys&&$e.add(document.body,"keyup",this.press_arrows,this),$e.add(this.el_arr_prev_page,"click",this.on_prev_page,this),$e.add(this.el_arr_next_page,"click",this.on_next_page,this),this.$e=$e.on({".js-gallery-img":this.on_click},this)},unbind_events:function(){$e.un(this.$e),$e.del(this.el_arr_prev_page,"click",this.on_prev_page,this),$e.del(this.el_arr_next_page,"click",this.on_next_page,this),this.hotkeys&&$e.del(document.body,"keyup",this.press_arrows,this)},set_move_type:function(){this.is_ie8||(this.move_prefix=$el.get_prefixed_name("transform"))},toggle_animate:function(e){$el.tgl(this.el_slider,"animated",e)},move_photos:function(){this.toggle_animate(!0),this.change_x_coordinate()},instant_move_photos:function(){this.toggle_animate(!1),this.change_x_coordinate()},change_x_coordinate:function(){var e=this.current_x;this.is_rtl&&(e=-e),this.is_ie8?this.el_slider.style.left=e+"px":this.el_slider.style[this.move_prefix]="translate("+e+"px, 0)",this.toggle_side_arrows()},get_active_param:function(e){return e.is_default?"active":null},data2image:function(e){return e.active=this.get_active_param(e),this.dust?$u.tpl2el($u.dust.render(this.photo_tpl,e)):$u.tpl2el_ex(this.photo_tpl,e)},data2image_list:function(e,t){var i,o;for(this.image_list=[],i=e;t>=i;i+=1)o=this.photos[i],this.image_list.push(this.data2image(o))},update:function(e){var t,i;for(this.photos=e.photos,this.client_total=this.photos&&this.photos.length||0,this.viewer_has_photos=e.viewer_has_photos,this.start_id=e.start_id,this.total=e.total,t=0;t<this.client_total;t+=1)i=this.photos[t],i.active=this.get_active_param(i);e.prevent_move&&this.client_total>0?this.current_num>this.client_total-1&&(this.current_num-=1):this.current_num=0,this.start_id&&(this.current_num=this.get_num_by_id(this.start_id),this.start_id=null),this.update_counter(),this.client_total?this.update_cache():(this.image_list=[],this.redraw())},check_size:function(){var e,t,i=0;for(e=0;e<this.photos.length;e+=1)if(t=this.photos[e],i+=t.w,i>this.get_viewport_width())return this.allow_controls=!0,void 0;this.allow_controls=!1},update_arrows:function(){$el.tgl(this.wrap_el,this.has_arrows_class,this.allow_controls)},toggle_side_arrows:function(){if(!this.infinite_scroll){var e=0===this.current_num,t=this.has_gap;$el.tgl(this.el_arr_prev_page,"hidden",e),$el.tgl(this.el_arr_next_page,"hidden",t)}},update_counter:function(){this.client_total=this.photos.length,this.el_total&&(this.el_total.innerHTML=this.total,this.toggle_counter(!this.total))},toggle_counter:function(e){this.total||(e=!0),$el.tgl(this.el_counter,"hidden",e)},update_cache:function(){var e,t,i,o=3*this.get_viewport_width(),s=4*this.get_viewport_width(),n=0,r=0;for(this.start_id&&(this.current_num=this.get_num_by_id(this.start_id),this.old_num=this.current_num,this.start_id=null),e=this.current_num-1,i=0;e>=0&&(t=this.photos[e],i+=t.w,n=e,!(i>o));e-=1);for(this.current_x=this.current_num>0?-i:0,e=this.current_num,i=0;e<this.client_total&&(t=this.photos[e],i+=t.w,r=e,!(i>s));e+=1);this.first_num=n,this.last_num=r,this.check_right(),this.data2image_list(n,r),this.redraw()},redraw:function(){var e,t,i=document.createDocumentFragment(),o=this.image_list.length;for(e=0;o>e;e+=1)t=this.image_list[e],i.appendChild(t);this.el_slider.innerHTML="",this.instant_move_photos(),this.el_slider.appendChild(i),this.check_size(),this.update_arrows()},on_prev_page:function(){this.prev_page()},on_next_page:function(){this.next_page()},prev_page:function(){if(!this.is_blocking){var e,t,i=0,o=Math.min(this.old_num,this.client_total);for(e=o-1;e>=0&&(t=this.photos[e],i+=t.w,this.current_num=e,!(i>=this.get_viewport_width()));e-=1);return this.current_num||this.old_num?(this.move(),void 0):(this.move_to_edge(this.client_total-1),void 0)}},next_page:function(){if(!this.is_blocking){var e,t,i=0,o=Math.max(this.old_num,0);for(e=o;e<this.client_total&&(t=this.photos[e],i+=t.w,this.current_num=e,!(i>this.get_viewport_width()));e+=1);return this.has_gap?(this.move_to_edge(0),this.has_gap=!1,void 0):(this.move(),void 0)}},press_arrows:function(e){if(B.Ovl.is_visible()||"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName||!this.hotkeys)return!0;if(!this.allow_controls||!this.viewer_has_photos)return!0;var t=$e.e,i=$e.key(t);if(this.is_rtl&&(i=this.rtl_map[i]||i),t.shiftKey||t.ctrlKey||t.altKey)return!0;switch(i){case 37:case 74:this.on_prev_page();break;case 39:case 13:case 75:this.on_next_page()}},move:function(e){this.is_blocking||(e||this.block_controls(),this.current_x=-this.get_range_width(this.first_num,this.current_num),this.old_num=this.current_num,this.check_right(),e?this.instant_move_photos():this.move_photos())},move_to_edge:function(e){0===e?(this.current_num=this.first_num,this.future_num=e):(this.current_num=this.last_num,this.current_num<0&&(this.current_num=0),this.future_num=e),this.move()},check_right:function(){var e=this.get_range_width(this.first_num,this.current_num),t=this.get_range_width(this.current_num,this.client_total),i=this.get_viewport_width();i>=t?(this.has_gap=!0,this.current_x=-(e+t-i),this.current_x=Math.min(this.current_x,0)):this.has_gap=!1,this.allow_controls||(this.current_x=0)},get_range_width:function(e,t){return this.photos.slice(e,t).reduce(function(e,t){return e+t.w},0)},lock:function(){this.wait_for_animation&&(this.is_blocking=!0)},unlock:function(){this.is_blocking=!1},block_controls:function(){this.lock(),this.timer_blocking.set(this.ANIMATION_TIME)},update_layout:function(){this.update_cache(),this.timer_preparing.set(this.UPDATE_TIME)},unblock_controls:function(){this.unlock(),"number"==typeof this.future_num&&(this.current_num=this.future_num,this.future_num=null,this.update_cache(),this.move(!0))},get_viewport_width:function(){return parseInt($el.style(this.el_slwrap,"width"),10)},get_image_by_id:function(e){var t,i,o;for(t=this.first_num;t<=this.last_num;t+=1)if(i=this.photos[t],i&&e===i.id){o=t-this.first_num;break}return this.image_list[o]},get_photo_by_id:function(e){var t,i;for(t=0;t<this.client_total;t+=1)if(i=this.photos[t],i&&e===i.id)return i;return null},get_active_photo_num:function(){var e,t;for(t=0;t<this.client_total;t++)if(e=this.photos[t],e.active)return t;return null},get_num_by_id:function(e){var t,i;for(t=0;t<this.client_total;t+=1)if(i=this.photos[t],i&&e===i.id)return t;return null},get_item_id:function(e){return e.getAttribute("data-id")},on_click:function(e){var t=this.get_item_id(e),i=this.get_photo_by_id(t);this.photo_url_tpl&&(i.photo_url=$u.tpl(this.photo_url_tpl,{photo_id:t})),this.fire("click",i)},create_corner:function(){$e.add(this.el_corner,"mouseenter",this.corner_mouseenter,this),$e.add(this.el_corner,"mouseleave",this.corner_mouseleave,this),this.is_corner_mouseenter&&this.corner_mouseenter()},destroy_corner:function(){this.el_corner&&($e.del(this.el_corner,"mouseenter",this.corner_mouseenter,this,!1),$e.del(this.el_corner,"mouseleave",this.corner_mouseleave,this,!1),this.el_corner=null)},corner_mouseenter:function(){this.total>1?this.open_corner():this.close_corner(),this.is_corner_mouseenter=!0},corner_mouseleave:function(){this.close_corner(),this.is_corner_mouseenter=!1},open_corner:function(){$el.add(this.el_counter,"move"),this.el_carousel_wrap.style.width=$el.style(this.el_carousel,"width"),this.el_carousel_wrap.style.height=$el.style(this.el_carousel,"height")},close_corner:function(){$el.del(this.el_counter,"move"),this.el_carousel_wrap.style.width=0,this.el_carousel_wrap.style.height=0}}),B.PhotoGallery=$class($u.Observable,{name:"PhotoGallery",wrap_el:null,entries:null,photos:null,reload_url:null,load_url:null,photo_tpl:"",dust:!1,hotkeys:!0,viewer_has_photos:!0,photo_url_tpl:null,start_id:null,follow_page:!1,image_min_width:0,total:0,PREVENT_BIG_PHOTO_WIDTH_DELTA:1,client_total:0,request_load_entry:null,load_$r:null,view:null,view_type:B.PhotoGalleryView,constructor:function(e){$super(this,arguments),$config(this,e),this.start_id&&(this.start_id=this.start_id.toString()),this.wrap_el&&(this.entries||(this.entries=[{n:0}]),this.photos||(this.photos=[]),this.data_prepare(),B.on("photo:remove",this.delete_done,this))},destroy:function(){$super(this,arguments),B.un("photo:remove",this.delete_done,this),this.request_load_entry&&(this.request_load_entry.abort(),this.request_load_entry=null),this.load_$r&&(this.load_$r.abort(),this.load_$r=null),this.wrap_el=null,this.entries=null,this.photos=null,this.photo_tpl="",this.client_total=0,this.view&&(this.unbind_view_events(),this.view.destroy(),this.view=null)},has_photo:function(e){for(var t=0;t<this.photos.length;t++)if(e==this.photos[t].id)return!0;return!1},make_first:function(e){for(var t=0;t<this.photos.length&&e!=this.photos[t].id;t++);this.photos.unshift(this.photos.splice(t,1)[0]),this.update_view()},prepare_photo:function(e){return e.w<this.image_min_width&&(e.h="ie8"==$u.ua||"ie9"==$u.ua?Math.round(this.image_min_width*e.h/e.w):"auto",e.w=this.image_min_width),e},data_prepare:function(){var e,t,i,o,s=[],n=this.photos.length,r=this.entries.length;for(e=0;r>e;e+=1){for(o=this.entries[e],t=0;n>t;t+=1)if(i=this.photos[t],i.eid===o.id){o.loaded=!0;break}!o.loaded&&o.n>0&&s.push(o.id)}s.length?this.data_load(s):this.data_ready()},data_load:function(e){this.request_load_entry=new $r(this.load_url,{params:{entry_id:e},ready:this.data_loaded,error:this.data_error},this)},data_loaded:function(e){e&&e.photos&&e.photos.length&&(this.photos=this.photos.concat(e.photos)),this.data_ready()},data_error:function(e){},data_ready:function(){var e,t;for(this.client_total=this.photos&&this.photos.length?this.photos.length:0,e=0;e<this.client_total;e+=1)t=this.photos[e],t=this.prepare_photo(t);this.create_view(),this.bind_view_events(),this.prevent_big_width()
},prevent_big_width:function(){var e,t,i=!1,o=this.view.get_viewport_width();for(e=0;e<this.photos.length;e+=1)t=this.photos[e],t.w>o&&(i=!0,t.w=o-this.PREVENT_BIG_PHOTO_WIDTH_DELTA);i&&this.update_view(!0)},create_view:function(){this.view=new this.view_type({wrap_el:this.wrap_el,photo_tpl:this.photo_tpl,dust:this.dust,photos:this.photos,hotkeys:this.hotkeys,viewer_has_photos:this.viewer_has_photos,start_id:this.start_id,total:this.total,photo_url_tpl:this.photo_url_tpl,follow_page:this.follow_page})},update_view:function(e){this.view||this.create_view(),this.view.update({photos:this.photos,prevent_move:e,viewer_has_photos:this.viewer_has_photos,start_id:this.start_id,total:this.total})},bind_view_events:function(){this.$e_view=this.view.on({click:this.on_click,blocked:this.on_blocked},this)},unbind_view_events:function(){this.view.un(this.$e_view),this.$e_view=null},delete_done:function(e,t){if(!t&&(this.is_blocking=!1,this.view.unlock(),!e.errno)){var i,o,s,n=e.photo_id.toString();for(i=0;i<this.client_total;i+=1)if(o=this.photos[i],o.id===n){s=i,this.photos.splice(i,1);break}e.entry_id===this.entries[0].id&&(this.entries[0].n-=1),this.client_total-=1,this.total-=1,this.update_view(!0),e.photo_default_id&&(this.default_photo_id=e.photo_default_id,this.set_default_done(null,!0)),this.fire("photos_of_me_changed",this.entries[0].n),this.fire("photos_changed",this.client_total)}},set_default_done:function(){},on_click:function(e){this.fire("photo_clicked",e)},on_blocked:function(){}}),B.HoN_v3.ProfileInterestsExpander||(B.HoN_v3.ProfileInterestsExpander=new $class({t:null,init:function(){this.$e=$e.on({".js-interests-showall":this.show_all},this)},destroy:function(){$e.un(this.$e),this.t&&(this.t.abort(),this.t=null)},show_all:function(e){var t=$el.up(e,".js-interests-board");this.update(e.getAttribute("data-interests-all_url"),t)},update:function(e,t){this.t=new $r(e,{method:"post",ready:this.update_ready.bind(this,t)},this)},update_ready:function(e,t){e.innerHTML=t.html}})),$u.UsersLoader||($u.UsersLoader=$class({request:null,constructor:function(e,t,i){this.request=new $r(e,{ready:this.ready,error:this.error},this),this.on_ready=t,this.ctx=i},destroy:function(){this.request&&(this.request.abort(),this.request=null),this.on_ready=this.ctx=null},ready:function(e){if(e.html){var t=$("js-profile-friends");t&&(t.innerHTML=e.html,this.on_ready&&this.on_ready.call(this.ctx,e))}},error:function(e){}})),B.FbUiDialogView||(B.FbAuthPopup||(B.FbAuthPopup=new $class($u.Observable,{name:"FbAuthPopup",constructor:function(){$super(this,arguments),this.watch_$t=new $t(this._check,this,500)},_check:function(){this.wnd.closed?(this.wnd=null,this.fire("cancel")):this.watch_$t.set()},in_progress:function(){return null!=this.wnd},auth:function(e){if("FB.FacebookAuthConfig"!=e.$gpb)throw"cfg.$gpb not exist";this.wnd||(this.wnd=window.open(e.url,"FbAuthPopup","toolbar=no,width=650, height=550"),this.wnd?(this.fire("shown"),this.watch_$t.set()):this.fire("blocked"))},on_auth:function(e){this.watch_$t.clear(),this.wnd=null,this.fire("ready",e)}})),B.FbShareDialog||(B.FbShareDialog=$class($u.Observable,{name:"FbShareDialog",link:null,save_result_url:null,force_check:!1,wait_for_login:!1,constructor:function(e,t){if("FB.ShareDialogConfig"!=e.$gpb)throw"params.$gpb not exist";$super(this,arguments),$config(this,e),t&&$config(this,t)},destroy:function(){this.link=this.to=this.save_result_url=null,this.$r&&(this.$r.abort(),this.$r=null),$super(this,arguments)},share:function(){$u.fb.call(this._share,this,this.wait_for_login,this.force_check)},_share:function(e){if(e)return this.fire("ready"),void 0;var t={method:"share",href:this.link};FB.ui(t,this._share_ready.bind(this))},_share_ready:function(e){$u.escape.enable(),this.$r=new $r(this.save_result_url,{method:"post",params:void 0===e?{close:1}:e,ready:this._save_ready},this)},_save_ready:function(){this.$r=null,this.fire("ready")}})),B.FbSendDialog||(B.FbSendDialog=$class($u.Observable,{name:"FbSendDialog",link:null,to:null,save_result_url:null,wait_for_login:!1,constructor:function(e){if("FB.SendDialogConfig"!=e.$gpb)throw"params.$gpb not exist";$super(this,arguments),$config(this,e)},destroy:function(){this.link=this.to=this.save_result_url=null,this.$r&&(this.$r.abort(),this.$r=null),$super(this,arguments)},send:function(){$u.fb.call(this._send,this,this.wait_for_login)},_send:function(e){if(e)return this.fire("ready"),void 0;var t={method:"send",link:this.link,to:this.to};FB.ui(t,this._send_ready.bind(this))},_send_ready:function(e){$u.escape.enable(),this.$r=new $r(this.save_result_url,{method:"post",params:e,ready:this._save_ready},this)},_save_ready:function(){this.$r=null,this.fire("ready")}})),B.FbUiDialogView=new $class($u.Observable,{name:"FbUiDialogView",_configs:{},_cur_dlg_id:null,constructor:function(){$super(this,arguments),$e.on({".js-fb-ui-dialog":this._click},this)},_click:function(e){if(!this._cur_dlg_id){if(this._cur_dlg_id=e.getAttribute("data-fb-ui-dlg-id"),!this._cur_dlg_id)return $s.error_log($s.newError("UserError","FB dlg data-fb-ui-dlg-id is undefined"),{origin:"B.FbUiDialogView"}),void 0;var t=this._configs[this._cur_dlg_id];if(!t)return $s.error_log($s.newError("UserError","B.FbUiDialogView config not found for "+this._cur_dlg_id),{origin:"B.FbUiDialogView"}),void 0;switch(t.click_track_url&&new $r(t.click_track_url),t.$gpb){case"FB.FacebookAuthConfig":this._auth_popup(t);break;case"FB.ShareDialogConfig":this.share(t);break;case"FB.SendDialogConfig":this.send(t);break;default:$s.error_log($s.newError("UserError","B.FbUiDialogView invalid $gpb"),{origin:"B.FbUiDialogView"})}}},set_cfg:function(e,t){this._configs[e]=$clone(t)},_auth_clean:function(){B.FbAuthPopup.un(this.auth_$e),this.auth_$e=null,this._cur_dlg_id=null},_auth_blocked:function(){this._auth_clean()},_auth_cancel:function(){this._auth_clean()},_auth_ready:function(e){this._auth_clean(),this.share(e,{wait_for_login:!0,force_check:!0})},_auth_popup:function(e){B.FbAuthPopup.in_progress()||(this.auth_$e=B.FbAuthPopup.on({blocked:this._auth_blocked,cancel:this._auth_cancel,ready:this._auth_ready},this),B.FbAuthPopup.auth(e))},_share_ready:function(){this.share_dlg.un("ready",this._share_ready,this),this.share_dlg.destroy(),this.share_dlg=null,this._cur_dlg_id=null},share:function(e,t){this.share_dlg=new B.FbShareDialog(e,t),this.share_dlg.on("ready",this._share_ready,this),this.share_dlg.share()},_send_ready:function(){this.send_dlg.un("ready",this._send_ready,this),this.send_dlg.destroy(),this.send_dlg=null,this._cur_dlg_id=null},send:function(e){this.send_dlg=new B.FbSendDialog(e),this.send_dlg.on("ready",this._send_ready,this),this.send_dlg.send()}})),B.HoN_v3.Abuse=new $class({name:"Abuse",state:["big-photo-view"],encounters_$e:null,init:function(){var e=$("mm_cc");e&&(this.abuse_el=$el.down(e,".js-mm-abuse-ovl"),this.abuse_el&&(this.encounters_$e=B.Encounters.on("gallery_photo_change",this.photo_change,this)))},destroy:function(){this.abuse_el&&(B.Encounters.un(this.encounters_$e),this.abuse_el=null)},photo_change:function(e){e.report_url&&this.abuse_el.setAttribute("data-ovl-url",e.report_url)}}),B.HoN_v3.ProfileFriends||(B.HoN_v3.ProfileFriends=new $class({friends:{},_last_cont:null,_last_el:null,_last_connection_id:"",_wrap:null,_friends_wrap:null,_more_el:null,_more_friends_request:null,init:function(){this._wrap=$("app_c"),this.$b=B.on({"friends:imported":this._on_friends_imported},this)},destroy:function(){B.un(this.$b),this._last_cont=this._last_el=this._more_el=this._wrap=this._friends_wrap=null,this._more_friends_request&&(this._more_friends_request.abort(),this._more_friends_request=null)},_on_friends_imported:function(e){this.friends=e.Profile.friends;var t=$el.select(".js-profile-header-shared-friends-num")[0];t&&(t.innerHTML=e.friends_count,$el.tgl($el.up(t,".js-profile-header-shared-friends-wrap"),"loading",""===count));var i=$("js-profile-friends");i.innerHTML=e.html},set_friends:function(e){this.friends=e},show_hidden:function(){var e="js-friend-hidden",t=$el.down(document,"."+e),i=t.getAttribute("data-hidden");$el.del(t,i),$el.del(t,e)},toggle_loading:function(e){$el.tgl(this._friends_wrap,"loading",e)}})),B.HoN_v3.ImportRedirectView=new $class({name:"ImportRedirectView",state:["mm","search-friends"],redirect_link:null,ovl_types:{"hon-import-overlay":!0},init:function(){this.$b=B.on({"ovl:close":this.on_ovl_close},this)},destroy:function(){B.un(this.$b),this.redirect=null},on_ovl_close:function(e){this.ovl_types[e.type]&&e.closed_by_user&&this.redirect_link&&B.App.app_link(this.redirect_link.state,this.redirect_link.url)}}),$gpb.exists("badoo.bma.SexType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SexType=new $gpb.Enum("badoo.bma.SexType");t._values=[1,2,3],t.MALE=1,t.FEMALE=2,t.UNKNOWN=3}(),B.HoN_v3.ProfileHeaderBase||(B.HoN_v3.ProfileHeaderBase=$class($u.Observable,{name:"HeaderBase",highlight_button_timeout:200,tpl_name:"profile-header",wrap_el:null,globals:{},highlight_button_timer:null,user_id:null,highlight_buttons:{yes:!1,no:!1},constructor:function(e){$super(this,arguments),$config(this,e),this.wrap_el=$("profile-header"),this._$e=$e.on({".js-profile-header-vote":this._on_vote,".js-profile-header-toggle":this._on_toggle,".js-profile-header-secret-comments":this._on_secret_comments,".js-profile-header-send-smile":this._on_send_smile},this),this.b_$e=B.on({"profile:secret_comments_update":this.update_secret_comments,"ovl:close":this.enable_buttons,"ovl:next":this.abuse_ovl_closed,smile_sent:this.checkUserId},this),this.e_$e=B.Encounters.on({"RushHour:toggle_counter":this.toggle_rush_hour,"RushHour:update_counter":this.update_rush_hour},this),this.highlight_button_timer=new $t(this.unhighlight_button,this,this.highlight_button_timeout)},destroy:function(){$super(this,arguments),$e.un(this._$e),B.un(this.b_$e),B.Encounters.un(this.e_$e),this.highlight_button_timer.clear(),this.highlight_button_timer=null,this.wrap_el=null,this.globals=null},update_friends_connections:function(e){this.update_value("shared-friends-num",e),this.toggle_class("shared-friends-wrap","loading",""===e)},update_secret_comments:function(e,t){this.update_value("secret-comments-num",e),this.update_value("secret-comments-label",t)},toggle_rush_hour:function(e){this.toggle_block("rush-hour-wrap",e)},update_rush_hour:function(e){this.update_global_value("rush-hour-num",e)},toggle_class:function(e,t,i){var o=$el.down(this.wrap_el,".js-profile-header-"+e);o&&$el.tgl(o,t,i)},toggle_block:function(e,t){var i=$el.down(this.wrap_el,".js-profile-header-"+e);i&&$el.tgl(i,"hidden",!t)},update_value:function(e,t){var i=$el.down(this.wrap_el,".js-profile-header-"+e);i&&(i.innerHTML=t)},update_global_value:function(e,t){this.update_value(e,t),this.globals[e.replace(/-/g,"_")]=t},highlight_button:function(e){for(var t=["yes","no"],i=0;i<t.length;i++){var o=t[i],s=o===e;this.highlight_buttons[o]=s,$el.tgl($el.down(this.wrap_el,".js-profile-header-vote-"+o),"active",s)}},highlight_button_with_timer:function(e){this.highlight_button(e),this.highlight_button_timer.set()},unhighlight_button:function(){this.highlight_button_timer.valueOf()||this.highlight_button(!1)},enable_buttons:function(){this._toggle_buttons(!0)},disable_buttons:function(){this._toggle_buttons(!1)},abuse_ovl_closed:function(e){"hon-v3-abuse"===e.type&&B.on("ovl:close",this.update_header,this)},update_header:function(){B.un("ovl:close",this.update_header,this),B.App.reload()},_render_to_html:function(e){var t=$clone(e),i=e.is_verified||t.person&&t.person.verified_user;return $config(t,{highlight_buttons:this.highlight_buttons,friends_loading:""===t.num_friends_connections,is_verified:i,verified_html:this._get_verify_tooltip_text(e),icons_html:e.person?this.build_icons(e):""},this.globals),t.has_common_interests=t.has_common_interests||"interests_in_common"in t,t.friends||(t.friends=void 0!==(t.hottest_friends||t.friends_in_common)&&{count:t.hottest_friends||t.friends_in_common}),this.filter_common_info(t,e.curr_user),$u.dust.render(this.tpl_name,t)},_get_verify_tooltip_text:function(e){if(e.verified_html)return e.verified_html;if(B.HoN_v3){var t=$l.get("hon/profile_header2",e.own_profile?"MY_PROFILE_IS_VERIFIED":"OTHERS_PROFILE_IS_VERIFIED");return t[$p.SexType.getKey(e.gender)||e.gender]}},_toggle_buttons:function(e){var t=$el.down(this.wrap_el,".js-profile-header-buttons");$el.tgl(t,"blocked",!e)},_on_vote:function(e){this._toggle_buttons(!1),e.blur(),this.fire("vote",e.getAttribute("data-choice"),e)},_on_toggle:function(e){this.fire("toggle",e)},_on_secret_comments:function(e){this.fire("secret_comments",e)},_on_send_smile:function(e){this.fire("send_smile",e);var t=$el.down(this.wrap_el,".js-profile-header-send-smile-wrap");$el.add(t,"active")},checkUserId:function(e){e===this.user_id&&this.toggle_smile_button(!1)},toggle_smile_button:function(e){var t=$el.down(this.wrap_el,".js-profile-header-send-smile-wrap");$el.tgl(t,"hidden",!e)},set_friends_count:function(e){var t=$el.select(".js-profile-header-shared-friends-num")[0];t.innerHTML=e,$el.tgl($el.up(t,".js-profile-header-shared-friends-wrap"),"loading",""===e)},_get_profile_option:function(e,t){var i=null,o=[];o=e.profile.getProfileFields?e.profile.getProfileFields()||[]:e.profile.getProfileField()||[];for(var s=0;s<o.length;s++)(o[s].getId()==t||o[s].getType()==t)&&(i=o[s]);return i},build_icons:function(e){var t=new B.HoN_v3.ProfileHeaderIconsView,i=e.person;i instanceof $p.Person||(i=$gpb("badoo.bma.Person",i)),i.getVerifiedUser()&&t.setVerified(e.own_profile,i.getGender()),i.getHasPaidVip()&&t.setVip(e.own_profile,i.getGender()),!e.own_profile&&i.getHasMobileApp()&&t.setMobile();var o=B.Features.getFeature($p.FeatureType.ALLOW_SUPER_POWERS),s=e.own_profile?o.getEnabled():i.getHasSpp();if(s&&t.setSpp(i.getGender()),i.getHasRiseup()){var n=60;this.header_in_profile&&(n=59),t.setRiseUp(i.getLastRiseupTimeMessage(),n)}return e.hot_icon&&t.setHot(),t.toString()},filter_common_info:function(e){var t,i=[{name:"friends",cnt:e.friends&&e.friends.count},{name:"has_secret_comments",cnt:e.secret_comment_count},{name:"secret_comments",cnt:e.secret_comments&&e.secret_comments.count},{name:"has_common_interests",cnt:e.interests_in_common},{name:"interests",cnt:e.interests&&e.interests.count}],o=i.filter(function(e){return e.cnt}),s=i.filter(function(e){return 0===e.cnt});if(o.length||e.work_education){if(o.length)for(t=o.length-1;t>1;t--)delete e[o[t].name],o.length--;for(e.work_education&&2==o.length&&(e.hide_common_info=!0),t=0;t<s.length;t++)delete e[s[t].name]}else for(t=s.length-1;t>1;t--)delete e[s[t].name]}})),B.HoN_v3.EncountersHeaderController||(B.HoN_v3.EncountersHeaderController=$class(B.HoN_v3.ProfileHeaderBase,{name:"EncountersHeader",update:function(e){this._render(e)},get_share_url:function(e){var t=e.getSocialNetworks();return t?t.length?t[0].getUrl():void 0:!1},_render_to_html:function(e){if(B.HoN_v3.Partner.match("ok")&&e.has_share){var t=$u.tpl("/profile/share-stats/?from={from}&shared_user_id={user_id}&photo_id={photo_id}&action=1&rt={rt}",{from:"encounters_view",user_id:e.uid,photo_id:"{photo_id}",rt:$r.prototype.rt});$config(e,{has_share:!1,ok_share_button:{url_tpl:t}})}return this.add_work_education(e),$super(this,arguments)},add_work_education:function(e){var t=e.person_profile&&e.person_profile.profile_field,i=null,o=null,s=null,n=null;if(t){t.map(function(e){switch(e.id){case"work":i=e,o=e.display_value;break;case"education":s=e,n=e.display_value}});var r=!(o||n);if(r)e.work_education=null;else{var a=i&&i.required_action==$p.ActionType.IMPORT_WORK_AND_EDUCATION||s&&s.required_action==$p.ActionType.IMPORT_WORK_AND_EDUCATION;e.work_education=a?{work:o||n,show_link:{is_male:e.gender===$p.SexType.MALE}}:{work:o&&{work:o},education:n&&{education:n}}}}},_render:function(e){$el.dom.html(this.wrap_el,this._render_to_html(e))},abuse_ovl_closed:function(){}})),$gpb.exists("badoo.bma.ServerAppStats","message")||($gpb.exists("badoo.bma.PermissionAcceptanceStats","message")||($gpb.exists("badoo.bma.PermissionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PermissionType=new $gpb.Enum("badoo.bma.PermissionType");t._values=[1,2,3],t.PERMISSION_TYPE_PUSH_NOTIFICATIONS=1,t.PERMISSION_TYPE_BACKGROUND_LOCATION=2,t.PERMISSION_TYPE_IN_APP_LOCATION=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PermissionAcceptanceStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PermissionAcceptanceStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.PermissionType",number:1,label:2},can_be_changed:{type:8,number:3,label:1},allowed:{type:8,number:2,label:2}}}}()),$gpb.exists("badoo.bma.SharedFriendsStats","message")||($gpb.exists("badoo.bma.SharedFriendsStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SharedFriendsStatsType=new $gpb.Enum("badoo.bma.SharedFriendsStatsType");t._values=[1,2,3],t.SHARED_FRIENDS_STATS_TYPE_NOTIFICATION_SHOWN=1,t.SHARED_FRIENDS_STATS_TYPE_PERMISSION_REQUESTED=2,t.SHARED_FRIENDS_STATS_TYPE_PERMISSION_GIVEN=3}(),$gpb.exists("badoo.bma.ExternalProviderType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderType=new $gpb.Enum("badoo.bma.ExternalProviderType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],t.UNKNOWN_EXTERNAL_PROVIDER_TYPE=0,t.EXTERNAL_PROVIDER_TYPE_FACEBOOK=1,t.EXTERNAL_PROVIDER_TYPE_VKONTAKTE=2,t.EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI=3,t.EXTERNAL_PROVIDER_TYPE_GOOGLE_PLUS=4,t.EXTERNAL_PROVIDER_TYPE_MYSPACE=5,t.EXTERNAL_PROVIDER_TYPE_HYVES=6,t.EXTERNAL_PROVIDER_TYPE_PHOTOBUCKET=7,t.EXTERNAL_PROVIDER_TYPE_YAHOO=8,t.EXTERNAL_PROVIDER_TYPE_GOOGLE=9,t.EXTERNAL_PROVIDER_TYPE_AOL=10,t.EXTERNAL_PROVIDER_TYPE_MSN=11,t.EXTERNAL_PROVIDER_TYPE_INSTAGRAM=12,t.EXTERNAL_PROVIDER_TYPE_YANDEX=13,t.EXTERNAL_PROVIDER_TYPE_LINKEDIN=14,t.EXTERNAL_PROVIDER_TYPE_TWITTER=15,t.EXTERNAL_PROVIDER_TYPE_PAYPAL=16,t.EXTERNAL_PROVIDER_TYPE_PHONEBOOK=17,t.EXTERNAL_PROVIDER_TYPE_EMAIL=18,t.EXTERNAL_PROVIDER_TYPE_HOT_OR_NOT=19,t.EXTERNAL_PROVIDER_TYPE_BADOO=20,t.EXTERNAL_PROVIDER_TYPE_FOURSQUARE=21,t.EXTERNAL_PROVIDER_TYPE_PINTEREST=22,t.EXTERNAL_PROVIDER_TYPE_YOUTUBE=23,t.EXTERNAL_PROVIDER_TYPE_HUGGLE=24,t.EXTERNAL_PROVIDER_TYPE_SWARM=25,t.EXTERNAL_PROVIDER_TYPE_CLIPBOARD=26}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SharedFriendsStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SharedFriendsStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.SharedFriendsStatsType",number:1,label:2},provider:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:2}}}}()),$gpb.exists("badoo.bma.OfferwallStats","message")||($gpb.exists("badoo.bma.StatsSourceClientScreen","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.StatsSourceClientScreen=new $gpb.Enum("badoo.bma.StatsSourceClientScreen");t._values=[7,8,9,10,11,12,13,14,15,16,17,18,19],t.SCREEN_MY_PROFILE=7,t.SCREEN_OTHER_PROFILE=8,t.SCREEN_CHAT=9,t.SCREEN_CHAT_QUOTA=10,t.SCREEN_VERY_POPULAR_BANNER=11,t.SCREEN_CHAT_TRUSTED_NETWORK_BLOCKED=12,t.SCREEN_BUILD_NETWORK=13,t.SCREEN_GROW_NETWORK=14,t.SCREEN_TRUSTED_NETWORK_SETTINGS=15,t.SCREEN_PEOPLE_NEARBY=16,t.SCREEN_OAUTH_PROVIDER=17,t.SCREEN_SERVER_NOTIFICATION=18,t.SCREEN_OFFERWALL_VIEW=19}(),$gpb.exists("badoo.bma.ClientSource","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientSource=new $gpb.Enum("badoo.bma.ClientSource");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,10001,10002,10003,10004],t.CLIENT_SOURCE_UNSPECIFIED=0,t.CLIENT_SOURCE_ENCOUNTERS=1,t.CLIENT_SOURCE_PEOPLE_NEARBY=2,t.CLIENT_SOURCE_WANT_TO_MEET_YOU=3,t.CLIENT_SOURCE_MUTUAL_ATTRACTIONS=4,t.CLIENT_SOURCE_SPOTLIGHT=5,t.CLIENT_SOURCE_FANS=6,t.CLIENT_SOURCE_PHOTO_RATING=7,t.CLIENT_SOURCE_MY_PROFILE=8,t.CLIENT_SOURCE_OTHER_PROFILE=9,t.CLIENT_SOURCE_CHAT=10,t.CLIENT_SOURCE_CHAT_QUOTA=11,t.CLIENT_SOURCE_VERY_POPULAR_BANNER=12,t.CLIENT_SOURCE_TRUSTED_NETWORK_CHAT_BLOCK=13,t.CLIENT_SOURCE_TRUSTED_NETWORK_SETTINGS=14,t.CLIENT_SOURCE_BUILD_YOUR_NETWORK=15,t.CLIENT_SOURCE_GROW_YOUR_NETWORK=16,t.CLIENT_SOURCE_OAUTH_PROVIDER=17,t.CLIENT_SOURCE_SERVER_NOTIFICATION=18,t.CLIENT_SOURCE_OFFERWALL=19,t.CLIENT_SOURCE_PROFILE_SCORE=20,t.CLIENT_SOURCE_CONTACT_IMPORT=21,t.CLIENT_SOURCE_VISITORS=22,t.CLIENT_SOURCE_FAVOURITES=23,t.CLIENT_SOURCE_BLOCKED_USERS=24,t.CLIENT_SOURCE_SETTINGS=25,t.CLIENT_SOURCE_MESSAGES=26,t.CLIENT_SOURCE_SUPER_POWERS=27,t.CLIENT_SOURCE_OTHER_PROFILE_PHOTOS=28,t.CLIENT_SOURCE_FRIENDS=29,t.CLIENT_SOURCE_YOU_WANT_TO_MEET=30,t.CLIENT_SOURCE_AWARDS=31,t.CLIENT_SOURCE_POPULARITY=32,t.CLIENT_SOURCE_HOME_SCREEN=33,t.CLIENT_SOURCE_MENU=34,t.CLIENT_SOURCE_SPP_PROMO=35,t.CLIENT_SOURCE_PROFILE_SEARCH=36,t.CLIENT_SOURCE_LOCAL_HOT=37,t.CLIENT_SOURCE_SHARED_FRIENDS=38,t.CLIENT_SOURCE_REACTIVATION_INVITES=39,t.CLIENT_SOURCE_MY_PHOTOS=40,t.CLIENT_SOURCE_NOTIFICATION_SETTINGS=41,t.CLIENT_SOURCE_FORGOT_PASSWORD=42,t.CLIENT_SOURCE_CREDITS=43,t.CLIENT_SOURCE_RATED_ME=44,t.CLIENT_SOURCE_CLIENT_NOTIFICATION=45,t.CLIENT_SOURCE_FRIEND_JOINED_NOTIFICATION=46,t.CLIENT_SOURCE_PUSH_NOTIFICATION=47,t.CLIENT_SOURCE_PROMOTED_VIDEOS=48,t.CLIENT_SOURCE_FRIENDS_OF_FRIENDS=49,t.CLIENT_SOURCE_UNIVERSITY_HOT_LIST=50,t.CLIENT_SOURCE_FRIENDS_HOT_LIST=51,t.CLIENT_SOURCE_JUMP_THE_QUEUE_INVITES=52,t.CLIENT_SOURCE_VERIFICATION=53,t.CLIENT_SOURCE_RATE_YOUR_FRIENDS=54,t.CLIENT_SOURCE_ENCOUNTERS_SHARE_PROFILE_BUTTON=55,t.CLIENT_SOURCE_INVITE_PHONEBOOK_SPLASH=56,t.CLIENT_SOURCE_INVITE_PHONEBOOK_FOOTER=57,t.CLIENT_SOURCE_HOTTEST_FRIENDS=58,t.CLIENT_SOURCE_TWITTER_PROMO=59,t.CLIENT_SOURCE_REWIND=60,t.CLIENT_SOURCE_INTERESTS=61,t.CLIENT_SOURCE_PHOTO_OF_THE_DAY=62,t.CLIENT_SOURCE_FOOTER=63,t.CLIENT_SOURCE_ENCOUNTERS_HEADER=64,t.CLIENT_SOURCE_PROFILE_HEADER=65,t.CLIENT_SOURCE_USER_MENU=66,t.CLIENT_SOURCE_SPOTLIGHT_REMINDER=67,t.CLIENT_SOURCE_PEOPLE_IN_COMMON_PLACE=68,t.CLIENT_SOURCE_UPLOAD_PHOTO=69,t.CLIENT_SOURCE_AWARD=70,t.CLIENT_SOURCE_EXTERNAL_WEB=71,t.CLIENT_SOURCE_EMBEDDED_WEB=72,t.CLIENT_SOURCE_APP_STORE=73,t.CLIENT_SOURCE_FAVOURITED_YOU=74,t.CLIENT_SOURCE_GIFTS=75,t.CLIENT_SOURCE_MOBILE=76,t.CLIENT_SOURCE_EXTRA_SHOWS_REMINDER=77,t.CLIENT_SOURCE_PAID_VIP=78,t.CLIENT_SOURCE_RISE_UP_REMINDER=79,t.CLIENT_SOURCE_PHOTO_OF_THE_DAY_NOTIFICATION=80,t.CLIENT_SOURCE_RATE_APP=81,t.CLIENT_SOURCE_LIKE_APP=82,t.CLIENT_SOURCE_MY_PROFILE_PHOTO_GRID=83,t.CLIENT_SOURCE_FACEBOOK_PROMO=84,t.CLIENT_SOURCE_MESSENGER=85,t.CLIENT_SOURCE_BUMBLE_VIBEE=86,t.CLIENT_SOURCE_PLACES=87,t.CLIENT_SOURCE_NEW_SOCIAL_PHOTOS_NOTIFICATION=88,t.CLIENT_SOURCE_CHAT_INITIAL_SCREEN=89,t.CLIENT_SOURCE_UNITED_FRIENDS=90,t.CLIENT_SOURCE_FLOATING_BUTTON=91,t.CLIENT_SOURCE_ONBOARDING_SCREEN=92,t.EXPERIMENTAL_CLIENT_SOURCE_POPULARITY=10001,t.EXPERIMENTAL_CLIENT_SOURCE_PAYMENTS=10002,t.EXPERIMENTAL_CLIENT_SOURCE_LIVE_PHOTOS=10003,t.EXPERIMENTAL_CLIENT_SOURCE_LIVE_PHOTOS_PROFILE=10004}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.OfferwallStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.OfferwallStats",t.prototype._descriptor={fields:{screen:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:1,label:1},source_screen:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ServerAppStatsStartSource","message")||($gpb.exists("badoo.bma.ServerAppStatsStartSourceType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAppStatsStartSourceType=new $gpb.Enum("badoo.bma.ServerAppStatsStartSourceType");t._values=[0,1,2,3,4,5],t.APP_START_SOURCE_UNKNOWN=0,t.APP_START_SOURCE_LAUNCHER=1,t.APP_START_SOURCE_WIDGET=2,t.APP_START_SOURCE_EMAIL=3,t.APP_START_SOURCE_PUSH=4,t.APP_START_SOURCE_SMS=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAppStatsStartSource=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerAppStatsStartSource",t.prototype._descriptor={fields:{source_id:{type:9,number:3,label:1},screen:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:2,label:1},start_screen:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},type:{type:14,type_name:"badoo.bma.ServerAppStatsStartSourceType",number:1,label:1}}}}()),$gpb.exists("badoo.bma.ImageStats","message")||($gpb.exists("badoo.bma.ImageStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ImageStatsType=new $gpb.Enum("badoo.bma.ImageStatsType");t._values=[1,2,3],t.IMAGE_STATS_TYPE_BROKEN_BINARY=1,t.IMAGE_STATS_TYPE_SERVER_ERROR=2,t.IMAGE_STATS_TYPE_INVALID_CONTENT_TYPE=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ImageStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ImageStats",t.prototype._descriptor={fields:{image_url:{type:9,number:1,label:1},error_data:{type:9,number:4,label:1},type:{type:14,type_name:"badoo.bma.ImageStatsType",number:2,label:2},http_response_code:{type:5,number:3,label:1}}}}()),$gpb.exists("badoo.bma.FacebookLikeStats","message")||($gpb.exists("badoo.bma.CommonStatsEventType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonStatsEventType=new $gpb.Enum("badoo.bma.CommonStatsEventType");t._values=[1,2,3,4,5,6,7,8,9,10],t.COMMON_EVENT_CLICK=1,t.COMMON_EVENT_SHOW=2,t.COMMON_EVENT_DISCARD=3,t.COMMON_EVENT_DISMISS=4,t.COMMON_EVENT_REPLACE=5,t.COMMON_EVENT_IGNORE=6,t.COMMON_EVENT_INTERRUPT=7,t.COMMON_EVENT_SKIP=8,t.COMMON_EVENT_SECONDARY_ACTION=9,t.COMMON_EVENT_FLOW_COMPLETE=10}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FacebookLikeStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FacebookLikeStats",t.prototype._descriptor={fields:{screen:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1},event_type:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1}}}}()),$gpb.exists("badoo.bma.StarRatingStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.StarRatingStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.StarRatingStats",t.prototype._descriptor={fields:{shared:{type:8,number:2,label:1},dismissed:{type:8,number:1,label:1}}}}(),$gpb.exists("badoo.bma.InviteStats","message")||($gpb.exists("badoo.bma.InviteStatsActionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InviteStatsActionType=new $gpb.Enum("badoo.bma.InviteStatsActionType");t._values=[1,2,3,4,5,6,7],t.INVITE_STATS_ACTION_TYPE_FOOTER_SEEN=1,t.INVITE_STATS_ACTION_TYPE_CONNECT=2,t.INVITE_STATS_ACTION_TYPE_LATER=3,t.INVITE_STATS_ACTION_TYPE_ACCESS_ALLOWED=4,t.INVITE_STATS_ACTION_TYPE_ACCESS_DENIED=5,t.INVITE_STATS_ACTION_TYPE_IGNORE=6,t.INVITE_STATS_ACTION_TYPE_SEEN=7}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.InviteStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InviteStats",t.prototype._descriptor={fields:{client_source:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1},action_type:{type:14,type_name:"badoo.bma.InviteStatsActionType",number:2,label:1},provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:3,label:1}}}}()),$gpb.exists("badoo.bma.ClientNotificationStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientNotificationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientNotificationStats",t.prototype._descriptor={fields:{notification_id:{type:9,number:1,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1}}}}(),$gpb.exists("badoo.bma.RushHourStats","message")||($gpb.exists("badoo.bma.RushHourStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RushHourStatsType=new $gpb.Enum("badoo.bma.RushHourStatsType");t._values=[1,2,3],t.GAME_START=1,t.GAME_FAILED=2,t.GAME_SUCCESS=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.RushHourStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RushHourStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.RushHourStatsType",number:1,label:2}}}}()),$gpb.exists("badoo.bma.BrowserPushStats","message")||($gpb.exists("badoo.bma.BrowserPushEvent","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.BrowserPushEvent=new $gpb.Enum("badoo.bma.BrowserPushEvent");t._values=[1,2,3,4,5,6,7,8,9,10],t.BROWSER_PUSH_EVENT_PRE_DIALOG_SHOW=1,t.BROWSER_PUSH_EVENT_PRE_DIALOG_DISMISS=2,t.BROWSER_PUSH_EVENT_PRE_DIALOG_ACCEPT=3,t.BROWSER_PUSH_EVENT_NATIVE_DIALOG_SHOW=4,t.BROWSER_PUSH_EVENT_NATIVE_DIALOG_DISMISS=5,t.BROWSER_PUSH_EVENT_NATIVE_DIALOG_ACCEPT=6,t.BROWSER_PUSH_EVENT_WORKER_ACTIVATE=7,t.BROWSER_PUSH_EVENT_WORKER_INSTALL=8,t.BROWSER_PUSH_EVENT_WORKER_PUSH=9,t.BROWSER_PUSH_EVENT_WORKER_CLICK=10}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.BrowserPushStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.BrowserPushStats",t.prototype._descriptor={fields:{event:{type:14,type_name:"badoo.bma.BrowserPushEvent",number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:1}}}}()),$gpb.exists("badoo.bma.PromoBannerStats","message")||($gpb.exists("badoo.bma.PromoBlockPosition","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBlockPosition=new $gpb.Enum("badoo.bma.PromoBlockPosition");t._values=[0,1,2,3,4,5,6,7,10001],t.PROMO_BLOCK_POSITION_UNSPECIFIED=0,t.PROMO_BLOCK_POSITION_IN_LIST=1,t.PROMO_BLOCK_POSITION_HORIZONTAL=2,t.PROMO_BLOCK_POSITION_GRID=3,t.PROMO_BLOCK_POSITION_IN_LIST_TOPMOST=4,t.PROMO_BLOCK_POSITION_INITIAL_CHAT_SCREEN=5,t.PROMO_BLOCK_POSITION_CHAT_BLOCKED_FORM=6,t.PROMO_BLOCK_POSITION_CREDITS_PROMO=7,t.EXPERIMENTAL_PROMO_BLOCK_POSITION_AWARDS_PAGE=10001}(),$gpb.exists("badoo.bma.PromoBlockType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBlockType=new $gpb.Enum("badoo.bma.PromoBlockType");t._values=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,10001,10002,10003,10004],t.PROMO_BLOCK_TYPE_RISEUP=1,t.PROMO_BLOCK_TYPE_RISEUP_2=2,t.PROMO_BLOCK_TYPE_SPECIAL_DELIVERY=3,t.PROMO_BLOCK_TYPE_CHAT_WITH_NEWBIES=4,t.PROMO_BLOCK_TYPE_CHAT_WITH_TIRED=5,t.PROMO_BLOCK_TYPE_FAVOURITES=6,t.PROMO_BLOCK_TYPE_LIKED_YOU=7,t.PROMO_BLOCK_TYPE_SPP=8,t.PROMO_BLOCK_TYPE_SPOTLIGHT=9,t.PROMO_BLOCK_TYPE_EXTRA_SHOWS=10,t.PROMO_BLOCK_TYPE_EXTRA_SHOWS_2=11,t.PROMO_BLOCK_TYPE_ADD_PHOTO=12,t.PROMO_BLOCK_TYPE_ADD_MORE_PHOTOS=13,t.PROMO_BLOCK_TYPE_FIND_FRIENDS=14,t.PROMO_BLOCK_TYPE_DOWNLOAD_MOBILE=15,t.PROMO_BLOCK_TYPE_SPECIAL_DELIVERY_2=16,t.PROMO_BLOCK_TYPE_BOOST=17,t.PROMO_BLOCK_TYPE_PHOTO_OF_THE_DAY=18,t.PROMO_BLOCK_TYPE_ADD_MORE_EXTERNAL_PHOTOS=19,t.PROMO_BLOCK_TYPE_INSTAGRAM=20,t.PROMO_BLOCK_TYPE_VIDEO=21,t.PROMO_BLOCK_TYPE_STICKERS=22,t.PROMO_BLOCK_TYPE_MY_PROFILE_SCORE=23,t.PROMO_BLOCK_TYPE_GIFT=24,t.PROMO_BLOCK_TYPE_ADD_INTERESTS=25,t.PROMO_BLOCK_TYPE_SECRET_COMMENTS=26,t.PROMO_BLOCK_TYPE_EXCLUSIVE_ATTENTION=27,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_LOCATION=28,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_TN=29,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_BUMPED=30,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_INTERESTS=31,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_PRIVATE_PHOTOS=32,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_MORE_PHOTOS=33,t.PROMO_BLOCK_TYPE_GO_NATIVE_FROM_MW_CHAT=34,t.PROMO_BLOCK_TYPE_GAME_UNDO=35,t.PROMO_BLOCK_TYPE_CUSTOMIZE_PROFILE=36,t.PROMO_BLOCK_TYPE_VIEW_OTHERS_INVISIBLY=37,t.PROMO_BLOCK_TYPE_MOST_BEAUTIFUL_ENCOUNTERS=38,t.PROMO_BLOCK_TYPE_FACEBOOK_AD=39,t.PROMO_BLOCK_TYPE_TOP_CHAT=40,t.PROMO_BLOCK_TYPE_DOUBLE_CREDITS=41,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_RISEUP=10001,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_EXTRA_SHOWS=10002,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_SPOTLIGHT=10003,t.EXPERIMENTAL_PROMO_BLOCK_TYPE_LIVE_PHOTOS=10004
}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBannerStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromoBannerStats",t.prototype._descriptor={fields:{context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1},promo_block_position:{type:14,type_name:"badoo.bma.PromoBlockPosition",number:5,label:1},banner_id:{type:9,number:2,label:1},promo_block_type:{type:14,type_name:"badoo.bma.PromoBlockType",number:4,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:1,label:1}}}}()),$gpb.exists("badoo.bma.CommonStats","message")||($gpb.exists("badoo.bma.CommonStatsSource","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonStatsSource=new $gpb.Enum("badoo.bma.CommonStatsSource");t._values=[1,2,3,4,5,6,7,10001,10002,10003],t.HIDE_PRESENCE_WITHOUT_SPP=1,t.HIDE_PROFILE_VISITOR_WITHOUT_SPP=2,t.HIDE_SPP_WITHOUT_SPP=3,t.OPEN_GRID_MODE_IN_PROFILE=4,t.CONNECT_FACEBOOK_PROMO=5,t.DOWNLOAD_MOBILE_APP=6,t.YOUTUBE_SUBSCRIBE_BUTTON=7,t.EXPERIMENTAL_BURIN40_ENCOUNTERS=10001,t.EXPERIMENTAL_BURIN40_SPP=10002,t.EXPERIMENTAL_BURIN40_SPP_TRIAL=10003}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CommonStats",t.prototype._descriptor={fields:{source:{type:14,type_name:"badoo.bma.CommonStatsSource",number:1,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}()),$gpb.exists("badoo.bma.RegistrationStats","message")||($gpb.exists("badoo.bma.RegistrationAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RegistrationAction=new $gpb.Enum("badoo.bma.RegistrationAction");t._values=[1,2],t.REGISTRATION_ACTION_STARTED=1,t.REGISTRATION_ACTION_CANCELLED=2}(),$gpb.exists("badoo.bma.RegistrationMethod","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RegistrationMethod=new $gpb.Enum("badoo.bma.RegistrationMethod");t._values=[1,2],t.REGISTRATION_METHOD_EMAIL=1,t.REGISTRATION_METHOD_FACEBOOK=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.RegistrationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RegistrationStats",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.RegistrationAction",number:1,label:1},method:{type:14,type_name:"badoo.bma.RegistrationMethod",number:2,label:1}}}}()),$gpb.exists("badoo.bma.SharingStats","message")||($gpb.exists("badoo.bma.SharingStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SharingStatsType=new $gpb.Enum("badoo.bma.SharingStatsType");t._values=[1,2,3,4,5,6,7,8,9,10,11],t.SHARING_STATS_TYPE_SOCIAL_CLICK=1,t.SHARING_STATS_TYPE_SOCIAL_POST=2,t.SHARING_STATS_TYPE_VIEW_MY_AWARD=3,t.SHARING_STATS_TYPE_VIEW_OTHERS_AWARD=4,t.SHARING_STATS_TYPE_VIEW_GET_MORE_AWARDS=5,t.SHARING_STATS_TYPE_VIEW_SHARING_OVERLAY=6,t.SHARING_STATS_TYPE_BUTTON_CLICK=7,t.SHARING_STATS_TYPE_PERMISSION_GIVEN=8,t.SHARING_STATS_TYPE_PERMISSION_DENIED=9,t.SHARING_STATS_TYPE_OTHER_CLICK=10,t.SHARING_STATS_TYPE_PERMISSION_REQUESTED=11}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SharingStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SharingStats",t.prototype._descriptor={fields:{provider_id:{type:9,number:2,label:1},uid:{type:9,number:5,label:1},sharing_stats_type:{type:14,type_name:"badoo.bma.SharingStatsType",number:3,label:1},award_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},promoted_video_id:{type:9,number:6,label:1},provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:7,label:1}}}}()),$gpb.exists("badoo.bma.InitialChatScreenStats","message")||($gpb.exists("badoo.bma.ChatBlockId","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ChatBlockId=new $gpb.Enum("badoo.bma.ChatBlockId");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],t.CHAT_BLOCK_ID_UNKNOWN=0,t.CHAT_BLOCK_ID_INITIAL=1,t.CHAT_BLOCK_ID_START_CONVERSATION=2,t.CHAT_BLOCK_ID_MESSAGES=3,t.CHAT_BLOCK_ID_ERROR=4,t.CHAT_BLOCK_ID_PROMO=5,t.CHAT_BLOCK_ID_ADD_PHOTO=6,t.CHAT_BLOCK_ID_ROULETTE=7,t.CHAT_BLOCK_ID_INCOMING_MESSAGE=8,t.CHAT_BLOCK_ID_TEEN_BLOCKED=9,t.CHAT_BLOCK_ID_FRIEND_CONNECTION=10,t.CHAT_BLOCK_ID_LIMIT_REACHED=11,t.CHAT_BLOCK_ID_PAIDMESSAGES=12,t.CHAT_BLOCK_ID_SEARCH_CONDITIONS=13,t.CHAT_BLOCK_ID_VERIFY_FOR_MAN=14,t.CHAT_BLOCK_ID_VERY_POPULAR=15,t.CHAT_BLOCK_ID_NEWBIE=16,t.CHAT_BLOCK_ID_LIMIT_CLOSE=17,t.CHAT_BLOCK_ID_SEND_SMILE=18,t.CHAT_BLOCK_ID_CONTACTS_FOR_CREDITS=19,t.CHAT_BLOCK_ID_CONVERSATION_GIFTS_BLOCKER=20,t.CHAT_BLOCK_ID_VERIFY_FOR_WOMAN=21,t.CHAT_BLOCK_ID_MATCH_WITH_STICKERS=22,t.CHAT_BLOCK_ID_MATCH_WITH_GIFTS=23,t.CHAT_BLOCK_ID_PLACES_IN_COMMON=24}(),$gpb.exists("badoo.bma.InitialChatScreenContext","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InitialChatScreenContext=new $gpb.Enum("badoo.bma.InitialChatScreenContext");t._values=[1],t.INITIAL_CHAT_SCREEN_CONTEXT_CTA=1}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.InitialChatScreenStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InitialChatScreenStats",t.prototype._descriptor={fields:{screen_type:{type:14,type_name:"badoo.bma.ChatBlockId",number:1,label:1},screen_context:{type:14,type_name:"badoo.bma.InitialChatScreenContext",number:2,label:1},promo_block_type:{type:14,type_name:"badoo.bma.PromoBlockType",number:3,label:1},event_type:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:4,label:1}}}}()),$gpb.exists("badoo.bma.InAppNotificationStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InAppNotificationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InAppNotificationStats",t.prototype._descriptor={fields:{notification_id:{type:9,number:1,label:1},screen:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1},event_type:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:2,label:1}}}}(),$gpb.exists("badoo.bma.SpotlightStats","message")||($gpb.exists("badoo.bma.SpotlightStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SpotlightStatsType=new $gpb.Enum("badoo.bma.SpotlightStatsType");t._values=[1,2],t.SPOTLIGHT_STATS_TYPE_ADD_BUTTON_VIEWED=1,t.SPOTLIGHT_STATS_TYPE_ADD_BUTTON_PRESSED=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SpotlightStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SpotlightStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.SpotlightStatsType",number:1,label:1}}}}()),$gpb.exists("badoo.bma.FacebookAppRequestStats","message")||($gpb.exists("badoo.bma.FacebookAppRequestStatsType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FacebookAppRequestStatsType=new $gpb.Enum("badoo.bma.FacebookAppRequestStatsType");t._values=[1,2,3,4,5,6],t.FACEBOOK_APP_REQUEST_STATS_TYPE_NOTIFICATION_SHOWN=1,t.FACEBOOK_APP_REQUEST_STATS_TYPE_NOTIFICATION_CONFIRM=2,t.FACEBOOK_APP_REQUEST_STATS_TYPE_NOTIFICATION_DENY=3,t.FACEBOOK_APP_REQUEST_STATS_TYPE_FB_DIALOG_OPEN=4,t.FACEBOOK_APP_REQUEST_STATS_TYPE_FB_DIALOG_INVITES_SENT=5,t.FACEBOOK_APP_REQUEST_STATS_TYPE_FB_DIALOG_INVITES_CANCEL=6}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FacebookAppRequestStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FacebookAppRequestStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.FacebookAppRequestStatsType",number:1,label:2},context:{type:14,type_name:"badoo.bma.ClientSource",number:2,label:2}}}}()),$gpb.exists("badoo.bma.VerificationStats","message")||($gpb.exists("badoo.bma.UserVerificationMethodType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UserVerificationMethodType=new $gpb.Enum("badoo.bma.UserVerificationMethodType");t._values=[1,2,3,101,102,103,104],t.VERIFY_SOURCE_PHONE_NUMBER=1,t.VERIFY_SOURCE_SPP=2,t.VERIFY_SOURCE_EXTERNAL_PROVIDER=3,t.VERIFY_SOURCE_FACEBOOK=101,t.VERIFY_SOURCE_TWITTER=102,t.VERIFY_SOURCE_GPLUS=103,t.VERIFY_SOURCE_VKONTAKTE=104}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.VerificationStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VerificationStats",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.UserVerificationMethodType",number:1,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:3,label:1},provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1}}}}()),$gpb.exists("badoo.bma.TrustedNetworkStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.TrustedNetworkStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.TrustedNetworkStats",t.prototype._descriptor={fields:{person_id:{type:9,number:3,label:1},screen:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:1,label:1},source_screen:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},provider_id:{type:9,number:2,label:1}}}}(),$gpb.exists("badoo.bma.FriendOrCelebritySharingStats","message")||($gpb.exists("badoo.bma.CelebrityFriendSharing","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CelebrityFriendSharing=new $gpb.Enum("badoo.bma.CelebrityFriendSharing");t._values=[1,2,3],t.CELEBRITY_FRIEND_SHARING_CLICK=1,t.CELEBRITY_FRIEND_SHARING_POST=2,t.CELEBRITY_FRIEND_SHARING_FB_GRAPH=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendOrCelebritySharingStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FriendOrCelebritySharingStats",t.prototype._descriptor={fields:{provider_id:{type_name:"badoo.bma.ExternalProviderType",number:4,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_PROVIDER_TYPE"}},is_celebrity:{type:8,number:2,label:1},person_id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:6,label:1},action:{type:14,type_name:"badoo.bma.CelebrityFriendSharing",number:5,label:1},is_hidden:{type:8,number:3,label:1}}}}()),$gpb.exists("badoo.bma.ServerResponseInvalidStats","message")||($gpb.exists("badoo.bma.ServerMessageInvalidType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerMessageInvalidType=new $gpb.Enum("badoo.bma.ServerMessageInvalidType");t._values=[1,2,3,4],t.SERVER_MESSAGE_INVALID_UNKNOWN=1,t.SERVER_MESSAGE_INVALID_MISSING_FIELD=2,t.SERVER_MESSAGE_INVALID_INCORRECT_BODY=3,t.SERVER_MESSAGE_INVALID_CANT_DECODE=4}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerResponseInvalidStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerResponseInvalidStats",t.prototype._descriptor={fields:{message_bytes:{type:12,number:1,label:1},type:{type_name:"badoo.bma.ServerMessageInvalidType",number:2,label:1,type:14,options:{"default":"SERVER_MESSAGE_INVALID_UNKNOWN"}},additional_data:{type:9,number:6,label:3}}}}()),$gpb.exists("badoo.bma.PromotedVideoStats","message")||($gpb.exists("badoo.bma.VideoStatsAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VideoStatsAction=new $gpb.Enum("badoo.bma.VideoStatsAction");t._values=[1,2,3],t.VIDEO_STATS_ACTION_PLAY_CLICKED=1,t.VIDEO_STATS_ACTION_SCROLL_TO_VIDEO=2,t.VIDEO_STATS_ACTION_WATCHED=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromotedVideoStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromotedVideoStats",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.VideoStatsAction",number:2,label:1},id:{type:9,number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}()),$gpb.exists("badoo.bma.DwarfsStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.DwarfsStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.DwarfsStats",t.prototype._descriptor={fields:{dwarf_codes:{type:5,number:1,label:3}}}}(),$gpb.exists("badoo.bma.VipStats","message")||($gpb.exists("badoo.bma.VipStatsEvent","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VipStatsEvent=new $gpb.Enum("badoo.bma.VipStatsEvent");t._values=[1,2,3,4,5],t.VIP_STATS_EVENT_WHATS_NEW_SHOWN=1,t.VIP_STATS_EVENT_WHATS_NEW_PURCHASE_CLICK=2,t.VIP_STATS_EVENT_PROMO_DISABLED_SHOWN=3,t.VIP_STATS_EVENT_PROMO_DISABLED_PURCHASE_CLICK=4,t.VIP_STATS_EVENT_PROMO_ENABLED_SHOWN=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.VipStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VipStats",t.prototype._descriptor={fields:{event:{type:14,type_name:"badoo.bma.VipStatsEvent",number:1,label:1}}}}()),$gpb.exists("badoo.bma.VideoStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VideoStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VideoStats",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.VideoStatsAction",number:2,label:1},client_source:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1}}}}(),$gpb.exists("badoo.bma.PNBPromoBannerStats","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PNBPromoBannerStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PNBPromoBannerStats",t.prototype._descriptor={fields:{banner_id:{type:9,number:2,label:1},event:{type:14,type_name:"badoo.bma.CommonStatsEventType",number:1,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerAppStats=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerAppStats",t.prototype._descriptor={fields:{permission_acceptance_stats:{type:11,type_name:"badoo.bma.PermissionAcceptanceStats",number:12,label:1},registration_stats:{type:11,type_name:"badoo.bma.RegistrationStats",number:5,label:1},offerwall_source:{type:11,type_name:"badoo.bma.OfferwallStats",number:3,label:1},start_source:{type:11,type_name:"badoo.bma.ServerAppStatsStartSource",number:1,label:1},image_stats:{type:11,type_name:"badoo.bma.ImageStats",number:15,label:3},facebook_like_stats:{type:11,type_name:"badoo.bma.FacebookLikeStats",number:23,label:1},sharing_stats:{type:11,type_name:"badoo.bma.SharingStats",number:4,label:1},invite_stats:{type:11,type_name:"badoo.bma.InviteStats",number:10,label:1},client_notification_stats:{type:11,type_name:"badoo.bma.ClientNotificationStats",number:21,label:1},rush_hour_stats:{type:11,type_name:"badoo.bma.RushHourStats",number:14,label:1},browser_push_stats:{type:11,type_name:"badoo.bma.BrowserPushStats",number:27,label:1},promo_banner_stats:{type:11,type_name:"badoo.bma.PromoBannerStats",number:20,label:1},server_response_invalid_stats:{type:11,type_name:"badoo.bma.ServerResponseInvalidStats",number:16,label:1},common_stats:{type:11,type_name:"badoo.bma.CommonStats",number:24,label:1},shared_friends_stats:{type:11,type_name:"badoo.bma.SharedFriendsStats",number:11,label:1},star_rating_stats:{type:11,type_name:"badoo.bma.StarRatingStats",number:7,label:1},initial_chat_screen_stats:{type:11,type_name:"badoo.bma.InitialChatScreenStats",number:26,label:1},spotlight_stats:{type:11,type_name:"badoo.bma.SpotlightStats",number:8,label:1},verification_stats:{type:11,type_name:"badoo.bma.VerificationStats",number:13,label:1},tn_source:{type:11,type_name:"badoo.bma.TrustedNetworkStats",number:2,label:1},friend_or_celebrity_sharing:{type:11,type_name:"badoo.bma.FriendOrCelebritySharingStats",number:6,label:1},in_app_notification_stats:{type:11,type_name:"badoo.bma.InAppNotificationStats",number:19,label:1},promoted_video_stats:{type:11,type_name:"badoo.bma.PromotedVideoStats",number:25,label:1},dwarfs_stats:{type:11,type_name:"badoo.bma.DwarfsStats",number:28,label:1},vip_stats:{type:11,type_name:"badoo.bma.VipStats",number:22,label:1},facebook_app_request_stats:{type:11,type_name:"badoo.bma.FacebookAppRequestStats",number:9,label:1},video_stats:{type:11,type_name:"badoo.bma.VideoStats",number:18,label:1},pnb_promo_banner_stats:{type:11,type_name:"badoo.bma.PNBPromoBannerStats",number:17,label:1}}}}()),B.ProfileVideo||(B.ProfileVideo=$class($u.Observable,{name:"ProfileVideo",constructor:function(e){$super(this,arguments),this.wrap_el=e,this.$b=B.on({visibilitychange:this.visibilityChanged,gallery_photo_change:this.galleryPhotoChanged},this),this.$encounters=B.Encounters.on({profile_details_show:this.destroyElements},this)},destroy:function(){this.destroyElements(),B.un(this.$b)},destroyElements:function(){this.video_elem&&(this.video_elem.pause(),$el.remove(this.video_elem),this.video_elem=null,this.setState())},playbackStart:function(){this.setState("mm_video_playback"),this.video_elem.play(),B.ProfileVideo.sendStat($p.VideoStatsAction.VIDEO_STATS_ACTION_PLAY_CLICKED)},galleryPhotoChanged:function(e){this.photo=e,e.video?(this.createPlayBtn(),this.createVideoElement(e.video.url),this.setState("mm_video")):(this.destroyElements(),this.setState())},createPlayBtn:function(){this.playbutton_$e=$e.on({".js-video-play":this.playbackStart},this)},createVideoElement:function(){this.video_elem=document.createElement("video"),this.video_elem.src=this.photo.video.url,this.video_elem.type="video/mp4",this.video_elem.loop=!0,this.video_elem.className="js-html5-video",this.video_holder=$el.down(this.wrap_el,".js-mm-photo-holder"),this.video_holder.appendChild(this.video_elem),$e.add(this.video_elem,"click",this.playbackPause,this),$e.add(this.video_elem,"playing",this.playbackStarted,this)},playbackPause:function(){this.videoIsBeingPlayed&&(this.video_elem.pause(),this.videoIsBeingPlayed=!1,this.setState("mm_video_pause"))},setState:function(e){$el.del(this.wrap_el,"mm_video"),$el.del(this.wrap_el,"mm_video_playback"),$el.del(this.wrap_el,"mm_video_pause"),e&&$el.add(this.wrap_el,e)},playbackStarted:function(){this.videoIsBeingPlayed=!0},visibilityChanged:function(e){this.video_elem&&(e?this.video_elem.pause():this.videoIsBeingPlayed&&this.video_elem.play())}})),$config(B.ProfileVideo,{sendStat:function(e){var t;switch(B.App.state){case"big-photo-view":t=$p.ClientSource.CLIENT_SOURCE_OTHER_PROFILE;break;case"mm":t=$p.ClientSource.CLIENT_SOURCE_ENCOUNTERS}var i=(new $p.ServerAppStats).setVideoStats((new $p.VideoStats).setClientSource(t).setAction(e));new $gpb.Rpc($p.MessageType.SERVER_APP_STATS,i).request()}}),$gpb.exists("badoo.bma.ServerPersonProfileEditForm","message")||($gpb.exists("badoo.bma.ProfileOptionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileOptionType=new $gpb.Enum("badoo.bma.ProfileOptionType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,10001,10002,10003,10004],t.UNKNOWN_PROFILE_OPTION_TYPE=0,t.PROFILE_OPTION_TYPE_LOCATION=1,t.PROFILE_OPTION_TYPE_ABOUT_ME=2,t.PROFILE_OPTION_TYPE_RELATIONSHIP=3,t.PROFILE_OPTION_TYPE_SEXUALITY=4,t.PROFILE_OPTION_TYPE_APPEARANCE=5,t.PROFILE_OPTION_TYPE_LIVING=6,t.PROFILE_OPTION_TYPE_CHILDREN=7,t.PROFILE_OPTION_TYPE_SMOKING=8,t.PROFILE_OPTION_TYPE_DRINKING=9,t.PROFILE_OPTION_TYPE_EDUCATION=10,t.PROFILE_OPTION_TYPE_LANGUAGES=11,t.PROFILE_OPTION_TYPE_WORK=12,t.PROFILE_OPTION_TYPE_APPEARANCE_HEIGHT=13,t.PROFILE_OPTION_TYPE_APPEARANCE_WEIGHT=14,t.PROFILE_OPTION_TYPE_APPEARANCE_BODY_TYPE=15,t.PROFILE_OPTION_TYPE_APPEARANCE_EYE_COLOR=16,t.PROFILE_OPTION_TYPE_APPEARANCE_HAIR_COLOR=17,t.PROFILE_OPTION_TYPE_WORK_JOB=18,t.PROFILE_OPTION_TYPE_WORK_COMPANY=19,t.PROFILE_OPTION_TYPE_WORK_INCOME=20,t.PROFILE_OPTION_TYPE_INTERESTED_IN=21,t.PROFILE_OPTION_TYPE_WORK_GENERAL=22,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_INSTITUTION=10001,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_GRADUATION_YEAR=10002,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_PROFESSION=10003,t.EXPERIMENTAL_PROFILE_OPTION_TYPE_FACEBOOK_COMPANY_NAME=10004}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerPersonProfileEditForm=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerPersonProfileEditForm",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.ProfileOptionType",number:1,label:3}}}}()),B.HoN_v3.Education||(B.HoN_v3.Education=new $class({_curr_user_profile:null,_viewing_person:null,_import_btn:null,init:function(){this.currentUserRequestToken=B.HoN_v3.Models.Cache.CurrentUserCache.fetch(this._on_self_model,this),B.HoN_v3.ExternalProvidersEducation.get_cached("facebook"),B.HoN_v3.ExternalProvidersEducation.get_cached("vk")},destroy:function(){this.currentUserRequestToken&&(B.HoN_v3.Models.Cache.CurrentUserCache.cancel(this.currentUserRequestToken),this.currentUserRequestToken=null),this._$e&&($e.un(this._$e),this._$e=null),this.$b&&(B.un(this.$b),this.$b=null),this._import_update=null},set_viewing_person:function(e){this._viewing_person=e},_on_self_model:function(e){this._curr_user_profile=e.getUser(),this._$e=$e.on({".js-education-import":this._on_open_education_import,".js-profile-education-show-all":this._on_show_all_education,".js-education-form-submit":this._on_education_form_submit},this),this.$b=B.on({"fb:education_access_denied":this._on_education_access_failed,"fb:education_updated":this._on_update_education_block},this)},_on_show_all_education:function(){var e=this._get_profile_option("work"),t=e&&e.getDisplayValue(),i=this._get_profile_option("education"),o=i&&i.getDisplayValue(),s=this._isFbOrVkConnected(),n=e&&e.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION&&i&&i.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION,r=""===o||""===t;if(s)n?B.Ovl.open({type:"education-not-found"}):r&&this._get_edit_form();else{var a=B.HoN_v3.ExternalProvidersEducation.get_cached("vk"),l=B.HoN_v3.ExternalProvidersEducation.get_cached("facebook");B.Ovl.open({type:"education-update",userPic:this._viewing_person.image,userName:this._viewing_person.name,userGender:this._viewing_person.gender,vk_enabled:!!a,fb_enabled:!!l})}},_isFbOrVkConnected:function(){var e,t=this._curr_user_profile.getVerifiedInformation(),i=!1,o=t&&t.getMethods();if(o)for(var s=0;s<o.length;s++)o[s].getType()==$p.UserVerificationMethodType.VERIFY_SOURCE_EXTERNAL_PROVIDER&&(e=o[s].getExternalProviderData(),(e.getType()==$p.ExternalProviderType.EXTERNAL_PROVIDER_TYPE_FACEBOOK||e.getType()==$p.ExternalProviderType.EXTERNAL_PROVIDER_TYPE_VKONTAKTE)&&(i=o[s].getIsConfirmed()||i));return i},_get_profile_option:function(e){var t=this._curr_user_profile,i=[];t.getProfileFields?i=t.getProfileFields()||[]:t.getProfileField&&(i=t.getProfileField()||[]);for(var o=0;o<i.length;o++){var s=i[o];if(s.getId()===e)return s}},_is_work_education_available:function(){return!(!this._get_profile_option("work")&&!this._get_profile_option("education"))},_is_own_profile:function(){return null===this._viewing_person},_get_edit_form:function(){var e=(new $p.ServerPersonProfileEditForm).addType($p.ProfileOptionType.PROFILE_OPTION_TYPE_EDUCATION).addType($p.ProfileOptionType.PROFILE_OPTION_TYPE_WORK);new $gpb.Rpc($p.MessageType.SERVER_GET_PERSON_PROFILE_EDIT_FORM,e).on($p.MessageType.CLIENT_PERSON_PROFILE_EDIT_FORM,this._on_edit_form,this).request()},_on_edit_form:function(e,t){if(e)return this._import_update=null,void 0;if(this._import_update)return B.HoN_v3.fire("education_updated",t),this._import_update=null,void 0;var i=t.getOptions()||[],o=this._build_options(i,"education",!0),s=this._build_options(i,"work",!0);B.Ovl.open({type:"education-show-hidden",userName:this._viewing_person.name,userGender:this._viewing_person.gender,educationOptions:o.options,educationCurrentValue:o.value,educationCurrentId:o.option,workOptions:s.options,workCurrentValue:s.value,workCurrentId:s.option})},_build_options:function(e,t,i){for(var o,s,n,r,a={options:[],value:null,option:null},l=0;l<e.length;l++){var _=e[l];if(_.getId()===t)return o=_.getCurrentOptionId(),n="",r="",s=_.getPossibleValues(),s&&(a.options=_.getPossibleValues().map(function(e){var t=e.getValue(),s=e.getDisplayValue();return(t===o&&!i||t!==o&&i)&&(n=s,r=t),{value:t,option:s}}),a.value=r,a.option=n),a}return a},_on_open_education_import:function(e){var t=e.getAttribute("data-provider"),i={vk:"vk",fb:"facebook"},o=B.HoN_v3.ExternalProvidersEducation.get_cached(i[t],!0),s=o&&o.getAuthData().getOauthUrl();s&&(s+="&force_code_exchange=1",this._watch_popup(window.open(s,"auth","width=600,height=600")),this._import_btn=e,this._import_update=this._is_own_profile())},_on_update_education_block:function(){this._import_btn=null,this._get_edit_form()},_on_education_access_failed:function(){B.Ovl.open({type:"education-access-failed"})},_on_education_form_submit:function(e){this._import_btn=e;var t=$el.up(e,"form");this._save_education(t)},_watch_popup:function(e){this._stop_watching(),this._interval=setInterval(this._check_popup.bind(this,e),1e3)},_check_popup:function(e){e.closed&&(this._stop_watching(),this._import_btn&&(B.Toggle.manage(this._import_btn),this._import_btn=null))},_stop_watching:function(){this._interval&&(clearInterval(this._interval),this._interval=null)},_save_education:function(e){this._save_profile(e.job_id&&e.job_id.value,e.university_id&&e.university_id.value)},_save_profile:function(e,t){var i=new $p.SaveProfile;e&&i.addUpdatedValues((new $p.UpdatedProfileValues).setProfileOptionType($p.ProfileOptionType.PROFILE_OPTION_TYPE_WORK).setProfileOptionValue(e)),t&&i.addUpdatedValues((new $p.UpdatedProfileValues).setProfileOptionType($p.ProfileOptionType.PROFILE_OPTION_TYPE_EDUCATION).setProfileOptionValue(t)),new $gpb.Rpc($p.MessageType.SERVER_SAVE_PERSON_PROFILE,i).on([$p.MessageType.CLIENT_PERSON,$p.MessageType.CLIENT_PERSON_PROFILE,$p.MessageType.CLIENT_PERSON_STATUS],this._on_education_saved,this).request()},_on_education_saved:function(e,t,i){this._curr_user_profile=i,this._is_work_education_available()?(B.HoN_v3.fire("education-overlay:close"),B.HoN_v3.fire("education_updated",i)):B.Ovl.open({type:"education-not-found"})}})),$gpb.exists("badoo.bma.PhonebookContactType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhonebookContactType=new $gpb.Enum("badoo.bma.PhonebookContactType");t._values=[1,2,3,4,5,6,7,8,9,10,11],t.HOME_NUMBERS=1,t.WORK_NUMBERS=2,t.MOBILE_NUMBERS=3,t.OTHER_NUMBERS=4,t.WORK_EMAILS=5,t.HOME_EMAILS=6,t.OTHER_EMAILS=7,t.IMPORT_EMAILS=8,t.FACEBOOK_ID=9,t.ODNOKLASSNIKI_ID=10,t.VKONTAKTE_ID=11}(),B.Encounters.ViewBase=$class($u.Observable,{name:"EncountersView",number_of_photos:null,min_photos_to_view_all_photos:1,more_info_url:"/game/ws?action=get_profile",check_photos_url:"/game/ws?action=check_photos",get_mobile_app_ovl_url:"/ws/get-app-ovl?ref=web-ovl-icon",rush_hour_info_ovl_url:"/ws-rush-hour-ovl-info",chat_url_tpl:"/messenger/open?contact_user_id={user_id}",share_profile:{click_track_url_tpl:"/profile/share-stats?from=encounters_view&action=1&user_id={user_id}",save_result_url_tpl:"/profile/share-stats?from=encounters_view&action=2&user_id={user_id}"},page_tpl:"",profile_header_tpl:"meets/profile-header",photo_thumb_tpl:"",match_popup_type:null,match_popup_tpl:null,share_dialog_id:"encounters_view",image_width:54,margin_size:0,key_map:{32:"next",39:"next",74:"next",37:"prev",75:"prev",49:"yes",50:"no",51:"no",97:"yes",98:"no",99:"no"},rtl_map:{37:39,39:37},external_providers_map:{1:"facebook",9:"vk",10:"odnoklassniki"},ready:!1,gallery:null,profile_header:null,photo_ids_to_idxs:null,user:null,photo:null,all_user_photos:null,more_info_loaded:!1,more_info_visible:!1,more_info_request:null,check_photos_request:null,more_info_link:null,catch_key:!1,locked:!1,waited:!1,curr_user_profile:null,$s:null,__true_init:function(e){$el.dom.html($("app_c"),$u.dust.render(this.page_tpl)),this.pageParams=e,this.wrap_el=$("mm_cc"),this.photo_el=$el.down(this.wrap_el,".js-mm-photo"),this.info_wrap_el=$el.down(this.wrap_el,".js-mm-info-wrap"),this.more_info_el=$el.down(this.wrap_el,".js-mm-more-info"),this.blocker_link_el=$el.down(this.wrap_el,".js-mm-blocker-link"),this.abuse_wrap_el=$el.down(this.wrap_el,".js-mm-abuse"),this.photos_current_el=$el.down(this.wrap_el,".js-gallery-photo-current"),this.$e=$e.on({".js-mm-blocker-link":this.on_check_photos},this),this.encounters_$e=B.Encounters.on("set_photo",this.hide_all,this),this.$e_education=B.HoN_v3.on("education_updated",this.on_education_updated,this),$e.add(document.body,"keydown",this.keydown,this),$e.add(document.body,"keyup",this.keyup,this),this.profile_header=new B.HoN_v3.EncountersHeaderController({tpl_name:this.profile_header_tpl}),this.profile_header.on({vote:this.vote,toggle:this.on_toggle_more_info,secret_comments:this.on_secret_comments},this)},destroy:function(){$super(this,arguments),$e.del(document.body,"keydown",this.keydown,this),$e.del(document.body,"keyup",this.keyup,this),this.$e&&($e.un(this.$e),this.$e=null),this.encounters_$e&&(B.Encounters.un(this.encounters_$e),this.encounters_$e=null),this.photo_el&&(this.photo_el.onload=null,this.photo_el.onerror=null,this.photo_el=null),this.$e_education&&(B.HoN_v3.un(this.$e_education),this.$e_education=null),this.wrap_el=this.more_info_el=this.blocker_link_el=null,this.photos_current_el=null,this.more_info_request=null,this.curr_user_profile=null,this.check_photos_request=this.user=this.photo=this.all_user_photos=null,this.$s=this.ovl=null,this.destroy_gallery(),this.destroy_import(),this.profile_header&&(this.profile_header.destroy(),this.profile_header=null)},setup_facebook_sharing:function(){var e=this.profile_header.get_share_url(this.user);if(!e)return!1;if(B.HoN_v3.Partner.match("ok")){var t=$el.down(this.wrap_el,".js-header-popup-share");if(t){var i=$c.get(t,"popup");i.set_param("photo_id",this.photo.id)}}else{$u.fb.init();var o={photo_id:this.photo.id,user_id:this.user.getPerson().getUid()},s={$gpb:"FB.ShareDialogConfig",link:$u.tpl(e,o),wait_for_login:!0,click_track_url:$u.tpl(this.share_profile.click_track_url_tpl,o),save_result_url:$u.tpl(this.share_profile.save_result_url_tpl,o)};B.FbUiDialogView.set_cfg(this.share_dialog_id,s)}return!0},vote:function(e){if(this.user){this.abort_more_info();var t=this.user.getPerson().getName();"yes"===e&&this.user.getHasUserVoted()&&B.Encounters.Controller.is_vote_enabled("yes")&&this.show_match_popup(),this.$s=new $s.Request("mm/vote",$s.TAG_ACTION),this.$s.timer_start("load_img",{group:"load_img"}),B.fire("ga:track_event","Clicks","Encounters","Encounters - Voted"),this.hide_all(),this.fire("on_vote",{user_id:this.user.getPerson().getUid(),photo_id:this.photo.id,photo_src:this.user.getPerson().getPreviewImageId(),user_name:t,choice:e,source:$gpb.namespace("badoo.bma").ClientSource.CLIENT_SOURCE_ENCOUNTERS}),B.fire("on_vote",t,e)}},on_toggle_more_info:function(e){var t=$el.has(this.wrap_el,"loading");t||(e.hasAttribute("data-jst-class")&&B.Toggle.manage(e),this.more_info_visible=!this.more_info_visible,this.more_info_link=e,this.more_info_loaded?this.more_info_toggle(this.more_info_visible):(this.toggle_loading("loading",!0),this.more_info_el.innerHTML="",this.more_info_request=new $r(this.more_info_url,{params:{user_id:this.user.getPerson().getUid()},ready:this.on_more_info_ready,error:this.abort_more_info},this)),$el.del(this.wrap_el,"notenoughphotos-ovl"))},on_more_info_ready:function(){},on_secret_comments:function(){var e=this.user.getPerson();B.OvlQueue.push({type:"hon-v3-secret-2",html:"",context:"CLIENT_SOURCE_ENCOUNTERS",person_id:e.getUid(),username:e.getName()})},show_match_popup:function(){var e=B.HoN_v3.Partner.Features.isBadooLexems(),t=e?"MATCH_POPUP_NEW_BADOO":"MATCH_POPUP_HON",i={1:{1:$l.get("hon/match_popup",[t,"MATCH_FROM_MALE_TO_MALE"]),2:$l.get("hon/match_popup",[t,"MATCH_FROM_MALE_TO_FEMALE"])},2:{1:$l.get("hon/match_popup",[t,"MATCH_FROM_FEMALE_TO_MALE"]),2:$l.get("hon/match_popup",[t,"MATCH_FROM_FEMALE_TO_FEMALE"])}},o=this.user.getPerson(),s=i[o.getGender()][B.Session.getUserGender()],n=e?o.getGender()===$p.SexType.MALE?"MALE_FOUND_MATCH":"FEMALE_FOUND_MATCH":"NEW_CONNECTION",r=$l.get("hon/match_popup",[t,"START_CHAT",o.getGender()===$p.SexType.MALE?"TO_MAN":"TO_WOMAN"]);
s=$u.tpl(s,{name:o.getName()});var a=$u.dust.render(this.match_popup_tpl,{match_photo_url:this.photo.preview_url,chat_url:$u.tpl(this.chat_url_tpl,{user_id:this.user.getPerson().getUid()}),match_text:s,start_chat:r,ovl_title_text:$l.get("hon/match_popup",[t,n]),game:"mm"===B.App.state});B.OvlQueue.push({type:this.match_popup_type,html:a})},more_info_toggle:function(e){$u.FxTransition.fx(this.more_info_link),e?this.profile&&(this.destroy_gallery(),this.profile.start_id=this.photo.id,this.profile.create_gallery()):this.profile&&(this.profile.destroy_gallery(),this.create_gallery(this.user),this.gallery&&this.gallery.view.set_selected_num(this.photo.id))},more_info_image_click:function(e){var t,i,o=e.id,s=this.user.photos.length;for(i=0;s>i;i++)if(t=this.user.photos[i],o===t.id){this.photo=t;break}B.Toggle.manage(this.more_info_link),this.more_info_visible=!this.more_info_visible,this.more_info_toggle(!1),this.update_photo(this.photo.toJSON())},hide_more_info:function(){if(this.abort_more_info(),this.more_info_visible){var e=$el.down(this.wrap_el,".js-profile-header-toggle");B.Toggle.manage(e),this.more_info_toggle(!1),this.more_info_visible=!1}},abort_more_info:function(){this.more_info_request&&this.more_info_request.abort(),this.toggle_loading("loading",!1)},init_import:function(e){$vars.TrustedImport=e.TrustedImport,$vars.SocialConnections=e.SocialConnections,this.import_view=new B.MM_ImportView($el.down(this.wrap_el,".connect")||$el.down($("profile_import"),"div"),e.Import2),this.import_view.on({started:this.on_import_started,ready:this.on_import_ready},this)},on_import_started:function(){this.update_friends_connections("")},on_import_ready:function(){this.fire("on_social_check_needed",!0)},destroy_import:function(){this.import_view&&(this.import_view.destroy(),this.import_view=null)},on_check_photos:function(){this.check_photos_request||(this.wait(!0),this.check_photos_request=new $r(this.check_photos_url,{ready:this.on_check_photos_ready,error:this.check_photos_reset},this))},on_check_photos_ready:function(e){this.check_photos_reset(),e.config&&(this.configure(e.config),this.is_gallery_enabled()||this.blocker_action())},blocker_action:function(){B.Ovl.open_el(this.blocker_link_el)},check_photos_reset:function(){this.check_photos_request=null,this.wait(!1)},hide_all:function(){this.hide_more_info()},show_message:function(e){var t=$el.down(document,".js-encounters");B.Encounters.Filter.destroy(),t.innerHTML=e,B.Encounters.Filter.init_filter()},update_profile:function(e){if(this.user=e,this.ready&&e){var t=$gpb.namespace("badoo.bma"),i=e.getType()===t.SearchResultType.SEARCH_RESULT_TYPE_EXTERNAL_CONTACT,o=e.getPerson(),s=o.getGender(),n=i&&e.getExternalContact().getContacts().length>0?e.getExternalContact().getContacts()[0].getType():0;this.all_user_photos&&B.Encounters.Photos.cancel_preload(this.all_user_photos),this.photo_ids_to_idxs={},this.all_user_photos=[];for(var r=e.getAlbum().getPhotos(),a=0;a<r.length;a++){var l=r[a].getId();this.photo_ids_to_idxs[l]=a+1,15>a&&this.all_user_photos.push(l)}this.lock(!1);var _=r[0],p=B.Encounters.Controller.open_with_photo_id;p&&(_=r[this.photo_ids_to_idxs[p]-1],B.Encounters.Controller.open_with_photo_id=null),this.update_photo(_.toJSON()),this.gallery_disabled||B.Encounters.Photos.prepend_preload(this.all_user_photos);var c=e.getPersonProfile();B.HoN_v3.Education.set_viewing_person({name:o.getName(),gender:s,image:c&&c.getProfileImageId()}),this.$s&&B.Encounters.Photos.has_preloaded(_.getId())&&(this.$s.abort(),this.$s=null);var u,d,h,b=this.setup_facebook_sharing();if(i){u=this.get_external_provider_string_by_enum(n);var E=$l.get("hon/profile_header",["HON_HEADER","EXTERNAL_PROVIDER_"+u.toUpperCase()]),g={1:$l.get("hon/profile_header",["HON_HEADER","EXTERNAL_FRIEND_MALE"]),2:$l.get("hon/profile_header",["HON_HEADER","EXTERNAL_FRIEND_FEMALE"])},m={1:$l.get("hon/profile_header",["HON_HEADER","EXTERNAL_FRIEND_MALE_HINT"]),2:$l.get("hon/profile_header",["HON_HEADER","EXTERNAL_FRIEND_FEMALE_HINT"])};d=$u.tpl(g[s],{provider_name_upper:E}),h=m[s]}var f="invisible",T=e.getPersonStatus();if(T)switch(T.getOnline()){case t.OnlineStatus.ONLINE:f="online";break;case t.OnlineStatus.IDLE:f="away";break;case t.OnlineStatus.OFFLINE:f="offline";break;case t.OnlineStatus.STATUS_UNKNOWN:f="offline"}this.update_header(e,{is_external:i,online_status:f,has_share:b,has_secret_comments:void 0!==e.getSecretCommentCount(),external_provider:u,string_external_friend:d,string_external_friend_hint:h,share_dialog_id:this.share_dialog_id,info_ovl_url:this.rush_hour_info_ovl_url}),$el.tgl(this.wrap_el,"mm_male",s===t.SexType.MALE),$el.tgl(this.wrap_el,"mm_female",s===t.SexType.FEMALE),$el.tgl(this.wrap_el,"mm_celeb",o.getCelebrity()),$el.tgl(this.wrap_el,"mm_no_profile",i),$el.tgl(this.abuse_wrap_el,"hidden",i),this.more_info_loaded=!1;var v=$el.down(this.wrap_el,".js-scroll-to-video"),O=e.getAlbum().getPhotos(),y=O[O.length-1],I=y.getVideo()&&y.getId();I&&(v.setAttribute("data-id",I),$el.tgl($el.up(v,".photo-gallery__video-button"),"hidden")),this.create_gallery(e),this.user.shown_url&&new $r(this.user.shown_url)}},get_external_provider_string_by_enum:function(e){var t;switch(e){case $p.PhonebookContactType.FACEBOOK_ID:t="facebook";break;case $p.PhonebookContactType.ODNOKLASSNIKI_ID:t="odnoklassniki";break;case $p.PhonebookContactType.VKONTAKTE_ID:t="vk";break;default:t="facebook"}return t},update_header:function(e,t){var i=$config(e.toJSON(),e.getPerson().toJSON(),t);if(i.curr_user={profile:this.curr_user_profile},this.profile_header.update(i),B.HoN_v3.Partner.match("ok")){var o=$el.down(this.wrap_el,".js-header-popup-share");if(o){var s=$c.get(o,"popup");s.set_param("photo_id",this.photo.id)}}},create_gallery:function(e){var t=$el.down(this.wrap_el,".js-mm-gallery"),i=e.getAlbum().toJSON().photos,o=i.length,s=o>1;$el.tgl(t,"mm_has_gallery",s);var n=this.gallery&&this.gallery.is_preview_corner_mouseenter();this.destroy_gallery(),this.gallery=new B.PhotoGalleryBig({wrap_el:t,photos:i,photo_tpl:this.photo_thumb_tpl,dust:!0,hotkeys:!1,image_width:this.image_width,margin_size:this.margin_size,start_id:this.photo.id,total:o,video:!0}),n&&this.gallery.show_preview_corner(),this.gallery.on("photo:change",this.update_photo,this)},destroy_gallery:function(){this.gallery&&(this.gallery.un("photo:change",this.update_photo,this),this.gallery.destroy(),this.gallery=null)},update_photo:function(e){this.hide_all(),e=$clone(e);var t=$el.create("img",{className:this.photo_el.className,onload:this.on_photo_load.bind(this),onerror:this.on_photo_error.bind(this),src:B.Encounters.Photos.get(e.id),alt:""}),i=this.photo_el.parentNode.replaceChild(t,this.photo_el);i.onload=i.onerror=null,this.photo_el=t,this.photo=e,this.photos_current_el&&(this.photos_current_el.innerHTML=this.photo_ids_to_idxs[e.id]),this.setup_facebook_sharing(),B.Encounters.fire("gallery_photo_change",e),B.fire("gallery_photo_change",e)},update_friends_connections:function(e){this.profile_header.update_friends_connections(e)},on_photo_load:function(){this.$s&&(this.$s.timer_stop("load_img"),this.$s.end(),this.$s=null)},on_photo_error:function(){this.$s&&(this.$s.timer_stop("load_img"),this.$s.end($s.STATUS_ERROR),this.$s=null)},wait:function(e){this.locked||(void 0===e&&(e=!0),this.toggle_loading("blocked",e),this.waited=e)},lock:function(e){void 0===e&&(e=!0),this.toggle_loading("waiting",e),this.locked=this.waited=e,e||this.profile_header.unhighlight_button()},toggle_loading:function(e,t){$el.tgl(this.wrap_el,e,t)},start:function(e){this.number_of_photos=e.getPhotoCount(),this.curr_user_profile=e,this.check_gallery_enabled(),!this.ready&&this.user?(this.ready=!0,this.update_profile(this.user)):this.ready=!0},configure:function(e){$config(this,e),this.check_gallery_enabled()},check_gallery_enabled:function(){$el.tgl(this.wrap_el,"mm_gallery_locked",!this.is_gallery_enabled())},is_gallery_enabled:function(){return this.number_of_photos>=this.min_photos_to_view_all_photos},get_num_photos_needed:function(){return this.is_gallery_enabled()?0:this.min_photos_to_view_all_photos-this.number_of_photos},keydown:function(){if(B.Ovl.is_visible()||this.locked||this.waited||!this.user)return this.catch_key=!1,!0;var e=$e.e.shiftKey||$e.e.ctrlKey||$e.e.altKey||$e.e.metaKey||$e.e.repeat,t=!!this.key_map[$e.key($e.e)]&&!e;if(t){var i=document.activeElement.nodeName;("INPUT"===i||"TEXTAREA"===i)&&(t=!1),B.IM.Helper&&B.IM.Helper.view&&(t=!1)}return this.catch_key=t,!t},keyup:function(){if(!this.catch_key||this.locked||this.waited||!this.user)return!0;var e=$e.key($e.e);"rtl"===$el.dir()&&(e=this.rtl_map[e]||e);var t=this.key_map[e];if(!t)return!0;if(!this.more_info_visible||"yes"===t||"no"===t){switch(t){case"next":this.gallery&&(this.is_gallery_enabled()?(this.mark_keyboard_used(),this.gallery.next()):this.blocker_action());break;case"prev":this.gallery&&(this.is_gallery_enabled()?(this.mark_keyboard_used(),this.gallery.prev()):this.blocker_action());break;case"yes":this.profile_header.highlight_button_with_timer("yes"),this.mark_keyboard_used(),this.vote("yes");break;case"no":this.profile_header.highlight_button_with_timer("no"),this.mark_keyboard_used(),this.vote("no")}return!1}},mark_keyboard_used:function(){$u.cookie("mm_keyboard_used",1)},on_education_updated:function(){B.App.reload()}}),function(){function e(e,o){return e.write('<div class="ovl-body">\n<div class="ovl-promo">\n<div class="brick brick--xxxlg">\n<div class="brick-img brick-img--social"><img src="').reference("match_photo_url",o).write('" alt=""></div>\n<mark class="brick brick--lg brick--red"><i class="ico ico--white ico--heart-lg"></i></mark>\n</div>\n<h1>').reference("ovl_title_text",o).write('</h1>\n<span class="large">').reference("match_text",o).write('</span>\n</div>\n<div class="ovl-buttons">\n<div class="btn btn--blue"><span class="btn-txt">').reference("start_chat",o).write('</span><a href="').reference("chat_url",o).write('" class="b-link im-open" rel="messenger"></a></div>\n<div class="btn btn--white">\n<span class="btn-txt">\n').exists(o.get(["game"],!1),o,{"else":t,block:i},{}).write('\n</span>\n<span class="b-link js-ovl-close"></span>\n</div>\n</div>\n<div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div>\n</div>')}function t(e,t){return e.write("\n").helper("lang",t,{},{group:"hon/match_popup",path:"MATCH_POPUP_HON/CONTINUE"}).write("\n")}function i(e,t){return e.write("\n").helper("lang",t,{},{group:"hon/match_popup",path:"MATCH_POPUP_HON/KEEP_PLAYING"}).write("\n")}return $u.dust.register("hotornot_v2/game/popup.match",e),e.s={game:t},e}(),$l.register({section:"hon/match_popup",lang:"en-us",translations:{MATCH_POPUP_HON:{NEW_CONNECTION:"You found a match",MATCH_FROM_MALE_TO_MALE:"{{name}} likes you too!",MATCH_FROM_MALE_TO_FEMALE:"{{name}} likes you too!",MATCH_FROM_FEMALE_TO_MALE:"{{name}} likes you too!",MATCH_FROM_FEMALE_TO_FEMALE:"{{name}} likes you too!",KEEP_PLAYING:"Keep playing",CONTINUE:"Continue",START_CHAT:{TO_MAN:"Send him a message",TO_WOMAN:"Send her a message"}},MATCH_POPUP_NEW_BADOO:{NEW_CONNECTION:"You found a match",MALE_FOUND_MATCH:"You found a match",FEMALE_FOUND_MATCH:"You found a match",MATCH_FROM_MALE_TO_MALE:"{{name}} likes you too!",MATCH_FROM_MALE_TO_FEMALE:"{{name}} likes you too!",MATCH_FROM_FEMALE_TO_MALE:"{{name}} likes you too!",MATCH_FROM_FEMALE_TO_FEMALE:"{{name}} likes you too!",KEEP_PLAYING:"Keep playing",START_CHAT:{TO_MAN:"Send him a message",TO_WOMAN:"Send her a message"}}}}),$gpb.exists("badoo.bma.ServerEncountersVote","message")||($gpb.exists("badoo.bma.VoteResultType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VoteResultType=new $gpb.Enum("badoo.bma.VoteResultType");t._values=[1,2,3,4,5,6],t.NONE=1,t.YES=2,t.NO=3,t.MAYBE=4,t.SKIP=5,t.BROKEN=6}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerEncountersVote=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerEncountersVote",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:2},vote:{type:14,type_name:"badoo.bma.VoteResultType",number:2,label:2},is_for_cached_encounters:{type:8,options:{"default":"false"},number:5,label:1},photo_id:{type:9,number:3,label:1},vote_source:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1}}}}()),$gpb.exists("badoo.bma.ClientVoteResponse","message")||($gpb.exists("badoo.bma.VoteResponseType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VoteResponseType=new $gpb.Enum("badoo.bma.VoteResponseType");t._values=[1,2,3,4,5,6,7],t.NONE_MESSAGE=1,t.SIMPLE_MESSAGE=2,t.MUTUAL_MESSAGE=3,t.QUOTA_MESSAGE=4,t.NO_PHOTO_MESSAGE=5,t.SETTINGS_MESSAGE=6,t.VOTED_ON_ALL_FRIENDS_MESSAGE=7}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientVoteResponse=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientVoteResponse",t.prototype._descriptor={fields:{other_user_image_id:{type:9,number:5,label:1},can_chat:{type:8,number:6,label:1},other_user_gender:{type:14,type_name:"badoo.bma.SexType",number:7,label:1},person_id:{type:9,number:3,label:1},message:{type:9,number:2,label:2},current_user_image_id:{type:9,number:4,label:1},vote_response_type:{type:14,type_name:"badoo.bma.VoteResponseType",number:1,label:2}}}}()),$gpb.exists("badoo.bma.ServerGetProfileScore","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetProfileScore=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetProfileScore",t.prototype._descriptor={fields:{push_id:{type:9,number:2,label:1},uid:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ServerErrorMessage","message")||($gpb.exists("badoo.bma.ServerErrorType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerErrorType=new $gpb.Enum("badoo.bma.ServerErrorType");t._values=[0,13,14,15,17,18,19,20,21,22,23,24,25,26,27,28,30,31,32,33,34,35,36,37,38,39,40,41,42,43,45,46,47,9e3,9001,9002,9003,9010,9011,9012,9100,9101,9102,9110,9111,9112,9113,9120,9121,9122,1e4,10001,10011,10002,10003,10403,10404,10405,10406,10407],t.UNKNOWN_SERVER_ERROR_TYPE=0,t.SERVER_ERROR_TYPE_DUPLICATE_EMAIL=13,t.SERVER_ERROR_TYPE_BLOCKED_ACCOUNT=14,t.SERVER_ERROR_TYPE_CAPTCHA_REQUIRED=15,t.SERVER_ERROR_TYPE_LOCATION_REQUIRED=17,t.SERVER_ERROR_TYPE_MULTIMEDIA_DISABLED=18,t.SERVER_ERROR_TYPE_LOCATION_SHARING_DISABLED=19,t.SERVER_ERROR_TYPE_INVALID_PERSON_ID=20,t.SERVER_ERROR_TYPE_EXTERNAL_PROVIDER_TOKEN_EXPIRED=21,t.SERVER_ERROR_TYPE_PERMISSION_DENIED=22,t.SERVER_ERROR_TYPE_CANT_LOAD_AWARD=23,t.SERVER_ERROR_TYPE_ILLEGAL_ARGUMENT=24,t.SERVER_ERROR_TYPE_UNDERAGE_USER=25,t.SERVER_ERROR_TYPE_FEATURE_NOT_CONFIGURABLE=26,t.SERVER_ERROR_TYPE_ASYNC_NOT_SUPPORTED=27,t.SERVER_ERROR_TYPE_BACKGROUND_MODE_NOT_SUPPORTED=28,t.SERVER_ERROR_TYPE_NO_PRODUCTS_AVAILABLE=30,t.SERVER_ERROR_TYPE_UNKNOWN_COUNTRY=31,t.SERVER_ERROR_TYPE_FEATURE_UNAVAILABLE=32,t.SERVER_ERROR_TYPE_SAVE_FAILURE=33,t.SERVER_ERROR_TYPE_UNKNOWN_RESOURCE=34,t.SERVER_ERROR_TYPE_NOT_DELETABLE=35,t.SERVER_ERROR_TYPE_EXTERNAL_PROVIDER_DATA_INCOMPLETE=36,t.SERVER_ERROR_TYPE_PREMATCH_EXPIRED=37,t.SERVER_ERROR_TYPE_INCORRECT_PASSWORD=38,t.SERVER_ERROR_TYPE_COMMENT_TOO_SHORT=39,t.SERVER_ERROR_TYPE_CHAT_ERROR=40,t.SERVER_ERROR_TYPE_REQUEST_INCOMPLETE=41,t.SERVER_ERROR_TYPE_DATA_UNAVAILABLE=42,t.SERVER_ERROR_TYPE_RATE_LIMIT_EXCEEDED=43,t.SERVER_ERROR_SURVEY_INCOMPLETE=45,t.SERVER_ERROR_TYPE_NON_FATAL_ERROR=46,t.SERVER_ERROR_TYPE_PAYMENT_IN_PROGRESS=47,t.SERVER_ERROR_TYPE_CLIENT_UNKNOWN_WIRE_VERSION=9e3,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_TOO_LONG=9001,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_TOO_SHORT=9002,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_PARSE_ERROR=9003,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_INVALID=9010,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_BODY_MISSING=9011,t.SERVER_ERROR_TYPE_CLIENT_MESSAGE_BODY_INVALID=9012,t.SERVER_ERROR_TYPE_SERVER_INTERNAL_ERROR=9100,t.SERVER_ERROR_TYPE_SERVER_NOT_IMPLEMENTED=9101,t.SERVER_ERROR_TYPE_SERVER_VERSION_NOT_SUPPORTED=9102,t.SERVER_ERROR_TYPE_SERVER_PROXY_UNRESOLVED=9110,t.SERVER_ERROR_TYPE_SERVER_PROXY_TIMED_OUT=9111,t.SERVER_ERROR_TYPE_SERVER_PROXY_IO_ERROR=9112,t.SERVER_ERROR_TYPE_SERVER_PROXY_EARLY_CLOSE=9113,t.SERVER_ERROR_TYPE_SERVER_PROXY_HTTP_NOT_FOUND=9120,t.SERVER_ERROR_TYPE_SERVER_PROXY_HTTP_ERROR=9121,t.SERVER_ERROR_TYPE_SERVER_PROXY_HTTP_GARBAGE=9122,t.SERVER_ERROR_TYPE_SERVER_OLD_INTERNAL_ERROR=1e4,t.SERVER_ERROR_TYPE_SERVER_CONNECTION_OVERTAKE=10001,t.SERVER_ERROR_TYPE_USER_RECONNECTED_ANOTHER_DEVICE_WITH_DEACTIVATE=10011,t.SERVER_ERROR_TYPE_SERVER_TEMPORARILY_UNAVAILABLE=10002,t.SERVER_ERROR_TYPE_GENERAL_SERVER_ERROR_WITH_MESSAGE=10003,t.SERVER_ERROR_TYPE_SESSION_LOST=10403,t.SERVER_ERROR_TYPE_INVALID_CLIENT_IP=10404,t.SERVER_ERROR_TYPE_BANNED_CLIENT_IP=10405,t.SERVER_ERROR_TYPE_BANNED_EMAIL_DOMAIN=10406,t.SERVER_ERROR_TYPE_AUTHENTICATION_REQUIRED=10407}(),$gpb.exists("badoo.bma.ApplicationFeature","message")||($gpb.exists("badoo.bma.PaymentProductType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PaymentProductType=new $gpb.Enum("badoo.bma.PaymentProductType");t._values=[1,2,3,4,5,6,7,10,11,12,13,14,15,16],t.PAYMENT_PRODUCT_TYPE_SPP=1,t.PAYMENT_PRODUCT_TYPE_SPOTLIGHT=2,t.PAYMENT_PRODUCT_TYPE_CHAT_QUOTA=3,t.PAYMENT_PRODUCT_TYPE_VOTE_QUOTA=4,t.PAYMENT_PRODUCT_TYPE_GIFT=5,t.PAYMENT_PRODUCT_TYPE_EXTRA_SHOWS=6,t.PAYMENT_PRODUCT_TYPE_RISEUP=7,t.PAYMENT_PRODUCT_TYPE_HON_SUBSCRIPTION=10,t.PAYMENT_PRODUCT_TYPE_MATCH_EXTENSION=11,t.PAYMENT_PRODUCT_TYPE_CONTACTS_FOR_CREDITS=12,t.PAYMENT_PRODUCT_TYPE_CREDITS=13,t.PAYMENT_PRODUCT_TYPE_STICKER_PACK=14,t.PAYMENT_PRODUCT_TYPE_VIP=15,t.PAYMENT_PRODUCT_TYPE_EXCLUSIVE_ATTENTION=16}(),$gpb.exists("badoo.bma.GoalProgress","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.GoalProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GoalProgress",t.prototype._descriptor={fields:{progress:{type:5,number:2,label:2},goal:{type:5,number:1,label:2}}}}(),$gpb.exists("badoo.bma.PromoType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoType=new $gpb.Enum("badoo.bma.PromoType");t._values=[1,2,4,5,6,7,8],t.PROMO_TYPE_RISEUP_TO_THE_TOP=1,t.PROMO_TYPE_CHAT_SPECIAL_DELIVERY=2,t.PROMO_TYPE_ENCOUNTERS_POPULARITY_BOOST=4,t.PROMO_TYPE_UPLOAD_MORE_PHOTOS=5,t.PROMO_TYPE_CHAT_FIRST=6,t.PROMO_TYPE_READ_FIRST=7,t.PROMO_TYPE_CHAT_POPULAR=8}(),$gpb.exists("badoo.bma.FeatureType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FeatureType=new $gpb.Enum("badoo.bma.FeatureType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,68,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,10001,10002,10003,10004,10005,10006,10007,10008],t.UNKNOWN_FEATURE_TYPE=0,t.ALLOW_VIEW_PHOTOS=1,t.ALLOW_OPEN_CHAT=2,t.ALLOW_VIEW_MESSAGE_DETAILS=3,t.ALLOW_VIEW_PERSONAL_INFO=4,t.ALLOW_ADD_FAVOURITE=5,t.ALLOW_OPEN_MESSAGES=6,t.ALLOW_OPEN_FRIENDS=7,t.ALLOW_OPEN_FAVOURITES=8,t.ALLOW_OPEN_VISITORS=9,t.ALLOW_OPEN_PEOPLE_NEARBY=10,t.ALLOW_OPEN_ENCOUNTERS=11,t.ALLOW_OPEN_YOU_WANT=12,t.ALLOW_OPEN_WANT_YOU=13,t.ALLOW_OPEN_MUTUALS=14,t.ALLOW_ENCOUNTERS_VOTE=15,t.ALLOW_EDIT_PROFILE=16,t.ALLOW_BLOCK_USER=17,t.ALLOW_SEND_CHAT=18,t.ALLOW_SUPER_POWERS=19,t.ALLOW_LOAD_PEOPLE_NEARBY=20,t.ALLOW_LOAD_WANT_YOU=21,t.ALLOW_VIEW_CHAT_DELIVERY=22,t.ALLOW_OPEN_BLOCKED=23,t.ALLOW_INVITE_EMAIL=24,t.ALLOW_INVITE_PHONE=25,t.ALLOW_REGISTER_GENDER_PREF=26,t.ALLOW_SUPER_POWERS_RENEW=27,t.ALLOW_RISEUP=28,t.ALLOW_EDIT_LOCATION=29,t.ALLOW_CHAT_SPECIAL_DELIVERY=30,t.ALLOW_ENCOUNTERS_PROFILE=31,t.ALLOW_PRIORITY_SHOWS=32,t.ALLOW_REPORT_ABUSE=33,t.ALLOW_LOAD_SPOTLIGHT=34,t.ALLOW_ADD_TO_SPOTLIGHT=35,t.ALLOW_SHOW_CREDITS=36,t.ALLOW_MANAGE_PAYMENTS=37,t.ALLOW_TOPUP=38,t.ALLOW_INTERESTS=39,t.ALLOW_AMOBEE=40,t.ALLOW_FIKSU=41,t.ALLOW_OPEN_MATCHES=42,t.ALLOW_ADD_WANT_YOU=43,t.ALLOW_ADD_MUTUAL=44,t.ALLOW_ADD_YOU_WANT=45,t.ALLOW_OPEN_WANT_YOU_PROFILE=46,t.ALLOW_LOAD_YOU_WANT=47,t.ALLOW_BBM_INVITES=48,t.ALLOW_LOAD_FANS=49,t.ALLOW_LOAD_FAVORITES=50,t.ALLOW_LOAD_FRIENDS=51,t.ALLOW_ADD_FANS=52,t.ALLOW_ADD_FAVORITES=53,t.ALLOW_ADD_FRIENDS=54,t.ALLOW_ADD_VISITORS_TODAY=55,t.ALLOW_LOAD_VISITORS_MONTH=56,t.ALLOW_SPP_ONLY_CHAT=57,t.ALLOW_VERIFY=58,t.ALLOW_VIEW_FAVOURITES=59,t.ALLOW_SEND_GIFTS=60,t.ALLOW_PHOTO_RATING=61,t.ALLOW_ONLINE_STATUS_ACTION=62,t.ALLOW_RATE_IN_PHOTO_RATING=63,t.ALLOW_SOCIAL=64,t.ALLOW_LOAD_SOCIAL_NETWORK=65,t.ALLOW_AUTO_TOPUP=68,t.ALLOW_MULTIMEDIA=70,t.ALLOW_CREDITS_REWARDS=72,t.ALLOW_LOCATION_SHARING=73,t.ALLOW_AWARDS=74,t.ALLOW_PROFILE_RATING=75,t.ALLOW_VIRAL_FLOW=76,t.ALLOW_PROFILE_SEARCH=77,t.ALLOW_OPEN_FACEBOOK_INVITES=78,t.ALLOW_OPEN_LOCAL_HOT=79,t.ALLOW_ADD_TO_LOCAL_HOT=80,t.ALLOW_PROMOTED_VIDEOS=81,t.ALLOW_LOAD_VISITORS_WEEK=82,t.ALLOW_ADD_PEOPLE_NEARBY=83,t.ALLOW_FRIENDS_OF_FRIENDS=84,t.ALLOW_OPEN_SOCIAL_FRIEND_CONNECTION=85,t.ALLOW_LOAD_LOCAL_HOT=86,t.ALLOW_OPEN_UNIVERSITY_HOT_LIST=87,t.ALLOW_LOAD_UNIVERSITY_HOT_LIST=88,t.ALLOW_OPEN_FRIENDS_HOT_LIST=89,t.ALLOW_LOAD_FRIENDS_HOT_LIST=90,t.ALLOW_JUMP_THE_QUEUE_INVITES=91,t.ALLOW_BUMPED_INTO=92,t.ALLOW_EXTEND_MATCH=93,t.ALLOW_INVITE_PHONEBOOK=94,t.ALLOW_SHARED_FRIENDS=95,t.ALLOW_PROFILE_SHARING=96,t.ALLOW_HOTTEST_FRIENDS=97,t.ALLOW_RUSH_HOUR=98,t.ALLOW_SECRET_COMMENTS=99,t.ALLOW_REWIND=100,t.ALLOW_LOAD_FAVOURITED_YOU=101,t.ALLOW_COMMON_PLACES=102,t.ALLOW_POPULARITY=103,t.ALLOW_OPEN_MOBILE_APP_PROMO=104,t.ALLOW_SUPER_POWERS_TRIAL=105,t.ALLOW_UPLOAD_VIDEO=106,t.ALLOW_VIEW_FACEBOOK_PHOTOS=107,t.ALLOW_CONTACTS_FOR_CREDITS=108,t.ALLOW_PRIVATE_PHOTOS=109,t.ALLOW_SMILE=110,t.ALLOW_STICKERS=111,t.ALLOW_UNLOCK_STICKER_PACK=112,t.ALLOW_GIFTS=113,t.ALLOW_LOAD_POPULARITY=114,t.ALLOW_OPEN_COMMON_PLACE=115,t.ALLOW_ADD_TO_SPOTLIGHT_FOR_FREE=116,t.ALLOW_SEARCH_LOCATION_CHANGE=117,t.ALLOW_PAID_VIP=118,t.ALLOW_PAID_VIP_RENEW=119,t.ALLOW_PHOTO_OF_THE_DAY=120,t.ALLOW_EXTENDED_SEARCH=121,t.ALLOW_BUMBLE_VIBEE=122,t.ALLOW_ADD_TO_SPOTLIGHT_FOR_SHARING=123,t.ALLOW_QUICK_CHECKIN_TOOL=124,t.ALLOW_UNITED_FRIENDS=125,t.ALLOW_EXPERIMENTAL_POPULARITY=10001,t.ALLOW_EXPERIMENTAL_PAYMENTS=10002,t.ALLOW_EXPERIMENTAL_RUSH_HOUR=10003,t.ALLOW_EXPERIMENTAL_GIFTS=10004,t.ALLOW_EXPERIMENTAL_STICKERS=10005,t.ALLOW_EXPERIMENTAL_CRUSH_ON_FRIENDS=10006,t.ALLOW_EXPERIMENTAL_VIEW_PHOTOS_IN_PROFILES=10007,t.ALLOW_EXPERIMENTAL_VIEW_MY_CHANCES=10008}(),$gpb.exists("badoo.bma.ApplicationFeaturePicture","message")||($gpb.exists("badoo.bma.OnlineStatus","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.OnlineStatus=new $gpb.Enum("badoo.bma.OnlineStatus");t._values=[1,2,3,4],t.ONLINE=1,t.IDLE=2,t.OFFLINE=3,t.STATUS_UNKNOWN=4}(),$gpb.exists("badoo.bma.NotificationBadgeType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.NotificationBadgeType=new $gpb.Enum("badoo.bma.NotificationBadgeType");t._values=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],t.NOTIFICATION_BADGE_TYPE_EMPTY=1,t.NOTIFICATION_BADGE_TYPE_TEXT=2,t.NOTIFICATION_BADGE_TYPE_FAVOURITES=3,t.NOTIFICATION_BADGE_TYPE_MUTUAL=4,t.NOTIFICATION_BADGE_TYPE_RISE_UP=5,t.NOTIFICATION_BADGE_TYPE_SPOTLIGHT=6,t.NOTIFICATION_BADGE_TYPE_EXTRA_SHOWS=7,t.NOTIFICATION_BADGE_TYPE_SPP=8,t.NOTIFICATION_BADGE_TYPE_CREDITS=9,t.NOTIFICATION_BADGE_TYPE_PHONEBOOK=10,t.NOTIFICATION_BADGE_TYPE_AWARD=11,t.NOTIFICATION_BADGE_TYPE_FREE=12,t.NOTIFICATION_BADGE_TYPE_ONLINE=13,t.NOTIFICATION_BADGE_TYPE_SECRET_COMMENT=14,t.NOTIFICATION_BADGE_TYPE_FIRST_IN_PLACE=15,t.NOTIFICATION_BADGE_TYPE_PIN=16}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ApplicationFeaturePicture=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ApplicationFeaturePicture",t.prototype._descriptor={fields:{photo_count:{type:5,number:3,label:1},photo_id:{type:9,number:7,label:1},name:{type:9,number:4,label:1},online_status:{type:14,type_name:"badoo.bma.OnlineStatus",number:2,label:1},online_status_text:{type:9,number:5,label:1},display_images:{type:9,number:1,label:2},badge_type:{type:14,type_name:"badoo.bma.NotificationBadgeType",number:6,label:1}}}}()),$gpb.exists("badoo.bma.ActionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ActionType=new $gpb.Enum("badoo.bma.ActionType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,27,28,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,10001,10002],t.NO_ACTION=0,t.NOTIFY=1,t.UPLOAD_PHOTO=2,t.COMPLETE_PROFILE=3,t.PAYMENT_REQUIRED=4,t.SIGNIN=5,t.SUPER_POWERS=6,t.DISPLAY=7,t.READ_MESSAGES=8,t.SPEND_CREDITS=9,t.OPEN_ENCOUNTERS=10,t.OPEN_PEOPLE_NEARBY=11,t.OPEN_CONTACTS=12,t.VERIFY_MYSELF=13,t.OPEN_VERIFY_SETTINGS=14,t.RATE_MORE_PHOTOS=15,t.OPEN_PRIVACY_SETTINGS=16,t.OPEN_ENCOUNTERS_SETTINGS=17,t.OPEN_YOUR_RATING=18,t.GROW_YOUR_NETWORK=19,t.TRY_LATER=20,t.CONNECT_ALL_FRIENDS=21,t.SELECT_FRIENDS=22,t.BUILD_YOUR_NETWORK=23,t.UPGRADE=24,t.VOTE_ENCOUNTER_YES=25,t.CONNECT_FACEBOOK=27,t.ACKNOWLEDGE_MODERATED_PHOTOS=28,t.LAUNCH_WEB=30,t.OPEN_MESSAGES=31,t.OPEN_MY_PHOTOS=32,t.SHARE_PROFILE_SCORE=33,t.OPEN_AWARD=34,t.CONNECT_TWITTER=35,t.OPEN_SPP=36,t.RATE_YOUR_FRIENDS=37,t.OPEN_ACCOUNT_SETTINGS=38,t.CONNECT_PHONEBOOK=39,t.SHOW_BMA_PROMO=40,t.UPLOAD_FACEBOOK_PHOTOS=41,t.IMPORT_WORK_AND_EDUCATION=42,t.WRITE_SECRET_COMMENT=43,t.OPEN_PHOTO_OF_THE_DAY_FOLDER=44,t.ACTION_TYPE_SHARE_COMMON_PLACE=45,t.PAID_VIP=46,t.UPLOAD_EXTERNAL_PHOTOS=47,t.IMPORT_PLACES=48,t.SHOW_MY_PROFILE_SCORE=49,t.SHOW_PROMOTED_VIDEO=50,t.SHARE_PROMOTED_VIDEO=51,t.SHARE_PROFILE=52,t.SHARE_PHOTO=53,t.ADD_INTERESTS=54,t.OPEN_PLACES=55,t.ENABLE_PUBLIC_PROFILE=56,t.ACTION_TYPE_EMAIL_US=57,t.OPEN_OFFERWALL=58,t.ACTION_TYPE_REQUEST_SYSTEM_PERMISSION=59,t.ACTION_TYPE_ACCEPT_PROMO=60,t.EXPERIMENTAL_OPEN_POPULARITY=10001,t.EXPERIMENTAL_OPEN_CRUSH_ON_FRIENDS=10002}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ApplicationFeature=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ApplicationFeature",t.prototype._descriptor={fields:{display_message:{type:9,number:4,label:1},experimental_other_text:{type:9,number:10001,label:1},product_type:{type:14,type_name:"badoo.bma.PaymentProductType",number:7,label:1},display_action:{type:9,number:6,label:1},required_action:{type:14,type_name:"badoo.bma.ActionType",number:3,label:1},goal_progress:{type:11,type_name:"badoo.bma.GoalProgress",number:11,label:1},display_title:{type:9,number:5,label:1},promo_type:{type:14,type_name:"badoo.bma.PromoType",number:13,label:1},enabled:{type:8,number:2,label:2},feature:{type_name:"badoo.bma.FeatureType",number:1,label:1,type:14,options:{"default":"UNKNOWN_FEATURE_TYPE"}},experimental_gender:{type:14,type_name:"badoo.bma.SexType",number:10002,label:1},credits_for_product:{type:14,type_name:"badoo.bma.PaymentProductType",number:16,label:1},display_images:{type:11,type_name:"badoo.bma.ApplicationFeaturePicture",number:8,label:3},display_comment:{type:9,number:10,label:1},block_reason_id:{type:9,number:9,label:1},display_number:{type:5,number:12,label:1},url:{type:9,number:15,label:1},payment_amount:{type:5,number:14,label:1},experimental_request_ids:{type:9,number:10003,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerErrorMessage=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerErrorMessage",t.prototype._descriptor={fields:{error_eta:{type:3,number:6,label:1},type:{type_name:"badoo.bma.ServerErrorType",number:7,label:1,type:14,options:{"default":"UNKNOWN_SERVER_ERROR_TYPE"}},error_message:{type:9,number:2,label:2},feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:3,label:1},error_id:{type:9,number:4,label:1},error_code:{type:9,number:1,label:2},error_title:{type:9,number:5,label:1}}}}()),B.Encounters||(B.Encounters=new $u.Observable),B.Encounters.Vote||(B.Encounters.Vote=new $class($u.Observable,{match_popup_type:"ovl",match_popup_tpl:"hotornot_v2/game/popup.match",chat_url_tpl:"/messenger/open?contact_user_id={user_id}",overlay_url_tpls:{vote_from_local_hot_list:"/ws/hotlist/sharing.phtml?voted_user_id={user_id}&photo_id={photo_id}",vote_from_friends_hot_list:"/ws/viral-flow?action=get_fb_vote_friend_popup&place=friend_hot_list&voted_user_id={user_id}"},rpcs:{},stats:{},vote:function(e){var t=e.user_id;this.abort_request(t);var i=new $s.Request("mm/vote-async",$s.TAG_ACTION);i.timer_start("vote",{group:"vote"}),this.stats[t]=i;var o=$gpb.namespace("badoo.bma"),s=(new o.ServerEncountersVote).setPersonId(t).setVote("yes"===e.choice?o.VoteResultType.YES:o.VoteResultType.NO);e.photo_id&&s.setPhotoId(e.photo_id),e.source&&s.setVoteSource(e.source),B.fire("encounters:vote",e),this.rpcs[t]=new $gpb.Rpc(o.MessageType.SERVER_ENCOUNTERS_VOTE,s).on(o.MessageType.CLIENT_ENCOUNTERS_VOTE,this.on_client_encounters_vote.bind(this,e)).on(o.MessageType.CLIENT_SERVER_ERROR,this.on_server_error.bind(this,e)).request()},on_client_encounters_vote:function(e,t,i){if(t)return this.on_error(t,e.user_id),void 0;var o=$gpb.namespace("badoo.bma");e.source!==o.ClientSource.CLIENT_SOURCE_ENCOUNTERS&&i.getVoteResponseType()===o.VoteResponseType.MUTUAL_MESSAGE&&this.show_match_popup(i),B.fire("encounters:voted",i),this.finalize_request(e.user_id),e.source&&"yes"===e.choice&&this.show_overlay(e),B.Encounters.vote_ovl_url&&(B.OvlQueue.push({type:"hon-v3-encounters-fb-reactivation",url:B.Encounters.vote_ovl_url}),B.Encounters.vote_ovl_url=null)},on_server_error:function(e,t,i){if(t)return this.on_error(t,e.user_id),void 0;this.abort_request(e.user_id);var o=$gpb.namespace("badoo.bma"),s=i.getFeature();s.getFeature()===o.FeatureType.ALLOW_ENCOUNTERS_VOTE&&(s.getRequiredAction()===o.ActionType.UPLOAD_PHOTO?B.fire("encounters:no_photos"):s.getRequiredAction()===o.ActionType.PAYMENT_REQUIRED&&B.fire("encounters:quota_reached",s))},on_error:function(e,t){this.finalize_request(t,$s.STATUS_ERROR)},abort_request:function(e){this.stats[e]&&(this.stats[e].abort(),delete this.stats[e]);var t=this.rpcs[e];t&&(t.abort(),delete this.rpcs[e])},finalize_request:function(e,t){var i=this.stats[e];i&&(i.timer_stop("vote"),i.end(t),delete this.stats[e]),delete this.rpcs[e]},show_match_popup:function(e){var t=B.HoN_v3.Partner.Features.isBadooLexems(),i=t?"MATCH_POPUP_NEW_BADOO":"MATCH_POPUP_HON",o=$l.get("hon/match_popup",[i,"START_CHAT",e.getOtherUserGender()===$p.SexType.MALE?"TO_MAN":"TO_WOMAN"]);B.OvlQueue.push({type:this.match_popup_type,html:$u.dust.render(this.match_popup_tpl,{match_photo_url:e.getOtherUserImageId(),chat_url:e.getCanChat()?$u.tpl(this.chat_url_tpl,{user_id:e.getPersonId()}):null,match_text:e.getMessage(),start_chat:o,game:"mm"===B.App.state})})},show_overlay:function(e){if(!B.HoN_v3.Partner.match("vk")){var t,i=$gpb.namespace("badoo.bma");switch(e.source){case i.ClientSource.CLIENT_SOURCE_FRIENDS_HOT_LIST:t=this.overlay_url_tpls.vote_from_friends_hot_list;break;case i.ClientSource.CLIENT_SOURCE_LOCAL_HOT:t=this.overlay_url_tpls.vote_from_local_hot_list}t&&B.OvlQueue.push({type:"ovl",url:$u.tpl(t,e)})}}})),$gpb.exists("badoo.bma.ServerGetEncounters","message")||($gpb.exists("badoo.bma.SearchType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchType=new $gpb.Enum("badoo.bma.SearchType");t._values=[1,2,3],t.ENCOUNTERS=1,t.NEARBY=2,t.SAVE_WISH=3}(),$gpb.exists("badoo.bma.UserFieldFilter","message")||($gpb.exists("badoo.bma.ServerGetAlbum","message")||($gpb.exists("badoo.bma.AlbumType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AlbumType=new $gpb.Enum("badoo.bma.AlbumType");t._values=[1,2,3,4,5,6,7,8],t.ALBUM_TYPE_WITH_ID=1,t.ALBUM_TYPE_PHOTOS_OF_ME=2,t.ALBUM_TYPE_OTHER_PHOTOS=3,t.ALBUM_TYPE_PRIVATE_PHOTOS=4,t.ALBUM_TYPE_SPOTLIGHT_PHOTOS=5,t.ALBUM_TYPE_MY_RATING=6,t.ALBUM_TYPE_ENCOUNTERS=7,t.ALBUM_TYPE_CHAT_RECENT=8}(),$gpb.exists("badoo.bma.PhotoSize","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoSize=function(){$gpb.Message.apply(this,arguments)
};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoSize",t.prototype._descriptor={fields:{width:{type:5,number:1,label:1},height:{type:5,number:2,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetAlbum=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetAlbum",t.prototype._descriptor={fields:{count:{type:5,number:4,label:1},album_type:{type:14,type_name:"badoo.bma.AlbumType",number:5,label:1},album_id:{type:9,number:2,label:1},large_size:{type:11,type_name:"badoo.bma.PhotoSize",number:7,label:1},offset:{type:5,number:3,label:1},person_id:{type:9,number:1,label:1},preview_size:{type:11,type_name:"badoo.bma.PhotoSize",number:6,label:1},highlight_new:{type:8,number:8,label:1}}}}()),$gpb.exists("badoo.bma.UserField","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UserField=new $gpb.Enum("badoo.bma.UserField");t._values=[10,20,30,40,50,60,70,80,90,91,92,93,100,110,200,210,220,230,240,250,260,270,280,290,300,301,302,303,304,310,311,320,330,331,340,350,360,370,400,410,420,430,431,432,440,460,470,471,480,490,500,510,511,512,513,520,530,540,550,560,570,580,581,590,600,610,620,630,640,650,660,670,680,681,690,691,692,693,700,710,720,730,731,740,741,742,750,760,761,762,770,780,781,790,800,10001],t.USER_FIELD_EMAIL=10,t.USER_FIELD_PHONE=20,t.USER_FIELD_CREDITS=30,t.USER_FIELD_ACCOUNT_CONFIRMED=40,t.USER_FIELD_PROFILE_COMPLETE_PERCENT=50,t.USER_FIELD_ALLOW_EDIT_DOB=60,t.USER_FIELD_ALLOW_EDIT_GENDER=70,t.USER_FIELD_ALLOW_EDIT_NAME=80,t.USER_FIELD_LOCATION=90,t.USER_FIELD_COUNTRY=91,t.USER_FIELD_REGION=92,t.USER_FIELD_CITY=93,t.USER_FIELD_VERIFIED_INFORMATION=100,t.USER_FIELD_CREDITS_REWARDS=110,t.USER_FIELD_NAME=200,t.USER_FIELD_AGE=210,t.USER_FIELD_DOB=220,t.USER_FIELD_GENDER=230,t.USER_FIELD_IS_NEWBIE=240,t.USER_FIELD_IS_DELETED=250,t.USER_FIELD_IS_HOT=260,t.USER_FIELD_IS_INVISIBLE=270,t.USER_FIELD_IS_UNREAD=280,t.USER_FIELD_IS_VERIFIED=290,t.USER_FIELD_IS_EXTENDED_MATCH=300,t.USER_FIELD_HAS_SPP=301,t.USER_FIELD_HAS_PAID_VIP=302,t.USER_FIELD_HAS_RISEUP=303,t.USER_FIELD_LAST_RISEUP_TIME_MESSAGE=304,t.USER_FIELD_PHOTO_COUNT=310,t.USER_FIELD_VIDEO_COUNT=311,t.USER_FIELD_PERSONAL_INFO_SOURCE=320,t.USER_FIELD_ONLINE_STATUS=330,t.USER_FIELD_ONLINE_STATUS_TEXT=331,t.USER_FIELD_PROFILE_PHOTO=340,t.USER_FIELD_POPULARITY=350,t.USER_FIELD_WISH=360,t.USER_FIELD_ALBUMS=370,t.USER_FIELD_INTERESTS_TOTAL=400,t.USER_FIELD_INTERESTS_IN_COMMON=410,t.USER_FIELD_INTERESTS=420,t.USER_FIELD_BUMPED_INTO=430,t.USER_FIELD_BUMPED_INTO_PLACES=431,t.USER_FIELD_HAS_BUMPED_INTO_PLACES=432,t.USER_FIELD_AWARDS=440,t.USER_FIELD_SOCIAL_NETWORKS=460,t.USER_FIELD_PROFILE_SCORE=470,t.USER_FIELD_PROFILE_SCORE_NUMERIC=471,t.USER_FIELD_SPOKEN_LANGUAGES=480,t.USER_FIELD_PROFILE_FIELDS=490,t.USER_FIELD_FRIENDS_CONNECTIONS=500,t.USER_FIELD_FRIENDS_IN_COMMON=510,t.USER_FIELD_PLACES_IN_COMMON=511,t.USER_FIELD_PLACES_IN_COMMON_TOTAL=512,t.USER_FIELD_COMMON_PLACES_IMPORT_PROVIDERS=513,t.USER_FIELD_DISTANCE=520,t.USER_FIELD_DISTANCE_SHORT=530,t.USER_FIELD_DISTANCE_LONG=540,t.USER_FIELD_MY_VOTE=550,t.USER_FIELD_THEIR_VOTE=560,t.USER_FIELD_MATCH_MESSAGE=570,t.USER_FIELD_IS_MATCH=580,t.USER_FIELD_MATCH_DATE=581,t.USER_FIELD_PRE_MATCH_TIME_LEFT=590,t.USER_FIELD_IS_BLOCKED=600,t.USER_FIELD_IS_FAVOURITE=610,t.USER_FIELD_IS_FRIEND=620,t.USER_FIELD_IS_CONVERSATION=630,t.USER_FIELD_UNREAD_MESSAGES_COUNT=640,t.USER_FIELD_ALLOW_ADD_TO_FAVOURITES=650,t.USER_FIELD_ALLOW_CHAT=660,t.USER_FIELD_ALLOW_VOTING=670,t.USER_FIELD_HAS_MOBILE_APP=680,t.USER_FIELD_VOTE_HINT=681,t.USER_FIELD_POPULARITY_LEVEL=690,t.USER_FIELD_POPULARITY_PNB_PLACE=691,t.USER_FIELD_POPULARITY_VISITORS_TODAY=692,t.USER_FIELD_POPULARITY_VISITORS_MONTH=693,t.USER_FIELD_DISPLAY_MESSAGE=700,t.USER_FIELD_VOTE_SHARING_PROMO=710,t.USER_FIELD_VOTE_SHARING_PROVIDERS=720,t.USER_FIELD_ALLOW_SMILE=730,t.USER_FIELD_ALLOW_SEND_GIFT=731,t.USER_FIELD_SECRET_COMMENT_COUNT=740,t.USER_FIELD_SECRET_COMMENT_PREVIEW=741,t.USER_FIELD_IS_SECRET_COMMENT_ENABLED=742,t.USER_FIELD_RECEIVED_GIFTS=750,t.USER_FIELD_CAME_FROM=760,t.USER_FIELD_CAME_FROM_TEXT=761,t.USER_FIELD_IS_INAPP_PROMO_PARTNER=762,t.USER_FIELD_ALLOW_SHARING=770,t.USER_FIELD_LAST_ACTIVE=780,t.USER_FIELD_LAST_ACTIVE_STRING=781,t.USER_FIELD_IS_HIGHLIGHTED=790,t.USER_FIELD_UNITED_FRIENDS=800,t.EXPERIMENTAL_USER_WHATS_MY_CHANCES=10001}(),$gpb.exists("badoo.bma.ServerInterestsGet","message")||($gpb.exists("badoo.bma.InterestSortOrder","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InterestSortOrder=new $gpb.Enum("badoo.bma.InterestSortOrder");t._values=[1,2,3],t.POPULAR=1,t.MOST_POPULAR=2,t.RANDOM=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerInterestsGet=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerInterestsGet",t.prototype._descriptor={fields:{user_id:{type:9,number:1,label:1},group_id:{type:5,number:2,label:1},limit:{type:5,number:4,label:1},order:{type:14,type_name:"badoo.bma.InterestSortOrder",number:5,label:1},offset:{type:5,number:3,label:1}}}}()),$gpb.exists("badoo.bma.UnitedFriendsFilter","message")||($gpb.exists("badoo.bma.UnitedFriendsSectionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsSectionType=new $gpb.Enum("badoo.bma.UnitedFriendsSectionType");t._values=[1,2,3],t.UNITED_FRIENDS_SECTION_REGISTERED=1,t.UNITED_FRIENDS_SECTION_UNREGISTERED=2,t.UNITED_FRIENDS_SECTION_HOTTEST=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsFilter=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriendsFilter",t.prototype._descriptor={fields:{count:{type:5,number:2,label:1},section_type:{type:14,type_name:"badoo.bma.UnitedFriendsSectionType",number:3,label:1},offset:{type:5,number:1,label:1}}}}()),$gpb.exists("badoo.bma.PhotoSizeSpec","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoSizeSpec=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoSizeSpec",t.prototype._descriptor={fields:{large_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:2,label:1},preview_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:1,label:1},square_face_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UserFieldFilter=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UserFieldFilter",t.prototype._descriptor={fields:{request_albums:{type:11,type_name:"badoo.bma.ServerGetAlbum",number:20,label:3},projection:{type:14,type_name:"badoo.bma.UserField",number:10,label:3},request_interests:{type:11,type_name:"badoo.bma.ServerInterestsGet",number:30,label:1},common_place_count:{type:5,number:50,label:1},united_friends_filter:{type:11,type_name:"badoo.bma.UnitedFriendsFilter",number:60,label:3},profile_photo_size:{type:11,type_name:"badoo.bma.PhotoSizeSpec",number:40,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetEncounters=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetEncounters",t.prototype._descriptor={fields:{number:{type:5,number:3,label:2},search_context:{type:14,type_name:"badoo.bma.SearchType",number:1,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:6,label:1},offset:{type:5,number:2,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:7,label:1},last_person_id:{type:9,number:4,label:1},requested_person_ids:{type:9,number:5,label:3}}}}()),$gpb.exists("badoo.bma.ClientEncounters","message")||($gpb.exists("badoo.bma.RushHourConfig","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RushHourConfig=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RushHourConfig",t.prototype._descriptor={fields:{likes_total:{type:5,number:2,label:1},promo_started:{type:8,number:1,label:1},time_left:{type:5,number:5,label:1},likes_left:{type:5,number:4,label:1},time_total:{type:5,number:3,label:1}}}}(),$gpb.exists("badoo.bma.VotingQuota","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VotingQuota=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VotingQuota",t.prototype._descriptor={fields:{yes_votes_quota:{type:5,number:1,label:1},no_votes_quota:{type:5,number:2,label:1}}}}(),$gpb.exists("badoo.bma.SearchResult","message")||($gpb.exists("badoo.bma.PromoBlock","message")||($gpb.exists("badoo.bma.RedirectPage","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.RedirectPage=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RedirectPage",t.prototype._descriptor={fields:{user_id:{type:9,number:2,label:1},common_place_id:{type:9,number:5,label:1},section_id:{type:9,number:6,label:1},redirect_page:{type_name:"badoo.bma.ClientSource",number:1,label:1,type:14,options:{"default":"CLIENT_SOURCE_UNSPECIFIED"}},token:{type:9,number:3,label:1},award_id:{type:9,number:4,label:1},highlight_new:{type:8,number:7,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoBlock=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromoBlock",t.prototype._descriptor={fields:{other_action:{type:14,type_name:"badoo.bma.ActionType",number:9,label:1},credits_cost:{type:9,number:18,label:1},promo_block_type:{type:14,type_name:"badoo.bma.PromoBlockType",number:12,label:1},image_id:{type:9,number:1,label:3},goal_progress:{type:11,type_name:"badoo.bma.GoalProgress",number:15,label:1},pictures:{type:11,type_name:"badoo.bma.ApplicationFeaturePicture",number:10,label:3},other_text:{type:9,number:8,label:1},promo_block_position:{type_name:"badoo.bma.PromoBlockPosition",number:13,label:1,type:14,options:{"default":"PROMO_BLOCK_POSITION_UNSPECIFIED"}},mssg:{type:9,number:2,label:1},id:{type:9,number:4,label:1},header:{type:9,number:5,label:1},cancel_text:{type:9,number:6,label:1},url:{type:9,number:17,label:1},ok_action:{type:14,type_name:"badoo.bma.ActionType",number:7,label:1},action:{type:9,number:3,label:1},ok_payment_product_type:{type:14,type_name:"badoo.bma.PaymentProductType",number:11,label:1},action_provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:14,label:1},redirect_page:{type:11,type_name:"badoo.bma.RedirectPage",number:19,label:1},counter:{type:5,number:16,label:1}}}}()),$gpb.exists("badoo.bma.Album","message")||($gpb.exists("badoo.bma.RatedPhoto","message")||($gpb.exists("badoo.bma.PhotoRating","message")||($gpb.exists("badoo.bma.PhotoRateType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoRateType=new $gpb.Enum("badoo.bma.PhotoRateType");t._values=[0,1,2,3,4,5,6,11,12,13,14,15,21,22,23,24,25],t.UNKNOWN_PHOTO_RATE_TYPE=0,t.PHOTO_RATE_TYPE_EXCELLENT=1,t.PHOTO_RATE_TYPE_GOOD=2,t.PHOTO_RATE_TYPE_OK=3,t.PHOTO_RATE_TYPE_BAD=4,t.PHOTO_RATE_TYPE_BLOCKED=5,t.PHOTO_RATE_TYPE_CALCULATING=6,t.PHOTO_RATE_TYPE_STAR_ONE=11,t.PHOTO_RATE_TYPE_STAR_TWO=12,t.PHOTO_RATE_TYPE_STAR_THREE=13,t.PHOTO_RATE_TYPE_STAR_FOUR=14,t.PHOTO_RATE_TYPE_STAR_FIVE=15,t.PHOTO_RATE_TYPE_STAR_UNKNOWN=21,t.PHOTO_RATE_TYPE_STAR_PENDING=22,t.PHOTO_RATE_TYPE_STAR_OTHER=23,t.PHOTO_RATE_TYPE_STAR_PRIVATE=24,t.PHOTO_RATE_TYPE_STAR_NOT_PERSONAL=25}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoRating=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoRating",t.prototype._descriptor={fields:{display_rating:{type:9,number:2,label:1},rating:{type:5,number:1,label:1},rate_type:{type_name:"badoo.bma.PhotoRateType",number:4,label:1,type:14,options:{"default":"UNKNOWN_PHOTO_RATE_TYPE"}},rate_action_message:{type:9,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.RatedPhoto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.RatedPhoto",t.prototype._descriptor={fields:{rating:{type:11,type_name:"badoo.bma.PhotoRating",number:3,label:1},small_photo_id:{type:9,number:1,label:1},blocked:{type:8,number:2,label:1}}}}()),$gpb.exists("badoo.bma.Photo","message")||($gpb.exists("badoo.bma.Point","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Point=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Point",t.prototype._descriptor={fields:{y:{type:5,number:2,label:1},x:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.EmbeddedVideo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.EmbeddedVideo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.EmbeddedVideo",t.prototype._descriptor={fields:{url:{type:9,number:1,label:1},is_pending_moderation:{type:8,number:3,label:1},is_processing:{type:8,number:2,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Photo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Photo",t.prototype._descriptor={fields:{rating:{type:11,type_name:"badoo.bma.PhotoRating",number:7,label:1},large_url:{type:9,number:3,label:1},is_pending_moderation:{type:8,number:17,label:1},is_new:{type:8,number:20,label:1},can_set_as_profile_photo:{type:8,number:8,label:1},is_liked:{type:8,number:13,label:1},is_photo_of_me:{type:8,number:9,label:1},square_face_url:{type:9,number:12,label:1},preview_url:{type:9,number:2,label:1},large_photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:4,label:1},face_bottom_right:{type:11,type_name:"badoo.bma.Point",number:6,label:1},video:{type:11,type_name:"badoo.bma.EmbeddedVideo",number:14,label:1},moderation_message:{type:9,number:19,label:1},is_removed_by_moderation:{type:8,number:18,label:1},external_provider_source:{type:14,type_name:"badoo.bma.ExternalProviderType",number:15,label:1},face_top_left:{type:11,type_name:"badoo.bma.Point",number:5,label:1},id:{type:9,number:1,label:1},restriction_feature:{type:14,type_name:"badoo.bma.FeatureType",number:16,label:1},is_profile_photo:{type:8,number:10,label:1}}}}()),$gpb.exists("badoo.bma.AlbumAccessLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AlbumAccessLevel=new $gpb.Enum("badoo.bma.AlbumAccessLevel");t._values=[1,2,3,4,5],t.MUST_CHAT_FIRST=1,t.CAN_REQUEST=2,t.ALREADY_REQUESTED=3,t.ACCESS_GRANTED=4,t.MUST_GO_NATIVE=5}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Album=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Album",t.prototype._descriptor={fields:{allow_edit:{type:8,number:12,label:1},requires_moderation:{type:8,number:11,label:1},preview_image_id:{type:9,number:5,label:1},uid:{type:9,number:1,label:2},date_modified:{type:3,number:2,label:1},accessable:{type:8,number:9,label:2},is_upload_forbidden:{type:8,number:15,label:1},photo_size:{type:11,type_name:"badoo.bma.PhotoSize",number:17,label:3},instruction:{type:9,number:14,label:1},album_type:{type:14,type_name:"badoo.bma.AlbumType",number:19,label:1},access_type:{type:5,number:8,label:1},preview_photo_ids:{type:9,number:6,label:3},photo_rating:{type:11,type_name:"badoo.bma.RatedPhoto",number:16,label:3},photos:{type:11,type_name:"badoo.bma.Photo",number:18,label:3},owner_id:{type:9,number:4,label:2},adult:{type:8,number:10,label:2},count_of_photos:{type:5,number:13,label:1},large_photo_ids:{type:9,number:7,label:3},caption:{type:9,number:21,label:1},access_level:{type:14,type_name:"badoo.bma.AlbumAccessLevel",number:20,label:1},name:{type:9,number:3,label:2}}}}()),$gpb.exists("badoo.bma.SocialSharingProvider","message")||($gpb.exists("badoo.bma.FriendsImportProvider","message")||($gpb.exists("badoo.bma.FriendsImportAuthData","message")||($gpb.exists("badoo.bma.FriendsImportAuthType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportAuthType=new $gpb.Enum("badoo.bma.FriendsImportAuthType");t._values=[1,2,3],t.AUTH_TYPE_PASSWORD=1,t.AUTH_TYPE_OAUTH=2,t.AUTH_TYPE_CONTACTS=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportAuthData=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FriendsImportAuthData",t.prototype._descriptor={fields:{oauth_url:{type:9,number:2,label:1},type:{type:14,type_name:"badoo.bma.FriendsImportAuthType",number:1,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportProvider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FriendsImportProvider",t.prototype._descriptor={fields:{auth_data:{type:11,type_name:"badoo.bma.FriendsImportAuthData",number:3,label:1},logo_url:{type:9,number:5,label:1},display_name:{type:9,number:2,label:1},id:{type:9,number:1,label:1},name:{type:9,number:4,label:1}}}}()),$gpb.exists("badoo.bma.Tag","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Tag=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Tag",t.prototype._descriptor={fields:{position:{type:11,type_name:"badoo.bma.Point",number:1,label:1},uid:{type:9,number:2,label:1}}}}(),$gpb.exists("badoo.bma.ExternalProvider","message")||($gpb.exists("badoo.bma.ExternalProviderAuthData","message")||($gpb.exists("badoo.bma.ExternalProviderAuthType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderAuthType=new $gpb.Enum("badoo.bma.ExternalProviderAuthType");t._values=[0,1,2,3],t.UNKNOWN_EXTERNAL_PROVIDER_AUTH_TYPE=0,t.EXTERNAL_PROVIDER_AUTH_TYPE_PASSWORD=1,t.EXTERNAL_PROVIDER_AUTH_TYPE_OAUTH=2,t.EXTERNAL_PROVIDER_AUTH_TYPE_CONTACTS=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderAuthData=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProviderAuthData",t.prototype._descriptor={fields:{app_secret:{type:9,number:5,label:1},type:{type_name:"badoo.bma.ExternalProviderAuthType",number:1,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_PROVIDER_AUTH_TYPE"}},oauth_url:{type:9,number:2,label:1},app_key:{type:9,number:4,label:1},app_id:{type:9,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProvider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProvider",t.prototype._descriptor={fields:{display_name:{type:9,number:2,label:1},write_permissions:{type:9,number:7,label:3},profile_photo:{type:11,type_name:"badoo.bma.Photo",number:8,label:1},auth_data:{type:11,type_name:"badoo.bma.ExternalProviderAuthData",number:5,label:1},cache_available:{type:8,number:9,label:1},id:{type:9,number:1,label:1},logo_url:{type:9,number:3,label:1},type:{type_name:"badoo.bma.ExternalProviderType",number:4,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_PROVIDER_TYPE"}},read_permissions:{type:9,number:6,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialSharingProvider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialSharingProvider",t.prototype._descriptor={fields:{sharing_images:{type:9,number:4,label:3},provider_details:{type:11,type_name:"badoo.bma.FriendsImportProvider",number:3,label:1},sharing_url:{type:9,number:2,label:1},tags:{type:11,type_name:"badoo.bma.Tag",number:7,label:3},sharing_description:{type:9,number:1,label:1},external_provider_details:{type:11,type_name:"badoo.bma.ExternalProvider",number:5,label:1},display_images:{type:9,number:6,label:3},display_string:{type:9,number:9,label:3},sharing_videos:{type:9,number:8,label:3}}}}()),$gpb.exists("badoo.bma.SecretComment","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SecretComment=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SecretComment",t.prototype._descriptor={fields:{comment:{type:9,number:2,label:1},can_report:{type:8,options:{"default":"false"},number:7,label:1},icon_id:{type:5,number:1,label:1},comment_id:{type:9,number:3,label:1},is_new:{type:8,options:{"default":"false"},number:4,label:1},is_reported:{type:8,options:{"default":"false"},number:6,label:1},can_delete:{type:8,options:{"default":"false"},number:8,label:1},date:{type:9,number:5,label:1}}}}(),$gpb.exists("badoo.bma.PhonebookContact","message")||($gpb.exists("badoo.bma.PhonebookContactDetail","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhonebookContactDetail=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhonebookContactDetail",t.prototype._descriptor={fields:{contact:{type:9,number:1,label:2},type:{type:14,type_name:"badoo.bma.PhonebookContactType",number:2,label:2},can_receive_sms:{type:8,number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhonebookContact=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhonebookContact",t.prototype._descriptor={fields:{phonebook_id:{type:9,number:3,label:1},checked:{type:8,number:5,label:1},description:{type:9,number:8,label:1},contacts:{type:11,type_name:"badoo.bma.PhonebookContactDetail",number:2,label:3},gender:{type:14,type_name:"badoo.bma.SexType",number:9,label:1},disabled:{type:8,number:6,label:1},user_id:{type:9,number:7,label:1},photo_url:{type:9,number:4,label:1},name:{type:9,number:1,label:2}}}}()),$gpb.exists("badoo.bma.PersonStatus","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PersonStatus=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PersonStatus",t.prototype._descriptor={fields:{distance:{type:5,number:5,label:1},distance_long:{type:9,number:7,label:1},uid:{type:9,number:1,label:2},last_active:{type:5,number:4,label:2},date_modified:{type:3,number:2,label:1},on_site:{type:8,number:6,label:1},is_newbie:{type:8,number:12,label:1},longitude:{type:1,number:13,label:1},active_long:{type:9,number:9,label:1},online:{type:14,type_name:"badoo.bma.OnlineStatus",number:3,label:2},latitude:{type:1,number:14,label:1},is_hot:{type:8,number:11,label:1},location_known:{type:8,number:15,label:1},distance_short:{type:9,number:8,label:1},riseup:{type:8,number:10,label:1}}}}(),$gpb.exists("badoo.bma.PersonProfile","message")||($gpb.exists("badoo.bma.Person","message")||($gpb.exists("badoo.bma.PopularityLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PopularityLevel=new $gpb.Enum("badoo.bma.PopularityLevel");t._values=[10,20,30,40,50],t.POPULARITY_LEVEL_VERY_LOW=10,t.POPULARITY_LEVEL_LOW=20,t.POPULARITY_LEVEL_AVERAGE=30,t.POPULARITY_LEVEL_HIGH=40,t.POPULARITY_LEVEL_VERY_HIGH=50}(),$gpb.exists("badoo.bma.ExperimentalPopularityLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalPopularityLevel=new $gpb.Enum("badoo.bma.ExperimentalPopularityLevel");t._values=[10,20,30,40,50],t.EXPERIMENTAL_POPULARITY_LEVEL_VERY_LOW=10,t.EXPERIMENTAL_POPULARITY_LEVEL_LOW=20,t.EXPERIMENTAL_POPULARITY_LEVEL_AVERAGE=30,t.EXPERIMENTAL_POPULARITY_LEVEL_HIGH=40,t.EXPERIMENTAL_POPULARITY_LEVEL_VERY_HIGH=50}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Person=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Person",t.prototype._descriptor={fields:{preview_image_id:{type:9,number:9,label:2},uid:{type:9,number:1,label:2},visible:{type:8,number:14,label:2},number_of_photos:{type:5,number:10,label:2},verified_user:{type:8,number:19,label:1},popularity_level:{type:14,type_name:"badoo.bma.PopularityLevel",number:23,label:1},blocked:{type:8,number:17,label:2},has_spp:{type:8,number:25,label:1},has_riseup:{type:8,number:27,label:1},popularity_visitors_month:{type:5,number:31,label:1},deleted:{type:8,number:12,label:2},location:{type:5,number:8,label:2},experimental_popularity_level:{type:14,type_name:"badoo.bma.ExperimentalPopularityLevel",number:10001,label:1},experimental_available_credits:{type:5,number:10002,label:1},popularity_pnb_place:{type:5,number:29,label:1},friend:{type:8,number:15,label:2},has_paid_vip:{type:8,number:26,label:1},favourite:{type:8,number:16,label:2},age:{type:5,number:5,label:2},personal_album_id:{type:9,number:11,label:2},name:{type:9,number:3,label:2},date_modified:{type:3,number:2,label:1},dob:{type:9,number:6,label:2},gender:{type:14,type_name:"badoo.bma.SexType",number:4,label:2},celebrity:{type:8,number:20,label:1},has_mobile_app:{type:8,number:22,label:1},profile_visited:{type:8,number:18,label:2},pending:{type:8,number:13,label:2},wish:{type:9,number:7,label:2},popularity_visitors_today:{type:5,number:30,label:1},available_credits:{type:5,number:24,label:1},last_riseup_time_message:{type:9,number:28,label:1},match:{type:8,number:21,label:1}}}}()),$gpb.exists("badoo.bma.ProfileScore","message")||($gpb.exists("badoo.bma.SocialFriendsConnectionsBlock","message")||($gpb.exists("badoo.bma.SocialConnectionStatus","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialConnectionStatus=new $gpb.Enum("badoo.bma.SocialConnectionStatus");t._values=[1,2,3,4,5,6],t.SOCIAL_CONNECTION_STATUS_SEARCHING=1,t.SOCIAL_CONNECTION_STATUS_NO_CONNECTION=2,t.SOCIAL_CONNECTION_STATUS_NOT_AVAILABLE=3,t.SOCIAL_CONNECTION_STATUS_FOUND=4,t.SOCIAL_CONNECTION_STATUS_UNKNOWN=5,t.SOCIAL_CONNECTION_STATUS_POSSIBLE_CONNECTION=6}(),$gpb.exists("badoo.bma.CircleDescription","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CircleDescription=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CircleDescription",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},number:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.PromoActionsBlock","message")||($gpb.exists("badoo.bma.Button","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Button=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Button",t.prototype._descriptor={fields:{action_text:{type:9,number:1,label:2},required_action:{type:14,type_name:"badoo.bma.ActionType",number:2,label:2}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PromoActionsBlock=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PromoActionsBlock",t.prototype._descriptor={fields:{promo_text:{type:9,number:1,label:1},possible_actions:{type:11,type_name:"badoo.bma.Button",number:4,label:3},promo_explain_text:{type:9,number:3,label:1},promo_explain_anchor:{type:9,number:2,label:1}}}}()),$gpb.exists("badoo.bma.SocialFriendsConnection","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialFriendsConnection=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialFriendsConnection",t.prototype._descriptor={fields:{friends:{type:11,type_name:"badoo.bma.PhonebookContact",number:1,label:3},first_connection_provider_url:{type:9,number:2,label:3},feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:3,label:1},is_new:{type:8,number:4,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialFriendsConnectionsBlock=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialFriendsConnectionsBlock",t.prototype._descriptor={fields:{status:{type:14,type_name:"badoo.bma.SocialConnectionStatus",number:6,label:1},providers_more:{type:11,type_name:"badoo.bma.FriendsImportProvider",number:4,label:3},circles:{type:11,type_name:"badoo.bma.CircleDescription",number:8,label:3},connections_block_title:{type:9,number:9,label:1},phonebook_import_legal_notice_title:{type:9,number:11,label:1},legal_text:{type:9,number:10,label:1},promo_action_block:{type:11,type_name:"badoo.bma.PromoActionsBlock",number:7,label:1},feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:16,label:1},providers_block_title:{type:9,number:5,label:1},connections:{type:11,type_name:"badoo.bma.SocialFriendsConnection",number:2,label:3},phonebook_import_legal_notice_message:{type:9,number:12,label:1},providers_main:{type:11,type_name:"badoo.bma.FriendsImportProvider",number:3,label:3},more_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:15,label:3},total:{type:5,number:1,label:1},more_connections:{type:11,type_name:"badoo.bma.SocialFriendsConnection",number:13,label:3},main_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:14,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileScore=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ProfileScore",t.prototype._descriptor={fields:{award_images:{type:9,number:3,label:3},sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:4,label:3},description:{type:9,number:6,label:1},social_friends_connection_block:{type:11,type_name:"badoo.bma.SocialFriendsConnectionsBlock",number:8,label:1},title:{type:9,number:5,label:1},score:{type:5,number:7,label:1},promo_block:{type:11,type_name:"badoo.bma.PromoBlock",number:2,label:1},uid:{type:9,number:1,label:1}}}}()),$gpb.exists("badoo.bma.ClientFacebookFriend","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientFacebookFriend=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientFacebookFriend",t.prototype._descriptor={fields:{pic_square:{type:9,number:4,label:1},gender:{type:14,type_name:"badoo.bma.SexType",number:3,label:2},user_id:{type:9,number:5,label:1},uid:{type:3,number:1,label:2},name:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.Hashtable","message")||($gpb.exists("badoo.bma.KeyValue","message")||($gpb.exists("badoo.bma.Object","message")||($gpb.exists("badoo.bma.ObjectType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ObjectType=new $gpb.Enum("badoo.bma.ObjectType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,20,21,22,23,26,27,28,30,31,33,34,36,37,38,39,40,41,42,43,44,45,46,47,49,50,51,52,53,54,61,62,63,65,66,67,68,69,70,71,72,73,74,78,80,81,82,83,86,87,88,89,90,91,92,93,94,95,96,97,98,99,101,104,106,107,109,110,111,113,114,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,133,134,135,136,137,138,139,140,141,146,147,148,149,150,151,152,156,157,158,159,160,161,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,184,185,186,187,188,189,200,201,202,203,208,209,210,211,212,213,214,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,10001,10002,10003,10004,10005,10006,10007],t.TYPE_NULL=0,t.TYPE_INTEGER=1,t.TYPE_DOUBLE=2,t.TYPE_FLOAT=3,t.TYPE_BOOLEAN=4,t.TYPE_STRING=5,t.TYPE_SHORT=6,t.TYPE_LONG=7,t.TYPE_CHARACTER=8,t.TYPE_BYTE=9,t.TYPE_VECTOR=10,t.TYPE_ARRAY=11,t.TYPE_HASHTABLE=12,t.TYPE_BYTE_ARRAY=13,t.TYPE_MESSAGE=20,t.TYPE_SERVER_APP_STARTUP=21,t.TYPE_CLIENT_STARTUP=22,t.TYPE_SERVER_UPDATE_LOCATION=23,t.TYPE_CLIENT_RESOURCE=26,t.TYPE_SERVER_LOGIN_BY_PASSWORD=27,t.TYPE_FORM_FAILURE=28,t.TYPE_APP_SETTINGS=30,t.TYPE_LANGUAGE=31,t.TYPE_TUPLE=33,t.TYPE_MODIFIED_OBJECT=34,t.TYPE_PERSON=36,t.TYPE_PERSON_PROFILE=37,t.TYPE_PERSON_STATUS=38,t.TYPE_CLIENT_PICTURE=39,t.TYPE_PEOPLE_FOLDER=40,t.TYPE_SERVER_GET_FOLDER_PEOPLE=41,t.TYPE_CLIENT_FOLDER_PEOPLE=42,t.TYPE_SERVER_FOLDER_ACTION=43,t.TYPE_SERVER_SEND_USER_REPORT=44,t.TYPE_SERVER_FEEDBACK_FORM=45,t.TYPE_SEARCH_SETTINGS=46,t.TYPE_SERVER_ENCOUNTERS_VOTE=47,t.TYPE_SERVER_GET_ENCOUNTERS=49,t.TYPE_NO_MORE_SEARCH_RESULTS=50,t.TYPE_CLIENT_ENCOUNTERS=51,t.TYPE_ALBUM=52,t.TYPE_SERVER_REQUEST_ALBUM_ACCESS=53,t.TYPE_SERVER_UPLOAD_PHOTO=54,t.TYPE_CHAT_INSTANCE=61,t.TYPE_CHAT_MESSAGE=62,t.TYPE_CHAT_IS_WRITING=63,t.TYPE_SERVER_REQUEST_PICTURE=65,t.TYPE_CLIENT_LOGIN_SUCCESS=66,t.TYPE_PHONEBOOK_CONTACT=67,t.TYPE_SMILEY=68,t.TYPE_USER_REPORT_TYPE=69,t.TYPE_CLIENT_OPEN_CHAT=70,t.TYPE_SERVER_GET_CITY_NAME=71,t.TYPE_CLIENT_CITY_NAME=72,t.TYPE_SERVER_OPEN_CHAT=73,t.TYPE_SERVER_ERROR_MESSAGE=74,t.TYPE_SERVER_GET_ALBUM=78,t.TYPE_SAVE_PROFILE=80,t.TYPE_CLIENT_VOTE_RESPONSE=81,t.TYPE_SEARCH_SETTINGS_FAILURE=82,t.TYPE_SEARCH_SETTINGS_CONTEXT=83,t.TYPE_COUNT_DATA=86,t.TYPE_APPLICATION_FEATURE=87,t.TYPE_SERVER_GET_PERSON_PROFILE=88,t.TYPE_PROFILE_VISITING_SOURCE=89,t.TYPE_CHAT_MESSAGE_RECEIVED=90,t.TYPE_FEATURE_PRODUCT_LIST=91,t.TYPE_PURCHASE_RECEIPT=92,t.TYPE_CLIENT_UPLOAD_PHOTO=93,t.TYPE_FOLDER_REQUEST=94,t.TYPE_CLIENT_NOTIFICATION=95,t.TYPE_PRODUCT_REQUEST=96,t.TYPE_PURCHASE_TRANSACTION_SETUP=97,t.TYPE_PURCHASE_TRANSACTION=98,t.TYPE_PURCHASE_TRANSACTION_FAILED=99,t.TYPE_PEOPLE_FOLDER_REQUEST=101,t.TYPE_CLIENT_PURCHASE_RECEIPT=104,t.TYPE_PROMO_BLOCK=106,t.TYPE_CLIENT_USER_DATA_INCOMPLETE=107,t.TYPE_PROVIDER_PRODUCT_ID=109,t.TYPE_PRODUCT_TERMS=110,t.TYPE_PAYMENT_SETTINGS=111,t.TYPE_FEATURE_PRE_PURCHASE_INFO=113,t.TYPE_CITIES=114,t.TYPE_COUNTRY=117,t.TYPE_TRACKING_CODE_SELECT=118,t.TYPE_CHECK_PHONEBOOK=119,t.TYPE_PHONEBOOK_CONTACTLIST=120,t.TYPE_PHONEBOOK_CONTACT_DETAIL=121,t.TYPE_INVITE_DATA=122,t.TYPE_SERVER_PREPARE_FACEBOOK_PHOTOS=123,t.TYPE_CLIENT_IMPORT_PHOTOS=124,t.TYPE_SERVER_FACEBOOK_IMPORT_PHOTOS=125,t.TYPE_GROUP=126,t.TYPE_INTEREST=127,t.TYPE_INTERESTS_GROUPS=128,t.TYPE_CLIENT_INTERESTS=129,t.TYPE_SERVER_INTERESTS_GET=130,t.TYPE_INTERESTS_UPDATE=131,t.TYPE_ANALYTICS_EVENT=133,t.TYPE_SERVER_GET_USER_LIST=134,t.TYPE_CLIENT_USER_LIST=135,t.TYPE_CLIENT_CHANGE_HOST=136,t.TYPE_TIW_IDEAS=137,t.TYPE_SERVER_GET_TIW_IDEAS=138,t.TYPE_SERVER_REQUEST_ALBUM_ACCESS_LEVEL=139,t.TYPE_ALBUM_ACCESS=140,t.TYPE_SPP_PURCHASE_STATISTIC=141,t.TYPE_SERVER_SECTION_USER_ACTION=146,t.TYPE_SERVER_USER_VERIFIED_GET=147,t.TYPE_CLIENT_USER_VERIFIED_GET=148,t.TYPE_SERVER_USER_VERIFY=149,t.TYPE_CLIENT_USER_VERIFY=150,t.TYPE_SERVER_USER_REMOVE_VERIFY=151,t.TYPE_CLIENT_USER_REMOVE_VERIFY=152,t.TYPE_SERVER_GET_IMPORT_PHOTO_LIST=156,t.TYPE_CLIENT_IMPORT_PREPARE_SUCCESS=157,t.TYPE_SERVER_APP_STATS=158,t.TYPE_SERVER_GET_CHAT_MESSAGES=159,t.TYPE_CLIENT_CHAT_MESSAGES=160,t.TYPE_CLIENT_SERVER_TEST_ERROR=161,t.TYPE_SERVER_GET_PHOTOS_TO_RATE=166,t.TYPE_CLIENT_GET_PHOTOS_TO_RATE=167,t.TYPE_SERVER_RATE_PHOTO=168,t.TYPE_CLIENT_RATE_PHOTO_SUCCESS=169,t.TYPE_CLIENT_GET_PHOTO_RATING_CONFIGURATION=170,t.TYPE_CLIENT_GET_OWN_PHOTO_RATING=171,t.TYPE_CLIENT_SPOTLIGHT_META_DATA=172,t.TYPE_SERVER_GET_FRIENDS_IMPORT_PROVIDERS=173,t.TYPE_CLIENT_GET_FRIENDS_IMPORT_PROVIDERS=174,t.TYPE_SERVER_START_FRIENDS_IMPORT=175,t.TYPE_CLIENT_FRIENDS_IMPORT=176,t.TYPE_SERVER_CHECK_FRIENDS_IMPORT=177,t.TYPE_SERVER_FINISH_FRIENDS_IMPORT=178,t.TYPE_SERVER_GET_CITY=179,t.TYPE_CITY=180,t.TYPE_SERVER_INIT_SPOTLIGHT=181,t.TYPE_SPOTLIGHT_COMMAND=182,t.TYPE_SERVER_GET_SOCIAL_FRIENDS_CONNECTIONS=184,t.TYPE_SOCIAL_FRIENDS_CONNECTIONS_BLOCK=185,t.TYPE_CLIENT_GROW_SOCIAL_NETWORK=186,t.TYPE_CLIENT_CONNECT_ALL_CONTACTS=187,t.TYPE_CLIENT_SELECT_FRIENDS=188,t.TYPE_CLIENT_RESET_TRUSTED_NETWORK=189,t.TYPE_SERVER_SELECT_FRIENDS=200,t.TYPE_SERVER_CONNECT_ALL_CONTACTS=201,t.TYPE_SERVER_IMAGE_ACTION=202,t.TYPE_CLIENT_IMAGE_ACTION=203,t.TYPE_CLIENT_GET_RATE_MESSAGE=208,t.TYPE_SERVER_DELETE_ACCOUNT=209,t.TYPE_CLIENT_DELETE_ACCOUNT_INFO=210,t.TYPE_SERVER_GET_CAPTCHA=211,t.TYPE_CLIENT_GET_CAPTCHA=212,t.TYPE_SERVER_CAPTCHA_ATTEMPT=213,t.TYPE_CLIENT_CAPTCHA_ATTEMPT=214,t.TYPE_CLIENT_MODERATED_PHOTOS=219,t.TYPE_SERVER_GET_AWARD=220,t.TYPE_AWARD=221,t.TYPE_CLIENT_SOCIAL_SHARING_PROVIDERS=222,t.TYPE_SERVER_GET_SOCIAL_SHARING_PROVIDERS=223,t.TYPE_CHAT_SETTINGS=224,t.TYPE_SYSTEM_NOTIFICATION=225,t.TYPE_PERSON_NOTICE=226,t.TYPE_SERVER_GET_EXTERNAL_PROVIDERS=227,t.TYPE_EXTERNAL_PROVIDERS=228,t.TYPE_SERVER_START_EXTERNAL_PROVIDER_IMPORT=229,t.TYPE_EXTERNAL_PROVIDER_IMPORT_PROGRESS=230,t.TYPE_SERVER_CHECK_EXTERNAL_PROVIDER_IMPORT_PROGRESS=231,t.TYPE_SERVER_FINISH_EXTERNAL_PROVIDER_IMPORT=232,t.TYPE_EXTERNAL_PROVIDER_IMPORT_RESULT=233,t.TYPE_EXTERNAL_PROVIDER_SECURITY_CREDENTIALS=234,t.TYPE_SERVER_GET_PROFILE_SCORE=235,t.TYPE_PROFILE_SCORE=236,t.TYPE_DELETE_CHAT_MESSAGE=237,t.TYPE_DELETE_CHAT_MESSAGE_RESULT=238,t.TYPE_SERVER_UPDATE_SESSION=239,t.TYPE_SERVER_REGISTRATION=240,t.TYPE_SERVER_PERSON_PROFILE_EDIT_FORM=241,t.TYPE_USER_BASIC_INFO=242,t.TYPE_CLIENT_REPORT_TYPES=243,t.TYPE_CLIENT_FEEDBACK_LIST=244,t.TYPE_SERVER_CHANGE_PASSWORD=245,t.TYPE_CLIENT_PERSON_PROFILE_EDIT_FORM=246,t.TYPE_CLIENT_COMMON_SETTINGS=247,t.TYPE_S_E_O_INFO=248,t.TYPE_COMET_CONFIGURATION=249,t.TYPE_CREDITS_FEATURE_LIST=250,t.TYPE_PING=251,t.TYPE_GEO_LOCATION=252,t.TYPE_DEV_FEATURE=253,t.TYPE_SERVER_GET_DEV_FEATURE=254,t.TYPE_CLIENT_LANGUAGES=255,t.TYPE_SERVER_CHANGE_EMAIL=256,t.TYPE_SERVER_GET_LANGUAGES=257,t.TYPE_SERVER_GET_SECRET_COMMENTS=258,t.TYPE_SERVER_ADD_SECRET_COMMENT=259,t.TYPE_CLIENT_SECRET_COMMENTS=260,t.TYPE_CLIENT_WHATS_NEW=261,t.TYPE_CLIENT_DELETE_ACCOUNT_ALTERNATIVES=262,t.TYPE_USER=263,t.TYPE_SERVER_GET_USER=264,t.TYPE_SERVER_GET_CAPTCHA_BY_CONTEXT=265,t.TYPE_CLIENT_CAPTCHA_SETTINGS=266,t.TYPE_SERVER_SUBMIT_REFERRAL_CODE=267,t.TYPE_CLIENT_REFERRAL_CODE_RESULT=268,t.TYPE_CLIENT_COUNTRIES=269,t.TYPE_CLIENT_REGIONS=270,t.TYPE_SERVER_GET_CITIES=271,t.TYPE_CLIENT_CITIES=272,t.TYPE_SERVER_GET_REGIONS=273,t.TYPE_SERVER_COMMON_PLACES_UPDATE=274,t.TYPE_POPULARITY_PAGE=275,t.TYPE_SERVER_GET_SEARCH_DISTANCES=276,t.TYPE_SEARCH_DISTANCES=277,t.TYPE_PUSH_INFO_LIST=278,t.TYPE_SERVER_SEARCH_LOCATIONS=279,t.TYPE_CLIENT_LOCATIONS=280,t.TYPE_SERVER_PHOTO_LIKE=281,t.TYPE_SERVER_MOVE_PHOTO=282,t.TYPE_HELP_CENTER_SECTION_LIST=283,t.TYPE_SERVER_HELP_CENTER_GET_QUESTION=284,t.TYPE_HELP_CENTER_QUESTION=285,t.TYPE_SERVER_GET_SOCIAL_LIKE_PROVIDERS=286,t.TYPE_CLIENT_SOCIAL_LIKE_PROVIDERS=287,t.TYPE_SERVER_DELETE_SECRET_COMMENT=288,t.TYPE_SERVER_REPORT_SECRET_COMMENT=289,t.TYPE_SERVER_RATE_SECRET_COMMENTS=290,t.TYPE_SERVER_SUBSCRIBE_TO_SECRET_COMMENTS=291,t.TYPE_CLIENT_SECRET_COMMENT_ADDED=292,t.TYPE_EXPERIMENTAL_MESSAGE_CHECKER_CONFIG=293,t.TYPE_EXPERIMENTAL_MESSAGE_CHECKER_STATS=294,t.TYPE_IN_APP_NOTIFICATION_INFO=295,t.TYPE_CLIENT_STICKER_PACKS=296,t.TYPE_GIFT_PRODUCT_LIST=297,t.TYPE_PURCHASED_GIFT_ACTION=298,t.TYPE_SERVER_HELP_CENTER_GET_SECTION_LIST=299,t.TYPE_SURVEY_RESULT=300,t.TYPE_SURVEY_SUCCESS=301,t.TYPE_SERVER_GET_COMMON_PLACES=302,t.TYPE_CLIENT_COMMON_PLACES=303,t.TYPE_CLIENT_PAID_VIP_PROMO=304,t.TYPE_SERVER_GET_NEXT_PROMO_BLOCKS=305,t.TYPE_CLIENT_NEXT_PROMO_BLOCKS=306,t.TYPE_SERVER_GET_PLACES_SECTIONS=307,t.TYPE_CLIENT_PLACES_SECTIONS=308,t.TYPE_SERVER_OPEN_MESSENGER=309,t.TYPE_CLIENT_OPEN_MESSENGER=310,t.TYPE_SERVER_GET_PROMOTED_VIDEO=311,t.TYPE_CLIENT_PROMOTED_VIDEO=312,t.TYPE_CLIENT_SPP_PROMO=313,t.TYPE_SERVER_PAYMENT_UNSUBSCRIBE=314,t.TYPE_SERVER_SAVE_USER=315,t.TYPE_SERVER_GET_RADAR_INFO=316,t.TYPE_CLIENT_RADAR_INFO=317,t.TYPE_A_B_TEST=318,t.TYPE_CLIENT_CREDITS_PROMO=319,t.TYPE_SERVER_GET_GIFT_PRODUCT_LIST=320,t.TYPE_SERVER_UNITED_FRIENDS_ACTION=321,t.TYPE_SERVER_GET_EXTERNAL_PROVIDER_IMPORTED_DATA=322,t.TYPE_EXTERNAL_PROVIDER_IMPORTED_DATA=323,t.TYPE_CLIENT_UNSUBSCRIBE_ALTERNATIVE=324,t.TYPE_SERVER_GET_USERS=325,t.TYPE_CLIENT_USERS=326,t.TYPE_CLIENT_FLOATING_BUTTON_CONFIG=327,t.TYPE_EXPERIMENTAL_POPULARITY_PAGE=10001,t.TYPE_EXPERIMENTAL_SERVER_GIFT_ACTION=10002,t.TYPE_EXPERIMENTAL_RUSH_HOUR_CONFIG=10003,t.TYPE_EXPERIMENTAL_GIFTS_PRODUCTS=10004,t.TYPE_EXPERIMENTAL_STICKERS_PACKS=10005,t.TYPE_EXPERIMENTAL_SERVER_GET_LIVE_PHOTOS=10006,t.TYPE_EXPERIMENTAL_CLIENT_LIVE_PHOTOS=10007
}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Object=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Object",t.prototype._descriptor={fields:{object_type:{type:14,type_name:"badoo.bma.ObjectType",number:1,label:2},value:{type:12,number:2,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.KeyValue=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.KeyValue",t.prototype._descriptor={fields:{key:{type:11,type_name:"badoo.bma.Object",number:1,label:2},value:{type:11,type_name:"badoo.bma.Object",number:2,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.Hashtable=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Hashtable",t.prototype._descriptor={fields:{mappings:{type:11,type_name:"badoo.bma.KeyValue",number:1,label:3}}}}()),$gpb.exists("badoo.bma.ProfileField","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileField=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ProfileField",t.prototype._descriptor={fields:{name:{type:9,number:3,label:1},value:{type:9,number:6,label:1},id:{type:9,number:1,label:1},type:{type_name:"badoo.bma.ProfileOptionType",number:2,label:1,type:14,options:{"default":"UNKNOWN_PROFILE_OPTION_TYPE"}},display_value:{type:9,number:4,label:2},required_action:{type:14,type_name:"badoo.bma.ActionType",number:5,label:1}}}}(),$gpb.exists("badoo.bma.BumpedInto","message")||($gpb.exists("badoo.bma.GeoLocation","message")||($gpb.exists("badoo.bma.PhysicalActivity","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhysicalActivity=new $gpb.Enum("badoo.bma.PhysicalActivity");t._values=[0,1,2,3,4,5,7,8],t.PHYSICAL_ACTIVITY_IN_VEHICLE=0,t.PHYSICAL_ACTIVITY_ON_BICYCLE=1,t.PHYSICAL_ACTIVITY_ON_FOOT=2,t.PHYSICAL_ACTIVITY_STILL=3,t.PHYSICAL_ACTIVITY_UNKNOWN=4,t.PHYSICAL_ACTIVITY_TILTING=5,t.PHYSICAL_ACTIVITY_WALKING=7,t.PHYSICAL_ACTIVITY_RUNNING=8}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.GeoLocation=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GeoLocation",t.prototype._descriptor={fields:{longitude_precise:{type:1,number:4,label:1},description:{type:9,number:9,label:1},floor:{type:5,number:15,label:1},timestamp:{type:3,number:10,label:1},altitude:{type:2,number:13,label:1},is_agps:{type:8,number:6,label:1},latitude_precise:{type:1,number:5,label:1},altitude_accuracy:{type:5,number:14,label:1},source:{type:9,number:1,label:1},longitude:{type:2,number:2,label:1},activity:{type:14,type_name:"badoo.bma.PhysicalActivity",number:12,label:1},is_wifi_enabled:{type:8,number:17,label:1},latitude:{type:2,number:3,label:1},accuracy:{type:5,number:8,label:1},speed:{type:2,number:16,label:1},display_image:{type:9,number:11,label:1},uuid:{type:9,number:7,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.BumpedInto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.BumpedInto",t.prototype._descriptor={fields:{date:{type:9,number:1,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:2,label:1}}}}()),$gpb.exists("badoo.bma.Interest","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Interest=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Interest",t.prototype._descriptor={fields:{name:{type:9,number:2,label:2},is_matched:{type:8,number:4,label:1},is_rejected:{type:8,number:6,label:1},is_hidden:{type:8,number:5,label:1},group_id:{type:5,number:3,label:1},interest_id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Language","message")||($gpb.exists("badoo.bma.LanguageLevel","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.LanguageLevel=new $gpb.Enum("badoo.bma.LanguageLevel");t._values=[0,1,2,3,4],t.LANGUAGE_LEVEL_NONE=0,t.LANGUAGE_LEVEL_LOW=1,t.LANGUAGE_LEVEL_AVERAGE=2,t.LANGUAGE_LEVEL_FLUENT=3,t.LANGUAGE_LEVEL_NATIVE=4}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Language=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Language",t.prototype._descriptor={fields:{uid:{type:5,number:1,label:2},name:{type:9,number:2,label:2},level:{type_name:"badoo.bma.LanguageLevel",number:3,label:1,type:14,options:{"default":"LANGUAGE_LEVEL_NONE"}}}}}()),$gpb.exists("badoo.bma.CreditsRewards","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CreditsRewards=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CreditsRewards",t.prototype._descriptor={fields:{circles:{type:11,type_name:"badoo.bma.CircleDescription",number:3,label:3},current_index:{type:5,number:2,label:1},description:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ClientProfileOption","message")||($gpb.exists("badoo.bma.InputTypes","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InputTypes=new $gpb.Enum("badoo.bma.InputTypes");t._values=[1,2,3,4,5,6,7,8,9],t.TEXT=1,t.SELECT=2,t.COMBINED=3,t.LANGUAGES=4,t.CHECKBOX=5,t.LOCATION_CHOOSER=6,t.DATE_PICKER=7,t.DESCRIPTION=8,t.HINT=9}(),$gpb.exists("badoo.bma.ClientProfileOptionValue","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientProfileOptionValue=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientProfileOptionValue",t.prototype._descriptor={fields:{display_value:{type:9,number:2,label:1},value:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Tuple","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Tuple=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Tuple",t.prototype._descriptor={fields:{key:{type:11,type_name:"badoo.bma.Object",number:1,label:2},value:{type:11,type_name:"badoo.bma.Object",number:2,label:2}}}}(),$gpb.exists("badoo.bma.InputFormatTypes","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.InputFormatTypes=new $gpb.Enum("badoo.bma.InputFormatTypes");t._values=[1,2],t.ALPHANUMERIC=1,t.NUMERIC=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientProfileOption=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientProfileOption",t.prototype._descriptor={fields:{input_parts:{type:11,type_name:"badoo.bma.ClientProfileOption",number:6,label:3},current_option_id:{type:9,number:8,label:1},checked:{type:8,number:13,label:1},name:{type:9,number:2,label:2},hint:{type:9,number:15,label:1},display_value:{type:9,number:3,label:2},input_type:{type:14,type_name:"badoo.bma.InputTypes",number:4,label:1},possible_values:{type:11,type_name:"badoo.bma.ClientProfileOptionValue",number:18,label:3},if_master_value:{type:9,number:12,label:3},disabled:{type:8,number:14,label:1},max_chars:{type:5,number:5,label:1},options:{type:11,type_name:"badoo.bma.Tuple",number:7,label:3},if_master_id:{type:9,number:11,label:1},help_text:{type:9,number:9,label:1},min_chars:{type:5,number:10,label:1},type:{type_name:"badoo.bma.ProfileOptionType",number:17,label:1,type:14,options:{"default":"UNKNOWN_PROFILE_OPTION_TYPE"}},id:{type:9,number:1,label:1},format_type:{type:14,type_name:"badoo.bma.InputFormatTypes",number:16,label:1}}}}()),$gpb.exists("badoo.bma.Award","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Award=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Award",t.prototype._descriptor={fields:{award_images:{type:9,number:3,label:3},title_short:{type:9,number:12,label:1},description:{type:9,number:7,label:1},title:{type:9,number:6,label:1},secret_award:{type:8,number:10,label:1},sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:4,label:3},award_id:{type:9,number:1,label:1},progress:{type:5,number:8,label:1},promo_block:{type:11,type_name:"badoo.bma.PromoBlock",number:2,label:1},shared:{type:8,number:9,label:1},profile_rating:{type:5,number:11,label:1},thumbnail:{type:9,number:5,label:1}}}}(),$gpb.exists("badoo.bma.ReceivedGifts","message")||($gpb.exists("badoo.bma.PurchasedGift","message")||($gpb.exists("badoo.bma.GiftProduct","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.GiftProduct=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.GiftProduct",t.prototype._descriptor={fields:{large_url:{type:9,number:3,label:1},thumb_url:{type:9,number:2,label:1},cost:{type:5,number:4,label:1},product_id:{type:5,number:1,label:1},section_ids:{type:5,number:5,label:3}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PurchasedGift=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PurchasedGift",t.prototype._descriptor={fields:{purchase_id:{type:9,number:1,label:1},box_large_url:{type:9,number:13,label:1},gift:{type:11,type_name:"badoo.bma.GiftProduct",number:3,label:1},timestamp:{type:3,number:2,label:1},from_user_name:{type:9,number:7,label:1},is_boxed:{type:8,number:11,label:1},box_thumb_url:{type:9,number:12,label:1},text:{type:9,number:4,label:1},from_user_preview_photo:{type:9,number:8,label:1},from_user_id:{type:9,number:6,label:1},to_user_id:{type:9,number:10,label:1},is_private:{type:8,number:5,label:1},from_user_is_deleted:{type:8,number:9,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ReceivedGifts=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ReceivedGifts",t.prototype._descriptor={fields:{gifts:{type:11,type_name:"badoo.bma.PurchasedGift",number:1,label:3},suggested_gift:{type:11,type_name:"badoo.bma.GiftProduct",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ExperimentalExternalInterest","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalExternalInterest=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalExternalInterest",t.prototype._descriptor={fields:{picture_url:{type:9,number:2,label:1},title:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.SocialNetworkInfo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SocialNetworkInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SocialNetworkInfo",t.prototype._descriptor={fields:{url:{type:9,number:2,label:1},handle:{type:9,number:3,label:1},external_provider:{type:11,type_name:"badoo.bma.ExternalProvider",number:1,label:1}}}}(),$gpb.exists("badoo.bma.Popularity","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Popularity=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Popularity",t.prototype._descriptor={fields:{sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:3,label:3},sharing_images:{type:9,number:2,label:3},display_value:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ClientUserVerifiedGet","message")||($gpb.exists("badoo.bma.UserVerificationMethodStatus","message")||($gpb.exists("badoo.bma.PhoneNumberVerificationType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhoneNumberVerificationType=new $gpb.Enum("badoo.bma.PhoneNumberVerificationType");t._values=[1,2,3],t.PHONE_NUMBER_VERIFICATION_TYPE_LINK=1,t.PHONE_NUMBER_VERIFICATION_TYPE_SMS_PIN=2,t.PHONE_NUMBER_VERIFICATION_TYPE_PHONE_CALL=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UserVerificationMethodStatus=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UserVerificationMethodStatus",t.prototype._descriptor={fields:{display_message:{type:9,number:3,label:1},name:{type:9,number:2,label:1},is_confirmed:{type:8,number:6,label:1},type:{type:14,type_name:"badoo.bma.UserVerificationMethodType",number:1,label:2},pin_length:{type:5,number:9,label:1},verification_data:{type:9,number:4,label:1},phone_number_verification_type:{type:14,type_name:"badoo.bma.PhoneNumberVerificationType",number:10,label:1},allow_unlink:{type:8,options:{"default":"true"},number:8,label:1},external_provider_data:{type:11,type_name:"badoo.bma.ExternalProvider",number:7,label:1},is_connected:{type:8,number:5,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientUserVerifiedGet=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientUserVerifiedGet",t.prototype._descriptor={fields:{display_message:{type:9,number:1,label:1},is_verified:{type:8,number:3,label:1},methods:{type:11,type_name:"badoo.bma.UserVerificationMethodStatus",number:2,label:3}}}}()),$gpb.exists("badoo.bma.ExperimentalGift","message")||($gpb.exists("badoo.bma.ExperimentalGiftAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalGiftAction=new $gpb.Enum("badoo.bma.ExperimentalGiftAction");t._values=[1,2,3],t.GIFT_ACTION_DELETE=1,t.GIFT_ACTION_HIDE=2,t.GIFT_ACTION_REMOVE_TEXT=3}(),$gpb.exists("badoo.bma.ExperimentalGiftType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalGiftType=new $gpb.Enum("badoo.bma.ExperimentalGiftType");t._values=[1,2],t.GIFT_TYPE_DEFAULT=1,t.GIFT_TYPE_PHOTO=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalGift=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalGift",t.prototype._descriptor={fields:{date_ticks:{type:3,number:14,label:1},is_sender_deleted:{type:8,number:7,label:1},sender_name:{type:9,number:10,label:1},text:{type:9,number:6,label:1},sender_uid:{type:9,number:9,label:1},allowed_actions:{type:14,type_name:"badoo.bma.ExperimentalGiftAction",number:3,label:3},date:{type:9,number:4,label:1},large_image_url:{type:9,number:13,label:1},image_url:{type:9,number:8,label:1},sender_photo_url:{type:9,number:11,label:1},is_hidden:{type:8,number:2,label:1},type:{type:14,type_name:"badoo.bma.ExperimentalGiftType",number:5,label:1},id:{type:9,number:1,label:1},recipient_uid:{type:9,number:12,label:1}}}}()),$gpb.exists("badoo.bma.CommonPlace","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonPlace=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CommonPlace",t.prototype._descriptor={fields:{category:{type:9,number:9,label:1},distance:{type:9,number:12,label:1},title:{type:9,number:2,label:1},sort_value:{type:5,number:15,label:1},icon_url:{type:9,number:4,label:1},last_visited_time:{type:3,number:8,label:1},badge_new_people:{type:9,number:14,label:1},large_icon_url:{type:9,number:16,label:1},disabled:{type:8,number:5,label:1},image_url:{type:9,number:3,label:1},people_count:{type:5,number:6,label:1},address:{type:9,number:11,label:1},accent_color:{type:5,number:7,label:1},address_full:{type:9,number:17,label:1},id:{type:9,number:10,label:2},location:{type:11,type_name:"badoo.bma.GeoLocation",number:13,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.PersonProfile=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PersonProfile",t.prototype._descriptor={fields:{profile_image_id:{type:9,number:3,label:1},uid:{type:9,number:1,label:2},album_ids:{type:9,number:4,label:3},common_places_import_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:62,label:3},personal_information_source:{type:11,type_name:"badoo.bma.ExternalProvider",number:46,label:1},vote_hint:{type:9,number:54,label:1},secret_comment_count:{type:5,number:51,label:1},large_image_id:{type:9,number:11,label:1},profile_score:{type:11,type_name:"badoo.bma.ProfileScore",number:43,label:1},facebook_friends:{type:11,type_name:"badoo.bma.ClientFacebookFriend",number:34,label:3},encrypted_uid:{type:9,number:53,label:1},promo_banner:{type:11,type_name:"badoo.bma.PromoBlock",number:67,label:1},allow_edit_gender:{type:8,number:10,label:1},city:{type:9,number:32,label:1},allow_edit_dob:{type:8,number:25,label:1},vote_result:{type:14,type_name:"badoo.bma.VoteResultType",number:9,label:2},friends_in_common:{type:5,number:30,label:1},secret_comment_preview:{type:11,type_name:"badoo.bma.SecretComment",number:59,label:3},show_referral_code_request:{type:8,number:55,label:1},things_in_common:{type:5,number:28,label:1},vibee_number:{type:9,number:68,label:1},voting_enabled:{type:8,number:12,label:1},languages:{type:11,type_name:"badoo.bma.Hashtable",number:7,label:1},fans:{type:11,type_name:"badoo.bma.Person",number:40,label:3},chat_allowed:{type:8,number:21,label:1},bumped_into_places:{type:11,type_name:"badoo.bma.BumpedInto",number:57,label:3},allow_edit_name:{type:8,number:45,label:1},show_common_interests:{type:8,number:17,label:1},is_secret_comments_enabled:{type:8,number:60,label:1},email:{type:9,number:14,label:1},profile_url:{type:9,number:42,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:69,label:1},interests:{type:11,type_name:"badoo.bma.Interest",number:18,label:3},allow_smile:{type:8,number:58,label:1},common_interest_message:{type:9,number:22,label:1},spoken_language:{type:11,type_name:"badoo.bma.Language",number:47,label:3},interests_message:{type:9,number:19,label:1},account_confirmed:{type:8,number:15,label:1},places_in_common_total:{type:5,number:64,label:1},credits_rewards:{type:11,type_name:"badoo.bma.CreditsRewards",number:35,label:1},profile_options:{type:11,type_name:"badoo.bma.ClientProfileOption",number:13,label:3},phone:{type:9,number:16,label:1},personal_info:{type:11,type_name:"badoo.bma.Hashtable",number:6,label:1},age_message:{type:9,number:39,label:1},awards:{type:11,type_name:"badoo.bma.Award",number:36,label:3},received_gifts:{type:11,type_name:"badoo.bma.ReceivedGifts",number:63,label:1},things_in_common_title:{type:9,number:27,label:1},experimental_external_interests:{type:11,type_name:"badoo.bma.ExperimentalExternalInterest",number:10001,label:3},hottest_friends:{type:11,type_name:"badoo.bma.Person",number:50,label:3},percentage_complete:{type:5,number:5,label:2},friends_connections:{type:11,type_name:"badoo.bma.SocialFriendsConnectionsBlock",number:26,label:1},experimental_university_name:{type:9,number:10002,label:1},video_count:{type:5,number:61,label:1},profile_rating:{type:11,type_name:"badoo.bma.Award",number:37,label:1},interests_in_common:{type:5,number:29,label:1},social_networks:{type:11,type_name:"badoo.bma.SocialNetworkInfo",number:41,label:3},date_modified:{type:3,number:2,label:1},country:{type:9,number:33,label:1},add_to_favourites_allowed:{type:8,number:20,label:1},popularity:{type:11,type_name:"badoo.bma.Popularity",number:44,label:1},experimental_gift_teaser_url:{type:9,number:10004,label:1},allow_send_gift:{type:8,number:66,label:1},verified_information:{type:11,type_name:"badoo.bma.ClientUserVerifiedGet",number:24,label:1},profile_field:{type:11,type_name:"badoo.bma.ProfileField",number:48,label:3},their_vote_on_you:{type:14,type_name:"badoo.bma.VoteResultType",number:8,label:2},places_in_common:{type:11,type_name:"badoo.bma.CommonPlace",number:56,label:3},match_message:{type:9,number:38,label:1},allow_share:{type:8,number:52,label:1},experimental_gifts:{type:11,type_name:"badoo.bma.ExperimentalGift",number:10003,label:3},credits:{type:9,number:23,label:1},bumped_into:{type:11,type_name:"badoo.bma.BumpedInto",number:49,label:1},is_match:{type:5,number:31,label:1},is_inapp_promo_partner:{type:8,number:65,label:1}}}}()),$gpb.exists("badoo.bma.SearchResultType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchResultType=new $gpb.Enum("badoo.bma.SearchResultType");t._values=[0,1,2],t.UNKNOWN_SEARCH_RESULT_TYPE=0,t.SEARCH_RESULT_TYPE_USER=1,t.SEARCH_RESULT_TYPE_EXTERNAL_CONTACT=2}(),$gpb.exists("badoo.bma.User","message")||($gpb.exists("badoo.bma.UnitedFriends","message")||($gpb.exists("badoo.bma.UnitedFriendsState","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsState=new $gpb.Enum("badoo.bma.UnitedFriendsState");t._values=[1,2,3,4],t.UNITED_FRIENDS_STATE_NOT_CONNECTED=1,t.UNITED_FRIENDS_STATE_SEARCHING=2,t.UNITED_FRIENDS_STATE_READY=3,t.UNITED_FRIENDS_STATE_CONNECTION_EXPIRED=4}(),$gpb.exists("badoo.bma.UnitedFriendsSection","message")||($gpb.exists("badoo.bma.UnitedFriend","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriend=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriend",t.prototype._descriptor={fields:{external_provider_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1},preview_photo_url:{type:9,number:1,label:1},user_id:{type:9,number:3,label:1},name:{type:9,number:4,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriendsSection=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriendsSection",t.prototype._descriptor={fields:{total_count:{type:5,number:3,label:1},friends:{type:11,type_name:"badoo.bma.UnitedFriend",number:4,label:3},name:{type:9,number:2,label:1},type:{type:14,type_name:"badoo.bma.UnitedFriendsSectionType",number:1,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.UnitedFriends=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UnitedFriends",t.prototype._descriptor={fields:{total_count:{type:5,number:2,label:1},state:{type:14,type_name:"badoo.bma.UnitedFriendsState",number:1,label:1},sections:{type:11,type_name:"badoo.bma.UnitedFriendsSection",number:4,label:3},connection_provider:{type:11,type_name:"badoo.bma.ExternalProvider",number:3,label:1}}}}()),$gpb.exists("badoo.bma.Country","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Country=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Country",t.prototype._descriptor={fields:{id:{type:5,number:1,label:2},name:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.Region","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Region=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Region",t.prototype._descriptor={fields:{id:{type:5,number:1,label:1},name:{type:9,number:2,label:1}}}}(),$gpb.exists("badoo.bma.City","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.City=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.City",t.prototype._descriptor={fields:{latitude:{type:1,number:4,label:1},id:{type:5,number:1,label:2},longitude:{type:1,number:3,label:1},name:{type:9,number:2,label:2}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.User=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.User",t.prototype._descriptor={fields:{profile_fields:{type:11,type_name:"badoo.bma.ProfileField",number:490,label:3},allow_send_gift:{type:8,number:731,label:1},profile_score:{type:11,type_name:"badoo.bma.ProfileScore",number:470,label:1},profile_score_numeric:{type:5,number:471,label:1},pre_match_time_left:{type:11,type_name:"badoo.bma.GoalProgress",number:590,label:1},match_date:{type:3,number:581,label:1},has_paid_vip:{type:8,number:302,label:1},popularity_pnb_place:{type:5,number:691,label:1},allow_smile:{type:8,number:730,label:1},account_confirmed:{type:8,number:40,label:1},allow_chat:{type:8,number:660,label:1},my_vote:{type:14,type_name:"badoo.bma.VoteResultType",number:550,label:1},name:{type:9,number:200,label:1},gender:{type:14,type_name:"badoo.bma.SexType",number:230,label:1},wish:{type:9,number:360,label:1},bumped_into:{type:11,type_name:"badoo.bma.BumpedInto",number:430,label:1},places_in_common:{type:11,type_name:"badoo.bma.CommonPlace",number:511,label:3},is_newbie:{type:8,number:240,label:1},is_conversation:{type:8,number:630,label:1},allow_add_to_favourites:{type:8,number:650,label:1},secret_comment_count:{type:5,number:740,label:1},popularity_level:{type:14,type_name:"badoo.bma.PopularityLevel",number:690,label:1},came_from_text:{type:9,number:761,label:1},has_riseup:{type:8,number:303,label:1},profile_complete_percent:{type:5,number:50,label:1},is_unread:{type:8,number:280,label:1},email:{type:9,number:10,label:1},is_highlighted:{type:8,number:790,label:1},credits_rewards:{type:11,type_name:"badoo.bma.CreditsRewards",number:110,label:1},bumped_into_places:{type:11,type_name:"badoo.bma.BumpedInto",number:431,label:3},credits:{type:5,number:30,label:1},sort_timestamp:{type:3,number:830,label:1},awards:{type:11,type_name:"badoo.bma.Award",number:440,label:3},user_id:{type:9,number:1,label:2},is_blocked:{type:8,number:600,label:1},secret_comment_preview:{type:11,type_name:"badoo.bma.SecretComment",number:741,label:3},vote_sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:720,label:3},interests_in_common:{type:5,number:410,label:1},united_friends:{type:11,type_name:"badoo.bma.UnitedFriends",number:800,label:1},country:{type:11,type_name:"badoo.bma.Country",number:91,label:1},region:{type:11,type_name:"badoo.bma.Region",number:92,label:1},personal_info_source:{type:11,type_name:"badoo.bma.ExternalProvider",number:320,label:1},is_removed:{type:8,number:810,label:1},has_bumped_into_places:{type:8,number:432,label:1},allow_voting:{type:8,number:670,label:1},is_hot:{type:8,number:260,label:1},is_extended_match:{type:8,number:300,label:1},experimental_whats_my_chances:{type:9,number:10001,label:1},last_riseup_time_message:{type:9,number:304,label:1},last_active:{type:3,number:780,label:1},last_active_string:{type:9,number:781,label:1},unread_messages_count:{type:5,number:640,label:1},online_status_text:{type:9,number:331,label:1},common_places_import_providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:513,label:3},distance_short:{type:9,number:540,label:1},has_mobile_app:{type:8,number:680,label:1},city:{type:11,type_name:"badoo.bma.City",number:93,label:1},friends_in_common:{type:5,number:510,label:1},update_timestamp:{type:3,number:820,label:1},allow_edit_name:{type:8,number:80,label:1},is_secret_comments_enabled:{type:8,number:742,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:90,label:1},interests:{type:11,type_name:"badoo.bma.Interest",number:420,label:3},photo_count:{type:5,number:310,label:1},online_status:{type:14,type_name:"badoo.bma.OnlineStatus",number:330,label:1},is_invisible:{type:8,number:270,label:1},places_in_common_total:{type:5,number:512,label:1},is_favourite:{type:8,number:610,label:1},phone:{type:9,number:20,label:1},received_gifts:{type:11,type_name:"badoo.bma.ReceivedGifts",number:750,label:1},albums:{type:11,type_name:"badoo.bma.Album",number:370,label:3},distance:{type:5,number:520,label:1},video_count:{type:5,number:311,label:1},is_deleted:{type:8,number:250,label:1},interests_total:{type:5,number:400,label:1},social_networks:{type:11,type_name:"badoo.bma.SocialNetworkInfo",number:460,label:3},is_verified:{type:8,number:290,label:1},is_match:{type:8,number:580,label:1},vote_sharing_promo:{type:11,type_name:"badoo.bma.PromoBlock",number:710,label:1},display_message:{type:9,number:700,label:1},distance_long:{type:9,number:530,label:1},is_friend:{type:8,number:620,label:1},user_type:{type:14,type_name:"badoo.bma.ExternalProviderType",number:2,label:1},vote_hint:{type:9,number:681,label:1},profile_photo:{type:11,type_name:"badoo.bma.Photo",number:340,label:1},came_from:{type:14,type_name:"badoo.bma.ClientSource",number:760,label:1},allow_edit_gender:{type:8,number:70,label:1},has_spp:{type:8,number:301,label:1},allow_edit_dob:{type:8,number:60,label:1},popularity_visitors_month:{type:5,number:693,label:1},spoken_languages:{type:11,type_name:"badoo.bma.Language",number:480,label:3},allow_sharing:{type:8,number:770,label:1},friends_connections:{type:11,type_name:"badoo.bma.SocialFriendsConnectionsBlock",number:500,label:1},dob:{type:9,number:220,label:1},their_vote:{type:14,type_name:"badoo.bma.VoteResultType",number:560,label:1},age:{type:5,number:210,label:1},popularity:{type:11,type_name:"badoo.bma.Popularity",number:350,label:1},verified_information:{type:11,type_name:"badoo.bma.ClientUserVerifiedGet",number:100,label:1},match_message:{type:9,number:570,label:1},popularity_visitors_today:{type:5,number:692,label:1},is_inapp_promo_partner:{type:8,number:762,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchResult=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchResult",t.prototype._descriptor={fields:{sharing_promo:{type:11,type_name:"badoo.bma.PromoBlock",number:14,label:1},secret_comment_count:{type:5,number:51,label:1},large_image_id:{type:9,number:4,label:1},images:{type:9,number:5,label:3},album:{type:11,type_name:"badoo.bma.Album",number:10,label:1},sharing_providers:{type:11,type_name:"badoo.bma.SocialSharingProvider",number:12,label:3},friends_in_common:{type:5,number:8,label:1},secret_comment_preview:{type:11,type_name:"badoo.bma.SecretComment",number:52,label:3},external_contact:{type:11,type_name:"badoo.bma.PhonebookContact",number:17,label:1},my_vote:{type:14,type_name:"badoo.bma.VoteResultType",number:15,label:1},person_status:{type:11,type_name:"badoo.bma.PersonStatus",number:2,label:1},person_profile:{type:11,type_name:"badoo.bma.PersonProfile",number:21,label:1},has_user_voted:{type:8,number:3,label:1},type:{type:14,type_name:"badoo.bma.SearchResultType",number:18,label:1},interests:{type:11,type_name:"badoo.bma.Interest",number:6,label:3},show_contact_import_promo_banner:{type:8,number:22,label:1},photos:{type:11,type_name:"badoo.bma.Photo",number:7,label:3},user:{type:11,type_name:"badoo.bma.User",number:24,label:1},hottest_friends:{type:5,number:23,label:1},bumped_into:{type:8,number:19,label:1},interests_in_common:{type:5,number:11,label:1},social_networks:{type:11,type_name:"badoo.bma.SocialNetworkInfo",number:20,label:3},is_secret_comments_enabled:{type:8,number:53,label:1},last_friend:{type:8,number:13,label:1},person:{type:11,type_name:"badoo.bma.Person",number:1,label:1},match_message:{type:9,number:16,label:1},profile_rating:{type:5,number:9,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientEncounters=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientEncounters",t.prototype._descriptor={fields:{rush_hour_config:{type:11,type_name:"badoo.bma.RushHourConfig",number:5,label:1},quota:{type:11,type_name:"badoo.bma.VotingQuota",number:4,label:1},results:{type:11,type_name:"badoo.bma.SearchResult",number:1,label:3},search_context:{type:14,type_name:"badoo.bma.SearchType",number:2,label:1},offset:{type:5,number:3,label:1},promo_banner:{type:11,type_name:"badoo.bma.PromoBlock",number:6,label:1}}}}()),$gpb.exists("badoo.bma.NoMoreSearchResults","message")||($gpb.exists("badoo.bma.Survey","message")||($gpb.exists("badoo.bma.SurveyType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SurveyType=new $gpb.Enum("badoo.bma.SurveyType");t._values=[1],t.BUMBLE_END_OF_GAME=1}(),$gpb.exists("badoo.bma.SurveyQuestion","message")||($gpb.exists("badoo.bma.SurveyQuestonType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SurveyQuestonType=new $gpb.Enum("badoo.bma.SurveyQuestonType");t._values=[1,2],t.MULTIPLE_CHOICE=1,t.SINGLE_CHOICE=2}(),$gpb.exists("badoo.bma.SurveyAnswer","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SurveyAnswer=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SurveyAnswer",t.prototype._descriptor={fields:{answer_text:{type:9,number:3,label:1},question_id:{type:5,number:2,label:2},answer_id:{type:5,number:1,label:2}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SurveyQuestion=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SurveyQuestion",t.prototype._descriptor={fields:{type:{type:14,type_name:"badoo.bma.SurveyQuestonType",number:3,label:1},question_text:{type:9,number:2,label:1},mandatory:{type:8,number:4,label:1},uid:{type:5,number:1,label:2},answers:{type:11,type_name:"badoo.bma.SurveyAnswer",number:5,label:3}}}
}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.Survey=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Survey",t.prototype._descriptor={fields:{action_text:{type:9,number:4,label:1},type:{type:14,type_name:"badoo.bma.SurveyType",number:1,label:1},description:{type:9,number:3,label:1},questions:{type:11,type_name:"badoo.bma.SurveyQuestion",number:5,label:3},title:{type:9,number:2,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.NoMoreSearchResults=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.NoMoreSearchResults",t.prototype._descriptor={fields:{can_filter_expand:{type:8,number:2,label:1},survey:{type:11,type_name:"badoo.bma.Survey",number:3,label:1},search_context:{type:14,type_name:"badoo.bma.SearchType",number:1,label:2}}}}()),B.Encounters.UserListBase=$class($u.Observable,{name:"EncountersUserList",social_counters_url:"/ws/mm_social_counters.phtml?sp_id=0&rfr=33",users_cnt:20,min_users_cnt:10,social_check_time:3,next_users_rpc:null,social_request:null,social_timer:null,no_more_users:!1,can_filter_expand:!1,users:null,user:null,previous_user:null,skip_first:!0,loaded_users_ids:null,is_waiting:!0,last_person_id:null,RETRY_COUNT:3,constructor:function(e){$super(this,arguments),$config(this,e),this.users=[],this.loaded_users_ids={},this.previous_users=[],this.social_timer=new $t(this.check_social,this,1e3*this.social_check_time)},destroy:function(){$super(this,arguments),this.next_users_rpc&&(this.next_users_rpc.abort(),this.next_users_rpc=null),null!=this.bannerGuid&&(B.HoN_v3.BannersManager.delBanner(this.bannerGuid),this.bannerGuid=null),this.abort_social_request(),this.social_timer=null,this.users=this.loaded_users_ids=this.user=this.previous_user=this.previous_users=null},abort_social_request:function(){this.social_request&&(this.social_request.abort(),this.social_request=null),this.social_timer&&this.social_timer.clear()},is_empty:function(){return this.users?0===this.users.length:!0},request_next_users:function(e){var t=$gpb.namespace("badoo.bma");this.request(e,(new t.ServerGetEncounters).setContext(t.ClientSource.CLIENT_SOURCE_ENCOUNTERS))},request_specific_users:function(e,t,i){var o=$gpb.namespace("badoo.bma");this.request(e,(new o.ServerGetEncounters).setRequestedPersonIds(t).setContext(i))},request:function(e,t){if(!this.next_users_rpc){var i=$gpb.namespace("badoo.bma");t.setNumber(this.users_cnt),this.last_person_id&&t.setLastPersonId(this.last_person_id),this.next_users_rpc=new $gpb.Rpc(i.MessageType.SERVER_GET_ENCOUNTERS,t).on(i.MessageType.CLIENT_ENCOUNTERS,this.on_client_encounters,this).on(i.MessageType.CLIENT_NO_MORE_ENCOUNTERS,this.on_no_more_encounters,this).setJinbaRequest(e).setRetryCount(this.RETRY_COUNT).request()}},on_client_encounters:function(e,t){if(this.next_users_rpc=null,e)return this.on_error(e),void 0;this.fire("quota_updated",t.getQuota());var i=t.getResults();i&&i.length&&(this.last_person_id=this.get_user_id(i[i.length-1]),this.add_users(i));var o;!this.bannerGuid&&t.hasPromoBanner()&&(this.bannerGuid=B.HoN_v3.BannersManager.getBanner({source:$p.ClientSource.CLIENT_SOURCE_ENCOUNTERS,data:t.getPromoBanner()}),o=$el.down(document.body,".js-banner-slot"),o.innerHTML=B.HoN_v3.BannersManager.getView(this.bannerGuid),$e.add(o,"click",this.onClickBannerSlot,this))},onClickBannerSlot:function(e){var t=$el.up(e,"[data-banner-guid]");return t&&B.HoN_v3.BannersManager.sendPromoStats(!0,t.getAttribute("data-banner-guid")),!0},on_no_more_encounters:function(e,t){return this.next_users_rpc=null,e?(this.on_error(e),void 0):(this.no_more_users=!0,this.can_filter_expand=t.getCanFilterExpand(),this.is_empty()&&this.is_waiting&&this.fire("stop",this.can_filter_expand),void 0)},on_error:function(){B.fire("page:fatal")},add_users:function(e,t){for(var i=$gpb.namespace("badoo.bma"),o=[],s=0;s<e.length;s++){var n=e[s],r=this.get_user_id(n);if(!this.loaded_users_ids[r]){if(this.loaded_users_ids[r]=!0,!n.getPerson()){var a=(n.getAlbum().getPhotos()[0].getId(),n.getExternalContact()),l=(new i.Person).setUid(r).setName(a.getName()).setGender(a.getGender()).setAge(0).setDob("").setWish("").setLocation(0).setPreviewImageId(n.getAlbum().getPhotos()[0].getPreviewUrl()).setNumberOfPhotos(1).setPersonalAlbumId("").setDeleted(!1).setPending(!1).setVisible(!0).setFriend(!1).setFavourite(!1).setBlocked(!1).setProfileVisited(!1);n.setPerson(l)}o.push(n)}}var _=!t&&o.length&&this.is_empty();if(this.is_waiting=!1,this.fire("add_users",o),Array.prototype.push.apply(this.users,o),_){var n=this.users.shift();this.set_user(n)}},replace_users:function(e){this.users=[],this.add_users(e,!0)},load_next_profile:function(){for(var e,t,i=0,o=Math.min(this.users.length,this.min_users_cnt);o>i;i++)if(void 0===this.users[i].getPersonProfile()&&!this.users[i].pp_requested){e=this.users[i],t=this.get_user_id(e);break}if(e){var s=$gpb.namespace("badoo.bma"),n=(new s.ServerGetPersonProfile).setPersonId(t);e.pp_requested=!0,new $gpb.Rpc(s.MessageType.SERVER_GET_PERSON_PROFILE,n).on(s.MessageType.CLIENT_PERSON_PROFILE,this.on_profile,this).request()}},on_profile:function(e,t){if(!e){var i=t.getUid(),o=this.get_user(i);o&&o.setPersonProfile(t)}},get_user:function(e){if(this.users)for(var t=0;t<this.users.length;t++)if(this.get_user_id(this.users[t])==e)return this.users[t];return null},set_user:function(e){this.previous_user&&this.previous_users.push(this.previous_user),this.previous_user=this.user,this.user=e,this.fire("user",e),this.abort_social_request(),void 0===e.getFriendsInCommon()&&void 0===e.getHottestFriends()&&(this.skip_first=!1,this.check_social())},next:function(){if(this.no_more_users){if(this.is_empty())return this.fire("stop",this.can_filter_expand),void 0}else if(this.users.length<=this.min_users_cnt&&this.request_next_users(),this.is_empty())return this.is_waiting=!0,this.fire("wait"),void 0;this.load_next_profile(),this.set_user(this.users.shift()),(this.no_more_users||this.is_empty())&&this.fire("last_user")},rewind:function(){this.previous_user&&(this.users.unshift(this.user),this.user=this.previous_user,this.previous_user=this.previous_users.pop(),this.fire("user",this.user))},check_social:function(e){if(!this.social_request){if(this.social_timer.clear(),this.skip_first)return this.skip_first=!1,this.social_timer.set(),void 0;for(var t=[this.get_user_id(this.user)],i=0;i<this.users.length;i++){var o=this.users[i];e&&o.setFriendsInCommon(void 0),void 0===o.getFriendsInCommon()&&t.push(this.get_user_id(o))}this.social_request=new $r(this.social_counters_url,{method:"post",params:{users:t},ready:this.on_social_ready,error:this.on_social_error},this)}},on_social_ready:function(e){if(this.social_request=null,"ready"===e.status&&e.data){for(var t=0;t<this.users.length;t++){var i=this.users[t],o=this.get_user_id(this.users[t]);o in e.data&&i.getFriendsInCommon(e.data[o])}var o=this.get_user_id(this.user);o in e.data&&this.fire("social_updated",e.data[o])}else this.social_timer.set()},on_social_error:function(){this.social_request=null,this.social_timer.set()},get_user_id:function(e){var t=e.getPerson();return t?t.getUid():e.getExternalContact().getUserId()}}),B.ImagePreloadQueue||(B.ImagePreloadQueue=new $class($u.Observable,{name:"ImagePreloadQueue",_active_threads:0,_completed:!1,_preloaders:null,_iframes:null,_preloaded:null,_queue:null,max_threads:2,constructor:function(){$super(this,arguments),this._preloaders={},this._preloaded={},this._iframes=[],this._queue=[]},append:function(e){e=this.drop_preloaded(e),e.length&&(Array.prototype.push.apply(this._queue,e),this._fulfil_queue())},prepend:function(e){e=this.drop_preloaded(e),e.length&&(Array.prototype.unshift.apply(this._queue,e),this._fulfil_queue())},drop_preloaded:function(e){var t,i,o=[];for(i=0;i<e.length;i++)t=e[i],this.has_preloaded(t)||this.in_queue(t)||o.push(t);return o},cancel:function(e){for(var t=0;t<e.length;t++)this._cancel_file(e[t]);this._fulfil_queue()},in_queue:function(e){var t,i;for(t=0;t<this._queue.length;t++)if(i=this._queue[t],e===i)return!0;return!1},has_preloaded:function(e){return this._preloaded[e]},_cancel_file:function(e){for(var t=0;t<this._queue.length;t++)e===this._queue[t]&&this._queue.splice(t,1);if(this._preloaders[e]){var i=this._preloaders[e];this._stop_iframe(i),this._finish(i)}},_stop_iframe:function(e){e.image_src=null,this._destroy_images(e);var t=e.contentWindow;t.stop?t.stop():(t=e.contentDocument,t.execCommand&&t.execCommand("Stop",!1))},_destroy_images:function(e){for(var t=$el.iframe_document(e).body,i=$el.select(t,"img"),o=0;o<i.length;o++){var s=i[o];s.onload=null,s.onerror=null,$el.remove(s)}},_fulfil_queue:function(){for(var e=this._active_threads;e<this.max_threads;e++)this._next()},_next:function(){this._queue.length?(this._completed=!1,this._preload(this._queue.shift())):this._active_threads||this._completed||(this._completed=!0)},_preload:function(e){this._preloaders[e]=this._create_preloader(e),this._active_threads++},_create_preloader:function(e){var t=this._iframes.pop();return t?(t.image_src=e,this._preload_image(t)):(t=$el.create("iframe",{src:"about:blank",style:{display:"none"},name:this.name+this._active_threads}),t.image_src=e,$e.add(t,"load",this._preload_image.bind(this,t),this),document.body.appendChild(t)),t},_preload_image:function(e){this._destroy_images(e);var t=new e.contentWindow.Image,i=$el.iframe_document(e).body,o=+new Date;i.appendChild(t),t.onload=this._on_load.bind(this,e,o),t.onerror=this._on_error.bind(this,e,o),t.src=e.image_src},_on_load:function(e,t){var i=e.image_src,o=+new Date-t;this._preloaded[i]=!0,this.fire("load",i,o),this._finish(e)},_on_error:function(e,t){var i=e.image_src,o=+new Date-t;this.fire("error",i,o),this._finish(e)},_finish:function(e){this._iframes.push(e),this._preloaders[e.image_src]=null,this._active_threads--,this._next()}})),B.Encounters.PhotosBase=$class($u.Observable,{name:"EncountersPhotos",photos:null,constructor:function(){$super(this,arguments),this.photos={}},add_photos:function(e){for(var t=[],i=0;i<e.length;i++){for(var o=e[i],s=o.getAlbum().getPhotos(),n=0;n<s.length;n++){var r=s[n];this.photos[r.getId()]=r}t.push(this.get_url(s[0]))}B.ImagePreloadQueue.append(t)},prepend_preload:function(e){B.ImagePreloadQueue.prepend(this.ids_to_urls(e))},cancel_preload:function(e){B.ImagePreloadQueue.cancel(this.ids_to_urls(e))},get:function(e){return this.get_url(this.photos[e])},get_url:function(e){return e.getLargeUrl()},ids_to_urls:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.get(e[i]));return t},has_preloaded:function(e){return B.ImagePreloadQueue.has_preloaded(this.get(e))}}),$l.register({section:"hon/rush_hour",lang:"en-us",translations:{HON_RUSH_HOUR:{START:{RATE_MALE:"Rush Hour has started!<br>Rate {{num}} {{guy}} Hot in {{time}} {{dimension}} to get seen faster!",RATE_FEMALE:"Rush Hour has started!<br>Rate {{num}} {{girl}} Hot in {{time}} {{dimension}} to get seen faster!",RATE_ANY:"Rush Hour has started!<br>Rate {{num}} {{person}} Hot in {{time}} {{dimension}} to get seen faster!"},SUCCESS:{MALE:{RATE_MALE:"You've made it in time!<br>You will be shown faster to {{num}} {{guy}} you rated Hot!",RATE_FEMALE:"You've made it in time!<br>You will be shown faster to {{num}} {{girl}} you rated Hot!",RATE_ANY:"You've made it in time!<br>You will be shown faster to {{num}} {{person}} you rated Hot!"},FEMALE:{RATE_MALE:"You've made it in time!<br>You will be shown faster to {{num}} {{guy}} you rated Hot!",RATE_FEMALE:"You've made it in time!<br>You will be shown faster to {{num}} {{girl}} you rated Hot!",RATE_ANY:"You've made it in time!<br>You will be shown faster to {{num}} {{person}} you rated Hot!"}},FAIL:{MALE:"Sorry, time's up!<br>Yet you can try Rush Hour one more time!",FEMALE:"Sorry, time's up!<br>Yet you can try Rush Hour one more time!"}}}}),$gpb.exists("badoo.bma.ExperimentalRushHourConfig","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalRushHourConfig=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalRushHourConfig",t.prototype._descriptor={fields:{likes_left:{type:5,number:5,label:1},time_left:{type:5,number:6,label:1},active:{type:8,number:1,label:1},in_progress:{type:8,number:2,label:1},likes_total:{type:5,number:3,label:1},time_total:{type:5,number:4,label:1}}}}(),$gpb.exists("badoo.bma.SearchSettings","message")||($gpb.exists("badoo.bma.SearchDistances","message")||($gpb.exists("badoo.bma.Unit","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Unit=new $gpb.Enum("badoo.bma.Unit");t._values=[0,1,2],t.UNIT_UNKNOWN=0,t.UNIT_METRIC=1,t.UNIT_IMPERIAL=2}(),$gpb.exists("badoo.bma.SearchArea","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchArea=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchArea",t.prototype._descriptor={fields:{maximal:{type:8,number:4,label:1},area_id:{type:9,number:1,label:1},radius:{type:5,number:2,label:1},minimal:{type:8,number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchDistances=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchDistances",t.prototype._descriptor={fields:{unit_type:{type:14,type_name:"badoo.bma.Unit",number:1,label:1},area:{type:11,type_name:"badoo.bma.SearchArea",number:2,label:3}}}}()),$gpb.exists("badoo.bma.TiwIdea","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.TiwIdea=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.TiwIdea",t.prototype._descriptor={fields:{tiw_phrase:{type:9,number:2,label:1},tiw_phrase_id:{type:5,number:1,label:1},show_interested_in:{type:8,number:3,label:1}}}}(),$gpb.exists("badoo.bma.SearchSettingsAgeOption","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchSettingsAgeOption=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchSettingsAgeOption",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},age_option_id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Slider","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Slider=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Slider",t.prototype._descriptor={fields:{min_range:{type:5,number:4,label:1},max_value:{type:5,number:2,label:1},min_value:{type:5,number:1,label:1},is_left_adjustable:{type:8,number:5,label:1},unit_type:{type_name:"badoo.bma.Unit",number:6,label:1,type:14,options:{"default":"UNIT_UNKNOWN"}},step:{type:5,number:3,label:1}}}}(),$gpb.exists("badoo.bma.FolderTypes","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FolderTypes=new $gpb.Enum("badoo.bma.FolderTypes");t._values=[-1,0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,25,26],t.UNSPECIFIED_FOLDER=-1,t.ALL_MESSAGES=0,t.UNREAD_MESSAGES=2,t.FRIENDS=3,t.FAVOURITES=4,t.MUTUAL_ATTRACTIONS=5,t.WANT_TO_MEET_YOU=6,t.YOU_WANT_TO_MEET=7,t.PROFILE_VISITORS=8,t.BLOCKED=9,t.NEARBY_PEOPLE=10,t.PRIVATE_ALBUM_ACCESS=11,t.NEARBY_PEOPLE_2=12,t.SPOTLIGHT=13,t.NEARBY_PEOPLE_3=14,t.MATCHES=15,t.NEARBY_PEOPLE_4=16,t.RATED_ME=17,t.HON_MESSAGES=18,t.PROFILE_SEARCH=20,t.LOCAL_HOT=21,t.UNIVERSITY_HOT_LIST=22,t.FRIENDS_HOT_LIST=23,t.COMMON_PLACE=24,t.NEARBY_PEOPLE_WEB=25,t.PHOTO_OF_THE_DAY=26}(),$gpb.exists("badoo.bma.ExtendedSearchSettings","message")||($gpb.exists("badoo.bma.ExtendedSearchFilter","message")||($gpb.exists("badoo.bma.ExtendedSearchOption","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExtendedSearchOption=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExtendedSearchOption",t.prototype._descriptor={fields:{display_text:{type:9,number:3,label:1},selected:{type:8,number:2,label:1},id:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.SelectType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SelectType=new $gpb.Enum("badoo.bma.SelectType");t._values=[1,2,3],t.SELECT_SINGLE=1,t.SELECT_MULTIPLE=2,t.SELECT_RANGE=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExtendedSearchFilter=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExtendedSearchFilter",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},additional_options:{type:11,type_name:"badoo.bma.ExtendedSearchOption",number:5,label:3},select_type:{type:14,type_name:"badoo.bma.SelectType",number:3,label:1},id:{type:9,number:1,label:1},options:{type:11,type_name:"badoo.bma.ExtendedSearchOption",number:4,label:3}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExtendedSearchSettings=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExtendedSearchSettings",t.prototype._descriptor={fields:{selected_filters_order:{type:9,number:2,label:3},filters:{type:11,type_name:"badoo.bma.ExtendedSearchFilter",number:1,label:3}}}}()),$gpb.exists("badoo.bma.UserListFilter","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UserListFilter=new $gpb.Enum("badoo.bma.UserListFilter");t._values=[0,1,2,3,4,5,6,7],t.LIST_FILTER_ONLINE=0,t.LIST_FILTER_NEW=1,t.LIST_FILTER_UNREAD=2,t.LIST_FILTER_CONVERSATIONS=3,t.LIST_FILTER_ACTIVE_USERS=4,t.LIST_FILTER_NEARBY=5,t.LIST_FILTER_FAVOURITES=6,t.LIST_FILTER_MATCHED=7}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchSettings=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchSettings",t.prototype._descriptor={fields:{distances:{type:11,type_name:"badoo.bma.SearchDistances",number:24,label:1},area_id:{type:9,number:23,label:1},cased_location_name:{type:9,number:25,label:1},number:{type:5,number:6,label:1},to_age:{type:5,number:5,label:1},location_id:{type:5,number:8,label:1},bumble_vibee_enabled:{type:8,number:27,label:1},current_distance_to:{type:5,number:22,label:1},location_name:{type:9,number:10,label:1},from_age:{type:5,number:4,label:1},current_age_option:{type:5,number:17,label:1},current_distance_from:{type:5,number:21,label:1},tiw_phrase_id:{type:5,number:15,label:1},tiw_ideas:{type:11,type_name:"badoo.bma.TiwIdea",number:14,label:3},nearby_age_range:{type:11,type_name:"badoo.bma.SearchSettingsAgeOption",number:16,label:3},distance_slider:{type:11,type_name:"badoo.bma.Slider",number:20,label:1},vote_on_celebrities:{type:8,number:19,label:1},wish_options_deprecated:{type:9,number:7,label:3},previously_saved:{type:8,number:9,label:1},folder_id:{type:14,type_name:"badoo.bma.FolderTypes",number:12,label:1},extended_search_settings:{type:11,type_name:"badoo.bma.ExtendedSearchSettings",number:26,label:1},min_age_range:{type:5,number:18,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:28,label:1},context_type:{type:14,type_name:"badoo.bma.SearchType",number:1,label:2},wish:{type:9,number:2,label:1},filter:{type:14,type_name:"badoo.bma.UserListFilter",number:13,label:3},gender:{type:14,type_name:"badoo.bma.SexType",number:3,label:3},is_custom_tiw_allowed:{type:8,number:11,label:1}}}}()),$gpb.exists("badoo.bma.SearchSettingsContext","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SearchSettingsContext=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SearchSettingsContext",t.prototype._descriptor={fields:{search_response_context:{type:14,type_name:"badoo.bma.SearchType",number:1,label:2}}}}(),B.Encounters||(B.Encounters=new $u.Observable),B.Encounters.Filter||(B.Encounters.Filter=new $class({name:"EncountersFilter",settings:null,get:function(e,t){if(this.settings)return e.call(t,this.settings),void 0;if(this._observable||(this._observable=new $u.Observable),this._observable.on("ready",e,t),!this.$r_get_encounters_settings){var i=(new $p.SearchSettingsContext).setSearchResponseContext($p.SearchType.ENCOUNTERS);this.$r_get_encounters_settings=new $gpb.Rpc($p.MessageType.SERVER_GET_ENCOUNTER_SETTINGS,i).on($p.MessageType.CLIENT_ENCOUNTER_SETTINGS,this.on_client_encounters_settings,this).request()}},invalidate:function(){this.$r_get_encounters_settings&&this.$r_get_encounters_settings.destroy(),this._observable&&this._observable.destroy(),this._observable=this.$r_get_encounters_settings=this.settings=null},on_client_encounters_settings:function(e,t){e||(this.$r_get_encounters_settings=null,this.update_settings(t),this._observable.fire("ready",this.settings),this._observable.destroy(),this._observable=null)},set:function(e,t,i){var o=$gpb.namespace("badoo.bma"),s=this.convert_gender(e["gender[]"]),n=(new o.SearchSettings).setContextType(o.SearchType.ENCOUNTERS).setGender(s).setFromAge(+e.age_f).setToAge(+e.age_t);new $gpb.Rpc(o.MessageType.SERVER_SAVE_ENCOUNTER_SETTINGS,n).on($gpb.Rpc.SpecialEvent.ON_REQ_END,t,i).request(),this.update_settings(n)},update_settings:function(e){this.settings={gender:e.getGender(),from_age:e.getFromAge(),to_age:e.getToAge(),min_age_range:e.getMinAgeRange()}},convert_gender:function(e){e=e||["M","F"];for(var t=[],i=0;i<e.length;i++)t[i]="M"===e[i]?$p.SexType.MALE:$p.SexType.FEMALE;return t},is_changed:function(e){if(null==this.settings)return!0;if(this.settings.from_age!==parseInt(e.age_f,10))return!0;if(this.settings.to_age!==parseInt(e.age_t,10))return!0;var t=this.convert_gender(e["gender[]"]).sort(),i=this.settings.gender.sort();return i.length!==t.length?!0:i[0]!==t[0]||i[1]!==i[1]?!0:!1}})),B.Encounters||(B.Encounters=new $u.Observable),B.Encounters.RushHour||(B.Encounters.RushHour=new $class({name:"Encounters.RushHour",config:null,likes_left:0,time_left:0,ovl_type:"hon-v3-rush-hour",info_ovl_url:"/ws-rush-hour-ovl-info",success_ovl_url:"/ws-rush-hour-ovl-success",fail_ovl_url:"/ws-rush-hour-ovl-fail",to_skip:!1,vote_counter:0,timer:null,gender_value:"person",gender_index:"RATE_ANY",constructor:function(){this.init_$e=B.on({"app:init":this.init,"app:statechange":this.init},this)},init:function(){B.un(this.init_$e);var e=B.Features.get("ALLOW_EXPERIMENTAL_RUSH_HOUR");e&&e.enabled&&this.request_config()},destroy:function(){this.config&&this.config.getActive()&&(this.vote_counter=null,this.clear_timeout(),this.timer=null,this.encounters_$e&&B.Encounters.un(this.$e),this.$e&&B.un(this.$e))},request_config:function(){var e=$gpb.namespace("badoo.bma"),t=new e.ExperimentalRushHourConfig;this.config_request=new $gpb.Rpc(e.MessageType.EXPERIMENTAL_SERVER_GET_RUSH_HOUR,t).on(e.MessageType.EXPERIMENTAL_RUSH_HOUR_CONFIG,this.on_rush_hour_config,this).request()},on_rush_hour_config:function(e,t){e||($config(this,{config:t,likes_left:t.getLikesLeft(),time_left:t.getTimeLeft()}),t.getActive()&&(this.timer=new $t(this.game_fail,this,1e3*this.time_left),this.time_left!==t.getTimeTotal()&&this.reset_timeout(),this.encounters_$e=B.Encounters.on({"RushHour:toggle":this.toggle,"RushHour:restart":this.game_start},this),this.$e=B.on({"encounters:vote":this.vote},this),B.Encounters.Filter.get(this.on_encounters_settings,this)))},clear_timeout:function(){this.timer.clear()},reset_timeout:function(){this.timer.set(1e3*this.time_left)},on_encounters_settings:function(e){2!==e.gender.length&&(this.is_male(e.gender[0])?(this.gender_value="guy",this.gender_index="RATE_MALE"):(this.gender_value="girl",this.gender_index="RATE_FEMALE"))},toggle_counter:function(e){B.Encounters.fire("RushHour:toggle_counter",e),e&&this.update_counter()},vote:function(e){return e=e||{},"yes"!==e.choice||e.allowed===!1||this.to_skip?void 0:(this.vote_counter++,1!==this.vote_counter||this.config.getInProgress()?(this.config.getInProgress()&&this.likes_left>0&&(this.likes_left--,0===this.likes_left&&this.game_success(),this.update_counter()),void 0):(this.game_start(!0),void 0))},toggle:function(e){this.to_skip=!e,this.config.getInProgress()&&this.toggle_counter(e)},update_counter:function(){B.Encounters.fire("RushHour:update_counter",this.likes_left)},send_stat:function(e){var t=$gpb.namespace("badoo.bma"),i={START:t.RushHourStatsType.GAME_START,FAIL:t.RushHourStatsType.GAME_FAILED,SUCCESS:t.RushHourStatsType.GAME_SUCCESS},o=(new t.RushHourStats).setType(i[e]),s=(new t.ServerAppStats).setRushHourStats(o);this.rpc=new $gpb.Rpc(t.MessageType.SERVER_APP_STATS,s).request()},game_start:function(e){this.notify("START"),this.vote_counter=1,this.config.setInProgress(!0),this.toggle_counter(!0),e||this.send_stat("START"),this.reset_timeout()},game_fail:function(){this.notify("FAIL"),this.send_stat("FAIL"),this.game_end()},game_success:function(){this.notify("SUCCESS"),this.send_stat("SUCCESS"),this.game_end()},game_end:function(){this.clear_timeout(),this.likes_left=this.config.getLikesTotal(),this.time_left=this.config.getTimeTotal(),this.config.setInProgress(!1),this.toggle_counter(!1)},notify:function(e){var t,i=this.is_male(B.Session.getUserGender())?"MALE":"FEMALE";switch(e){case"START":t=$l.get("hon/rush_hour",["HON_RUSH_HOUR",e,this.gender_index]);break;case"SUCCESS":t=$l.get("hon/rush_hour",["HON_RUSH_HOUR",e,i,this.gender_index]);break;case"FAIL":t=$l.get("hon/rush_hour",["HON_RUSH_HOUR",e,i])}var o=this.config.getTimeTotal()/3600,s={num:this.config.getLikesTotal(),time:o,dimension:$l.get_num_dependent("hour",o)};s[this.gender_value]=$l.get_num_dependent(this.gender_value,this.config.getLikesTotal());var n={START:this.info_ovl_url,SUCCESS:this.success_ovl_url,FAIL:this.fail_ovl_url},r={ovl:{type:this.ovl_type,url:n[e]},icon:{red:!0,time:!0},text:$u.tpl(t,s)};B.HoN_v3.Notification.show_notification_dust(r,"rush_hour",!1)},is_male:function(e){return e===$gpb.namespace("badoo.bma").SexType.MALE}})),$gpb.exists("badoo.bma.ClientNotification","message")||($gpb.exists("badoo.bma.ExternalProviders","message")||($gpb.exists("badoo.bma.ExternalProviderContext","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderContext=new $gpb.Enum("badoo.bma.ExternalProviderContext");t._values=[1,2,3,4,5,6,7,8],t.EXTERNAL_PROVIDER_TYPE_CONTACTS=1,t.EXTERNAL_PROVIDER_TYPE_PHOTOS=2,t.EXTERNAL_PROVIDER_TYPE_REGISTRATION=3,t.EXTERNAL_PROVIDER_TYPE_PERSONAL_INFORMATION=4,t.EXTERNAL_PROVIDER_TYPE_INTERESTS=5,t.EXTERNAL_PROVIDER_TYPE_WORK_EDUCATION=6,t.EXTERNAL_PROVIDER_TYPE_VIDEOS=7,t.EXTERNAL_PROVIDER_TYPE_COMMON_PLACES=8}(),$gpb.exists("badoo.bma.ImportGoalProgress","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ImportGoalProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ImportGoalProgress",t.prototype._descriptor={fields:{number_already_imported_string:{type:9,number:3,label:1},number_required:{type:5,number:1,label:1},description:{type:9,number:5,label:1},number_already_imported:{type:5,number:2,label:1},progress_stops:{type:9,number:4,label:3}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviders=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProviders",t.prototype._descriptor={fields:{providers:{type:11,type_name:"badoo.bma.ExternalProvider",number:1,label:3},heading_string:{type:9,number:4,label:1},title:{type:9,number:5,label:1},display_image:{type:9,number:7,label:1},context:{type:14,type_name:"badoo.bma.ExternalProviderContext",number:2,label:1},import_goal_progress:{type:11,type_name:"badoo.bma.ImportGoalProgress",number:6,label:1},display_string:{type:9,number:3,label:1}}}}()),$gpb.exists("badoo.bma.CommonPlaceSuggestion","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CommonPlaceSuggestion=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CommonPlaceSuggestion",t.prototype._descriptor={fields:{description:{type:9,number:3,label:1},id:{type:5,number:1,label:1},places:{type:11,type_name:"badoo.bma.CommonPlace",number:2,label:3},title:{type:9,number:4,label:1}}}}(),$gpb.exists("badoo.bma.ClientNotificationType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientNotificationType=new $gpb.Enum("badoo.bma.ClientNotificationType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,49,10001,10002,10003],t.UNKNOWN_CLIENT_NOTIFICATION_TYPE=0,t.CLIENT_NOTIFICATION_TYPE_VERIFIED_MESSAGES_BANNER=1,t.CLIENT_NOTIFICATION_TYPE_I_AM_HERE_TO_BANNER=2,t.CLIENT_NOTIFICATION_TYPE_PHOTOS_MODERATED=3,t.CLIENT_NOTIFICATION_TYPE_CREDITS_REWARDS=4,t.CLIENT_NOTIFICATION_TYPE_INVITE_ALL_FACEBOOK_FRIENDS=5,t.CLIENT_NOTIFICATION_TYPE_INVITE_ALL_FACEBOOK_FRIENDS_HIDDEN=6,t.CLIENT_NOTIFICATION_TYPE_REACTIVATION_INVITES=7,t.CLIENT_NOTIFICATION_TYPE_FRIEND_JOINED_NOTIFICATION=8,t.CLIENT_NOTIFICATION_TYPE_NEW_AWARD=9,t.CLIENT_NOTIFICATION_TYPE_RATE_YOUR_FRIENDS=10,t.CLIENT_NOTIFICATION_TYPE_INVITE_PHONEBOOK_SPLASH=11,t.CLIENT_NOTIFICATION_TYPE_SPP_EXPIRED=12,t.CLIENT_NOTIFICATION_TYPE_HELP_FRIENDS=13,t.CLIENT_NOTIFICATION_TYPE_NEW_SOCIAL_PHOTOS=14,t.CLIENT_NOTIFICATION_TYPE_WHATS_NEW=15,t.CLIENT_NOTIFICATION_TYPE_CONNECT_TWITTER=16,t.CLIENT_NOTIFICATION_TYPE_FRIENDS_OF_FRIENDS=17,t.CLIENT_NOTIFICATION_TYPE_FEATURES_CHANGED=18,t.CLIENT_NOTIFICATION_TYPE_COMMON_PLACES_SUGGESTION=19,t.CLIENT_NOTIFICATION_TYPE_SPOTLIGHT_REMINDER=20,t.CLIENT_NOTIFICATION_TYPE_BOOST_INVITES=21,t.CLIENT_NOTIFICATION_TYPE_VIDEO_PROCESS_COMPLETED=22,t.CLIENT_NOTIFICATION_TYPE_FIRST_PHOTO_APPROVED=23,t.CLIENT_NOTIFICATION_TYPE_SECRET_COMMENT=24,t.CLIENT_NOTIFICATION_TYPE_EMPTY_PHOTOS=25,t.CLIENT_NOTIFICATION_TYPE_HUGGLE_PROMO_SPLASH=26,t.CLIENT_NOTIFICATION_TYPE_EXTRA_SHOWS_REMINDER=27,t.CLIENT_NOTIFICATION_TYPE_FREE_SPOTLIGHT=28,t.CLIENT_NOTIFICATION_TYPE_RISE_UP_REMINDER=29,t.CLIENT_NOTIFICATION_TYPE_PHOTO_OF_THE_DAY=30,t.CLIENT_NOTIFICATION_TYPE_CONFIRM_EMAIL=31,t.CLIENT_NOTIFICATION_TYPE_PHOTO_OF_THE_DAY_GET_FEATURED=32,t.CLIENT_NOTIFICATION_TYPE_SUPER_POWERS_PROMO=33,t.CLIENT_NOTIFICATION_TYPE_MY_PROFILE_SCORE_CALCULATED=34,t.CLIENT_NOTIFICATION_TYPE_CONNECT_FACEBOOK_PROMO=35,t.CLIENT_NOTIFICATION_TYPE_BUMBLE_VIBEE_UNLOCK=36,t.CLIENT_NOTIFICATION_TYPE_SPOTLIGHT_FOR_SHARING=37,t.CLIENT_NOTIFICATION_TYPE_EMAIL_TROUBLE=38,t.CLIENT_NOTIFICATION_TYPE_EMAIL_IN_SPAM=39,t.CLIENT_NOTIFICATION_TYPE_PROMO_IMPORT=40,t.CLIENT_NOTIFICATION_TYPE_PROMO_IMPORT_COMPLETED=41,t.CLIENT_NOTIFICATION_TYPE_EMAIL_PROBLEM=42,t.CLIENT_NOTIFICATION_TYPE_PROMO_PHOTOS_IMPORT=43,t.CLIENT_NOTIFICATION_TYPE_ABUSE=44,t.CLIENT_NOTIFICATION_TYPE_VIP_PROMO=45,t.CLIENT_NOTIFICATION_TYPE_PURCHASE_COMPLETE=46,t.CLIENT_NOTIFICATION_TYPE_VERIFY=47,t.CLIENT_NOTIFICATION_TYPE_PURCHASE_FAILED=49,t.EXPERIMENTAL_CLIENT_NOTIFICATION_TYPE_GIFT=10001,t.EXPERIMENTAL_CLIENT_NOTIFICATION_TYPE_FREE_CREDITS=10002,t.EXPERIMENTAL_CLIENT_NOTIFICATION_TYPE_DOUBLE_CREDITS=10003}(),$gpb.exists("badoo.bma.PhotoNotificationInfo","message")||($gpb.exists("badoo.bma.ExternalProviderImportProgress","message")||($gpb.exists("badoo.bma.ProfileFieldImportData","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileFieldImportData=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ProfileFieldImportData",t.prototype._descriptor={fields:{profile_fields:{type:11,type_name:"badoo.bma.ProfileField",number:1,label:3}}}}(),$gpb.exists("badoo.bma.FormFailure","message")||($gpb.exists("badoo.bma.FieldError","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FieldError=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FieldError",t.prototype._descriptor={fields:{field_name:{type:9,number:1,label:2},error:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.FormField","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FormField=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FormField",t.prototype._descriptor={fields:{key:{type:9,number:1,label:1},value:{type:9,number:2,label:1}}}
}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.FormFailure=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FormFailure",t.prototype._descriptor={fields:{form_data:{type:11,type_name:"badoo.bma.Hashtable",number:4,label:1},failure:{type:11,type_name:"badoo.bma.ServerErrorMessage",number:2,label:1},errors:{type:11,type_name:"badoo.bma.FieldError",number:1,label:3},captcha_url:{type:9,number:3,label:1},str_form_data:{type:11,type_name:"badoo.bma.FormField",number:5,label:3}}}}()),$gpb.exists("badoo.bma.ContactImportProgress","message")||($gpb.exists("badoo.bma.ContactListView","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ContactListView=new $gpb.Enum("badoo.bma.ContactListView");t._values=[1,2],t.CLV_LIST=1,t.CLV_GRID=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ContactImportProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ContactImportProgress",t.prototype._descriptor={fields:{display_text:{type:9,number:2,label:1},required_contact_count:{type:5,number:5,label:1},client_should_send_sms:{type:8,number:7,label:1},contacts:{type:11,type_name:"badoo.bma.PhonebookContact",number:1,label:3},legal_info:{type:9,number:6,label:1},app_link_url:{type:9,number:11,label:1},header_text:{type:9,number:4,label:1},sms_content_text:{type:9,number:8,label:1},invite_text:{type:9,number:10,label:1},view:{type:14,type_name:"badoo.bma.ContactListView",number:9,label:1}}}}()),$gpb.exists("badoo.bma.PhotoImportProgress","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoImportProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoImportProgress",t.prototype._descriptor={fields:{albums:{type:11,type_name:"badoo.bma.Album",number:1,label:3}}}}(),$gpb.exists("badoo.bma.ClientPersonProfileEditForm","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientPersonProfileEditForm=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientPersonProfileEditForm",t.prototype._descriptor={fields:{options:{type:11,type_name:"badoo.bma.ClientProfileOption",number:1,label:3}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderImportProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProviderImportProgress",t.prototype._descriptor={fields:{import_id:{type:9,number:1,label:1},profile_field_progress_data:{type:11,type_name:"badoo.bma.ProfileFieldImportData",number:7,label:1},complete:{type:8,number:2,label:1},success:{type:8,number:3,label:1},form:{type:11,type_name:"badoo.bma.FormFailure",number:4,label:1},contact_import_progress_data:{type:11,type_name:"badoo.bma.ContactImportProgress",number:5,label:1},cache_ts:{type:5,number:9,label:1},photo_import_progress_data:{type:11,type_name:"badoo.bma.PhotoImportProgress",number:6,label:1},person_profile_edit_form:{type:11,type_name:"badoo.bma.ClientPersonProfileEditForm",number:8,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.PhotoNotificationInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.PhotoNotificationInfo",t.prototype._descriptor={fields:{import_progress:{type:11,type_name:"badoo.bma.ExternalProviderImportProgress",number:1,label:1}}}}()),$gpb.exists("badoo.bma.FeaturePrePurchaseInfo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FeaturePrePurchaseInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.FeaturePrePurchaseInfo",t.prototype._descriptor={fields:{album:{type:11,type_name:"badoo.bma.Album",number:6,label:1},previous_photo_id:{type:9,number:9,label:1},description:{type:9,number:3,label:1},title:{type:9,number:2,label:1},feature:{type:14,type_name:"badoo.bma.FeatureType",number:1,label:1},application_feature:{type:11,type_name:"badoo.bma.ApplicationFeature",number:8,label:1},header:{type:9,number:7,label:1},cost:{type:9,number:5,label:1},action:{type:9,number:4,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientNotification=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientNotification",t.prototype._descriptor={fields:{import_providers:{type:11,type_name:"badoo.bma.ExternalProviders",number:20,label:1},common_place_suggestions:{type:11,type_name:"badoo.bma.CommonPlaceSuggestion",number:18,label:3},title:{type:9,number:2,label:1},url:{type:9,number:10,label:1},transaction_identifier:{type:9,number:9,label:1},feature:{type:14,type_name:"badoo.bma.FeatureType",number:5,label:1},image_urls:{type:9,number:11,label:3},id:{type:9,number:1,label:2},urgent:{type:8,number:7,label:1},action_text:{type:9,number:8,label:1},goal_progress:{type:11,type_name:"badoo.bma.GoalProgress",number:17,label:1},display:{type:14,type_name:"badoo.bma.FeatureType",number:4,label:1},display_comment:{type:9,number:15,label:1},blocking:{type:8,options:{"default":"false"},number:22,label:1},action:{type:14,type_name:"badoo.bma.ActionType",number:6,label:2},message:{type:9,number:3,label:1},verified_information:{type:11,type_name:"badoo.bma.ClientUserVerifiedGet",number:21,label:1},type:{type_name:"badoo.bma.ClientNotificationType",number:12,label:1,type:14,options:{"default":"UNKNOWN_CLIENT_NOTIFICATION_TYPE"}},cancel_action_text:{type:9,number:14,label:1},photo_notification_info:{type:11,type_name:"badoo.bma.PhotoNotificationInfo",number:19,label:1},purchase_info:{type:11,type_name:"badoo.bma.FeaturePrePurchaseInfo",number:13,label:1}}}}()),B.OvlQueue||(B.OvlQueue=new $class({name:"OvlQueue",popups:null,hashes:null,popups_visible:!1,is_ovl_loading:!1,constructor:function(){this.popups=[],this.hashes={},this.is_ovl_loading=!1,this.$b=B.on({"ovl:open":this.unlock,"ovl:preclose":this.unlock,"ovl_queue:push":this.push,"ovl:close":this.next},this)},destroy:function(){this.popups=null,B.un(this.$b)},push:function(e,t){void 0===t&&(t={});var i=t.hash;i&&this.hashes[i]||(this.hashes[i]=!0,this.popups.push(e),this.next(t.im_as_popup))},next:function(e){if(this.popups_visible=!!this.popups.length,!(B.Ovl.is_visible()||this.is_ovl_loading||e&&B.IM.Link.opened)&&this.popups_visible){var t=this.popups.shift();this.is_ovl_loading=!0,setTimeout(B.Ovl.open.bind(B.Ovl,t),0)}},unlock:function(){this.is_ovl_loading=!1}})),B.PhotoGalleryViewBig=$class(B.PhotoGalleryView,{name:"PhotoGalleryViewBig",has_arrows_class:"gallery_has_arrows",old_active_id:null,old_selected_num:0,selected_num:0,viewport_size:0,is_edge:!1,is_manual:!1,infinite_scroll:!0,big_$e:null,encounters_$e:null,constructor:function(e){$super(this,arguments),this.big_$e=$e.on({".js-gallery-prev":this.prev,".js-gallery-next":this.next,".js-mm-meet":this.next},this),this.encounters_$e=B.Encounters.on("set_photo",this.on_set_photo,this),this.old_active_id=e.start_id||this.photos[0].id,this.get_viewport_size(),this.check_size(),this.update_arrows(),this.update_counter()},destroy:function(){this.old_active_id=null,$e.un(this.big_$e),B.Encounters.un(this.encounters_$e),$super(this,arguments)},get_active_param:function(e){return e.active?"active":null},get_viewport_size:function(){var e,t,i=0;for(this.viewport_size=this.client_total,e=0;e<this.client_total;e+=1){if(t=this.photos[e],i>=this.get_viewport_width()){this.viewport_size=e;break}i+=t.w}},redraw:function(){$super(this,arguments),this.get_viewport_size()},update_cache:function(){if(this.start_id){this.set_selected_num(this.start_id);var e=this.get_photo_by_num(this.selected_num),t=e.id,i=this.get_image_by_id(t);this.set_active_photo(i,t,e,!0)}$super(this,arguments)},update_current_counter:function(){this.el_current_num&&(this.el_current_num.innerHTML=this.selected_num+1)},prev:function(){this.selected_num-=1,this.selected_num<0&&(this.is_edge=!0,this.selected_num=this.client_total-1),this.is_manual=!0,this.on_select()},next:function(){this.selected_num+=1,this.selected_num>this.client_total-1&&(this.is_edge=!0,this.selected_num=0),this.is_manual=!0,this.on_select()},on_prev_page:function(){this.is_manual=!1,$super(this,arguments)},on_next_page:function(){this.is_manual=!1,$super(this,arguments)},unblock_controls:function(){return $super(this,arguments),this.is_manual?(this.is_manual=!1,void 0):(this.follow_page&&(this.selected_num=this.current_num,this.on_select()),void 0)},get_photo_by_num:function(e){return this.photos[e]},set_selected_num:function(e){var t,i;for(t=0;t<this.client_total;t+=1)if(i=this.photos[t],i&&e===i.id){this.selected_num=t;break}},set_photo_by_id:function(e){this.set_selected_num(e),this.on_select()},on_set_photo:function(e){this.set_photo_by_id(e)},on_select:function(){var e=this.get_photo_by_num(this.selected_num),t=e.id,i=this.get_image_by_id(t);this.set_active_photo(i,t,e),B.fire("gallery:photo_select")},on_click:function(e){var t=$el.up(e,".js-gallery-photo"),i=this.get_item_id(e),o=this.get_photo_by_id(i);o.active||(this.set_selected_num(i),this.set_active_photo(t,i,o,!1,!0),o.video&&B.ProfileVideo.sendStat($p.VideoStatsAction.VIDEO_STATS_ACTION_SCROLL_TO_VIDEO))},set_active_photo:function(e,t,i,o,s){if(i.block&&!this._isGalleryEnabled())return this.fire("blocked",i),this.selected_num=this.old_selected_num,!1;this.old_selected_num=this.selected_num;for(var n=this.get_image_by_id(this.old_active_id),r=0;r<this.client_total;r+=1)this.photos[r].active=null;i.active="active",this.old_active_id=t,this.toggle_active_el(e,!0),n&&n!==e&&this.toggle_active_el(n,!1),this.update_current_counter(),s||this.check_page(),o||this.fire("click",i,i.url)},_isGalleryEnabled:function(){var e=B.Features.getFeature("ALLOW_EXPERIMENTAL_VIEW_PHOTOS_IN_PROFILES");return e.getEnabled()},toggle_active_el:function(e,t){$el.tgl(e,"active",t)},check_page:function(){var e=this.selected_num,t=this.current_num,i=Math.min(this.current_num+this.viewport_size-1,this.client_total-1);0==e||e==this.client_total-1?(this.is_edge=!1,this.move_to_edge(e)):e>i?this.next_page():t>e&&this.prev_page()},remove_controls:function(){$el.del(this.wrap_el,"mm_has_gallery")},set_default_photo:function(e){for(var t=0;t<this.client_total;t+=1)this.photos[t].is_default=!1;e.is_default=!0,e.active=this.get_active_param(e)}}),B.PhotoGalleryBig=$class(B.PhotoGallery,{name:"PhotoGalleryBig",image_width:0,margin_size:0,image_min_width:0,has_margin:!1,video:!1,tpl:null,view_type:B.PhotoGalleryViewBig,profile_video:null,PREVENT_BIG_PHOTO_WIDTH_DELTA:0,destroy:function(){this.tpl=null,$super(this,arguments)},prev:function(){this.view.prev()},next:function(){this.view.next()},set_photo_by_id:function(e){this.view.set_photo_by_id(e)},prepare_photo:function(e){return this.has_margin?e.w=this.image_width+this.margin_size:(this.has_margin=!0,e.w=this.image_width),e},data_prepare:function(){this.photo_tpl||(this.photo_tpl=this.tpl.thumb),this.data_ready()},on_click:function(e,t){this.fire("photo:change",e,t)},on_blocked:function(e){this.fire("photo:blocked",e)},remove_current:function(){this.photos.splice(this.view.selected_num,1),this.client_total--,this.total--,this.photos.length>0?(0===this.view.selected_num&&(this.photos[0].w=this.image_width),this.update_view(),this.photos.length<2&&this.view.remove_controls(),this.view.prev()):B.App.reload()},set_default:function(e){var t=this.view.get_photo_by_id(e);this.view.set_default_photo(t),this.fire("photo:change",t,null)},show_preview_corner:function(){this.view.corner_mouseenter()},hide_preview_corner:function(){this.view.corner_mouseleave()},is_preview_corner_mouseenter:function(){return this.view.is_corner_mouseenter}}),B.Encounters.ControllerBase=$class({hon_game_invite_url:"/import/hon_game_invite.phtml?rfr=60",empty_queue_tpl:"",no_photos_ovl_type:"ovl",possible_match_ovl_tpl:"",possible_match_ovl_type:"",possible_match_config_url:"/ws/viral-flow?action=get_possible_match_popup",overlays_tpl:{no_photo_url:"/no_photos?from_game=1",fb_reactivation_url:"/ws/viral-flow?action=get_fb_react_popup&from_web_api=1",rate_friend_url:"/ws/viral-flow?action=get_fb_vote_friend_popup"},user_list:null,view:null,profile_request:null,possible_match_res:null,possible_match_request:null,reload_needed:!1,quota:null,allowed:null,RETRY_COUNT:5,init:function(e,t){this.$s=e,this.pageParams=t,this.quota={yes:1/0,no:1/0},this.init_controller()},init_controller:function(){this.__requestCount=2,this.view=new(B.Encounters.get_class("View")),this.view.on({on_vote:this.on_vote,on_social_check_needed:this.check_social},this),this.user_list=new(B.Encounters.get_class("UserList")),this.request_users(),this.user_list.on({add_users:this.on_add_users,user:this.on_user,stop:this.on_stop,wait:this.on_wait,social_updated:this.on_social_updated,quota_updated:this.on_quota_updated},this),this.$b=B.on({"encounters:voted":this.on_voted,"encounters:no_photos":this.on_no_photos,"encounters:quota_reached":this.on_quota_reached,"upload:end":this.reload,"geo:update":this.reload,"ovl:close":this.check_reload,"fb-reactivation:close":this.on_reactivation_close,"encounters:lock":this.lock,"quota-ovl-close":this.unlock},this),this.$ct=$r.comet.on({"mm:config":this.on_quota_updated_hack,"viralflow:possible_match_released":this.on_possible_match},this),this.currentUserRequestToken=B.HoN_v3.Models.Cache.CurrentUserCache.fetch(this.on_self_model,this),$e.on(".js-verify-open",this.open_verify_ovl,this);var e=$gpb.namespace("badoo.bma");$gpb.Rpc.any.on(e.MessageType.CLIENT_NOTIFICATION,this.on_client_notification,this)},on_quota_reached:function(e){this.lock(),this.quota={yes:0,no:void 0},B.Ovl.open({type:"hon-vote-quota",applicationFeature:e})},request_users:function(){this.user_list.request_next_users(this.$s)},on_self_model:function(e){this.__selfProfile=e.getUser(),this.__requestCount--,this.__tryReady()},destroy:function(){this.__requestCount=0,this.possible_match_request&&(this.possible_match_request.abort(),this.possible_match_request=null),this.currentUserRequestToken&&(B.HoN_v3.Models.Cache.CurrentUserCache.cancel(this.currentUserRequestToken),this.currentUserRequestToken=null),this.user_list&&(this.user_list.destroy(),this.user_list=null),this.allowed=null,this.view&&(this.view.destroy(),this.view=null),this.$b&&B.un(this.$b),this.$ct&&$r.comet.un(this.$ct),this.$b=this.$ct=null,$gpb.Rpc.any.off($gpb.namespace("badoo.bma").MessageType.CLIENT_NOTIFICATION,this.on_client_notification,this),$e.un(".js-verify-open",this.open_verify_ovl,this),this.possible_match_res=null},on_add_users:function(e){B.Encounters.Photos.add_photos(e),this.__requestCount--,this.__tryReady()},__tryReady:function(){this.__requestCount>0||this.$s&&(this.view.__true_init(this.pageParams),this.view.start(this.__selfProfile),B.Encounters.fire("usable"),this.$s=null)},on_user:function(e){this.view.update_profile(e);var t=$gpb.namespace("badoo.bma"),i=e.getType()===t.SearchResultType.SEARCH_RESULT_TYPE_EXTERNAL_CONTACT;B.Encounters.fire("RushHour:toggle",!i)},on_stop:function(e){this.view.show_message($u.dust.render(this.empty_queue_tpl,{can_filter_expand:e,hon_game_invite_url:this.hon_game_invite_url})),this.$s&&(B.Encounters.fire("usable"),this.$s=null),this.destroy()},on_wait:function(){this.lock()},on_social_updated:function(e){this.view.update_friends_connections(e)},on_quota_updated:function(e){var t={};e&&(t={yes:e.getYesVotesQuota(),no:e.getNoVotesQuota()},0===this.quota.yes&&0===this.quota.no&&(t.yes>0||t.no>0)&&this.user_list.next()),this.quota=t,this.render_nextup()},on_quota_updated_hack:function(e){if("votes_left"in e){var t=$gpb.namespace("badoo.bma"),i=(new t.VotingQuota).setYesVotesQuota(e.votes_left.yes).setNoVotesQuota(e.votes_left.no);this.on_quota_updated(i)}},on_no_photos:function(){B.OvlQueue.push({type:this.no_photos_ovl_type,url:this.overlays_tpl.no_photo_url})},on_vote:function(e){var t=e.choice;this.quota[t]>0&&this.quota[t]--,this.allowed=this.is_vote_enabled(t),e.allowed=this.allowed,B.Encounters.Vote.vote(e),this.allowed&&(this.last_vote=t,this.user_list.next())},on_client_notification:function(e,t){if(!e){var i,o=$gpb.namespace("badoo.bma"),s=o.ClientNotificationType;switch(t.getType()){case s.CLIENT_NOTIFICATION_TYPE_REACTIVATION_INVITES:i="fb_reactivation_url";break;case s.CLIENT_NOTIFICATION_TYPE_RATE_YOUR_FRIENDS:i="rate_friend_url";break;case s.CLIENT_NOTIFICATION_TYPE_HELP_FRIENDS:return this.possible_match_res=t,this.get_possible_match_popup(),void 0}i&&B.OvlQueue.push({type:"ovl",url:this.overlays_tpl[i]})}},on_reactivation_close:function(e){e&&this.reload()},on_possible_match:function(e,t){B.Ovl.open({url:e,type:t})},get_possible_match_popup:function(){this.possible_match_request=new $r(this.possible_match_config_url,{ready:this.on_possible_match_popup,error:this.on_possible_match_popup_error},this)},on_possible_match_popup:function(e){var t=this.possible_match_res,i=$u.dust.render(this.possible_match_ovl_tpl,{SLOTS_ASK:!0,title:t.getTitle(),user_pic:t.getImageUrls()[0]});B.OvlQueue.push({type:this.possible_match_ovl_type,html:i,fb_dialog_param:e.fb_dialog_param})},on_possible_match_popup_error:function(){},is_vote_enabled:function(e){return"undefined"==typeof this.quota[e]||this.quota[e]>0},check_social:function(e){this.user_list.check_social(e)},on_voted:function(){this.allowed||this.user_list.next(),this.check_reload()},check_reload:function(){this.reload_needed&&!B.OvlQueue.popups_visible&&(this.reload_needed=!1,this.reload())},reload:function(){B.App.reload()},lock:function(){this.view.lock()},unlock:function(){this.view.lock(!1)},open_verify_ovl:function(){B.Ovl.open({type:"hon-v3-verify-list",html:""})}}),B.Encounters.get_class=function(e){var t,i=B.Encounters.class_map,o=B.Encounters.base_class_map;return i&&i[e]?t=i[e]:o[e]&&(t=o[e]),t},B.Encounters.base_class_map={Controller:B.Encounters.ControllerBase,View:B.Encounters.ViewBase,UserList:B.Encounters.UserListBase,Photos:B.Encounters.PhotosBase},B.GiftsView||(B.GiftsView=$class({name:"GiftsView",btn_show_more_el:null,gifts_container_el:null,gifts_wrap_el:null,update_url:null,current_user_id:null,$r_for_more:null,$r_for_gift:null,$ct:null,$b:null,constructor:function(e){if(this.memorize(),this.update_url=e.update_url,this.current_user_id=e.current_user_id,!this.update_url||!this.current_user_id)throw new Error("No update_url or current_user_id!");$e.on("#more_gifts",this.load_more,this),this.$ct=$r.comet.on({"gift:purchased":this.gift_purchased},this),this.$b=$u.broadcast.on({"gift:purchased":this.append_gift},this)},destroy:function(){$e.un("#more_gifts",this.load_more,this),this.$ct&&($r.comet.un(this.$ct),this.$ct=null),this.$b&&($u.broadcast.un(this.$b),this.$b=null),this.btn_show_more_el=null,this.gifts_wrap_el=null,this.$r_for_more&&(this.$r_for_more.abort(),this.$r_for_more=null),this.update_url=null,this.current_user_id=null,this.$r_for_gift&&(this.$r_for_gift.abort(),this.$r_for_gift=null)},memorize:function(){this.gifts_container_el=$el.down(document,".js-gifts-container"),this.gifts_wrap_el=$("gifts"),this.btn_show_more_el=$("more_gifts")},toggle_loading:function(e){var t=this.btn_show_more_el.parentNode;$el.tgl(t,"loading",e)},load_more:function(e){var t=e.rev;return t?(this.toggle_loading(!0),this.$r_for_more=new $r(t,{ready:this.more_ready,error:this.more_error},this),void 0):(this.warn("No url to load more provided!"),void 0)},more_ready:function(e){return this.$r_for_more=null,this.toggle_loading(!1),e.errno?(this.warn(e.errno),void 0):(this.render(e.html),void 0)},render:function(e){$el.remove(this.btn_show_more_el.parentNode),this.gifts_wrap_el.innerHTML+=e},more_error:function(){this.warn("Failed to load more gifts!"),this.$r_for_more=null,$el.remove(this.btn_show_more_el)},warn:function(e){},toggle_gifts_loading:function(e){var t=this.gifts_wrap_el;$el.tgl(t,"loading",e)},gift_purchased:function(e){var t=this.current_user_id==e.user_id_to,i=this.current_user_id==e.encounters_user_id_to;(t||i)&&(this.toggle_gifts_loading(!0),this.$r_for_gift&&this.$r_for_gift.abort(),this.$r_for_gift=new $r(this.update_url,{ready:this.gift_ready,error:this.gift_error},this))},gift_ready:function(e){return this.$r_for_gift=null,this.toggle_gifts_loading(!1),e.errno?(this.warn(e.errno),void 0):($u.broadcast.send("gift:purchased",e),this.append_gift(e),void 0)},append_gift:function(e){this.gifts_container_el.innerHTML=e.blocks.profile_gifts.html,this.memorize()},gift_error:function(){this.warn("Failed to load purchased gift!"),this.$r_for_gift=null}})),$u.CharCount||($u.CharCount=$class({el:null,elc:null,limit:0,isSoft:!1,constructor:function(e,t,i){this.params={warnCoefLevel:7},"string"==typeof e?(this.el=$(e),this.elc=$(e+"_count")):(this.el=e,this.elc=$el.down(e.parentNode,".can_enter")),this.limit=+t,this.el&&this.elc&&($e.add(this.el,"keyup",this.count,this),$e.add(this.el,"keydown",this.count,this),$e.add(this.el,"keypress",this.count,this),$e.add(this.el,"input",this.count_delayed,this),$e.add(this.el,"paste",this.count_delayed,this),$e.add(this.el,"mouseover",this.count_delayed,this),this.isSoft=i&&($config(this.params,i)||!0),this.count())},destroy:function(){$e.del(this.el,"keyup",this.count,this),$e.del(this.el,"keydown",this.count,this),$e.del(this.el,"keypress",this.count,this),$e.del(this.el,"input",this.count_delayed,this),$e.del(this.el,"paste",this.count_delayed,this),$e.del(this.el,"mouseover",this.count_delayed,this),this.timer&&this.timer.clear(),this.el=this.elc=this.timer=null,this.params=null},count_delayed:function(){return this.timer&&this.timer.clear(),this.timer=new $t(this.count,this,5),this.timer.set(),!0},count:function(){var e=this.el.value.length,t=this.limit-e,i=this.params.btn&&$(this.params.btn);return this.isSoft?0>t?(i.disabled=!0,$el.add(i,"disabled")):(i.disabled=!1,$el.del(i,"disabled"),t<this.limit/this.params.warnCoefLevel?$el.add(this.elc,"accent_red"):$el.del(this.elc,"accent_red")):0>t&&(this.el.value=this.el.value.substr(0,this.limit),t=0),this.elc.innerHTML=t,!0}})),B.HoN_v3.GiftsView||(B.HoN_v3.GiftsView=$class(B.GiftsView,{gifts_block_el:null,memorize:function(){$super(this,arguments),this.gifts_block_el=$("gifts")},render:function(e){$el.dom.html(this.gifts_block_el,e),this.memorize()},append_gift:function(e){this.gifts_container_el.innerHTML=e.html,this.memorize()}})),B.HoN_v3.MoreInterests=$class({name:"MoreInterests",wrap_el:null,more_el:null,more_name:".js-profile-interests-toggle",more_wrap_name:".js-profile-interests-tgl-wrap",USERS_IN_ROW:5,constructor:function(){$e.on(this.more_name,this.show,this)},get_blocks:function(){this.wrap_el=$("js-profile-interests")},destroy:function(){$e.un(this.more_name,this.show,this),this.wrap_el=null,this.more_name=null,this.more_wrap_name=null},show:function(e){this.wrap_el||this.get_blocks();var t=$el.select(this.wrap_el,".hidden"),i=t.length==this.USERS_IN_ROW+1,o=this.USERS_IN_ROW+(i?1:0),s=t.length<=o;s&&$el.add($el.up(e,this.more_wrap_name),"hidden");for(var n=0;o>n;n+=1)t[n]&&$el.del(t[n],"hidden")}}),B.HoN_v3.EncountersView=$class(B.Encounters.ViewBase,{image_width:54,margin_size:0,update_friends_url:null,profile_upload_url_tpl:"/profile/0{user_id}?unfolded_upload=1",report_url_tpl:"/abuse/{user_id}/p{photo_id}?place=Encounters",page_tpl:"hotornot_v2/game/block.game",profile_header_tpl:"hotornot_v2/game/profile-header2",photo_thumb_tpl:"hotornot_v2/game/miniature",match_popup_type:"ovl",match_popup_tpl:"hotornot_v2/game/popup.match",photo_ovl_tpl:"hotornot_v2/game/photo-ovl",min_photos_to_view_all_photos:3,hon_gallery:null,gifts:null,__true_init:function(){$super(this,arguments),this.abuse_el=$el.down(this.wrap_el,".js-mm-abuse-ovl"),this.is_gallery_enabled()||B.Features.on("update",this._on_allow_view_photos_update,this)},destroy:function(){$super(this,arguments),this.hon_gallery&&(this.hon_gallery.destroy(),this.hon_gallery=null),this.update_friends_url=null,this.friends_$r&&(this.friends_$r.abort(),this.friends_$r=null),this.gifts&&(this.gifts.destroy(),this.gifts=null),this.interests_expander&&this.interests_expander.destroy(),this._unlisten_feature_updates()},on_more_info_ready:function(){},more_info_toggle:function(e){var t=$el.down(this.wrap_el,".js-profile-header-toggle-button");B.Toggle.manage(t),$el.tgl(this.wrap_el,"mm_profile_visible",e),setTimeout(function(){$el.tgl(this.wrap_el,"mm_profile_visible_end",e)}.bind(this),300),B.Encounters.fire("profile_details_show")},hide_more_info:function(){this.abort_more_info(),this.more_info_visible&&(this.more_info_toggle(!1),this.more_info_visible=!1)},update_profile:function(){$super(this,arguments),this.hide_blocker()},update_photo:function(e){$super(this,arguments),this.abuse_el.setAttribute("data-ovl-url",$u.tpl(this.report_url_tpl,{user_id:this.user.getPerson().getUid(),photo_id:e.id}))},set_photo:function(e){B.Encounters.fire("set_photo",e.id)},update_friends_connections:function(){$super(this,arguments),this.update_friends_url&&(this.friends_$r=new $r(this.update_friends_url,{ready:this.on_update_friends_ready},this),this.update_friends_url=null)},on_update_friends_ready:function(e){B.fire("friends:imported",e)},show_message:function(e){$("app_c").innerHTML=e},blocker_action:function(){B.fire("encounters:no_photos")},_on_allow_view_photos_update:function(){this.is_gallery_enabled()&&(this._clear_gallery_blocker(),this._unlisten_feature_updates())},_unlisten_feature_updates:function(){B.Features.un("update",this._on_allow_view_photos_update,this)},on_check_photos:function(){this.is_gallery_enabled()?this._clear_gallery_blocker():this.blocker_action()},_clear_gallery_blocker:function(){$el.del(this.wrap_el,"mm_gallery_locked")},hide_blocker:function(){this.blocker_link_el&&B.Toggle.manage(this.blocker_link_el,"clear")},is_gallery_enabled:function(){return B.Features.getFeature("ALLOW_VIEW_PHOTOS").getEnabled()}}),B.HoN_v3.Profile=B.HoN_v3.Profile||{},B.HoN_v3.IHTModel||(B.HoN_v3.IHTModel=new $class($u.Observable,{settings:null,settingsToken:null,encounterSettingsModel:null,get:function(){return this.settingsToken?this:(this.settingsToken=B.HoN_v3.Models.Cache.EncounterSettingsCache.fetch(this.onSettings,this),this)},onSettings:function(e){this.settingsToken=null,this.settings=e.getSettings(),this.fire("data",this.settings)},set:function(e){this.settingsToken&&B.HoN_v3.Models.Cache.EncounterSettingsCache.cancel(this.settingsToken),this.encounterSettingsModel=new B.HoN_v3.Models.EncounterSettingsModel;var t=(new $p.SearchSettings).setContextType($p.SearchType.NEARBY).setTiwPhraseId(+e).setFolderId($p.FolderTypes.NEARBY_PEOPLE);return this.settings&&(this.settings.setTiwPhraseId(+e),t.setGender(this.settings.getGender())),this.encounterSettingsModel.update(null,t,this.onSettingsSaved,this.onSettingsError,this),this},onSettingsSaved:function(){var e=this.encounterSettingsModel.getCurrentUser();this.encounterSettingsModel.destroy(),this.encounterSettingsModel=null,this.fire("data",this.settings,e)},onSettingsError:function(e){this.encounterSettingsModel.destroy(),this.encounterSettingsModel=null,this.fire("error",e)}})),$gpb.exists("badoo.bma.ServerGetPersonProfile","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetPersonProfile=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetPersonProfile",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},token:{type:9,number:2,label:1},is_prefetch:{type:8,number:4,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1}}}}(),$gpb.exists("badoo.bma.ClientCommonSettings","message")||($gpb.exists("badoo.bma.DevFeature","message")||($gpb.exists("badoo.bma.DevFeatureState","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.DevFeatureState=new $gpb.Enum("badoo.bma.DevFeatureState");t._values=[0,1,2,3],t.UNKNOWN_DEV_FEATURE_STATE=0,t.DEV_FEATURE_STATE_NOT_FOUND=1,t.DEV_FEATURE_STATE_ROLLOUT=2,t.DEV_FEATURE_STATE_RELEASED=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.DevFeature=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.DevFeature",t.prototype._descriptor={fields:{state:{type:14,type_name:"badoo.bma.DevFeatureState",number:3,label:1},enabled:{type:8,number:2,label:1},id:{type:9,number:1,label:1}}}}()),$gpb.exists("badoo.bma.ABTestingSettings","message")||($gpb.exists("badoo.bma.ABTest","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ABTest=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ABTest",t.prototype._descriptor={fields:{test_id:{type:9,number:1,label:1},variation_id:{type:9,number:2,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ABTestingSettings=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ABTestingSettings",t.prototype._descriptor={fields:{tests:{type:11,type_name:"badoo.bma.ABTest",number:1,label:3}}}}()),$gpb.exists("badoo.bma.VisitingPlace","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.VisitingPlace=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.VisitingPlace",t.prototype._descriptor={fields:{not_interested:{type:8,number:8,label:1},title:{type:9,number:2,label:1},longitude:{type:1,number:4,label:1},leave_timestamp:{type:3,number:6,label:1},range:{type:5,number:7,label:1},latitude:{type:1,number:3,label:1},enter_timestamp:{type:3,number:5,label:1},id:{type:5,number:1,label:1}}}}(),$gpb.exists("badoo.bma.WebSpecificOptions","message")||($gpb.exists("badoo.bma.CreditPromoPopup","message")||($gpb.exists("badoo.bma.CreditPromoPopupType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CreditPromoPopupType=new $gpb.Enum("badoo.bma.CreditPromoPopupType");t._values=[1,2,3,4,5,6,7,8,9,10],t.DOUBLE_CREDITS=1,t.EARN=2,t.VALENTINE=3,t.CHRISTMAS=4,t.NO_CREDITS=5,t.CREDITS_PROMO=6,t.UNPAYED_USERS=7,t.NEW_YEAR_PROMO=8,t.MOBILE_DAILY_REWARD=9,t.REACTIVATION_BONUS=10}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.CreditPromoPopup=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CreditPromoPopup",t.prototype._descriptor={fields:{days_till_expire:{type:5,number:2,label:1},type:{type:14,type_name:"badoo.bma.CreditPromoPopupType",number:1,label:1},credits_amount:{type:5,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.WebSpecificOptions=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.WebSpecificOptions",t.prototype._descriptor={fields:{open_search_filter:{type:8,number:1,label:1},credits_promo_popup:{type:11,type_name:"badoo.bma.CreditPromoPopup",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ExternalEndpoint","message")||($gpb.exists("badoo.bma.ExternalEndpointType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalEndpointType=new $gpb.Enum("badoo.bma.ExternalEndpointType");t._values=[0,1,2,3,4,5,6,7,8,9,10,11,12,13],t.UNKNOWN_EXTERNAL_ENDPOINT_TYPE=0,t.EXTERNAL_ENDPOINT_TYPE_HELP=1,t.EXTERNAL_ENDPOINT_TYPE_FULL_SITE=2,t.EXTERNAL_ENDPOINT_TYPE_PRIVACY=3,t.EXTERNAL_ENDPOINT_TYPE_PHOTO_UPLOAD=4,t.EXTERNAL_ENDPOINT_TYPE_CHAT_MULTIMEDIA_UPLOAD=5,t.EXTERNAL_ENDPOINT_TYPE_ABOUT=6,t.EXTERNAL_ENDPOINT_TYPE_FAQ_FOR_PARENTS=7,t.EXTERNAL_ENDPOINT_TYPE_APP_STORE=8,t.EXTERNAL_ENDPOINT_TYPE_GOOGLE_PLAY=9,t.EXTERNAL_ENDPOINT_TYPE_BLACKBERRY_APP_WORLD=10,t.EXTERNAL_ENDPOINT_TYPE_WINDOWS_PHONE_STORE=11,t.EXTERNAL_ENDPOINT_TYPE_FACEBOOK_LIKE_OBJECT=12,t.EXTERNAL_ENDPOINT_TYPE_TERMS_AND_CONDITIONS=13}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalEndpoint=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalEndpoint",t.prototype._descriptor={fields:{url:{type:9,number:2,label:1},type:{type_name:"badoo.bma.ExternalEndpointType",number:1,label:1,type:14,options:{"default":"UNKNOWN_EXTERNAL_ENDPOINT_TYPE"}}}}
}()),$gpb.exists("badoo.bma.ClientChangeHost","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientChangeHost=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientChangeHost",t.prototype._descriptor={fields:{secure_hosts:{type:9,number:2,label:3},hosts:{type:9,number:1,label:3},must_reconnect:{type:8,number:3,label:1}}}}(),$gpb.exists("badoo.bma.WelcomeData","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.WelcomeData=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.WelcomeData",t.prototype._descriptor={fields:{total_registered_counter:{type:5,number:1,label:1},total_online_counter:{type:5,number:2,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientCommonSettings=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientCommonSettings",t.prototype._descriptor={fields:{web_specific_options:{type:11,type_name:"badoo.bma.WebSpecificOptions",number:13,label:1},connected_via:{type:11,type_name:"badoo.bma.ExternalProvider",number:11,label:1},max_places_filter_value:{type:5,number:17,label:1},dev_features:{type:11,type_name:"badoo.bma.DevFeature",number:9,label:3},allow_review:{type:8,number:6,label:1},language_id:{type:5,number:3,label:1},user_country:{type:11,type_name:"badoo.bma.Country",number:10,label:1},a_b_testing_settings:{type:11,type_name:"badoo.bma.ABTestingSettings",number:7,label:1},application_features:{type:11,type_name:"badoo.bma.ApplicationFeature",number:4,label:3},phone_confirm_missing:{type:8,number:5,label:1},server_get_social_friends_connections_period:{type:5,number:16,label:1},alert_places:{type:11,type_name:"badoo.bma.VisitingPlace",number:12,label:3},phone_verification_force_pin:{type:8,number:15,label:1},loading_united_friends_request_period:{type:5,number:19,label:1},external_endpoints:{type:11,type_name:"badoo.bma.ExternalEndpoint",number:8,label:3},allow_facebook_like_on_review:{type:8,number:18,label:1},available_credits:{type:5,number:14,label:1},partner_id:{type:5,number:1,label:1},change_host:{type:11,type_name:"badoo.bma.ClientChangeHost",number:2,label:1},experimental_welcome_data:{type:11,type_name:"badoo.bma.WelcomeData",number:10001,label:1}}}}()),$gpb.exists("badoo.bma.SaveProfile","message")||($gpb.exists("badoo.bma.UpdatedProfileValues","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.UpdatedProfileValues=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.UpdatedProfileValues",t.prototype._descriptor={fields:{profile_option_id:{type:9,number:1,label:1},profile_option_value:{type:9,number:2,label:1},profile_option_type:{type:14,type_name:"badoo.bma.ProfileOptionType",number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SaveProfile=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SaveProfile",t.prototype._descriptor={fields:{languages:{type:11,type_name:"badoo.bma.Hashtable",number:1,label:1},remove_all_languages:{type:8,number:5,label:1},spoken_language:{type:11,type_name:"badoo.bma.Language",number:3,label:3},updated_values:{type:11,type_name:"badoo.bma.UpdatedProfileValues",number:4,label:3},profile_info:{type:11,type_name:"badoo.bma.Hashtable",number:2,label:1}}}}()),$gpb.exists("badoo.bma.SEOInfo","message")||($gpb.exists("badoo.bma.MetaTag","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.MetaTag=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.MetaTag",t.prototype._descriptor={fields:{content:{type:9,number:2,label:1},property:{type:9,number:1,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.SEOInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SEOInfo",t.prototype._descriptor={fields:{title:{type:9,number:1,label:1},link:{type:9,number:3,label:1},description:{type:9,number:2,label:1},tags:{type:11,type_name:"badoo.bma.MetaTag",number:4,label:3}}}}()),$gpb.exists("badoo.bma.Integer","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Integer=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Integer",t.prototype._descriptor={fields:{value:{type:5,number:1,label:2}}}}(),$gpb.exists("badoo.bma.ProfileVisitingSource","message")||($gpb.exists("badoo.bma.ProfileVisitingSourceType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileVisitingSourceType=new $gpb.Enum("badoo.bma.ProfileVisitingSourceType");t._values=[0,1,2,3,4,5,6,7,8],t.SOURCE_UNSPECIFIED=0,t.SOURCE_ENCOUNTERS=1,t.SOURCE_PEOPLE_NEARBY=2,t.SOURCE_LOCAL_LEADER=3,t.SOURCE_WANT_TO_MEET_YOU=4,t.SOURCE_MUTUAL_ATTRACTIONS=5,t.SOURCE_SPOTLIGHT=6,t.SOURCE_FANS=7,t.SOURCE_PHOTO_RATING=8}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ProfileVisitingSource=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ProfileVisitingSource",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:2},source:{type:14,type_name:"badoo.bma.ProfileVisitingSourceType",number:2,label:1},section_id:{type:9,number:4,label:1},visiting_source:{type:14,type_name:"badoo.bma.ClientSource",number:5,label:1},source_folder:{type:14,type_name:"badoo.bma.FolderTypes",number:3,label:1}}}}()),$gpb.exists("badoo.bma.ServerGetSocialFriendsConnections","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetSocialFriendsConnections=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetSocialFriendsConnections",t.prototype._descriptor={fields:{person_id:{type:9,number:1,label:1},source:{type:14,type_name:"badoo.bma.ClientSource",number:3,label:1},context:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:2,label:1}}}}(),$gpb.exists("badoo.bma.ExperimentalServerGiftAction","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalServerGiftAction=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalServerGiftAction",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.ExperimentalGiftAction",number:2,label:1},id:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ServerFolderAction","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerFolderAction=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerFolderAction",t.prototype._descriptor={fields:{person_id:{type:9,number:2,label:2},custom_folder_id:{type:9,number:3,label:1},folder_id:{type:14,type_name:"badoo.bma.FolderTypes",number:1,label:2},context:{type:14,type_name:"badoo.bma.ClientSource",number:5,label:1},source:{type:14,type_name:"badoo.bma.StatsSourceClientScreen",number:4,label:1}}}}(),$gpb.exists("badoo.bma.ServerSectionUserAction","message")||($gpb.exists("badoo.bma.SectionActionType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SectionActionType=new $gpb.Enum("badoo.bma.SectionActionType");t._values=[1,2],t.SECTION_USER_DELETE=1,t.SECTION_USER_MARK_AS_VIEWED=2}(),$gpb.exists("badoo.bma.SectionUserActionList","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.SectionUserActionList=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.SectionUserActionList",t.prototype._descriptor={fields:{person_id:{type:9,number:2,label:3},section_id:{type:9,number:1,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerSectionUserAction=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerSectionUserAction",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.SectionActionType",number:1,label:1},place_id:{type:9,number:5,label:1},folder_id:{type:14,type_name:"badoo.bma.FolderTypes",number:2,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:4,label:1},user_list:{type:11,type_name:"badoo.bma.SectionUserActionList",number:3,label:3}}}}()),$gpb.exists("badoo.bma.ServerUpdateLocation","message")||($gpb.exists("badoo.bma.CellID","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.CellID=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.CellID",t.prototype._descriptor={fields:{home_country_code:{type:9,number:6,label:1},mcc:{type:9,number:4,label:2},location_area_id:{type:9,number:2,label:2},signal_strength:{type:9,number:5,label:1},cell_id:{type:9,number:1,label:2},mnc:{type:9,number:3,label:2},imsi:{type:9,number:7,label:1}}}}(),$gpb.exists("badoo.bma.AndroidWifi","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.AndroidWifi=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.AndroidWifi",t.prototype._descriptor={fields:{timestamp:{type:3,number:5,label:1},signal_strength:{type:5,number:3,label:1},connected:{type:8,number:4,label:1},name:{type:9,number:1,label:2},ssid:{type:9,number:2,label:2}}}}(),$gpb.exists("badoo.bma.BluetoothInfo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.BluetoothInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.BluetoothInfo",t.prototype._descriptor={fields:{mac:{type:9,number:1,label:1},name:{type:9,number:2,label:1},android_class:{type:5,number:3,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerUpdateLocation=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerUpdateLocation",t.prototype._descriptor={fields:{cell_id:{type:11,type_name:"badoo.bma.CellID",number:2,label:3},places_visited:{type:11,type_name:"badoo.bma.VisitingPlace",number:7,label:3},wifi:{type:11,type_name:"badoo.bma.Hashtable",number:3,label:1},current_timestamp:{type:3,number:5,label:1},location:{type:11,type_name:"badoo.bma.GeoLocation",number:1,label:3},android_wifis:{type:11,type_name:"badoo.bma.AndroidWifi",number:4,label:3},bluetooth_info:{type:11,type_name:"badoo.bma.BluetoothInfo",number:6,label:3}}}}()),$gpb.exists("badoo.bma.ServerGetUserList","message")||($gpb.exists("badoo.bma.TraversalDirection","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.TraversalDirection=new $gpb.Enum("badoo.bma.TraversalDirection");t._values=[1,2],t.DIRECTION_BACKWARDS=1,t.DIRECTION_FORWARDS=2}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetUserList=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetUserList",t.prototype._descriptor={fields:{preferred_count:{type:5,number:4,label:1},direction:{type_name:"badoo.bma.TraversalDirection",number:17,label:1,type:14,options:{"default":"DIRECTION_BACKWARDS"}},update_timestamp:{type:3,number:16,label:1},common_place_id:{type:9,number:12,label:1},search_string:{type:9,number:7,label:1},city_id:{type:5,number:9,label:1},section_id:{type:9,number:2,label:1},section_user_preview_image_size:{type:11,type_name:"badoo.bma.PhotoSize",number:8,label:1},filter:{type:14,type_name:"badoo.bma.UserListFilter",number:6,label:3},source:{type:14,type_name:"badoo.bma.ClientSource",number:14,label:1},showed_promo_blocks:{type:14,type_name:"badoo.bma.PromoBlockType",number:13,label:3},version:{type:9,number:5,label:1},folder_id:{type:14,type_name:"badoo.bma.FolderTypes",number:1,label:2},offset:{type:5,number:3,label:1},force_deprecated_section_user:{type:8,number:15,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:10,label:1}}}}()),$gpb.exists("badoo.bma.ServerGetUser","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetUser=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetUser",t.prototype._descriptor={fields:{user_id:{type:9,number:1,label:1},token:{type:9,number:2,label:1},user_field_filter:{type:11,type_name:"badoo.bma.UserFieldFilter",number:4,label:2},client_source:{type:14,type_name:"badoo.bma.ClientSource",number:5,label:2},is_prefetch:{type:8,number:6,label:1}}}}(),$gpb.exists("badoo.bma.ChatMessage","message")||($gpb.exists("badoo.bma.Sticker","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Sticker=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Sticker",t.prototype._descriptor={fields:{image_id:{type:9,number:2,label:1},id:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ExperimentalSticker","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExperimentalSticker=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExperimentalSticker",t.prototype._descriptor={fields:{url:{type:9,number:2,label:1},id:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.Multimedia","message")||($gpb.exists("badoo.bma.MultimediaFormat","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.MultimediaFormat=new $gpb.Enum("badoo.bma.MultimediaFormat");t._values=[1],t.MULTIMEDIA_FORMAT_IMAGE=1}(),$gpb.exists("badoo.bma.MultimediaVisibility","message")||($gpb.exists("badoo.bma.MultimediaVisibilityType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.MultimediaVisibilityType=new $gpb.Enum("badoo.bma.MultimediaVisibilityType");t._values=[1,2,3,4],t.MULTIMEDIA_VISIBILITY_TYPE_SHORT=1,t.MULTIMEDIA_VISIBILITY_TYPE_MEDIUM=2,t.MULTIMEDIA_VISIBILITY_TYPE_LONG=3,t.MULTIMEDIA_VISIBILITY_TYPE_INFINITE=4}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.MultimediaVisibility=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.MultimediaVisibility",t.prototype._descriptor={fields:{seconds:{type:5,number:2,label:1},visibility_type:{type:14,type_name:"badoo.bma.MultimediaVisibilityType",number:1,label:2},display_value:{type:9,number:3,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.Multimedia=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Multimedia",t.prototype._descriptor={fields:{format:{type:14,type_name:"badoo.bma.MultimediaFormat",number:1,label:2},url:{type:9,number:5,label:1},photo:{type:11,type_name:"badoo.bma.Photo",number:6,label:1},visibility:{type:11,type_name:"badoo.bma.MultimediaVisibility",number:2,label:2},data:{type:12,number:3,label:1},id:{type:9,number:4,label:1}}}}()),$gpb.exists("badoo.bma.ChatUserInfo","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ChatUserInfo=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ChatUserInfo",t.prototype._descriptor={fields:{gender:{type:14,type_name:"badoo.bma.SexType",number:3,label:1},name:{type:9,number:1,label:1},photo:{type:11,type_name:"badoo.bma.Photo",number:9,label:1},age:{type:5,number:2,label:1},wish:{type:9,number:6,label:1},last_seen_online:{type:9,number:10,label:1},number_of_photos:{type:5,number:7,label:1},large_image_id:{type:9,number:4,label:1},profile_rating:{type:5,number:8,label:1},interests_count:{type:5,number:5,label:1}}}}(),$gpb.exists("badoo.bma.ChatMessageType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ChatMessageType=new $gpb.Enum("badoo.bma.ChatMessageType");t._values=[1,2,3,4,5,6,7,8,9,10,19,20,21,22,23,24,10001],t.SIMPLE=1,t.WINK=2,t.REQUEST_ACCESS=3,t.GRANT_ACCESS=4,t.DENY_ACCESS=5,t.LOCATION_REQUEST=6,t.LOCATION=7,t.LOCATION_DENY=8,t.LOCATION_SEND=9,t.GIFT=10,t.MULTIMEDIA=19,t.MULTIMEDIA_VIEWING=20,t.MULTIMEDIA_SCREENSHOT=21,t.SMILE=22,t.STICKER=23,t.NOT_SUPPORTED=24,t.EXPERIMENTAL_STICKER=10001}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ChatMessage=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ChatMessage",t.prototype._descriptor={fields:{total_unread:{type:5,number:9,label:1},display_message:{type:9,number:26,label:1},album_type:{type:14,type_name:"badoo.bma.AlbumType",number:27,label:1},uid:{type:9,number:1,label:2},album_id:{type:9,number:8,label:1},sticker:{type:11,type_name:"badoo.bma.Sticker",number:21,label:1},experimental_sticker:{type:11,type_name:"badoo.bma.ExperimentalSticker",number:10002,label:1},their_location:{type:11,type_name:"badoo.bma.GeoLocation",number:10,label:1},from_person_id:{type:9,number:3,label:2},multimedia:{type:11,type_name:"badoo.bma.Multimedia",number:15,label:1},offensive:{type:8,number:23,label:1},mssg:{type:9,number:5,label:2},read:{type:8,number:7,label:2},experimental_gift:{type:11,type_name:"badoo.bma.ExperimentalGift",number:10001,label:1},image_url:{type:9,number:12,label:1},from_person_info:{type:11,type_name:"badoo.bma.ChatUserInfo",number:19,label:1},chat_block_id:{type:14,type_name:"badoo.bma.ChatBlockId",number:20,label:1},deleted:{type:8,number:17,label:1},unread_from_user:{type:5,number:11,label:1},can_delete:{type:8,number:16,label:1},from_user:{type:11,type_name:"badoo.bma.User",number:25,label:1},banner:{type:11,type_name:"badoo.bma.PromoBlock",number:24,label:1},gift:{type:11,type_name:"badoo.bma.PurchasedGift",number:22,label:1},date_modified:{type:3,number:2,label:1},section_title:{type:9,number:18,label:1},to_person_id:{type:9,number:4,label:2},frame_url:{type:9,number:13,label:1},message_type:{type:14,type_name:"badoo.bma.ChatMessageType",number:6,label:2}}}}()),$gpb.exists("badoo.bma.ChatMessageReceived","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ChatMessageReceived=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ChatMessageReceived",t.prototype._descriptor={fields:{chat_message:{type:11,type_name:"badoo.bma.ChatMessage",number:4,label:1},error_message:{type:9,number:3,label:1},uid:{type:9,number:1,label:2},success:{type:8,number:2,label:2}}}}(),B.HoN_v3.Profile.Model=$class($u.Observable,{PHOTO_WIDTH:180,PHOTO_HEIGHT:180,square_preview_size:48,square_preview:!1,show_private_photos:!1,exclude_private_photos:!0,_data:null,_album_photos_of_me:null,_album_private_photos:null,_user_id:null,_rpc:null,_lang_rpc:null,_folder_rpc:null,_awards_rpc:null,_smile_rpc:null,_profile_loaded:!1,private_photos_count:0,_profile_options_map:{unknown:"UNKNOWN_PROFILE_OPTION_TYPE",location:"PROFILE_OPTION_TYPE_LOCATION",about_me:"PROFILE_OPTION_TYPE_ABOUT_ME",relationship:"PROFILE_OPTION_TYPE_RELATIONSHIP",sexuality:"PROFILE_OPTION_TYPE_SEXUALITY",appearance:"PROFILE_OPTION_TYPE_APPEARANCE",living:"PROFILE_OPTION_TYPE_LIVING",children:"PROFILE_OPTION_TYPE_CHILDREN",smoking:"PROFILE_OPTION_TYPE_SMOKING",drinking:"PROFILE_OPTION_TYPE_DRINKING",education:"PROFILE_OPTION_TYPE_EDUCATION",languages:"PROFILE_OPTION_TYPE_LANGUAGES",work:"PROFILE_OPTION_TYPE_WORK",height:"PROFILE_OPTION_TYPE_APPEARANCE_HEIGHT",weight:"PROFILE_OPTION_TYPE_APPEARANCE_WEIGHT",body_type:"PROFILE_OPTION_TYPE_APPEARANCE_BODY_TYPE",eye_color:"PROFILE_OPTION_TYPE_APPEARANCE_EYE_COLOR",hair_color:"PROFILE_OPTION_TYPE_APPEARANCE_HAIR_COLOR",work_job:"PROFILE_OPTION_TYPE_WORK_JOB",work_company:"PROFILE_OPTION_TYPE_WORK_COMPANY",work_income:"PROFILE_OPTION_TYPE_WORK_INCOME",interested_in:"PROFILE_OPTION_TYPE_INTERESTED_IN"},friends_connections_t:null,friends_connections_rpc:null,friends_connections:null,friends_connections_loaded:!1,client_source:null,source_folder:null,has_navigation:null,index_in_folder:null,constructor:function(e,t,i,o,s){this.square_preview=t;var n=B.Features.getFeature($p.FeatureType.ALLOW_PRIVATE_PHOTOS);n.getEnabled()&&(this.show_private_photos=o,this.exclude_private_photos=s),this._user_id=e,this._data={uid:e,profile:null,person:null,status:null,allow_profile_info:i},$super(this,arguments),this.set_client_source(),this.get()},destroy:function(){this.cancel(),this.abort_friends_connections(),$super(this,arguments),this.fire=function(){},this._lang_rpc=null,this.square_preview=this.show_private_photos=!1,this._profile_loaded=!1,this._album_photos_of_me=this._album_private_photos=null},set_client_source:function(){var e=$gpb.namespace("badoo.bma"),t={"from_hotlist=1":{client_source:e.ClientSource.CLIENT_SOURCE_LOCAL_HOT,source_folder:e.FolderTypes.LOCAL_HOT},"from_friend_hotlist=1":{client_source:e.ClientSource.CLIENT_SOURCE_FRIENDS_HOT_LIST,source_folder:e.FolderTypes.FRIENDS_HOT_LIST},"from=messenger":{client_source:e.ClientSource.CLIENT_SOURCE_MESSAGES,source_folder:e.FolderTypes.ALL_MESSAGES},"from_search=1":{client_source:e.ClientSource.CLIENT_SOURCE_PEOPLE_NEARBY,source_folder:e.FolderTypes.NEARBY_PEOPLE_WEB,navigation:!0},"from_spotlight=1":{client_source:e.ClientSource.CLIENT_SOURCE_SPOTLIGHT,source_folder:e.FolderTypes.SPOTLIGHT},"from=want_you":{client_source:e.ClientSource.CLIENT_SOURCE_WANT_TO_MEET_YOU,source_folder:e.FolderTypes.WANT_TO_MEET_YOU},"from=visitors":{client_source:e.ClientSource.CLIENT_SOURCE_VISITORS,source_folder:e.FolderTypes.PROFILE_VISITORS},"from=added-to-favorites":{client_source:e.ClientSource.CLIENT_SOURCE_FAVOURITED_YOU,source_folder:e.FolderTypes.FAVOURITES},"from=your-favorites":{client_source:e.ClientSource.CLIENT_SOURCE_FAVOURITES,source_folder:e.FolderTypes.FAVOURITES},"from-potd=1":{client_source:e.ClientSource.CLIENT_SOURCE_PHOTO_OF_THE_DAY},"from_my_profile=1":{client_source:e.ClientSource.CLIENT_SOURCE_MY_PROFILE},"from_other_profile=1":{client_source:e.ClientSource.CLIENT_SOURCE_OTHER_PROFILE},"/game":{client_source:e.ClientSource.CLIENT_SOURCE_ENCOUNTERS}},i=this._get_query_params();e.FolderTypes.isValid(i.folder)&&(this.source_folder=+i.folder);for(var o in t)if(-1!=B.App.url.indexOf(o)){this.client_source=t[o].client_source,this.source_folder=t[o].source_folder,this.has_navigation=t[o].navigation;break}if(null==this.client_source){var s=/folder=(\d*)/gi.exec(B.App.url);if(s){var n=s[1];switch(n){case"4":this.client_source=e.ClientSource.CLIENT_SOURCE_FAVOURITED_YOU;break;case"8":this.client_source=e.ClientSource.CLIENT_SOURCE_VISITORS;break;case"6":this.client_source=e.ClientSource.CLIENT_SOURCE_WANT_TO_MEET_YOU;break;case"25":this.client_source=e.ClientSource.CLIENT_SOURCE_PEOPLE_NEARBY}}}null==this.client_source&&(this.client_source=e.ClientSource.CLIENT_SOURCE_UNSPECIFIED),null==this.source_folder&&(this.source_folder=e.FolderTypes.UNSPECIFIED_FOLDER)},cancel:function(){this._rpc&&(this._rpc.abort(),this._rpc=null),this._folder_rpc&&(this._folder_rpc.abort(),this._folder_rpc=null),this._smile_rpc&&(this._smile_rpc.abort(),this._smile_rpc=null),this._awards_rpc&&(this._awards_rpc.abort(),this._awards_rpc=null)},get:function(e){if(e&&(this._user_id=e),B.HoN_v3.Models.Cache.AppSettingsCache.fetch(this._onAppSettings,this),this._get_full_profile(),this.has_navigation){var t=this._get_query_params();t.p&&(this.index_in_folder=Number(t.p),this.is_big_photo()&&this._get_folder(this.index_in_folder))}return this},save:function(e,t,i){var o,s,n=$gpb.namespace("badoo.bma"),r=new n.SaveProfile;for(o in e)s=n.ProfileOptionType.getIdx(this._profile_options_map[o]||o),s&&r.addUpdatedValues((new n.UpdatedProfileValues).setProfileOptionType(s).setProfileOptionValue(e[o]));t&&r.setSpokenLanguage(t),new $gpb.Rpc(n.MessageType.SERVER_SAVE_PERSON_PROFILE,r).on([n.MessageType.CLIENT_PERSON,n.MessageType.CLIENT_PERSON_PROFILE,n.MessageType.CLIENT_PERSON_STATUS],i||this._on_update,this).request()},setSkipPhoto:function(e){var t=new $p.AppSettings;t.setSkipNonModeratedAlert(e),(new B.HoN_v3.Models.AppSettingsModel).update(null,t)},isLoaded:function(){return this._profile_loaded},_onAppSettings:function(e){var t=e.getSettings();this._data.verificationHideDetails=t.getVerificationHideDetails(),this._data.skip_unmoderated_photo=t.getSkipNonModeratedAlert(),this._data.distanceAllowed=t.getPrivacyShowDistance(),this.fire("moderated",this._data.skip_unmoderated_photo)},_on_update:function(e,t,i,o,s){if(e)return e.getType()==$p.ServerErrorType.SERVER_ERROR_TYPE_CAPTCHA_REQUIRED?(this.fire("captcha-required"),this._captcha_blocked=!0,void 0):(this.fire("error",e),void 0);if(!this._captcha_blocked){t=t[0],i=i[0],o=o[0];var n=s[0],r=s[1];this._profile_loaded=!0,this._rpc=null,this._data.person=t,this._data.profile=i,this._data.status=o,this._data.uid=t.getUid(),this._user_id=t.getUid(),this._data.own_profile=this.is_own(),this._data.big_photo=this.is_big_photo(),this._data.source_folder=this.source_folder,this._data.index_in_folder=this.index_in_folder;var a=this._get_profile_field("location");switch(this._data.location=a?a.getDisplayValue():null,t.getGender()){case 1:this._data.gender="MALE";break;case 2:this._data.gender="FEMALE";break;default:this._data.gender=null}this.is_own()?this.get_edit_form():this.load_friends_connections(i),this._album_photos_of_me=n,r&&r.getCountOfPhotos()&&(this._album_private_photos=r,this.private_photos_count=this._album_private_photos.getCountOfPhotos()),this._on_albums_done(),this.fire("profile-updated")}},_on_folder:function(e,t){if(this._folder_rpc=null,e)return this.fire("error",e),void 0;var i,o,s=t.getSection()[0].getUsers();s.length&&(1===this.index_in_folder?o=s[1]:(i=s[0],o=s[2]),this.fire("navigation",this.index_in_folder,i,o))},_get_profile_field:function(e){var t=this._data.profile.getProfileField();if(!t)return null;for(var i=0;i<t.length;i++)if(t[i].getId()==e)return t[i];return null},get_album:function(){var e=$gpb.namespace("badoo.bma"),t=new $gpb.Rpc.Batch,i=this._user_id,o=(new e.ServerGetAlbum).setPersonId(i).setAlbumType(e.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME);this.square_preview?o.setPreviewSize((new e.PhotoSize).setHeight(48)):o.setPreviewSize((new $p.PhotoSize).setHeight(this.PHOTO_HEIGHT).setWidth(this.PHOTO_WIDTH)),t.addCommand(e.MessageType.SERVER_GET_ALBUM,o),this._rpc=new $gpb.Rpc(e.MessageType.SERVER_GET_PERSON_PROFILE_DATA,t).on(e.MessageType.CLIENT_ALBUM,this._on_get_album,this).request()},_on_get_album:function(e,t){this._album_photos_of_me=t,this._on_albums_done(),this.fire("album",t)},_on_photos:function(e,t){e||(B.HoN_v3.PhotoReplace&&(B.HoN_v3.PhotoReplace.has_gallery=!1),this.album=t,this.fire("album",t))},get_photos:function(){var e=[];return this.album.map(function(t){e=e.concat(t.getPhotos()||[])}),e},get_photo_by_id:function(e){for(var t,i=this.get_photos(),o=0;o<i.length;o++)if(t=i[o],t.getId()===e)return t},is_photo_private:function(e){return!!this._private_photo_ids[e]},_get_full_profile:function(){var e=$gpb.namespace("badoo.bma"),t=new $gpb.Rpc.Batch,i=this._user_id,o=(new e.ServerGetPersonProfile).setPersonId(i).setContext(this.client_source);t.addCommand(e.MessageType.SERVER_GET_PERSON_PROFILE,o),o=(new e.ServerGetAlbum).setPersonId(i).setAlbumType(e.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME),this._set_preview_size(o),t.addCommand(e.MessageType.SERVER_GET_ALBUM,o),this.exclude_private_photos||(o=(new $p.ServerGetAlbum).setPersonId(i).setAlbumType($p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS),this._set_preview_size(o),t.addCommand(e.MessageType.SERVER_GET_ALBUM,o)),B.HoN_v3.SeenProfile.isSeen(i)||(o=(new e.ProfileVisitingSource).setPersonId(i).setSourceFolder(this.source_folder).setVisitingSource(this.client_source),t.addCommand(e.MessageType.SERVER_VISITING_SOURCE,o)),this._rpc=new $gpb.Rpc(e.MessageType.SERVER_GET_PERSON_PROFILE_DATA,t).on([e.MessageType.CLIENT_PERSON,e.MessageType.CLIENT_PERSON_PROFILE,e.MessageType.CLIENT_PERSON_STATUS,e.MessageType.CLIENT_ALBUM],this._on_update,this,null,!0).request()},_on_albums_done:function(){var e=[this._album_photos_of_me];if(this._save_private_photo_ids(),this._album_private_photos){if(!this._is_private_photos_visible()){var t=this._album_photos_of_me.getPhotos(),i=(new $p.Photo).setId("-1");if(t&&t.length){var o=t[0],s=o.getLargePhotoSize();i.setPreviewUrl(o.getPreviewUrl()).setLargeUrl(o.getLargeUrl()).setLargePhotoSize((new $p.PhotoSize).setWidth(s.getWidth()).setHeight(s.getHeight()))}this._album_private_photos.setCountOfPhotos(1).setAccessable(!1).setPhotos([i])}e.push(this._album_private_photos)}this.fire("updated",this._data),this._data.person.getDeleted()||this._on_photos(null,e)},_save_private_photo_ids:function(){var e,t={};if(this._album_private_photos){e=this._album_private_photos.getPhotos()||[];for(var i=0;i<e.length;i++)t[e[i].getId()]=!0}this._private_photo_ids=t},_is_private_photos_visible:function(){return this.is_own()?this.show_private_photos||B.HoN_v3.show_private_photos:this._album_private_photos.getAccessable()},_set_preview_size:function(e){this.square_preview?e.setPreviewSize((new $p.PhotoSize).setHeight(this.square_preview_size)):e.setPreviewSize((new $p.PhotoSize).setHeight(this.PHOTO_HEIGHT).setWidth(this.PHOTO_WIDTH))},_get_folder:function(e){var t=(new $p.ServerGetUserList).setFolderId(this.source_folder).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_NAME,$p.UserField.USER_FIELD_PROFILE_PHOTO,$p.UserField.USER_FIELD_DISTANCE_LONG])).setPreferredCount(3).setOffset(e-2);this._folder_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_USER_LIST,t).on($p.MessageType.CLIENT_USER_LIST,this._on_folder,this).request()},get_award:function(e){if(!this._data.profile)return!1;for(var t=this._data.profile.getAwards()||[],i=0;i<t.length;i++)if(t[i].getAwardId()==e)return t[i];return!1},is_own:function(){return parseInt(this._user_id,10)==B.Session.getUserId()},is_big_photo:function(){return"big-photo-view"==B.App.state},_save_profile_value:function(e,t,i){var o=$gpb.namespace("badoo.bma"),s=new o.SaveProfile;s.addUpdatedValues((new o.UpdatedProfileValues).setProfileOptionType(o.ProfileOptionType[e]).setProfileOptionValue(t)),new $gpb.Rpc(o.MessageType.SERVER_SAVE_PERSON_PROFILE,s).on([o.MessageType.CLIENT_PERSON,o.MessageType.CLIENT_PERSON_PROFILE,o.MessageType.CLIENT_PERSON_STATUS],i,this).request()},set_aboutme:function(e,t){this._save_profile_value("PROFILE_OPTION_TYPE_ABOUT_ME",e,function(e,i,o,s){this.on_set_aboutme_done(e,i,o,s),!e&&t&&t(this._data)})},on_set_aboutme_done:function(e,t,i,o){if(e)return this.fire("error",e),void 0;switch(this._data.person=t,this._data.profile=i,this._data.status=o,this._data.uid=t.getUid(),this._user_id=t.getUid(),this._data.own_profile=this.is_own(),this._data.big_photo=this.is_big_photo(),t.getGender()){case 1:this._data.gender="MALE";break;case 2:this._data.gender="FEMALE";break;default:this._data.gender=null}this.get_edit_form("aboutme")},set_location:function(e,t){var i=$gpb.namespace("badoo.bma"),o=new i.Integer;o.setValue(+e),new $gpb.Rpc(i.MessageType.SERVER_SAVE_LOCATION,o).on(i.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,t).request()},set_geolocation:function(e,t,i){var o=(new $p.ServerUpdateLocation).addLocation((new $p.GeoLocation).setLongitude(+e).setLatitude(+t));new $gpb.Rpc($p.MessageType.SERVER_UPDATE_LOCATION,o).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,i).request()},on_set_location_done:function(){this.fire("updated:location",this._data)},remove_language:function(e,t){var i=this.get_langs_list().filter(function(t){return t.getUid()!=e});this._data.profile.setSpokenLanguage(i||[]);var o=$gpb.namespace("badoo.bma"),s=new o.SaveProfile;i.length?s.setSpokenLanguage(i):s.setRemoveAllLanguages(!0),this._lang_rpc&&this._lang_rpc.abort(),this._lang_rpc=new $gpb.Rpc(o.MessageType.SERVER_SAVE_PERSON_PROFILE,s).on(o.MessageType.CLIENT_PERSON_PROFILE,function(e,i){this._lang_rpc=null,this.on_set_lang_done(e,i),!e&&t&&t(this._data)},this).request()},add_language:function(e,t){var i=$gpb.namespace("badoo.bma"),o=new i.SaveProfile,s=this.get_langs_list(),n=new i.Language;n.setUid(+e),n.setName("FAKE"),n.setLevel(i.LanguageLevel.LANGUAGE_LEVEL_NONE),s.push(n),o.setSpokenLanguage(s),this._lang_rpc&&this._lang_rpc.abort(),this._lang_rpc=new $gpb.Rpc(i.MessageType.SERVER_SAVE_PERSON_PROFILE,o).on(i.MessageType.CLIENT_PERSON_PROFILE,function(e,i){this._lang_rpc=null,this.on_set_lang_done(e,i),!e&&t&&t(this._data)},this).request()},on_set_lang_done:function(e,t){return e?(this.fire("error",e),void 0):(this._data.profile=t,void 0)
},get_langs_list:function(){return this._data.profile.getSpokenLanguage()||[]},load_friends_connections:function(e){var t=$gpb.namespace("badoo.bma"),i=e.getFriendsConnections();i&&i.getStatus()==t.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_SEARCHING&&(this.friends_connections_loaded?this._data.profile.setFriendsConnections(this.friends_connections):(this.friends_connections_t=new $t(this._friends_connections_request,this,3e3),this.friends_connections_t.set()))},_friends_connections_request:function(){var e=$gpb.namespace("badoo.bma"),t=new e.ServerGetSocialFriendsConnections;t.setPersonId(this._user_id),t.setSource(this.client_source),this.friends_connections_rpc=new $gpb.Rpc(e.MessageType.SERVER_GET_SOCIAL_FRIENDS_CONNECTIONS,t).on(e.MessageType.CLIENT_SOCIAL_FRIENDS_CONNECTIONS,this._friends_connections_ready,this).request()},_friends_connections_ready:function(e,t){var i=$gpb.namespace("badoo.bma");switch(t.getStatus()){case i.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_SEARCHING:this.friends_connections_t.set();break;case i.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_FOUND:case i.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_NO_CONNECTION:case i.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_NOT_AVAILABLE:case i.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_UNKNOWN:this.friends_connections_rpc=null,this.friends_connections_t=null,this.friends_connections=t,this.friends_connections_loaded=!0,this._data.profile.setFriendsConnections(this.friends_connections),this.fire("friends-connections-loaded")}},abort_friends_connections:function(){this.friends_connections_rpc&&(this.friends_connections_rpc.abort(),this.friends_connections_rpc=null),this.friends_connections_t&&(this.friends_connections_t.clear(),this.friends_connections_t=null)},delete_gift:function(e,t){var i,o=$gpb.namespace("badoo.bma"),s=new o.ExperimentalServerGiftAction;switch(t){case"gift":i="GIFT_ACTION_DELETE";break;case"message":i="GIFT_ACTION_REMOVE_TEXT";break;default:throw"Unknown gift action: "+t}s.setId(e).setAction(o.ExperimentalGiftAction[i]),new $gpb.Rpc(o.MessageType.EXPERIMENTAL_SERVER_GIFT_ACTION,s).request(),this._remove_gift(e,t)},_remove_gift:function(e){for(var t=this._data.profile.getExperimentalGifts()||[],i=0,o=t.length;o>i;i++)if(t[i].getId()==e){t.splice(i,1);break}this.fire("updated:gifts",this._data)},set_favorite:function(e){var t=$gpb.namespace("badoo.bma"),i=(new t.ServerFolderAction).setPersonId(this._data.person.getUid()).setFolderId(t.FolderTypes.FAVOURITES),o=e?t.MessageType.SERVER_ADD_PERSON_TO_FOLDER:t.MessageType.SERVER_REMOVE_PERSON_FROM_FOLDER;new $gpb.Rpc(o,i).on($gpb.Rpc.SpecialEvent.ON_REQ_DONE,function(){this.fire("favorited",e)},this).request()},send_smile:function(){if(!this._smile_rpc){var e=(new $p.ChatMessage).setUid("msg_"+(new Date).getTime()).setFromPersonId(B.Session.getUserId()).setToPersonId(this._user_id).setMssg("").setRead(!1).setMessageType($p.ChatMessageType.SMILE);this._smile_rpc=new $gpb.Rpc($p.MessageType.SERVER_SEND_CHAT_MESSAGE,e).on($p.MessageType.CLIENT_CHAT_MESSAGE_RECEIVED,this.on_smile_sent,this).request()}},on_smile_sent:function(e,t){this._smile_rpc=null,e||t.getSuccess()&&this.fire("smile_sent")},unblock:function(){var e=new $p.ServerSectionUserAction;e.setAction($p.SectionActionType.SECTION_USER_DELETE).setFolderId($p.FolderTypes.BLOCKED).setUserList([(new $p.SectionUserActionList).setPersonId([this._data.person.getUid()])]),new $gpb.Rpc($p.MessageType.SERVER_SECTION_USER_ACTION,e).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,this.on_unblock,this).request()},on_unblock:function(e){e||this.fire("unblocked")},get_edit_form:function(e){var t=$gpb.namespace("badoo.bma"),i=(new t.ServerPersonProfileEditForm).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_ABOUT_ME).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_EDUCATION).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_WORK);this._data.allow_profile_info&&i.addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_RELATIONSHIP).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_SMOKING).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_SEXUALITY).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_LIVING).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_CHILDREN).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_APPEARANCE).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_DRINKING),new $gpb.Rpc(t.MessageType.SERVER_GET_PERSON_PROFILE_EDIT_FORM,i).on(t.MessageType.CLIENT_PERSON_PROFILE_EDIT_FORM,this.on_edit_form.bind(this,e),this).request()},on_edit_form:function(e,t,i){if(!t){var o=$gpb.namespace("badoo.bma").ProfileOptionType.PROFILE_OPTION_TYPE_APPEARANCE,s=this.find_in_array(i.getOptions(),function(e){return e.getType()===o});s&&s.getInputParts().map(function(e){i.addOptions(e)}),this._data.edit_form=i,this.fire("form-data",this._data,e)}},find_in_array:function(e,t){for(var i=0,o=e.length;o>i;i++)if(t(e[i]))return e[i];return void 0},save_education:function(e){var t={};e.job_id&&(t.work=e.job_id.value),e.university_id&&(t.education=e.university_id.value),this.save(t,null,this._on_education_save)},save_personal_info:function(e){for(var t={},i=e.elements,o=0,s=i.length;s>o;o++)i[o].name&&(t[i[o].name]=i[o].value);t.PROFILE_OPTION_TYPE_ABOUT_ME=t.PROFILE_OPTION_TYPE_ABOUT_ME.substring(0,1e3),this.save(t,null,this._on_save)},_on_save:function(e,t,i,o){e||(this._data.person=t,this._data.profile=i,this._data.status=o,this.get_edit_form())},_on_education_save:function(e,t,i,o){e||(this._data.person=t,this._data.profile=i,this._data.status=o,this.get_edit_form("work-education"))},_get_profile_option:function(e){var t=null,i=[];this.is_own()&&this._data.edit_form?(i=this._data.edit_form.getOptions()||[],i=i.concat(this._data.profile.getProfileField()||[])):i=this._data.profile.getProfileField()||[];for(var o=0;o<i.length;o++)(i[o].getId()==e||i[o].getType()==e)&&(t=i[o]);return t},update_vote_info:function(){var e=(new $p.ServerGetUser).setUserId(this._user_id).setClientSource(this.client_source).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_MY_VOTE,$p.UserField.USER_FIELD_MATCH_MESSAGE,$p.UserField.USER_FIELD_ALLOW_CHAT]));this._folder_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,e).on($p.MessageType.CLIENT_USER,this._on_vote_info,this).request()},update_awards_list:function(){var e=(new $p.ServerGetUser).setUserId(this._user_id).setClientSource(this.client_source).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_AWARDS]));return this._awards_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,e).on($p.MessageType.CLIENT_USER,this._on_update_awards_list,this).request(),this._awards_rpc},_on_update_awards_list:function(e,t){var i=t.getAwards()||[];this._data.profile.setAwards(i),this.fire("updated:awards",this._data)},_on_vote_info:function(e,t){if(!e){var i=this._data.profile;i.setChatAllowed(t.getAllowChat()),i.setMatchMessage(t.getMatchMessage()),i.setVoteResult(t.getMyVote()),this.fire("updated:vote",i)}},_get_query_params:function(){return $r.fromQueryString(B.App.url)}}),B.HoN_v3.Profile.Model2=$class($u.Observable,{PHOTO_WIDTH:180,PHOTO_HEIGHT:180,square_preview_size:48,square_preview:!1,show_private_photos:!1,exclude_private_photos:!0,_data:null,_album_photos_of_me:null,_album_private_photos:null,_user_id:null,_rpc:null,_lang_rpc:null,_folder_rpc:null,_awards_rpc:null,_smile_rpc:null,_profile_loaded:!1,private_photos_count:0,_profile_options_map:{unknown:"UNKNOWN_PROFILE_OPTION_TYPE",location:"PROFILE_OPTION_TYPE_LOCATION",about_me:"PROFILE_OPTION_TYPE_ABOUT_ME",relationship:"PROFILE_OPTION_TYPE_RELATIONSHIP",sexuality:"PROFILE_OPTION_TYPE_SEXUALITY",appearance:"PROFILE_OPTION_TYPE_APPEARANCE",living:"PROFILE_OPTION_TYPE_LIVING",children:"PROFILE_OPTION_TYPE_CHILDREN",smoking:"PROFILE_OPTION_TYPE_SMOKING",drinking:"PROFILE_OPTION_TYPE_DRINKING",education:"PROFILE_OPTION_TYPE_EDUCATION",languages:"PROFILE_OPTION_TYPE_LANGUAGES",work:"PROFILE_OPTION_TYPE_WORK",height:"PROFILE_OPTION_TYPE_APPEARANCE_HEIGHT",weight:"PROFILE_OPTION_TYPE_APPEARANCE_WEIGHT",body_type:"PROFILE_OPTION_TYPE_APPEARANCE_BODY_TYPE",eye_color:"PROFILE_OPTION_TYPE_APPEARANCE_EYE_COLOR",hair_color:"PROFILE_OPTION_TYPE_APPEARANCE_HAIR_COLOR",work_job:"PROFILE_OPTION_TYPE_WORK_JOB",work_company:"PROFILE_OPTION_TYPE_WORK_COMPANY",work_income:"PROFILE_OPTION_TYPE_WORK_INCOME",interested_in:"PROFILE_OPTION_TYPE_INTERESTED_IN"},client_source:null,source_folder:null,has_navigation:null,index_in_folder:null,constructor:function(e,t,i,o,s){this.square_preview=t;var n=B.Features.getFeature($p.FeatureType.ALLOW_PRIVATE_PHOTOS);n.getEnabled()&&(this.show_private_photos=o,this.exclude_private_photos=s),this._user_id=e,this._data={uid:e,profile:null,person:null,status:null,allow_profile_info:i},$super(this,arguments),this.set_client_source(),this.get()},destroy:function(){this.cancel(),$super(this,arguments),this.fire=function(){},this._lang_rpc=null,this.square_preview=this.show_private_photos=!1,this._profile_loaded=!1,this._album_photos_of_me=this._album_private_photos=null},set_client_source:function(){var e=$gpb.namespace("badoo.bma"),t={"from_hotlist=1":{client_source:e.ClientSource.CLIENT_SOURCE_LOCAL_HOT,source_folder:e.FolderTypes.LOCAL_HOT},"from_friend_hotlist=1":{client_source:e.ClientSource.CLIENT_SOURCE_FRIENDS_HOT_LIST,source_folder:e.FolderTypes.FRIENDS_HOT_LIST},"from=messenger":{client_source:e.ClientSource.CLIENT_SOURCE_MESSAGES,source_folder:e.FolderTypes.ALL_MESSAGES},"from_search=1":{client_source:e.ClientSource.CLIENT_SOURCE_PEOPLE_NEARBY,source_folder:e.FolderTypes.NEARBY_PEOPLE_WEB,navigation:!0},"from_spotlight=1":{client_source:e.ClientSource.CLIENT_SOURCE_SPOTLIGHT,source_folder:e.FolderTypes.SPOTLIGHT},"from=want_you":{client_source:e.ClientSource.CLIENT_SOURCE_WANT_TO_MEET_YOU,source_folder:e.FolderTypes.WANT_TO_MEET_YOU},"from=visitors":{client_source:e.ClientSource.CLIENT_SOURCE_VISITORS,source_folder:e.FolderTypes.PROFILE_VISITORS},"from=added-to-favorites":{client_source:e.ClientSource.CLIENT_SOURCE_FAVOURITED_YOU,source_folder:e.FolderTypes.FAVOURITES},"from=your-favorites":{client_source:e.ClientSource.CLIENT_SOURCE_FAVOURITES,source_folder:e.FolderTypes.FAVOURITES},"from-potd=1":{client_source:e.ClientSource.CLIENT_SOURCE_PHOTO_OF_THE_DAY},"from_my_profile=1":{client_source:e.ClientSource.CLIENT_SOURCE_MY_PROFILE},"from_other_profile=1":{client_source:e.ClientSource.CLIENT_SOURCE_OTHER_PROFILE},"/game":{client_source:e.ClientSource.CLIENT_SOURCE_ENCOUNTERS}},i=this._get_query_params();e.FolderTypes.isValid(i.folder)&&(this.source_folder=+i.folder);for(var o in t)if(-1!=B.App.url.indexOf(o)){this.client_source=t[o].client_source,this.source_folder=t[o].source_folder,this.has_navigation=t[o].navigation;break}if(null==this.client_source){var s=/folder=(\d*)/gi.exec(B.App.url);if(s){var n=s[1];switch(n){case"4":this.client_source=e.ClientSource.CLIENT_SOURCE_FAVOURITED_YOU;break;case"8":this.client_source=e.ClientSource.CLIENT_SOURCE_VISITORS;break;case"6":this.client_source=e.ClientSource.CLIENT_SOURCE_WANT_TO_MEET_YOU;break;case"25":this.client_source=e.ClientSource.CLIENT_SOURCE_PEOPLE_NEARBY}}}null==this.client_source&&(this.client_source=e.ClientSource.CLIENT_SOURCE_UNSPECIFIED),null==this.source_folder&&(this.source_folder=e.FolderTypes.UNSPECIFIED_FOLDER)},cancel:function(){this._rpc&&(this._rpc.abort(),this._rpc=null),this._folder_rpc&&(this._folder_rpc.abort(),this._folder_rpc=null),this._smile_rpc&&(this._smile_rpc.abort(),this._smile_rpc=null),this._awards_rpc&&(this._awards_rpc.abort(),this._awards_rpc=null)},get:function(e){if(e&&(this._user_id=e),B.HoN_v3.Models.Cache.AppSettingsCache.fetch(this._onAppSettings,this),this._get_full_profile(),this.has_navigation){var t=this._get_query_params();t.p&&(this.index_in_folder=Number(t.p),this.is_big_photo()&&this._get_folder(this.index_in_folder))}return this},save:function(e,t,i){var o,s,n=$gpb.namespace("badoo.bma"),r=new n.SaveProfile;for(o in e)s=n.ProfileOptionType.getIdx(this._profile_options_map[o]||o),s&&r.addUpdatedValues((new n.UpdatedProfileValues).setProfileOptionType(s).setProfileOptionValue(e[o]));t&&r.setSpokenLanguage(t),new $gpb.Rpc(n.MessageType.SERVER_SAVE_PERSON_PROFILE,r).on([n.MessageType.CLIENT_PERSON,n.MessageType.CLIENT_PERSON_PROFILE,n.MessageType.CLIENT_PERSON_STATUS],i||this._on_update,this).request()},setSkipPhoto:function(e){var t=new $p.AppSettings;t.setSkipNonModeratedAlert(e),(new B.HoN_v3.Models.AppSettingsModel).update(null,t)},isLoaded:function(){return this._profile_loaded},_onAppSettings:function(e){var t=e.getSettings();this._data.verificationHideDetails=t.getVerificationHideDetails(),this._data.skip_unmoderated_photo=t.getSkipNonModeratedAlert(),this._data.distanceAllowed=t.getPrivacyShowDistance(),this.fire("moderated",this._data.skip_unmoderated_photo)},_on_update:function(e,t,i,o,s,n){if(e)return e.getType()==$p.ServerErrorType.SERVER_ERROR_TYPE_CAPTCHA_REQUIRED?(this.fire("captcha-required"),this._captcha_blocked=!0,void 0):(this.fire("error",e),void 0);if(!this._captcha_blocked){t=t[0],i=i[0],o=o[0],n=n[0];var r=s[0],a=s[1];this._profile_loaded=!0,this._rpc=null,this._data.person=t,this._data.user=n,this._data.profile=i,this._data.status=o,this._data.uid=t.getUid(),this._user_id=t.getUid(),this._data.own_profile=this.is_own(),this._data.big_photo=this.is_big_photo(),this._data.source_folder=this.source_folder,this._data.index_in_folder=this.index_in_folder;var l=this._get_profile_field("location");switch(this._data.location=l?l.getDisplayValue():null,t.getGender()){case 1:this._data.gender="MALE";break;case 2:this._data.gender="FEMALE";break;default:this._data.gender=null}this.is_own()&&this.get_edit_form(),this._album_photos_of_me=r,a&&a.getCountOfPhotos()&&(this._album_private_photos=a,this.private_photos_count=this._album_private_photos.getCountOfPhotos()),this._on_albums_done(),this.fire("profile-updated")}},_on_folder:function(e,t){if(this._folder_rpc=null,e)return this.fire("error",e),void 0;var i,o,s=t.getSection()[0].getUsers();s.length&&(1===this.index_in_folder?o=s[1]:(i=s[0],o=s[2]),this.fire("navigation",this.index_in_folder,i,o))},_get_profile_field:function(e){var t=this._data.profile.getProfileField();if(!t)return null;for(var i=0;i<t.length;i++)if(t[i].getId()==e)return t[i];return null},get_album:function(){var e=$gpb.namespace("badoo.bma"),t=new $gpb.Rpc.Batch,i=this._user_id,o=(new e.ServerGetAlbum).setPersonId(i).setAlbumType(e.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME);this.square_preview?o.setPreviewSize((new e.PhotoSize).setHeight(48)):o.setPreviewSize((new $p.PhotoSize).setHeight(this.PHOTO_HEIGHT).setWidth(this.PHOTO_WIDTH)),t.addCommand(e.MessageType.SERVER_GET_ALBUM,o),this._rpc=new $gpb.Rpc(e.MessageType.SERVER_GET_PERSON_PROFILE_DATA,t).on(e.MessageType.CLIENT_ALBUM,this._on_get_album,this).request()},_on_get_album:function(e,t){this._album_photos_of_me=t,this._on_albums_done(),this.fire("album",t)},_on_photos:function(e,t){e||(B.HoN_v3.PhotoReplace&&(B.HoN_v3.PhotoReplace.has_gallery=!1),this.album=t,this.fire("album",t))},get_photos:function(){var e=[];return this.album.map(function(t){e=e.concat(t.getPhotos()||[])}),e},get_photo_by_id:function(e){for(var t,i=this.get_photos(),o=0;o<i.length;o++)if(t=i[o],t.getId()===e)return t},is_photo_private:function(e){return!!this._private_photo_ids[e]},_get_full_profile:function(){var e=$gpb.namespace("badoo.bma"),t=new $gpb.Rpc.Batch,i=this._user_id,o=(new e.ServerGetPersonProfile).setPersonId(i).setContext(this.client_source);t.addCommand(e.MessageType.SERVER_GET_PERSON_PROFILE,o),o=(new e.ServerGetAlbum).setPersonId(i).setAlbumType(e.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME),this._set_preview_size(o),t.addCommand(e.MessageType.SERVER_GET_ALBUM,o),this.exclude_private_photos||(o=(new $p.ServerGetAlbum).setPersonId(i).setAlbumType($p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS),this._set_preview_size(o),t.addCommand(e.MessageType.SERVER_GET_ALBUM,o)),B.HoN_v3.SeenProfile.isSeen(i)||(o=(new e.ProfileVisitingSource).setPersonId(i).setSourceFolder(this.source_folder).setVisitingSource(this.client_source),t.addCommand(e.MessageType.SERVER_VISITING_SOURCE,o));var s=[$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_HOTTEST,$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_REGISTERED,$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_UNREGISTERED].map(function(e){return(new $p.UnitedFriendsFilter).setCount(5).setSectionType(e)});o=(new e.ServerGetUser).setUserId(i).setClientSource(this.client_source).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_UNITED_FRIENDS]).setUnitedFriendsFilter(s)),t.addCommand(e.MessageType.SERVER_GET_USER,o),this._rpc=new $gpb.Rpc(e.MessageType.SERVER_GET_PERSON_PROFILE_DATA,t).on([e.MessageType.CLIENT_PERSON,e.MessageType.CLIENT_PERSON_PROFILE,e.MessageType.CLIENT_PERSON_STATUS,e.MessageType.CLIENT_ALBUM,e.MessageType.CLIENT_USER],this._on_update,this,null,!0).request()},_on_albums_done:function(){var e=[this._album_photos_of_me];if(this._save_private_photo_ids(),this._album_private_photos){if(!this._is_private_photos_visible()){var t=this._album_photos_of_me.getPhotos(),i=(new $p.Photo).setId("-1");if(t&&t.length){var o=t[0],s=o.getLargePhotoSize();i.setPreviewUrl(o.getPreviewUrl()).setLargeUrl(o.getLargeUrl()).setLargePhotoSize((new $p.PhotoSize).setWidth(s.getWidth()).setHeight(s.getHeight()))}this._album_private_photos.setCountOfPhotos(1).setAccessable(!1).setPhotos([i])}e.push(this._album_private_photos)}this.fire("updated",this._data),this._data.person.getDeleted()||this._on_photos(null,e)},_save_private_photo_ids:function(){var e,t={};if(this._album_private_photos){e=this._album_private_photos.getPhotos()||[];for(var i=0;i<e.length;i++)t[e[i].getId()]=!0}this._private_photo_ids=t},_is_private_photos_visible:function(){return this.is_own()?this.show_private_photos||B.HoN_v3.show_private_photos:this._album_private_photos.getAccessable()},_set_preview_size:function(e){this.square_preview?e.setPreviewSize((new $p.PhotoSize).setHeight(this.square_preview_size)):e.setPreviewSize((new $p.PhotoSize).setHeight(this.PHOTO_HEIGHT).setWidth(this.PHOTO_WIDTH))},_get_folder:function(e){var t=(new $p.ServerGetUserList).setFolderId(this.source_folder).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_NAME,$p.UserField.USER_FIELD_PROFILE_PHOTO,$p.UserField.USER_FIELD_DISTANCE_LONG])).setPreferredCount(3).setOffset(e-2);this._folder_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_USER_LIST,t).on($p.MessageType.CLIENT_USER_LIST,this._on_folder,this).request()},get_award:function(e){if(!this._data.profile)return!1;for(var t=this._data.profile.getAwards()||[],i=0;i<t.length;i++)if(t[i].getAwardId()==e)return t[i];return!1},is_own:function(){return parseInt(this._user_id,10)==B.Session.getUserId()},is_big_photo:function(){return"big-photo-view"==B.App.state},_save_profile_value:function(e,t,i){var o=$gpb.namespace("badoo.bma"),s=new o.SaveProfile;s.addUpdatedValues((new o.UpdatedProfileValues).setProfileOptionType(o.ProfileOptionType[e]).setProfileOptionValue(t)),new $gpb.Rpc(o.MessageType.SERVER_SAVE_PERSON_PROFILE,s).on([o.MessageType.CLIENT_PERSON,o.MessageType.CLIENT_PERSON_PROFILE,o.MessageType.CLIENT_PERSON_STATUS],i,this).request()},set_aboutme:function(e,t){this._save_profile_value("PROFILE_OPTION_TYPE_ABOUT_ME",e,function(e,i,o,s){this.on_set_aboutme_done(e,i,o,s),!e&&t&&t(this._data)})},on_set_aboutme_done:function(e,t,i,o){if(e)return this.fire("error",e),void 0;switch(this._data.person=t,this._data.profile=i,this._data.status=o,this._data.uid=t.getUid(),this._user_id=t.getUid(),this._data.own_profile=this.is_own(),this._data.big_photo=this.is_big_photo(),t.getGender()){case 1:this._data.gender="MALE";break;case 2:this._data.gender="FEMALE";break;default:this._data.gender=null}this.get_edit_form("aboutme")},set_location:function(e,t){var i=$gpb.namespace("badoo.bma"),o=new i.Integer;o.setValue(+e),new $gpb.Rpc(i.MessageType.SERVER_SAVE_LOCATION,o).on(i.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,t).request()},set_geolocation:function(e,t,i){var o=(new $p.ServerUpdateLocation).addLocation((new $p.GeoLocation).setLongitude(+e).setLatitude(+t));new $gpb.Rpc($p.MessageType.SERVER_UPDATE_LOCATION,o).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,i).request()},on_set_location_done:function(){this.fire("updated:location",this._data)},remove_language:function(e,t){var i=this.get_langs_list().filter(function(t){return t.getUid()!=e});this._data.profile.setSpokenLanguage(i||[]);var o=$gpb.namespace("badoo.bma"),s=new o.SaveProfile;i.length?s.setSpokenLanguage(i):s.setRemoveAllLanguages(!0),this._lang_rpc&&this._lang_rpc.abort(),this._lang_rpc=new $gpb.Rpc(o.MessageType.SERVER_SAVE_PERSON_PROFILE,s).on(o.MessageType.CLIENT_PERSON_PROFILE,function(e,i){this._lang_rpc=null,this.on_set_lang_done(e,i),!e&&t&&t(this._data)},this).request()},add_language:function(e,t){var i=$gpb.namespace("badoo.bma"),o=new i.SaveProfile,s=this.get_langs_list(),n=new i.Language;n.setUid(+e),n.setName("FAKE"),n.setLevel(i.LanguageLevel.LANGUAGE_LEVEL_NONE),s.push(n),o.setSpokenLanguage(s),this._lang_rpc&&this._lang_rpc.abort(),this._lang_rpc=new $gpb.Rpc(i.MessageType.SERVER_SAVE_PERSON_PROFILE,o).on(i.MessageType.CLIENT_PERSON_PROFILE,function(e,i){this._lang_rpc=null,this.on_set_lang_done(e,i),!e&&t&&t(this._data)},this).request()},on_set_lang_done:function(e,t){return e?(this.fire("error",e),void 0):(this._data.profile=t,void 0)},get_langs_list:function(){return this._data.profile.getSpokenLanguage()||[]},delete_gift:function(e,t){var i,o=$gpb.namespace("badoo.bma"),s=new o.ExperimentalServerGiftAction;switch(t){case"gift":i="GIFT_ACTION_DELETE";break;case"message":i="GIFT_ACTION_REMOVE_TEXT";break;default:throw"Unknown gift action: "+t}s.setId(e).setAction(o.ExperimentalGiftAction[i]),new $gpb.Rpc(o.MessageType.EXPERIMENTAL_SERVER_GIFT_ACTION,s).request(),this._remove_gift(e,t)},_remove_gift:function(e){for(var t=this._data.profile.getExperimentalGifts()||[],i=0,o=t.length;o>i;i++)if(t[i].getId()==e){t.splice(i,1);break}this.fire("updated:gifts",this._data)},set_favorite:function(e){var t=$gpb.namespace("badoo.bma"),i=(new t.ServerFolderAction).setPersonId(this._data.person.getUid()).setFolderId(t.FolderTypes.FAVOURITES),o=e?t.MessageType.SERVER_ADD_PERSON_TO_FOLDER:t.MessageType.SERVER_REMOVE_PERSON_FROM_FOLDER;new $gpb.Rpc(o,i).on($gpb.Rpc.SpecialEvent.ON_REQ_DONE,function(){this.fire("favorited",e)},this).request()},send_smile:function(){if(!this._smile_rpc){var e=(new $p.ChatMessage).setUid("msg_"+(new Date).getTime()).setFromPersonId(B.Session.getUserId()).setToPersonId(this._user_id).setMssg("").setRead(!1).setMessageType($p.ChatMessageType.SMILE);this._smile_rpc=new $gpb.Rpc($p.MessageType.SERVER_SEND_CHAT_MESSAGE,e).on($p.MessageType.CLIENT_CHAT_MESSAGE_RECEIVED,this.on_smile_sent,this).request()}},on_smile_sent:function(e,t){this._smile_rpc=null,e||t.getSuccess()&&this.fire("smile_sent")},unblock:function(){var e=new $p.ServerSectionUserAction;e.setAction($p.SectionActionType.SECTION_USER_DELETE).setFolderId($p.FolderTypes.BLOCKED).setUserList([(new $p.SectionUserActionList).setPersonId([this._data.person.getUid()])]),new $gpb.Rpc($p.MessageType.SERVER_SECTION_USER_ACTION,e).on($p.MessageType.CLIENT_ACKNOWLEDGE_COMMAND,this.on_unblock,this).request()},on_unblock:function(e){e||this.fire("unblocked")},get_edit_form:function(e){var t=$gpb.namespace("badoo.bma"),i=(new t.ServerPersonProfileEditForm).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_ABOUT_ME).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_EDUCATION).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_WORK);this._data.allow_profile_info&&i.addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_RELATIONSHIP).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_SMOKING).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_SEXUALITY).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_LIVING).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_CHILDREN).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_APPEARANCE).addType(t.ProfileOptionType.PROFILE_OPTION_TYPE_DRINKING),new $gpb.Rpc(t.MessageType.SERVER_GET_PERSON_PROFILE_EDIT_FORM,i).on(t.MessageType.CLIENT_PERSON_PROFILE_EDIT_FORM,this.on_edit_form.bind(this,e),this).request()},on_edit_form:function(e,t,i){if(!t){var o=$gpb.namespace("badoo.bma").ProfileOptionType.PROFILE_OPTION_TYPE_APPEARANCE,s=this.find_in_array(i.getOptions(),function(e){return e.getType()===o});s&&s.getInputParts().map(function(e){i.addOptions(e)}),this._data.edit_form=i,this.fire("form-data",this._data,e)}},find_in_array:function(e,t){for(var i=0,o=e.length;o>i;i++)if(t(e[i]))return e[i];return void 0},save_education:function(e){var t={};e.job_id&&(t.work=e.job_id.value),e.university_id&&(t.education=e.university_id.value),this.save(t,null,this._on_education_save)},save_personal_info:function(e){for(var t={},i=e.elements,o=0,s=i.length;s>o;o++)i[o].name&&(t[i[o].name]=i[o].value);t.PROFILE_OPTION_TYPE_ABOUT_ME=t.PROFILE_OPTION_TYPE_ABOUT_ME.substring(0,1e3),this.save(t,null,this._on_save)},_on_save:function(e,t,i,o){e||(this._data.person=t,this._data.profile=i,this._data.status=o,this.get_edit_form())},_on_education_save:function(e,t,i,o){e||(this._data.person=t,this._data.profile=i,this._data.status=o,this.get_edit_form("work-education"))},_get_profile_option:function(e){var t=null,i=[];this.is_own()&&this._data.edit_form?(i=this._data.edit_form.getOptions()||[],i=i.concat(this._data.profile.getProfileField()||[])):i=this._data.profile.getProfileField()||[];for(var o=0;o<i.length;o++)(i[o].getId()==e||i[o].getType()==e)&&(t=i[o]);return t},update_vote_info:function(){var e=(new $p.ServerGetUser).setUserId(this._user_id).setClientSource(this.client_source).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_MY_VOTE,$p.UserField.USER_FIELD_MATCH_MESSAGE,$p.UserField.USER_FIELD_ALLOW_CHAT]));this._folder_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,e).on($p.MessageType.CLIENT_USER,this._on_vote_info,this).request()},update_awards_list:function(){var e=(new $p.ServerGetUser).setUserId(this._user_id).setClientSource(this.client_source).setUserFieldFilter((new $p.UserFieldFilter).setProjection([$p.UserField.USER_FIELD_AWARDS]));return this._awards_rpc=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,e).on($p.MessageType.CLIENT_USER,this._on_update_awards_list,this).request(),this._awards_rpc},_on_update_awards_list:function(e,t){var i=t.getAwards()||[];this._data.profile.setAwards(i),this.fire("updated:awards",this._data)},_on_vote_info:function(e,t){if(!e){var i=this._data.profile;i.setChatAllowed(t.getAllowChat()),i.setMatchMessage(t.getMatchMessage()),i.setVoteResult(t.getMyVote()),this.fire("updated:vote",i)}},_get_query_params:function(){return $r.fromQueryString(B.App.url)}}),function(){function e(e,n){return e.section(n.get(["_STUB"],!1),n,{block:t},{}).write(' <div id="js-profile-hottest-friends" class="section section--profile js-wrap"> <h2> ').section(n.get(["OWN_FRIENDS_TITLE_UNKNOW"],!1),n,{block:i},{}).write(" ").section(n.get(["OWN_FRIENDS_TITLE"],!1),n,{block:o},{}).write(" </h2> ").section(n.get(["FRIENDS_FILTER"],!1),n,{block:s},{}).write(' <div class="profile-friends js-friends-wrap"> ').section(n.get(["CONNECTIONS"],!1),n,{block:a},{}).write(" ").section(n.get(["NOT_CONNECTED"],!1),n,{block:w},{}).write(" ").section(n.get(["UNAVAILABLE"],!1),n,{block:R},{}).write(" ").section(n.get(["NO_OWN_FRIENDS"],!1),n,{block:S},{}).write(" </div> </div>")}function t(e){return e}function i(e){return e.write("Friends")}function o(e,t){return e.reference("num_friends_connections",t).write(" ").reference("friends",t)}function s(e,t){return e.write(' <div class="select select--sm select-edit js-hottest-friends-list-gender" data-control-type="select"> <input type="hidden" name="gender" value="').reference("gender",t).write('" class="select-value"> <div tabindex="0" class="select-label">').reference("HTMLBLOCK_label",t,["s"]).write('</div> <div class="select-options"> <ul class="options"> ').section(t.get(["OPTIONS"],!1),t,{block:n},{}).write(" </ul> </div> </div> ")}function n(e,t){return e.write(' <li class="option').section(t.get(["_SELECTED"],!1),t,{block:r},{}).write('" data-value="').reference("gender",t).write('"> ').reference("option",t).write(" </li> ")}function r(e){return e.write(" selected")}function a(e,t){return e.section(t.get(["CONNECTION"],!1),t,{block:l},{})}function l(e,t){return e.write("<!-- -->").section(t.get(["_FRIEND"],!1),t,{block:_},{}).write("<!-- -->").section(t.get(["MORE"],!1),t,{block:O},{}).write("<!-- -->")}function _(e,t){return e.write('<div class="brick-wrap"> <div class="brick brick--xlg brick--hover tooltip-wrap').section(t.get(["_HIDDEN"],!1),t,{block:p},{}).write('"').section(t.get(["_DATA_HIDDEN"],!1),t,{block:c},{}).write(' data-control-type="tooltip"> <div class="brick-img"><img src="').reference("user_pic",t).write('" width="90" height="90" alt=""></div> ').section(t.get(["_CUSTOM"],!1),t,{block:u},{}).write(" ").section(t.get(["_UNKNOW"],!1),t,{block:d},{}).write(" ").section(t.get(["_FACEBOOK"],!1),t,{block:h},{}).write(" ").section(t.get(["_GOOGLE"],!1),t,{block:b},{}).write(" ").section(t.get(["_VK"],!1),t,{block:E},{}).write(" ").section(t.get(["_LINKEDIN"],!1),t,{block:g},{}).write(" ").section(t.get(["_ODNOKLASSNIKI"],!1),t,{block:m},{}).write(' <div class="tooltip"><span class="tooltip-txt">').reference("name",t).write("</span></div> ").section(t.get(["_LINK_WEBAPP"],!1),t,{block:f},{}).write(" ").section(t.get(["_LINK_OVL"],!1),t,{block:T},{}).write(" ").section(t.get(["_LINK_FRIEND_CONNECTED"],!1),t,{block:v},{}).write(' </div> <div class="brick-txt"><span class="brick-txt_">').reference("name",t).write("</span></div> </div>")}function p(e){return e.write(" hidden js-friend-hidden")}function c(e){return e.write(' data-hidden="hidden"')}function u(e,t){return e.write('<mark class="brick brick--xsm"><div class="brick-img"><img src="').reference("icon",t).write('"></div></mark>')}function d(e){return e.write('<mark class="brick brick--xsm brick--grey"><i class="ico ico--white ico--question-sm"></i></mark>')}function h(e){return e.write('<mark class="brick brick--xsm brick--facebook"><i class="ico ico--white ico--facebook-xsm"></i></mark>')}function b(e){return e.write('<mark class="brick brick--xsm brick--google"><i class="ico ico--white ico--google-sm"></i></mark>')}function E(e){return e.write('<mark class="brick brick--xsm brick--vk"><i class="ico ico--white ico--vk-sm"></i></mark>')}function g(e){return e.write('<mark class="brick brick--xsm brick--linkedin"><i class="ico ico--white ico--linkedin-sm"></i></mark>')}function m(e){return e.write('<mark class="brick brick--xsm brick--odnoklassniki"><i class="ico ico--white ico--odnoklassniki-sm"></i></mark>')}function f(e,t){return e.write('<a href="').reference("profile_url",t).write('" class="b-link app" rel="').reference("profile_state",t).write('"></a>')}function T(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("ovl_url",t).write('"></span>')}function v(e,t){return e.write('<span class="b-link js-friends-cons" data-connection-id="').reference("connection_id",t).write('"></span>')}function O(e,t){return e.write('<div class="brick-wrap"> <div class="brick brick--xlg brick--grey"> <i class="ico ico--lg ico--white ico--etc-lg"></i> <div class="loader loader--white"><div class="loader_"></div></div> </div> <div class="grey brick-txt">See more</div> ').section(t.get(["_GET_MORE_FRIENDS"],!1),t,{block:y},{}).write(" </div>")}function y(e,t){return e.write('<a class="b-link js-friends-more').section(t.get(["_CLIENT"],!1),t,{block:I},{}).write('" rel="profile-friends--more" data-friends-more="').reference("more_friends_url",t).write('"></a>')}function I(e){return e.write("__client")}function w(e,t){return e.write(' <div class="brick brick--xlg"> <div class="brick-img"><img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/user-group-90.1.png"}).write('" alt=""></div> <mark class="brick brick--xsm brick--black"><i class="ico ico--white ico--block-sm"></i></mark> </div> <span class="inline profile-friend__txt">We haven\'t found a connection via your Facebook account.</span> ')
}function R(e,t){return e.write(' <div class="brick brick--xlg"> <div class="brick-img"><img src="').helper("version",t,{},{url:"/v2/-/-/i/hotornot_v2/user-group-90.1.png"}).write('" alt=""></div> <mark class="brick brick--xsm brick--yellow"><i class="ico ico--attention"></i></mark> </div> <span class="inline profile-friend__txt">We are sorry, this service is temporarily unavailable. Try again later.</span> ')}function S(e){return e.write(' <span class="inline">No friends found</span> ')}return $u.dust.register("profile/block.friends",e),e.s={_STUB:t,OWN_FRIENDS_TITLE_UNKNOW:i,OWN_FRIENDS_TITLE:o,FRIENDS_FILTER:s,CONNECTIONS:a,NOT_CONNECTED:w,UNAVAILABLE:R,NO_OWN_FRIENDS:S},s.s={OPTIONS:n},n.s={_SELECTED:r},a.s={CONNECTION:l},l.s={_FRIEND:_,MORE:O},_.s={_HIDDEN:p,_DATA_HIDDEN:c,_CUSTOM:u,_UNKNOW:d,_FACEBOOK:h,_GOOGLE:b,_VK:E,_LINKEDIN:g,_ODNOKLASSNIKI:m,_LINK_WEBAPP:f,_LINK_OVL:T,_LINK_FRIEND_CONNECTED:v},O.s={_GET_MORE_FRIENDS:y},y.s={_CLIENT:I},e}(),$l.register({section:"hon/profile",lang:"en-us",translations:{GRADUATION_YEAR_START:"select year",LANGUAGE_MORE_START:"Select language",RELATIONSHIP:{None:"no answer",Single:{M:"Single",F:"Single"},Taken:{M:"Taken",F:"Taken"},Open:{M:"Open",F:"Open"}},SEXUALITY:{None:"no answer",Gay:{M:"Gay",F:"Lesbian"},OpenMinded:{M:"Open-minded",F:"Open-minded"},Straight:{M:"Straight",F:"Straight"},Bi:{M:"Bisexual",F:"Bisexual"}},INTERESTED_IN:{Friends:"Meet new people",Partners:"Find people to party",Photos:"Share and explore",Chatting:"Discuss the world",Dating:"Dating..."},INTERESTED_IN_MORE:{Both:"Men and Women",Men:"Men",Women:"Women"},INCOME:{Low:"Low",Average:"Average",High:"High",None:"no answer"},BODY:{Average:"Average",ExtraPounds:"A few extra pounds",None:"no answer",Athletic:{M:"Athletic",F:"Athletic"},Muscular:{M:"Muscular",F:"Muscular"},Slim:{M:"Slim",F:"Slim"},OverWeight:{M:"Big and bold",F:"Big and beautiful"}},HAIR:{None:"no answer",Black:"Black",Brown:"Brown",Red:"Red",Blond:"Blond",Grey:"Grey",White:"White",Shaved:"Shaved",Dyed:"Dyed",Bald:{M:"Bald",F:"Bald"}},PIERCING:{Yes:"Have piercings"},TATTOO:{Yes:"Have tattoos"},EDUCATION:{School:"School only",Technical:"Trade/Technical",University:"College/University",Degree:"Advanced degree",None:"no answer"},CHILDREN:{Never:"No, never",Someday:"Someday",HavePlenty:"Already have",None:"no answer",EmptyNest:"Grown up"},RELIGION:{Not:{M:"Agnostic",F:"Agnostic"},Atheist:{M:"Atheist",F:"Atheist"},Buddhist:{M:"Buddhist",F:"Buddhist"},Christian:{M:"Christian",F:"Christian"},Hindu:{M:"Hindu",F:"Hindu"},Jewish:{M:"Jewish",F:"Jewish"},Muslim:{M:"Muslim",F:"Muslim"},Spiritual:{M:"Spiritual",F:"Spiritual"},None:{M:"no answer",F:"no answer"}},POLITICAL:{Anarchist:{M:"Anarchist",F:"Anarchist"},Communist:{M:"Communist",F:"Communist"},Socialist:{M:"Socialist",F:"Socialist"},Liberal:{M:"Liberal",F:"Liberal"},Moderate:{M:"Moderate",F:"Moderate"},Conservative:{M:"Conservative",F:"Conservative"},Right:{M:"Far right",F:"Far right"},None:{M:"no answer",F:"no answer"}},UFO:{Fake:"UFOs are fake",Real:"UFOs are real",Seen:"I have seen a UFO",Probed:"I have been abducted and probed by a UFO",None:"no answer"},LIVING:{Parents:"With parents",Roommate:"With housemate(s)",Dormitory:"Student dormitory",Partner:"With partner",None:"no answer",Alone:{M:"Alone",F:"Alone"}},DIETARY:{Vegetarian:{M:"Vegetarian",F:"Vegetarian"},Vegan:{M:"Vegan",F:"Vegan"},Meat:{M:"Meat eater",F:"Meat eater"},Omnivore:{M:"Conscientious omnivore",F:"Conscientious omnivore"},Organic:{M:"Organic eater",F:"Organic eater"},All:{M:"Junk food junkie",F:"Junk food junkie"},None:{M:"no answer",F:"no answer"}},ALCO_DRINK:{Beer:"Beer",Wine:"Wine",Cocktails:"Cocktails",Spirits:"Liquor/spirits",Anything:"Anything",No:"No alcohol for me, thanks",None:"no answer"},GET_DRUNK:{None:"no answer",Fight:{M:"Looking for a fight",F:"Looking for a fight"},Lethargic:{M:"Lethargic",F:"Lethargic"},Dont:{M:"I don't get drunk, thank you very much!",F:"I don't get drunk, thank you very much!"},Horny:{M:"Horny",F:"Horny"},Party:{M:"Life of the party",F:"Life of the party"},NotFunny:{M:"Not as funny as I think I'm being",F:"Not as funny as I think I'm being"},Vomiting:{M:"Vomiting",F:"Vomiting"},Hungry:{M:"Hungry",F:"Hungry"},Crying:{M:"Crying",F:"Crying"}},SMOKING:{None:"no answer",No:{M:"Non-smoker",F:"Non-smoker"},DontLike:{M:"Anti-smoker",F:"Anti-smoker"},Yes:{M:"Smoker",F:"Smoker"},Social:{M:"Social smoker",F:"Social smoker"},Chain:{M:"Chain-smoker",F:"Chain-smoker"}},PROFILE_LIST_TITLES:{background_text:"Passions & Expertise",music:"In music",movies:"In movies, books & TV",sport:"In sports"},PROFILE_LIST_EXAMPLES:{music:"Weezer, Doors, Chamillionaire, Madonna, The Shins, NIN, Black Eyed Peas, Feist, Jeff Buckley, Bob Dylan",sport:"Football, Soccer, Basketball, Baseball, Water Polo, Giants, Bucs, Manchester United, Real Madrid, David Beckham, Patrick Ewing, Michael Jordan, Bo Jackson, Pele",background_text:"photography, web design, stamp collecting, acting, fishing, playing guitar, PR, financial consulting, landscape painting, art collecting, computer programming, sailing",movies:{movies:"Bottle Rocket, Braveheart, Splash, Run Lola Run, Swingers, The Godfather, 12 Monkeys, Fear and Loathing in Las Vegas",books:"On the Road, War and Peace, The Great Gatsby, To Kill a Mockingbird, Jitterbug Perfume, The Things They Carried",tv:"Sopranos, Lost, Weeds, Desperate Housewives, Seinfeld, Friends, Sex and the City, Studio 60, Law and Order, CSI, Family Ties, Cheers"}},METRIC:{Cm:"{{value}}cm",Kg:"{{value}}kg",Foot:"{{foot}}' {{inch}}''",Pound:"{{value}} {{lbs}}",Less:"less than {{value}}",More:"more than {{value}}"},PROFILE_JS_TEXTS:{default_confirm_msg:"You have not saved your changes yet.\r\nClick OK to close this block, or click Cancel to continue editing and save your profile.",tpl_confirm_msg:'You have not saved your changes yet.\r\nClick OK to close this block, or click Cancel to continue editing and save "{section}".',edit_basic_form:"Your basic details",edit_personal_form:"Personal info",interest_tpl:"Remove",confirm_leave:'You have not saved your changes yet.\r\nClick "OK" to save your changes and continue or "Cancel" to proceed without saving.',confirm_unload:'You have not saved your changes yet.\r\nClick "Cancel" to return to the page and then click the "Save changes" button to save your work.',edit_languages_form:"Spoken languages",edit_favorites_form:"Interests",edit_education_form:"Education",edit_work_form:"Work",note:"Start typing and select your city from the list",loading:"Loading...",nothing_found_select:"Select from the list",nothing_found_text:"City not found"},PROFILE_FIELD_TITLES:{relationship:"Relationship status",sexuality:"Sexuality",height_metric:"Height, cm",height_english:"Height, ft' in\"",weight_metric:"Weight, kg",weight_english:"Weight, lbs",interested_in:"Here to",body:"Body type",hair:"Hair color",piercing:"Have piercings",tattoo:"Have tattoos",living:"Living",children:"Kids",smoking:"Smoking",language:"Spoken languages",name:"Name or nickname",birth_date:"Birthday",birth_day:"Day",birth_month:"Month",birth_year:"Year",location:"Location",gender:"Gender",drinking:"Drinking",education:"Education",languages:"Languages",work:"Work",appearance:"Appearance"},PROFILE_PART_TITLES:{personal:"Personal info",languages:"Spoken languages",favorites:"Interests",education:"Education",work:"Work",basic:"Basic info",about:"About me",location:"Location",interested_in:{M:"Interested in",F:"Interested in"}},EYES:{None:"no answer",Brown:"Brown",Grey:"Grey",Green:"Green",Blue:"Blue",Hazel:"Hazel",Other:"Other"},DRINKING:{No:"No",NoAtAll:"Anti-drinking",Yes:"Yes, please!",InCompany:"With company",None:"no answer"},GRAMMAR:{gender:{M:{MALE_UPPERCASE:"guy",FEMALE_UPPERCASE:""},F:{MALE_UPPERCASE:"",FEMALE_UPPERCASE:"girl"}},interested_in:{Friends:"meet new people",Partners:"find people to party",Photos:"share and explore",Chatting:"discuss the world",Dating_Both:"date men or women",Dating_Men:"date men",Dating_Women:"date women"},relationship:{Single:{MALE_UPPERCASE:"I'm single",FEMALE_UPPERCASE:"I'm single"},Taken:{MALE_UPPERCASE:"I'm taken",FEMALE_UPPERCASE:"I'm taken"},Open:{MALE_UPPERCASE:"I'm in an open relationship",FEMALE_UPPERCASE:"I'm in an open relationship"}},sexuality:{Straight:{MALE_UPPERCASE:"I'm straight",FEMALE_UPPERCASE:"I'm straight",MALE_LOWERCASE:"straight",FEMALE_LOWERCASE:"straight",MALE_TIW:"He's straight",FEMALE_TIW:"She's straight"},OpenMinded:{MALE_UPPERCASE:"I'm open-minded",FEMALE_UPPERCASE:"I'm open-minded",MALE_LOWERCASE:"open-minded",FEMALE_LOWERCASE:"open-minded",MALE_TIW:"He's open-minded",FEMALE_TIW:"She's open-minded"},Bi:{MALE_UPPERCASE:"I'm bisexual",FEMALE_UPPERCASE:"I'm bisexual",MALE_LOWERCASE:"bisexual",FEMALE_LOWERCASE:"bisexual",MALE_TIW:"He's bisexual",FEMALE_TIW:"She's bisexual"},Gay:{MALE_UPPERCASE:"I'm gay",FEMALE_UPPERCASE:"I'm a lesbian",MALE_LOWERCASE:"gay",FEMALE_LOWERCASE:"lesbian",MALE_TIW:"He's gay",FEMALE_TIW:"She's lesbian"}},body:{Slim:{MALE_UPPERCASE:"Slim body",FEMALE_UPPERCASE:"Slim body",MALE_LOWERCASE:"slim body",FEMALE_LOWERCASE:"slim body",MALE_TIW:"He has a slim body",FEMALE_TIW:"She has slim body"},Average:{MALE_UPPERCASE:"Average body",FEMALE_UPPERCASE:"Average body",MALE_LOWERCASE:"average body",FEMALE_LOWERCASE:"average body",MALE_TIW:"He has an average body",FEMALE_TIW:"She has an average body"},Athletic:{MALE_UPPERCASE:"Athletic body",FEMALE_UPPERCASE:"Athletic body",MALE_LOWERCASE:"athletic body",FEMALE_LOWERCASE:"athletic body",MALE_TIW:"He has an athletic body",FEMALE_TIW:"She has an athletic body"},Muscular:{MALE_UPPERCASE:"Muscular body",FEMALE_UPPERCASE:"Muscular body",MALE_LOWERCASE:"muscular body",FEMALE_LOWERCASE:"muscular body",MALE_TIW:"He has a muscular body",FEMALE_TIW:"She has a muscular body"},ExtraPounds:{MALE_UPPERCASE:"A few extra pounds",FEMALE_UPPERCASE:"A few extra pounds",MALE_LOWERCASE:"a few extra pounds",FEMALE_LOWERCASE:"a few extra pounds",MALE_TIW:"He has a few extra pounds",FEMALE_TIW:"She has a few extra pounds"},OverWeight:{MALE_UPPERCASE:"Big and bold",FEMALE_UPPERCASE:"Big and beautiful",MALE_LOWERCASE:"big and bold",FEMALE_LOWERCASE:"big and beautiful",MALE_TIW:"He's big and bold",FEMALE_TIW:"She's big and beautiful"}},hair:{Black:{MALE_UPPERCASE:"Black hair",FEMALE_UPPERCASE:"Black hair",MALE_LOWERCASE:"black hair",FEMALE_LOWERCASE:"black hair",MALE_TIW:"He has black hair",FEMALE_TIW:"She has black hair"},Brown:{MALE_UPPERCASE:"Brown hair",FEMALE_UPPERCASE:"Brown hair",MALE_LOWERCASE:"brown hair",FEMALE_LOWERCASE:"brown hair",MALE_TIW:"He has brown hair",FEMALE_TIW:"She has brown hair"},Red:{MALE_UPPERCASE:"Red hair",FEMALE_UPPERCASE:"Red hair",MALE_LOWERCASE:"red hair",FEMALE_LOWERCASE:"red hair",MALE_TIW:"He has red hair",FEMALE_TIW:"She has red hair"},Blond:{MALE_UPPERCASE:"Blond hair",FEMALE_UPPERCASE:"Blonde hair",MALE_LOWERCASE:"blond hair",FEMALE_LOWERCASE:"blonde hair",MALE_TIW:"He has blond hair",FEMALE_TIW:"She has blonde hair"},Grey:{MALE_UPPERCASE:"Grey hair",FEMALE_UPPERCASE:"Grey hair",MALE_LOWERCASE:"grey hair",FEMALE_LOWERCASE:"grey hair",MALE_TIW:"He has grey hair",FEMALE_TIW:"She has grey hair"},White:{MALE_UPPERCASE:"White hair",FEMALE_UPPERCASE:"White hair",MALE_LOWERCASE:"white hair",FEMALE_LOWERCASE:"white hair",MALE_TIW:"He has white hair",FEMALE_TIW:"She has white hair"},Shaved:{MALE_UPPERCASE:"Shaved hair",FEMALE_UPPERCASE:"Shaved hair",MALE_LOWERCASE:"shaved hair",FEMALE_LOWERCASE:"shaved hair",MALE_TIW:"He has shaved hair",FEMALE_TIW:"She has shaved hair"},Bald:{MALE_UPPERCASE:"Bald",FEMALE_UPPERCASE:"Bald",MALE_LOWERCASE:"bald",FEMALE_LOWERCASE:"bald",MALE_TIW:"He's bald",FEMALE_TIW:"She's bald"},Dyed:{MALE_UPPERCASE:"Dyed hair",FEMALE_UPPERCASE:"Dyed hair",MALE_LOWERCASE:"dyed hair",FEMALE_LOWERCASE:"dyed hair",MALE_TIW:"He has dyed hair",FEMALE_TIW:"She has dyed hair"}},eyes:{Black:{MALE_UPPERCASE:"Black eyes",FEMALE_UPPERCASE:"Black eyes",MALE_LOWERCASE:"black eyes",FEMALE_LOWERCASE:"black eyes",MALE_TIW:"He has black eyes",FEMALE_TIW:"She has black eyes"},Brown:{MALE_UPPERCASE:"Brown eyes",FEMALE_UPPERCASE:"Brown eyes",MALE_LOWERCASE:"brown eyes",FEMALE_LOWERCASE:"brown eyes",MALE_TIW:"He has brown eyes",FEMALE_TIW:"She has brown eyes"},Grey:{MALE_UPPERCASE:"Grey eyes",FEMALE_UPPERCASE:"Grey eyes",MALE_LOWERCASE:"grey eyes",FEMALE_LOWERCASE:"grey eyes",MALE_TIW:"He has grey eyes",FEMALE_TIW:"She has grey eyes"},Green:{MALE_UPPERCASE:"Green eyes",FEMALE_UPPERCASE:"Green eyes",MALE_LOWERCASE:"green eyes",FEMALE_LOWERCASE:"green eyes",MALE_TIW:"He has green eyes",FEMALE_TIW:"She has green eyes"},Blue:{MALE_UPPERCASE:"Blue eyes",FEMALE_UPPERCASE:"Blue eyes",MALE_LOWERCASE:"blue eyes",FEMALE_LOWERCASE:"blue eyes",MALE_TIW:"He has blue eyes",FEMALE_TIW:"She has blue eyes"},Hazel:{MALE_UPPERCASE:"Hazel eyes",FEMALE_UPPERCASE:"Hazel eyes",MALE_LOWERCASE:"hazel eyes",FEMALE_LOWERCASE:"hazel eyes",MALE_TIW:"He has hazel eyes",FEMALE_TIW:"She has hazel eyes"},Other:{MALE_UPPERCASE:"Other eyes",FEMALE_UPPERCASE:"Other eyes",MALE_LOWERCASE:"other eyes",FEMALE_LOWERCASE:"other eyes",MALE_TIW:"He has other eyes",FEMALE_TIW:"She has other eyes"}},tattoo:{Yes:"I have tattoos"},piercing:{Yes:{MALE_UPPERCASE:"I have piercings",FEMALE_UPPERCASE:"I have piercings",MALE_LOWERCASE:"piercings",FEMALE_LOWERCASE:"piercings"}},living:{Parents:{MALE:"With parents",FEMALE:"With parents"},Roommate:{MALE:"With housemate(s)",FEMALE:"With housemate(s)"},Dormitory:{MALE:"Student dormitory",FEMALE:"Student dormitory"},Partner:{MALE:{STRAIGHT:"With my partner",GAY:"With my partner"},FEMALE:{STRAIGHT:"With my partner",GAY:"With my partner"}},Alone:{MALE:"By myself",FEMALE:"By myself"}},children:{Never:"No, never",Someday:"Someday",HavePlenty:"Already have",HaveWant:"Already have",EmptyNest:"Grown up"},smoking:{No:{MALE:"Non-smoker",FEMALE:"Non-smoker"},DontLike:{MALE:"Anti-smoking",FEMALE:"Anti-smoking"},Social:{MALE:"Social smoker",FEMALE:"Social smoker"},Yes:{MALE:"Smoker",FEMALE:"Smoker"},Chain:{MALE:"Chain-smoker",FEMALE:"Chain-smoker"}},income:{Low:"I have a low income",Average:"I have a reasonable income",High:"I have a high income"},education:{School:"School only",Technical:"Trade/Technical",University:"College/University",Degree:"Advanced degree"},religion:{Not:{MALE:"I'm agnostic",FEMALE:"I'm agnostic"},Atheist:{MALE:"I'm an atheist",FEMALE:"I'm an atheist"},Buddhist:{MALE:"I'm a buddhist",FEMALE:"I'm a buddhist"},Christian:{MALE:"I'm a christian",FEMALE:"I'm a christian"},Hindu:{MALE:"I'm a hindu",FEMALE:"I'm a hindu"},Jewish:{MALE:"I'm jewish",FEMALE:"I'm jewish"},Muslim:{MALE:"I'm muslim",FEMALE:"I'm muslim"},Spiritual:{MALE:"I'm spiritual",FEMALE:"I'm spiritual"}},political:{Anarchist:"Politically I'm an anarchist",Communist:"Politically I'm a communist",Socialist:"Politically I'm a socialist",Liberal:"Politically I'm liberal",Moderate:"Politically I'm moderate",Conservative:"Politically I'm conservative",Right:"Politically I'm far right"},ufo:{Fake:"UFOs are fake",Real:"UFOs are real",Seen:"I have seen UFO's",Probed:"I have been abducted and probed by a UFO"},dietary:{Vegeterian:{MALE:"I'm a vegetarian",FEMALE:"I'm a vegetarian"},Vegan:{MALE:"I'm a vegan",FEMALE:"I'm a vegan"},Meat:{MALE:"I'm a meat eater",FEMALE:"I'm a meat eater"},Omnivore:{MALE:"I'm a conscientious omnivore",FEMALE:"I'm a conscientious omnivore"},Organic:{MALE:"I'm an organic eater",FEMALE:"I'm an organic eater"},All:{MALE:"I'm a junk food junkie",FEMALE:"I'm a junk food junkie"}},get_drunk:{Horny:{MALE:"When I get drunk, I get horny",FEMALE:"When I get drunk, I get horny"},Fight:{MALE:"When I get drunk, I look for a fight",FEMALE:"When I get drunk, I look for a fight"},Lethargic:{MALE:"When I get drunk, I get lethargic",FEMALE:"When I get drunk, I get lethargic"},Party:{MALE:"When I get drunk, I become the life of the party",FEMALE:"When I get drunk, I become the life of the party"},NotFunny:{MALE:"When I get drunk, I'm not as funny as I think I'm being",FEMALE:"When I get drunk, I'm not as funny as I think I'm being"},Vomiting:{MALE:"When I get drunk, I vomit",FEMALE:"When I get drunk, I vomit"},Hungry:{MALE:"When I get drunk, I get hungry",FEMALE:"When I get drunk, I get hungry"},Crying:{MALE:"When I get drunk, I cry",FEMALE:"When I get drunk, I cry"}},drinking:{No:"No",NoAtAll:"Not a fan of drinkers",Yes:"Yes, please!",InCompany:"Socially"},weight:{MALE:"His weight is {{value}}",FEMALE:"Her weight is {{value}}"},height:{MALE:"His height is {{value}}",FEMALE:"Her height is {{value}}"},_language_select_level:{None:"Select level",Low:"Low",Average:"Average",Fluent:"Fluent",Native:"Native"},_language_level:{None:"",Low:"low",Average:"average",Fluent:"fluent",Native:"native"},age:{MALE:"I am {{age}} {{years}} old",FEMALE:"I am {{age}} {{years}} old"}},TABS:{photos:"Photos",photos_and_videos:"Photos and Videos"},TITLES:{standart:"{{PAGE_partner_name}} &ndash; {{name}}, {{age}}, {{location}}",clientside:"{{name}}, {{num_years}} | {{PAGE_partner_name}}",404:"We can't seem to find this page",unavailable:"We're sorry, this page is temporarily unavailable"},PROMO:{Verification:"Congratulations, your mobile number is safely linked to your account.",AccountVerification:"Congratulations, your account is verified"},GRAMMAR_TEMPLATES:{WORK:{company_name_income_profession:"{{profession}}, {{company_name}}. {{income}}",company_name_profession:"{{profession}}, {{company_name}}",company_name_income:"{{company_name}}. {{income}}",income_profession:"{{profession}}. {{income}}"},APPEARANCE:{body_eyes:"{{body}} and {{eyes}}",body_hair:"{{body}} and {{hair}}",eyes_hair:"{{hair}} and {{eyes}}",body_eyes_hair:"{{body}}, {{hair}} and {{eyes}}",body_height:"{{height}}, {{body}}",eyes_height:"{{height}}, {{eyes}}",body_eyes_height:"{{height}}, {{body}} and {{eyes}}",hair_height:"{{height}}, {{hair}}",body_hair_height:"{{height}}, {{body}} and {{hair}}",eyes_hair_height:"{{height}}, {{hair}} and {{eyes}}",body_eyes_hair_height:"{{height}}, {{body}}, {{hair}} and {{eyes}}",body_sexuality:"{{sexuality}}, {{body}}",eyes_sexuality:"{{sexuality}}, {{eyes}}",body_eyes_sexuality:"{{sexuality}}, {{body}} and {{eyes}}",hair_sexuality:"{{sexuality}}, {{hair}}",body_hair_sexuality:"{{sexuality}}, {{body}} and {{hair}}",eyes_hair_sexuality:"{{sexuality}}, {{hair}} and {{eyes}}",body_eyes_hair_sexuality:"{{sexuality}}, {{body}}, {{hair}} and {{eyes}}",height_sexuality:"{{sexuality}}, {{height}}",body_height_sexuality:"{{sexuality}}, {{height}}, {{body}}",eyes_height_sexuality:"{{sexuality}}, {{height}}, {{eyes}}",body_eyes_height_sexuality:"{{sexuality}}, {{height}}, {{body}} and {{eyes}}",hair_height_sexuality:"{{sexuality}}, {{height}}, {{hair}}",body_hair_height_sexuality:"{{sexuality}}, {{height}}, {{body}} and {{hair}}",eyes_hair_height_sexuality:"{{sexuality}}, {{height}}, {{hair}} and {{eyes}}",body_eyes_hair_height_sexuality:"{{sexuality}}, {{height}}, {{body}}, {{hair}} and {{eyes}}",body_weight:"{{weight}}, {{body}}",eyes_weight:"{{weight}}, {{eyes}}",body_eyes_weight:"{{weight}}, {{body}} and {{eyes}}",hair_weight:"{{weight}}, {{hair}}",body_hair_weight:"{{weight}}, {{body}} and {{hair}}",eyes_hair_weight:"{{weight}}, {{hair}} and {{eyes}}",body_eyes_hair_weight:"{{weight}}, {{body}}, {{hair}} and {{eyes}}",height_weight:"{{height}}, {{weight}}",body_height_weight:"{{height}}, {{weight}}, {{body}}",eyes_height_weight:"{{height}}, {{weight}}, {{eyes}}",body_eyes_height_weight:"{{height}}, {{weight}}, {{body}} and {{eyes}}",hair_height_weight:"{{height}}, {{weight}}, {{hair}}",body_hair_height_weight:"{{height}}, {{weight}}, {{body}} and {{hair}}",eyes_hair_height_weight:"{{height}}, {{weight}}, {{hair}} and {{eyes}}",body_eyes_hair_height_weight:"{{height}}, {{weight}}, {{body}}, {{hair}} and {{eyes}}",sexuality_weight:"{{sexuality}}, {{weight}}",body_sexuality_weight:"{{sexuality}}, {{weight}}, {{body}}",eyes_sexuality_weight:"{{sexuality}}, {{weight}}, {{eyes}}",body_eyes_sexuality_weight:"{{sexuality}}, {{weight}}, {{body}} and {{eyes}}",hair_sexuality_weight:"{{sexuality}}, {{weight}}, {{hair}}",body_hair_sexuality_weight:"{{sexuality}}, {{weight}}, {{body}} and {{hair}}",eyes_hair_sexuality_weight:"{{sexuality}}, {{weight}}, {{hair}} and {{eyes}}",body_eyes_hair_sexuality_weight:"{{sexuality}}, {{weight}}, {{body}}, {{hair}} and {{eyes}}",height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}",body_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{body}}",eyes_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{eyes}}",body_eyes_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{body}} and {{eyes}}",hair_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{hair}}",body_hair_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{body}} and {{hair}}",eyes_hair_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{hair}} and {{eyes}}",body_eyes_hair_height_sexuality_weight:"{{sexuality}}, {{height}}, {{weight}}, {{body}}, {{hair}} and {{eyes}}"},EDUCATION_HISTORY:{education_graduation_year_institution:"{{education}}, {{institution}}, {{graduation_year}}",education_graduation_year:"{{education}}, {{graduation_year}}",graduation_year_institution:"{{institution}}, {{graduation_year}}",education_institution:"{{education}}, {{institution}}"}},EMPTY_VALUE_TEXT:{"default":"",advanced_search_overlay:"Add details for your profile"},DEFAULT_NAMES:{M:"John Doe",F:"Jane Doe"},ERRORS:{empty_field_name:"Enter a title"},HEADER:{HIS_INTERESTS:"HIS<br>INTERESTS",HER_INTERESTS:"HER<br>INTERESTS",HIS_FRIENDS:"HIS<br>FRIENDS",HER_FRIENDS:"HER<br>FRIENDS",YOUR_FRIENDS_MALE:"YOUR<br>FRIENDS",YOUR_FRIENDS_FEMALE:"YOUR<br>FRIENDS",YOUR_INTERESTS_MALE:"YOUR<br>INTERESTS",YOUR_INTERESTS_FEMALE:"YOUR<br>INTERESTS"},HON_HEADER:{HIS_INTERESTS:"his<br>interests",HER_INTERESTS:"her<br>interests",HIS_FRIENDS:"his<br>friends",HER_FRIENDS:"her<br>friends",YOUR_FRIENDS_MALE:"your<br>friends",YOUR_FRIENDS_FEMALE:"your<br>friends",YOUR_INTERESTS_MALE:"your<br>interests",YOUR_INTERESTS_FEMALE:"your<br>interests"},HON_CATEGORY:{INTERESTS:"{{num}} {{interests}}",NO_INTERESTS:"Interests"},OTHERS_PROFILE_IS_VERIFIED:{MALE:"Profile is verified",FEMALE:"Profile is verified"},MY_PROFILE_IS_VERIFIED:{MALE:"Profile is verified",FEMALE:"Profile is verified"},HON_PROFILE_HOTTEST_FRIEND_CHOICE:{MALE:"Guys",FEMALE:"Girls",ANY:"All"},POPULARITY_LEVELS:{VERY_LOW:"Very low",LOW:"Low",AVERAGE:"Average",HIGH:"High",VERY_HIGH:"Very high"},EDUCATION_JOB_HISTORY:{not_selected:"Not selected",job:"{{company}}, {{profession}}",education:"{{education}}, {{graduation_year}}",do_not_show:"Don't show",school:"School {{school}}"}}}),B.HoN_v3.Profile=B.HoN_v3.Profile||{},B.HoN_v3.Profile.BlockView||(B.HoN_v3.Profile.BlockView=$class($u.Observable,{_tpl:"",_container:null,destroy:function(){this._container=this._data=null},render:function(){var e=this._container||document.createElement("div");return $el.dom.html(e,this.getResult()),this.fire("rendered"),e},get_result:function(){return null===this._data?"":$u.dust.render(this._tpl,this._data)},getResult:function(){return this.get_result.apply(this,arguments)},set_container:function(e){return this._container=e,this},setContainer:function(){return this.set_container.apply(this,arguments)},_get_profile_option:function(e,t){var i=null,o=[];e.own_profile&&e.edit_form&&(o=e.edit_form.getOptions()||[]),o=e.profile.getProfileFields?o.concat(e.profile.getProfileFields()||[]):o.concat(e.profile.getProfileField()||[]);for(var s=0;s<o.length;s++)(o[s].getId()==t||o[s].getType()==t)&&(i=o[s]);return i},set_data:function(){return this},setData:function(){return this.setData.apply(this,arguments)}})),B.HoN_v3.Profile.FriendsView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.friends",_gender:0,_page:0,_gender_control:null,__connections:null,skip_render:!1,constructor:function(){$super(this,arguments),$e.on(".js-friends-more__client",this._expand,this)},destroy:function(){$e.un(".js-friends-more__client",this._expand,this),this._gender_control&&(this._gender_control.un("change",this._set_filter,this),this._gender_control=null),$super(this,arguments)},_expand:function(){this._page++,this.fire("filter")},render:function(){if(!this.skip_render){this._gender_control&&this._gender_control.un("change",this._set_filter,this);var e=$super(this,arguments),t=$el.down(e,".js-hottest-friends-list-gender");return t&&(this._gender_control=B.Controls.Activator.get_control(t,"select"),this._gender_control.on("change",this._set_filter,this)),e}},_set_filter:function(e){this._page=0,this._gender=+e,this.fire("filter")},_is_filter_needed:function(e){var t=!1,i=!1;return e.map(function(e){switch(+e.gender){case 1:t=!0;break;case 2:i=!0}}),t&&i},set_data:function(e){this._data=null;var t=$gpb.namespace("badoo.bma"),i=e.profile.getFriendsConnections();if(i&&i.getStatus()==t.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_SEARCHING)return this.skip_render=!0,this;this.skip_render=!1;var o=this._get_social_friends(e.profile.getFriendsConnections()),s=this._get_hottest_friends(e.profile.getHottestFriends()||[]),n=s.length?s:o,r=n.length,a=$l.get("hon/profile","HON_PROFILE_HOTTEST_FRIEND_CHOICE"),l=0,_=this._is_filter_needed(n),i=this.__connections,p=5*(this._page+1),c=p>=r,u=this._gender,d=[a.ANY,a.MALE,a.FEMALE];return r?(c||(n=n.slice(0,p)),this._data={OWN_FRIENDS_TITLE:{num_friends_connections:r,friends:$l.get_num_dependent("friend",r)},FRIENDS_FILTER:(this._gender||_)&&{gender:this._gender,HTMLBLOCK_label:d[u],OPTIONS:d.map(function(e,t){return{_SELECTED:t==u,gender:t,option:d[t]}})},CONNECTIONS:{CONNECTION:n.map(function(t,o){if(!c&&o==p-1&&r>p)a={MORE:{_GET_MORE_FRIENDS:!0,_CLIENT:!0},_FRIEND_CONNECTED:{placeholder_id:l++}};else{t.connection_id&&(i[t.connection_id].placeholder_id="placeholder_"+l);var s=t.id,n=!s||"-"===s[0],a={_FRIEND:{user_pic:t.user_pic,name:t.name,_CUSTOM:t.icon&&{icon:t.icon},_LINK_WEBAPP:!n&&{profile_url:"/0"+s+"?"+(e.own_profile?"from_my_profile=1":"from_other_profile=1"),profile_state:"big-photo-view"}},_FRIEND_CONNECTED:!((o+1)%5)&&{placeholder_id:l++}}}return a})}},this):(this._data=null,this)},_get_social_friends:function(e){if(!e)return[];var t=(e.getConnections()||[]).concat(e.getMoreConnections()||[]),i=[],o=this.__connections={},s=this._gender;return t.map(function(e){var t=e.getFriends(),n=e.getFirstConnectionProviderUrl(),r=t[t.length<=2?0:1];s&&r.getGender()!==s||(i.push({user_pic:r.getPhotoUrl()||$r.images_root+"/v2/-/-/i/hotornot_v2/120_nophoto.1.png",name:r.getName(),id:r.getUserId(),gender:r.getGender(),connection_id:r.getPhonebookId(),icon:n&&n[0]||!1}),o[r.getPhonebookId()]={placeholder_id:"placeholder_0",users:t.map(function(e){return{name:e.getName(),photo_url:e.getPhotoUrl()||$r.images_root+"/v2/-/-/i/hotornot_v2/120_nophoto.1.png"}})})}),i},_get_hottest_friends:function(e){if(!e)return[];var t=e.map(function(e){return{user_pic:e.getPreviewImageId()||$r.images_root+"/v2/-/-/i/hotornot_v2/120_nophoto.1.png",name:e.getName(),id:e.getUid(),gender:e.getGender()}}),i=this._gender;return this._gender&&(t=t.filter(function(e){return e.gender==i})),t},get_profile_friends:function(){return this.__connections}}),B.HoN_v3.Profile.UnitedFriends||(B.HoN_v3.Profile.UnitedFriends={},$gpb.exists("badoo.bma.ServerStartExternalProviderImport","message")||($gpb.exists("badoo.bma.StartContactImport","message")||($gpb.exists("badoo.bma.FriendsImportFlow","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.FriendsImportFlow=new $gpb.Enum("badoo.bma.FriendsImportFlow");t._values=[1,2,3],t.FRIENDS_IMPORT_FLOW_FRIENDS=1,t.FRIENDS_IMPORT_FLOW_SOCIAL=2,t.FRIENDS_IMPORT_FLOW_BULK_INVITE=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.StartContactImport=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.StartContactImport",t.prototype._descriptor={fields:{person_id:{type:9,number:3,label:1},contact:{type:11,type_name:"badoo.bma.PhonebookContact",number:1,label:3},flow:{type:14,type_name:"badoo.bma.FriendsImportFlow",number:2,label:1}}}}()),$gpb.exists("badoo.bma.ExternalProviderSecurityCredentials","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ExternalProviderSecurityCredentials=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ExternalProviderSecurityCredentials",t.prototype._descriptor={fields:{username:{type:9,number:3,label:1},provider_id:{type:9,number:1,label:1},secret:{type:9,number:8,label:1},natively_authenticated:{type:8,number:6,label:1},redirect_uri:{type:9,number:7,label:1},oauth_token:{type:9,number:5,label:1},oauth_code:{type:9,number:9,label:1},context:{type:14,type_name:"badoo.bma.ExternalProviderContext",number:2,label:1},password:{type:9,number:4,label:1}}}}(),$gpb.exists("badoo.bma.StartPhotoImport","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.StartPhotoImport=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.StartPhotoImport",t.prototype._descriptor={fields:{album_type:{type:14,type_name:"badoo.bma.AlbumType",number:1,label:1}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerStartExternalProviderImport=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerStartExternalProviderImport",t.prototype._descriptor={fields:{allow_cache:{type:8,number:5,label:1},auth_credentials:{type:11,type_name:"badoo.bma.ExternalProviderSecurityCredentials",number:2,label:1},start_contact_import_data:{type:11,type_name:"badoo.bma.StartContactImport",number:3,label:1},start_photo_import_data:{type:11,type_name:"badoo.bma.StartPhotoImport",number:4,label:1},limit:{type:5,number:6,label:1},context:{type:14,type_name:"badoo.bma.ClientSource",number:1,label:1}}}}()),$gpb.exists("badoo.bma.ServerCheckExternalProviderImportProgress","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerCheckExternalProviderImportProgress=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerCheckExternalProviderImportProgress",t.prototype._descriptor={fields:{import_id:{type:9,number:1,label:1}}}}(),B.HoN_v3.Profile.UnitedFriends.Model=$class(B.HoN_v3.Models.BaseModel,{userRequest:null,importStartRequest:null,importCheckRequest:null,userId:null,CLIENT_SOURCE:$p.ClientSource.CLIENT_SOURCE_UNITED_FRIENDS,PROJECTION_FIELDS_FILTER:[$p.UserField.USER_FIELD_UNITED_FRIENDS],constructor:function(){$super(this,arguments),this.fetchTimer=new $t(this.request,this,2500)},destroy:function(){this.filter=null,this.userId=null,this.abortRequest(),this.fetchTimer.clear(),this.fetchTimer=null,$super(this,arguments)},abortRequest:function(){this.userRequest&&(this.userRequest.destroy(),this.userRequest=null),this.importStartRequest&&(this.importStartRequest.destroy(),this.importStartRequest=null),this.importCheckRequest&&(this.importCheckRequest.destroy(),this.importCheckRequest=null)},fetch:function(){$super(this,arguments),this.request()},request:function(){var e=this.unitedFriends.getState();!this.getImportId()||e!==$p.UnitedFriendsState.UNITED_FRIENDS_STATE_NOT_CONNECTED&&e!==$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING?this.getConnected()&&e===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_NOT_CONNECTED?this.fetchStartImport():this.fetchUser():this.fetchCheckImport()},fetchStartImport:function(){var e=this.unitedFriends.getConnectionProvider().getId(),t=(new $p.ExternalProviderSecurityCredentials).setProviderId(e),i=(new $p.ServerStartExternalProviderImport).setAuthCredentials(t).setContext($p.ClientSource.CLIENT_SOURCE_UNITED_FRIENDS);this.importStartRequest=new $gpb.Rpc($p.MessageType.SERVER_START_EXTERNAL_PROVIDER_IMPORT,i).on($p.MessageType.CLIENT_EXTERNAL_PROVIDER_IMPORT_PROGRESS,this.importReady,this).request()},fetchCheckImport:function(){var e=(new $p.ServerCheckExternalProviderImportProgress).setImportId(this.getImportId());this.importCheckRequest=new $gpb.Rpc($p.MessageType.SERVER_CHECK_EXTERNAL_PROVIDER_IMPORT_PROGRESS,e).on($p.MessageType.CLIENT_EXTERNAL_PROVIDER_IMPORT_PROGRESS,this.importReady,this).request()
},fetchUser:function(){var e=(new $p.UserFieldFilter).setProjection(this.PROJECTION_FIELDS_FILTER).setUnitedFriendsFilter(this.getFilter()),t=(new $p.ServerGetUser).setUserId(this.getUserId()).setClientSource(this.CLIENT_SOURCE).setUserFieldFilter(e);this.userRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_USER,t).on($p.MessageType.CLIENT_USER,this.userReady,this).request()},importReady:function(e,t){if(e)return this.fetchError(),void 0;if(t.getComplete())this.setImportId(null),this.fetchUser();else{this.setImportId(t.getImportId());var i=this.getUnitedFriends().setState($p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING);this.setUnitedFriends(i),this.fire("updated")}},userReady:function(e,t){return e?(this.fetchError(),void 0):(this.setUnitedFriends(t.getUnitedFriends()),this.getUnitedFriends().getState()!==$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING?(this.fetchTimer.clear(),this.fetchReady()):this.fire("updated"),void 0)},setUnitedFriends:function(e){return this.unitedFriends=e,this.getUnitedFriends().getState()===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_NOT_CONNECTED&&this.setConnectedInThisTab(!0),this.getUnitedFriends().getState()===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING&&this.fetchTimer.set(),this},getUnitedFriends:function(){return this.unitedFriends},setConnectedInThisTab:function(e){return this.connectedInThisTab=e,this},getConnectedInThisTab:function(){return this.connectedInThisTab},setUserId:function(e){return this.userId=e,this},getUserId:function(){return this.userId},setImportId:function(e){return this.importId=e,this},getImportId:function(){return this.importId},setConnected:function(e){return this.connected=e,this},getConnected:function(){return this.connected},setFilter:function(e,t){var i,o,s,n=this.getUnitedFriends().getState()===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING||this.getUnitedFriends().getState()===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_NOT_CONNECTED,r=this.getUnitedFriends().getSections();return n?(i=5,o=5,s=this.getHottestCount(e,t,this.getUnitedFriends().getSections())):(o=this.getUnregistredCount(e,t,r),o>t?t=0:t-=o,i=this.getRegistredCount(e,t,r),i>e?e=0:e-=i,s=this.getHottestCount(e,t,r)),this.filter=[(new $p.UnitedFriendsFilter).setCount(o).setSectionType($p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_UNREGISTERED),(new $p.UnitedFriendsFilter).setCount(i).setSectionType($p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_REGISTERED),(new $p.UnitedFriendsFilter).setCount(s).setSectionType($p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_HOTTEST)],this},getFilter:function(){return this.filter},getSection:function(e,t){return e&&e.find(function(e){return e.getType()===t})},getUnregistredCount:function(e,t,i){var o=this.getSection(i,$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_UNREGISTERED);if(!o)return 0;var s,n=o&&o.getTotalCount();return s=t?t>n?n:t:5},getRegistredCount:function(e,t,i){var o=this.getSection(i,$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_REGISTERED);if(!o)return 0;var s,n=o&&o.getTotalCount();return s=e>n?n:e},getHottestCount:function(e,t,i){var o=this.getSection(i,$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_HOTTEST);if(!o)return 0;var s,n=o&&o.getTotalCount();return s=e>n?n:e,t&&(s+=t),s}}),function(){function e(e,o){return e.section(o.get(["_STUB"],!1),o,{block:t},{}).write(' <div id="js-profile-hottest-friends" class="section section--profile js-wrap"> <h2>Friends</h2> ').section(o.get(["FRIENDS_FILTER"],!1),o,{block:i},{}).write(' <div class="profile-friends js-friends-wrap"> ').section(o.get(["CONNECTIONS"],!1),o,{block:n},{}).write(" ").section(o.get(["NOT_CONNECTED"],!1),o,{block:$},{}).write(" ").section(o.get(["LOADING"],!1),o,{block:D},{}).write(" ").section(o.get(["EXPIRED"],!1),o,{block:H},{}).write(" ").section(o.get(["NO_OWN_FRIENDS"],!1),o,{block:Y},{}).write(" ").section(o.get(["NO_OTHER_FRIENDS"],!1),o,{block:G},{}).write(" </div> </div>")}function t(e){return e}function i(e,t){return e.write(' <div class="select select--sm select-edit js-hottest-friends-list-gender" data-control-type="select"> <input type="hidden" name="gender" value="').reference("gender",t).write('" class="select-value"> <div tabindex="0" class="select-label">').reference("HTMLBLOCK_label",t,["s"]).write('</div> <div class="select-options"> <ul class="options"> ').section(t.get(["OPTIONS"],!1),t,{block:o},{}).write(" </ul> </div> </div> ")}function o(e,t){return e.write(' <li class="option').section(t.get(["_SELECTED"],!1),t,{block:s},{}).write('" data-value="').reference("gender",t).write('"> ').reference("option",t).write(" </li> ")}function s(e){return e.write(" selected")}function n(e,t){return e.section(t.get(["CONNECTION"],!1),t,{block:r},{})}function r(e,t){return e.write("<!-- -->").section(t.get(["_FRIEND"],!1),t,{block:a},{}).write("<!-- -->").section(t.get(["MORE"],!1),t,{block:N},{}).write("<!-- -->")}function a(e,t){return e.write('<div class="brick-wrap').section(t.get(["_LOADING"],!1),t,{block:l},{}).section(t.get(["_DOUBLE"],!1),t,{block:_},{}).write('"> ').section(t.get(["PHOTO"],!1),t,{block:p},{}).write(" ").section(t.get(["NAME"],!1),t,{block:P},{}).write(" </div>")}function l(e){return e.write(" loading")}function _(e){return e.write(" brick-wrap--double")}function p(e,t){return e.write(' <div class="brick brick--xlg').section(t.get(["_HAS_LINK"],!1),t,{block:c},{}).section(t.get(["_FRIEND_NOT_ON_BADOO"],!1),t,{block:u},{}).section(t.get(["_HIDDEN"],!1),t,{block:d},{}).write('" ').section(t.get(["_DATA_HIDDEN"],!1),t,{block:h},{}).write('> <div class="brick-img"><img src="').reference("user_pic",t).write('" width="90" height="90" alt=""></div> <div class="loader loader--white"><div class="loader_"></div></div> ').section(t.get(["_CUSTOM"],!1),t,{block:b},{}).write(" ").section(t.get(["_UNKNOW"],!1),t,{block:E},{}).write(" ").section(t.get(["NOT_CONNECTED"],!1),t,{block:g},{}).write(" ").section(t.get(["UNAVAILABLE"],!1),t,{block:m},{}).write(" ").section(t.get(["COUNTER"],!1),t,{block:f},{}).write(" ").section(t.get(["_FACEBOOK"],!1),t,{block:T},{}).write(" ").section(t.get(["_GOOGLE"],!1),t,{block:v},{}).write(" ").section(t.get(["_VK"],!1),t,{block:O},{}).write(" ").section(t.get(["_LINKEDIN"],!1),t,{block:y},{}).write(" ").section(t.get(["_ODNOKLASSNIKI"],!1),t,{block:I},{}).write(" ").section(t.get(["_LINK_WEBAPP"],!1),t,{block:w},{}).write(" ").section(t.get(["_LINK_UNREGISTRED_MORE"],!1),t,{block:R},{}).write(" ").section(t.get(["_LINK_OVL"],!1),t,{block:S},{}).write(" ").section(t.get(["_LINK_FRIEND_CONNECTED"],!1),t,{block:A},{}).write(" </div> ")}function c(e){return e.write(" brick--hover")}function u(e){return e.write(" brick--covered")}function d(e){return e.write(" hidden js-friend-hidden")}function h(e){return e.write(' data-hidden="hidden"')}function b(e,t){return e.write('<mark class="brick brick--xsm"><div class="brick-img"><img src="').reference("icon",t).write('"></div></mark>')}function E(e){return e.write('<mark class="brick brick--xsm brick--grey"><i class="ico ico--white ico--question-sm"></i></mark>')}function g(e){return e.write('<mark class="brick brick--xsm brick--black"><i class="ico ico--white ico--block-sm"></i></mark>')}function m(e){return e.write('<mark class="brick brick--xsm brick--yellow"><i class="ico ico--attention"></i></mark>')}function f(e,t){return e.write('<mark class="brick brick--xsm brick--blue">').reference("num",t).write("</mark>")}function T(e){return e.write('<mark class="brick brick--xsm brick--facebook"><i class="ico ico--white ico--facebook-xsm"></i></mark>')}function v(e){return e.write('<mark class="brick brick--xsm brick--google"><i class="ico ico--white ico--google-sm"></i></mark>')}function O(e){return e.write('<mark class="brick brick--xsm brick--vk"><i class="ico ico--white ico--vk-sm"></i></mark>')}function y(e){return e.write('<mark class="brick brick--xsm brick--linkedin"><i class="ico ico--white ico--linkedin-sm"></i></mark>')}function I(e){return e.write('<mark class="brick brick--xsm brick--odnoklassniki"><i class="ico ico--white ico--odnoklassniki-sm"></i></mark>')}function w(e,t){return e.write('<a href="').reference("profile_url",t).write('" class="b-link app" rel="').reference("profile_state",t).write('"></a>')}function R(e){return e.write('<span class="b-link js-unregistred-more"></span>')}function S(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("ovl_url",t).write('"></span>')}function A(e,t){return e.write('<span class="b-link js-friends-cons" data-connection-id="').reference("connection_id",t).write('"></span>')}function P(e,t){return e.write('<div class="brick-txt"><span class="brick-txt_">').reference("name",t).write("</span></div>")}function N(e,t){return e.write('<div class="brick-wrap').section(t.get(["_LOADING"],!1),t,{block:L},{}).write('"> <div class="brick brick--xlg brick--grey"> <i class="ico ico--lg ico--white ico--etc-lg"></i> <div class="loader loader--white"><div class="loader_"></div></div> </div> <div class="grey brick-txt">See more</div> ').section(t.get(["_GET_MORE_FRIENDS"],!1),t,{block:C},{}).write(" </div>")}function L(e){return e.write(" loading")}function C(e){return e.write('<span class="b-link profile-friends__more-link js-friends-more"></span>')}function $(e,t){return e.write(' <span class="inline profile-friend__txt"> ').section(t.get(["OWN_PROFILE"],!1),t,{block:M},{}).write(" ").section(t.get(["OTHER_PROFILE"],!1),t,{block:k},{}).write(' <div class="btn btn--sm btn--white btn--social').section(t.get(["_DISABLED"],!1),t,{block:U},{}).write('"> <i class="ico ico--color ico--facebook-sm"> <span class="b-link js-profile-connect-facebook"></span> </i> <span class="btn-txt">Find friends!</span> </div> </span> ')}function M(e,t){return e.write(' <div class="profile-friend__txt-descr">Connect your Facebook to find your friends on ').reference("PAGE_partner_name",t).write(".</div> ")}function k(e){return e.write(' <div class="profile-friend__txt-descr">Connect your Facebook to find common friends.</div> ')}function U(e){return e.write(" disabled")}function D(e,t){return e.write(' <span class="inline profile-friend__txt"> ').section(t.get(["OWN_PROFILE"],!1),t,{block:F},{}).write(" ").section(t.get(["OTHER_PROFILE"],!1),t,{block:B},{}).write(' <div class="btn btn--sm btn--white btn--social disabled"> <i class="ico ico--color ico--facebook-sm"> <span class="b-link js-profile-connect-facebook"></span> </i> <span class="btn-txt">Find friends!</span> </div> </span> ')}function F(e){return e.write(' <div class="profile-friend__txt-descr">Looking for friends...</div> ')}function B(e){return e.write(' <div class="profile-friend__txt-descr">Looking for common friends...</div> ')}function H(e,t){return e.write(' <span class="inline profile-friend__txt"> ').section(t.get(["OWN_PROFILE"],!1),t,{block:x},{}).write(" ").section(t.get(["OTHER_PROFILE"],!1),t,{block:V},{}).write(' <div class="btn btn--sm btn--white btn--social"> <i class="ico ico--color ico--facebook-sm"> <span class="b-link js-profile-connect-facebook"></span> </i> <span class="btn-txt">Reconnect Facebook</span> </div> </span> ')}function x(e){return e.write(' <div class="profile-friend__txt-descr">There was a problem connecting to Facebook. Please try again.</div> ')}function V(e){return e.write(' <div class="profile-friend__txt-descr">Please reconnect Facebook to update your friends list.</div> ')}function Y(e){return e.write(' <span class="inline profile-friend__txt">We haven\'t found any friends yet.</span> ')}function G(e){return e.write(' <span class="inline profile-friend__txt">You don\'t have any common friends.</span> ')}return $u.dust.register("profile/block.friends2",e),e.s={_STUB:t,FRIENDS_FILTER:i,CONNECTIONS:n,NOT_CONNECTED:$,LOADING:D,EXPIRED:H,NO_OWN_FRIENDS:Y,NO_OTHER_FRIENDS:G},i.s={OPTIONS:o},o.s={_SELECTED:s},n.s={CONNECTION:r},r.s={_FRIEND:a,MORE:N},a.s={_LOADING:l,_DOUBLE:_,PHOTO:p,NAME:P},p.s={_HAS_LINK:c,_FRIEND_NOT_ON_BADOO:u,_HIDDEN:d,_DATA_HIDDEN:h,_CUSTOM:b,_UNKNOW:E,NOT_CONNECTED:g,UNAVAILABLE:m,COUNTER:f,_FACEBOOK:T,_GOOGLE:v,_VK:O,_LINKEDIN:y,_ODNOKLASSNIKI:I,_LINK_WEBAPP:w,_LINK_UNREGISTRED_MORE:R,_LINK_OVL:S,_LINK_FRIEND_CONNECTED:A},N.s={_LOADING:L,_GET_MORE_FRIENDS:C},$.s={OWN_PROFILE:M,OTHER_PROFILE:k,_DISABLED:U},D.s={OWN_PROFILE:F,OTHER_PROFILE:B},H.s={OWN_PROFILE:x,OTHER_PROFILE:V},e}(),B.HoN_v3.Profile.UnitedFriends.View=$class(B.DustView,{template:"profile/block.friends2",PIXELATED_PHOTOS:[$r.images_root+"/v2/-/-/i/hotornot_v2/profile/pixelated/1.1.png",$r.images_root+"/v2/-/-/i/hotornot_v2/profile/pixelated/2.1.png",$r.images_root+"/v2/-/-/i/hotornot_v2/profile/pixelated/3.1.png",$r.images_root+"/v2/-/-/i/hotornot_v2/profile/pixelated/4.1.png",$r.images_root+"/v2/-/-/i/hotornot_v2/profile/pixelated/5.1.png"],NO_PHOTO_IMG:$r.images_root+"/v2/-/-/i/hotornot_v2/180_nophoto.1.png",URL_TPL:"/profile/0{userId}",INVITE_OVL_TYPE:"hon-import-overlay",INVITE_OVL_URL:"/import/hon.phtml?imp=12&rfr=3",STUB_CONNECTIONS_OWN_PROFILE_COUNT:2,STUB_CONNECTIONS_OTHER_PROFILE_READY_COUNT:1,setConnections:function(e,t,i,o,s){var n=[],r=e.getSections(),a=e.getTotalCount(),l=i+o,_=this.getOnBadooCount(r),p=this.getNotOnBadooCount(r),c=this.getHottestCount(r),u=this.getOnBadoo(r),d=this.getHottest(r),h=this.getNotOnBadoo(r),b=u.length>0&&p>3||h.length<p,E=a>0,g=a>c,m=e.getState(),f=m===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING,T=0;b&&(h=h.slice(0,o),p>o&&h.splice(-1,1,this.getNotOnBadooCollapsed(r,h)));var v=o<h.length?o:h.length;switch(m){case $p.UnitedFriendsState.UNITED_FRIENDS_STATE_NOT_CONNECTED:t?(n=this.getStubConnections(this.STUB_CONNECTIONS_OWN_PROFILE_COUNT),this.setOwnFriendsUnknown()):a>0?(T=this.STUB_CONNECTIONS_OWN_PROFILE_COUNT,n=this.getStubConnections(this.STUB_CONNECTIONS_OWN_PROFILE_COUNT),n=n.concat(d)):n=this.getStubConnections(this.PIXELATED_PHOTOS.length),this.setCanConnect(t);break;case $p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING:E?(T=this.STUB_CONNECTIONS_OWN_PROFILE_COUNT,n=this.getStubConnections(this.STUB_CONNECTIONS_OWN_PROFILE_COUNT,!0),n=n.concat(d)):t?(n=this.getStubConnections(this.STUB_CONNECTIONS_OWN_PROFILE_COUNT,!0),this.setOwnFriendsUnknown()):n=this.getStubConnections(this.PIXELATED_PHOTOS.length,!0),this.setLoading(t);break;case $p.UnitedFriendsState.UNITED_FRIENDS_STATE_CONNECTION_EXPIRED:this.setExpired(t);case $p.UnitedFriendsState.UNITED_FRIENDS_STATE_READY:E&&g?(n=n.concat(u,h,d),this.setOwnFriends(a)):t?s&&(n=this.getNoFriendsConnections(this.STUB_CONNECTIONS_OWN_PROFILE_COUNT),this.setNoOwnFriends(),this.setOwnFriendsUnknown()):(s&&(T=this.STUB_CONNECTIONS_OTHER_PROFILE_READY_COUNT,n=this.getNoFriendsConnections(this.STUB_CONNECTIONS_OTHER_PROFILE_READY_COUNT),this.setNoOtherFriends()),n=n.concat(d))}return n=n.slice(0,l),_+c>l-v-T&&n.splice(-1,1,this.getMoreButton(f)),this.set("CONNECTIONS",n)},setOwnFriendsUnknown:function(){this.set("OWN_FRIENDS_TITLE_UNKNOW",!0)},setOwnFriends:function(e){this.set({OWN_FRIENDS_TITLE:{num_friends_connections:e,common_friend:$l.get_num_dependent("common_friend",e),PAGE_partner_name:$l.get("partner","title")}})},setCanConnect:function(e){return this.set("NOT_CONNECTED",{PAGE_partner_name:$l.get("partner","title"),OWN_PROFILE:e,OTHER_PROFILE:!e})},setLoading:function(e){return this.set({LOADING:{OWN_PROFILE:e,OTHER_PROFILE:!e},_LOADING:!0})},setExpired:function(e){return this.set({EXPIRED:{OWN_PROFILE:e,OTHER_PROFILE:!e}})},setNoOwnFriends:function(){return this.set("NO_OWN_FRIENDS",!0)},setNoOtherFriends:function(){return this.set("NO_OTHER_FRIENDS",!0)},getUnregistredConnection:function(e){var t={userPic:e.getPreviewPhotoUrl(),notOnBadoo:!0,unknown:!0,facebook:!0,ovl:{type:this.INVITE_OVL_TYPE,url:this.INVITE_OVL_URL}};return this.getConnection(t)},getRegistredConnection:function(e){var t={userPic:e.getPreviewPhotoUrl(),profileUrl:$u.tpl(this.URL_TPL,{userId:e.getUserId()}),facebook:!0};return this.getConnection(t)},getHottestConnection:function(e){var t={userPic:e.getPreviewPhotoUrl(),profileUrl:$u.tpl(this.URL_TPL,{userId:e.getUserId()})};return this.getConnection(t)},getMoreButton:function(e){return{CONNECTION:{MORE:{_GET_MORE_FRIENDS:!0,_LOADING:e}}}},getConnection:function(e,t){return Array.isArray(e)||(e=[e]),{CONNECTION:{_FRIEND:{_LOADING:Boolean(t),_DOUBLE:2===e.length,PHOTO:e.map(function(e){return{user_pic:e.userPic,_LINK_WEBAPP:Boolean(e.profileUrl)&&{profile_url:e.profileUrl},_FRIEND_NOT_ON_BADOO:Boolean(e.notOnBadoo),_FACEBOOK:Boolean(e.facebook),_UNKNOW:Boolean(e.unknown),UNAVAILABLE:Boolean(e.unavailable),NOT_CONNECTED:Boolean(e.notConnected),_LINK_UNREGISTRED_MORE:Boolean(e.unregistredMore),COUNTER:Boolean(e.counter)&&{num:e.counter},_LINK_OVL:Boolean(e.ovl)&&{ovl_type:e.ovl.type,ovl_url:e.ovl.url}}},this)}}}},getStubConnections:function(e,t){for(var i=[],o=0;e>o;o++)i.push(this.getConnection({userPic:this.PIXELATED_PHOTOS[o],facebook:!0},t));return i},getExpiredConnections:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getConnection({userPic:this.PIXELATED_PHOTOS[i],unavailable:!0}));return t},getNoFriendsConnections:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getConnection({userPic:this.NO_PHOTO_IMG,notConnected:!0}));return t},getHottest:function(e){return this.getSection(e,this.isHottest,this.getHottestConnection)},getOnBadoo:function(e){return this.getSection(e,this.isOnBadoo,this.getRegistredConnection)},getOnBadooCount:function(e){return this.getSectionCount(e,this.isOnBadoo)},getNotOnBadooCount:function(e){return this.getSectionCount(e,this.isNotOnBadoo)},getHottestCount:function(e){return this.getSectionCount(e,this.isHottest)},getSectionCount:function(e,t){var i=e&&e.find(t);return i?i.getTotalCount():0},getNotOnBadoo:function(e){return this.getSection(e,this.isNotOnBadoo,this.getUnregistredConnection)},getNotOnBadooCollapsed:function(e,t){var i=e&&e.find(this.isNotOnBadoo),o=i.getTotalCount()-t.length;return i&&this.getCollapsedConnection(i,o)},getCollapsedConnection:function(e,t){var i=e.getFriends(),o=i.length,s=e.getFriends()[o-2],n=e.getFriends()[o-1],r=[{userPic:s.getPreviewPhotoUrl(),notOnBadoo:!0},{userPic:n.getPreviewPhotoUrl(),notOnBadoo:!0,unregistredMore:!0,counter:t}];return this.getConnection(r)},getSection:function(e,t,i){var o=e&&e.find(t),s=o&&o.getFriends()||[];return s.map(i||this.getConnection,this)},isHottest:function(e){return e.getType()===$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_HOTTEST},isOnBadoo:function(e){return e.getType()===$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_REGISTERED},isNotOnBadoo:function(e){return e.getType()===$p.UnitedFriendsSectionType.UNITED_FRIENDS_SECTION_UNREGISTERED}}),B.HoN_v3.Profile.UnitedFriends.ViewController=$class(B.HoN_v3.BaseViewController,{POPUP_WINDOW_NAME:"auth",POPUP_WINDOW_SIZE:"width=600,height=400",constructor:function(){$super(this,arguments),this.windowTimer=new $t(this.check,this,500)},destroy:function(){this.windowTimer.clear(),this.windowTimer=null,$super(this,arguments)},getClickHandlers:function(){return{".js-profile-connect-facebook":this.connectFacebook,".js-friends-more":this.loadMoreHottest,".js-unregistred-more":this.loadMoreUnregistred}},setOauthUrl:function(e){return this.oauthUrl=e,this},connectFacebook:function(){this.window=window.open(this.oauthUrl,this.POPUP_WINDOW_NAME,this.POPUP_WINDOW_SIZE),this.windowTimer.set()},check:function(){this.window.closed?(this.window=null,this.fire("facebook-connected")):this.windowTimer.set()},loadMoreHottest:function(){this.setLoading(),this.fire("load-more-hottest")},loadMoreUnregistred:function(){this.setLoading(),this.fire("load-more-unregistred")},setLoading:function(){$el.add($el.up(this.getElement(".js-friends-more"),".brick-wrap"),"loading"),$el.add($el.up(this.getElement(".js-unregistred-more"),".brick-wrap"),"loading")}}),B.HoN_v3.Profile.UnitedFriends.Controller=$class(B.HoN_v3.BaseAsyncController,{viewController:null,ownProfile:null,unitedFriends:null,userId:null,rendered:!1,FRIENDS_INCREMENT_VALUE:30,registredCount:5,unregistredCount:0,destroy:function(){this.destroyViewController(),$super(this,arguments)},init:function(){this.model=(new B.HoN_v3.Profile.UnitedFriends.Model).setUnitedFriends(this.getUnitedFriends()).setUserId(this.getUserId()).setFilter(this.registredCount,this.unregistredCount).on({updated:this.ready},this),this.getUnitedFriends().getState()===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING&&this.fetchModel()},setOwnProfile:function(e){return this.ownProfile=e,this},setUnitedFriends:function(e){return this.unitedFriends=e,this},getUnitedFriends:function(){return this.unitedFriends},setUserId:function(e){return this.userId=e,this},getUserId:function(){return this.userId},getView:function(){var e=this.getUnitedFriends(),t=this.model.getConnectedInThisTab();return this.rendered||e.getState()!==$p.UnitedFriendsState.UNITED_FRIENDS_STATE_READY||0!==e.getTotalCount()?(new B.HoN_v3.Profile.UnitedFriends.View).setConnections(this.getUnitedFriends(),this.ownProfile,this.registredCount,this.unregistredCount,t):""},renderComplete:function(e){this.rendered=!0,this.destroyViewController(),this.viewController=new B.HoN_v3.Profile.UnitedFriends.ViewController(e).on({"facebook-connected":this.facebookConnected,"load-more-hottest":this.loadMoreHottest,"load-more-unregistred":this.loadMoreUnregistred},this),this.unitedFriends.getConnectionProvider()&&this.viewController.setOauthUrl(this.unitedFriends.getConnectionProvider().getAuthData().getOauthUrl())},facebookConnected:function(){this.model.setConnected(!0),this.setDefaultFilter(),this.fetchModel()},loadMoreHottest:function(){this.registredCount+=this.FRIENDS_INCREMENT_VALUE,this.fetchModel()},loadMoreUnregistred:function(){this.unregistredCount+=this.FRIENDS_INCREMENT_VALUE,this.fetchModel()},setDefaultFilter:function(){this.registredCount=5,this.unregistredCount=0},fetchModel:function(){this.model.setFilter(this.registredCount,this.unregistredCount),this.model.fetch(null,this.ready,this.error,this)},ready:function(){this.setUnitedFriends(this.model.getUnitedFriends()),this.fire("ready")},error:function(e){this.fire("error",e)},destroyViewController:function(){this.viewController&&(this.viewController.destroy(),this.viewController=null)}})),B.HoN_v3.Profile.FriendsView2=$class(B.HoN_v3.Profile.BlockView,{controller:null,ready:function(){this.fire("ready")},get_result:function(){return this.controller.getView()},render:function(){var e=$super(this,arguments);return this.controller.renderComplete(e),e},set_data:function(e){return this.controller=new B.HoN_v3.Profile.UnitedFriends.Controller,this.controller.on({ready:this.ready},this),this.controller.setUserId(e.uid).setOwnProfile(e.own_profile).setUnitedFriends(e.user.getUnitedFriends()).request(),this},get_profile_friends:function(){return this.controller.getUnitedFriends()}}),$gpb.exists("badoo.bma.InterestsGroups","message")||($gpb.exists("badoo.bma.Group","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Group=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Group",t.prototype._descriptor={fields:{group_id:{type:5,number:1,label:2},name:{type:9,number:2,label:2}}}}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.InterestsGroups=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.InterestsGroups",t.prototype._descriptor={fields:{groups:{type:11,type_name:"badoo.bma.Group",number:1,label:3}}}}()),B.HoN_v3.InterestsModel=new $class($u.Observable,{_list:{},state:"empty",get:function(e,t){if("clear"==this.state){if(!e)return this._list;e.call(t||this,this._list)}else this._load(),e&&this.on("loaded",e,t||this)},off:function(e,t){this.un("loaded",e,t||this)},_load:function(){if("loading"!=this.state){var e=$gpb.namespace("badoo.bma");new $gpb.Rpc(e.MessageType.SERVER_INTERESTS_GROUPS_GET,null).on(e.MessageType.CLIENT_INTERESTS_GROUPS,this._on_groups,this).request(),this._setState("loading")}},_on_groups:function(e,t){return e?(this._setState("empty"),this.fire("error"),void 0):(this._setState("clear"),this._list=t.getGroups(),this.fire("loaded",this._list),void 0)},_setState:function(e){this.state=e}}),$l.register({section:"status",lang:"en-us",translations:{STATUS:{MALE:{DELETED:"Deleted member",INVISIBLE:"Invisible user"}},TIME_AGO:{JUST_NOW:"just now",TODAY:"today",YESTERDAY:"yesterday",TIME_AGO:"{{number}} {{metric}} ago",MORE_THAN_A_WEEK:"more than a week ago",MORE_THAN_A_MONTH:"more than a month ago"}}}),function(){function e(e,s){return e.write('<div class="prev-next js-prev-next-container"> <div class="btn btn--sm btn--ico').section(s.get(["_PREV_BUTTON_HIDDEN"],!1),s,{block:t},{}).write(' js-prev-button-wrap"> <i class="ico ico--arrow-up"> <span class="b-link js-prev-button"></span> ').section(s.get(["NON_AUTH_PREV"],!1),s,{block:i},{}).write(' </i> </div> <div class="prev-next__users"> <div class="prev-next__users_ js-prev-next-users" style="-webkit-transform: translate(0, ').reference("top",s).write("px); transform: translate(0, ").reference("top",s).write('px);"> ').section(s.get(["USER"],!1),s,{block:o},{}).write(' </div> </div> <div class="btn btn--sm btn--ico').section(s.get(["_NEXT_BUTTON_HIDDEN"],!1),s,{block:a},{}).write(' js-next-button-wrap"> <i class="ico ico--arrow-down"> <span class="b-link js-next-button"></span> ').section(s.get(["NON_AUTH_NEXT"],!1),s,{block:l},{}).write(" </i> </div> </div>")}function t(e){return e.write(" invisible")}function i(e,t){return e.write('<a href="').reference("sign_url",t).write('" class="b-link"></a>')}function o(e,t){return e.write(" ").section(t.get(["CURRENT"],!1),t,{block:s},{}).write(" ").section(t.get(["NORMAL"],!1),t,{block:n},{}).write(" ").section(t.get(["DELETED"],!1),t,{block:r},{}).write(" ")}function s(e,t){return e.write(' <div> <div class="brick brick--outline"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> </div> </div> ')}function n(e,t){return e.write(' <div> <div class="brick brick--hover tooltip-wrap" data-control-type="tooltip"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="tooltip tooltip--delayed-show"> <div class="tooltip-txt">').reference("name",t).write(", ").reference("age",t).write('</div> </div> <a href="').reference("url",t).write('" class="b-link app" rel="').reference("rel",t).write('"></a> </div> </div> ')}function r(e,t){return e.write(' <div> <div class="brick brick--hover tooltip-wrap"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="tooltip tooltip--delayed-show"> <div class="tooltip-txt">').reference("name",t).write("</div> </div> </div> </div> ")}function a(e){return e.write(" invisible")}function l(e,t){return e.write('<a href="').reference("sign_url",t).write('" class="b-link"></a>')}return $u.dust.register("game/block.prev-next",e),e.s={_PREV_BUTTON_HIDDEN:t,NON_AUTH_PREV:i,USER:o,_NEXT_BUTTON_HIDDEN:a,NON_AUTH_NEXT:l},o.s={CURRENT:s,NORMAL:n,DELETED:r},e}(),B.HoN_v3.Profile=B.HoN_v3.Profile||{},B.HoN_v3.Profile.NextupView||(B.HoN_v3.Profile.NextupView=$class(B.DustView,{template:"game/block.prev-next",INVISIBLE_PHOTO:"/v2/-/-/i/hotornot_v2/180_invisible.2.png",DELETED_PHOTO:"/v2/-/-/i/hotornot_v2/user-deleted-44.1.png",setData:function(e,t,i,o){for(var s=[],n=Math.max(Math.min(i-2,2),0),r=0;r<e.length;r++){var a,l,_=r+t,p=e[r],c=p.getIsDeleted(),u=p.getIsInvisible();c?(a=this.DELETED_PHOTO,l="DELETED"):u&&(a=this.INVISIBLE_PHOTO,l="INVISIBLE"),c||u?s.push({src:$r.images_root+a,DELETED:{name:$l.get("status",["STATUS","MALE",l])}}):s.push({src:p.getProfilePhoto().getSquareFaceUrl(),name:p.getName(),age:p.getAge(),url:"/profile/0"+p.getUserId()+"?p="+(_+1)+"&folder="+o,rel:p.getUserId()==B.Session.getUserId()?"profile-edit":"profile-view",NORMAL:_!==i,CURRENT:_===i})}return this.set("top",-1*B.HoN_v3.Profile.NextupController.FRAME_HEIGHT*n).set("USER",s)},setFirst:function(){return this.set("_PREV_BUTTON_HIDDEN",!0)},setLast:function(){return this.set("_NEXT_BUTTON_HIDDEN",!0)}})),B.HoN_v3.Profile=B.HoN_v3.Profile||{},B.HoN_v3.Profile.NextupViewController||(B.HoN_v3.Profile.NextupViewController=$class($u.Observable,{$e:null,container:null,constructor:function(e){$super(this,arguments),this.container=e,this.$e=$e.on({".js-prev-button":this.scrollUp,".js-next-button":this.scrollDown},this)},destroy:function(){$e.un(this.$e),this.$e=null,$super(this,arguments)},scrollUp:function(){this.fire("scroll",!0)},scrollDown:function(){this.fire("scroll",!1)}})),B.HoN_v3.Profile.NextupController||(B.HoN_v3.Profile.NextupController=new $class({container:null,currentPosition:null,offset:null,folderResults:null,PRELOAD_COUNT:2,HIDDEN_TAIL:2,RESULTS_COUNT:9,CURRENT_RESULT_POSITION:4,FRAME_HEIGHT:54,_waiting:!1,_shown:!1,constructor:function(){B.on("app:statechange",this.onStateChange,this)},onStateChange:function(e,t){switch(t){case"big-photo-view":case"profile-view":case"profile-edit":var i=$r.fromQueryString(window.location.search.replace(/^\?/,""));i.p||this.hide();break;default:this.hide()}},show:function(e){return this._shown&&e===this.currentPosition||!this.folderResults?this:this._shown?this.moveTo(e):(this.container=$("next"),this.viewController=new B.HoN_v3.Profile.NextupViewController(this.container),this.$e_vc=this.viewController.on({scroll:this.onScroll},this),B.on("folders:updated",this.onResults,this),void 0!==e&&this.setCurrentPosition(e),this.render(),this._shown=!0,this)},hide:function(){return this._shown&&(B.un("folders:updated",this.onResults,this),this.viewController&&this.viewController.destroy(),this.container.innerHTML="",this.container=this.viewController=this._waiting=null),this._shown=!1,this},renew:function(){this._shown||(this.container=$("next"),this.viewController=new B.HoN_v3.Profile.NextupViewController(this.container),this.$e_vc=this.viewController.on({scroll:this.onScroll},this),B.on("folders:updated",this.onResults,this)),this.render(),this._shown=!0},moveTo:function(e){return this._animating?void 0:(this._animate(e),this.setCurrentPosition(e),this)},_animate:function(e){var t,i=e,o=this.HIDDEN_TAIL,s=this.folderResults.getCount()-this.HIDDEN_TAIL-1,n=this.FRAME_HEIGHT,r=!0;o>=e?(r=this.currentPosition>o,t=0):(e>=s&&(e=s,r=this.currentPosition<s),t=(this.currentPosition-e-Math.min(this.currentPosition-2,2))*n);var a=$el.down(this.container,".js-prev-next-users"),l=$el.get_prefixed_name("transform");if(a){if(!r)return this.setCurrentPosition(i),this.on_transition_end(),void 0;this._animating=!0,this.wrapper=a,$el.add(a,"animated"),$e.add(a,"transitionend",this.on_transition_end,this),a.style[l]="translate(0, "+t+"px)"}},on_transition_end:function(){this._animating=!1,this.wrapper&&($e.del(this.wrapper,"transitionend",this.on_transition_end,this),this.wrapper=null),this.renew()},setCurrentPosition:function(e){return this.currentPosition=e,this.setOffset(e-this.CURRENT_RESULT_POSITION)},setFolder:function(e){return this.folderResults=e,this},render:function(){var e=this.offset,t=this.folderResults,i=t.getResults(e,this.RESULTS_COUNT),o=i&&i.length>1&&(new B.HoN_v3.Profile.NextupView).setData(i,e,this.currentPosition,t.getFolderId());o?(0==this.currentPosition&&o.setFirst(),this.currentPosition==t.getCount()-1&&o.setLast(),this._waiting=!1,this.container.innerHTML=o,this.preloadImages()):this._waiting=!0},setOffset:function(e){var t=this.folderResults.getCount()-this.RESULTS_COUNT+this.HIDDEN_TAIL;return this.offset=Math.max(Math.min(e,t),0),this},onScroll:function(e){for(var t=this.currentPosition+(e?-1:1),i=this._getUser(t);i&&(i.getIsDeleted()||i.getIsInvisible());)t+=e?-1:1,i=this._getUser(t);if(i){var o=i.getUserId(),s="/profile/0"+o+"?p="+(t+1)+"&folder="+this.folderResults.getFolderId(),n=o===B.Session.getUserId()?"profile-edit":"profile-view";B.App.app_link(n,s)}},_getUser:function(e){var t=this.folderResults.getResults(e,1);return t&&t[0]},preloadImages:function(){for(var e=this.offset,t=this.folderResults,i=t.getResults(e-this.PRELOAD_COUNT,e+this.RESULTS_COUNT+this.PRELOAD_COUNT)||[],o=[],s=0,n=i.length;n>s;s++)i[s].getIsDeleted()||i[s].getIsInvisible()||o.push(i[s].getProfilePhoto().getSquareFaceUrl());
B.ImagePreloadQueue.append(o)},onResults:function(){this._waiting&&this.render()}})),function(){function e(e,s){return e.write('<div class="section section--profile').section(s.get(["_EDITING"],!1),s,{block:t},{}).write(' js-editable-section"> <h2>About me</h2> ').section(s.get(["_EDIT"],!1),s,{block:i},{}).write(' <div class="section-editable"> <div class="section-editable__view js-value"> ').section(s.get(["_SECTION_FILLED"],!1),s,{block:o},{}).write(" ").section(s.get(["SECTION_EMPTY"],!1),s,{block:r},{}).write(" </div> ").section(s.get(["EDIT_FORM"],!1),s,{block:a},{}).write(" </div> </div>")}function t(e){return e.write(" active")}function i(e){return e.write('<div class="btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"><i class="icon ico--pencil"></i><span class="b-link js-editable-section-toggle" data-section-type="aboutme"></span></div>')}function o(e,t){return e.write(' <p class="profile-section__txt js-wrap">').reference("text",t).write("<!-- -->").section(t.get(["_MORE_FILLED"],!1),t,{block:s},{}).write("<!-- -->").section(t.get(["MORE_FILLED_NON_AUTH"],!1),t,{block:n},{}).write("<!-- --></p> ")}function s(e,t){return e.write('<i class="icon ico--etc js-toggle" data-jst-class="profile-section__txt-active"></i><!-- --><span class="profile-section__txt-hide">').reference("text",t).write("</span>")}function n(e,t){return e.write('<a href="').reference("sign_url",t).write('"><i class="icon ico--etc"></i></a>')}function r(e){return e.write(' <span class="grey profile-section__txt">Write a few words about your temperament, personality, attitude to life and people. What distinguishes you from the crowd? What are your positive and negative traits?</span> ')}function a(e,t){return e.write(' <div class="section-editable__edit"> <form method="post" action="').reference("form_action",t).write('"> <textarea id="aboutme" name="aboutme_text" class="textarea js-editable-section-text" placeholder="Type about you (up to 1000 symbols)" rows="9">').reference("text",t).write('</textarea> <div class="profile-edit__btn-right"> <button type="submit" class="btn btn--sm btn--blue js-editable-section-save" disabled><span class="btn-txt">Save</span></button> <div class="btn btn--sm btn--white"><span class="btn-txt">Cancel</span><span class="b-link js-editable-section-cancel"></span></div> </div> </form> </div> ')}return $u.dust.register("profile/block.about-me",e),e.s={_EDITING:t,_EDIT:i,_SECTION_FILLED:o,SECTION_EMPTY:r,EDIT_FORM:a},o.s={_MORE_FILLED:s,MORE_FILLED_NON_AUTH:n},e}(),B.HoN_v3.Profile.AboutMeView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.about-me",set_data:function(e){var t,i=this._get_profile_option(e,"aboutme_text"),o=!1;return i=i&&i.getDisplayValue(),i||e.own_profile?(t=i&&this._split_text(i),o=i.length,this._data={_EDITING:!1,_EDIT:e.own_profile,_SECTION_FILLED:{text:e.own_profile?t.full:t.short,_MORE_FILLED:!e.own_profile&&t.tail&&{text:t.tail}},SECTION_EMPTY:!o&&e.own_profile,EDIT_FORM:e.own_profile&&{text:i},text:i}):this._data=null,this},_split_text:function(e){var t="​",i=new RegExp("(\\s|"+t+")[^\\s|\\"+t+"]*$");if(e=e.replace(/(^\s+)|(\s+$)/,"").replace(/[^\s]{30}/g,function(e){return e+t}),e.length>400){var o=e.substr(0,400).search(i);return{"short":e.substr(0,o),tail:e.substr(o),full:e}}return{"short":e,full:e}},set_edited_block:function(e){return e?$u.dust.render(this._tpl,{text:e},"_SECTION_FILLED"):$u.dust.render(this._tpl,null,"SECTION_EMPTY")}}),function(){function e(e,o){return e.write('<div class="section section--profile').section(o.get(["_EDITING"],!1),o,{block:t},{}).write(' js-editable-section"> ').section(o.get(["TITLE"],!1),o,{block:i},{}).write(" ").section(o.get(["_EDIT_BUTTON"],!1),o,{block:r},{}).write(' <div class="section-editable"> <div class="section-editable__view"> ').section(o.get(["WORK"],!1),o,{block:a},{}).write(" ").section(o.get(["EDUCATION"],!1),o,{block:p},{}).write(" ").section(o.get(["WORK_EDUCATION_HIDDEN"],!1),o,{block:d},{}).write(" ").section(o.get(["EMPTY_TEXT"],!1),o,{block:h},{}).write(" ").section(o.get(["HIDDEN_TEXT"],!1),o,{block:b},{}).write(" ").section(o.get(["BUTTON_FB"],!1),o,{block:f},{}).write(" ").section(o.get(["BUTTON_VK"],!1),o,{block:T},{}).write(" </div> ").section(o.get(["EDIT_FORM"],!1),o,{block:v},{}).write(" </div> </div>")}function t(e){return e.write(" active")}function i(e,t){return e.write(" <h2> ").section(t.get(["ONLY_WORK"],!1),t,{block:o},{}).write(" ").section(t.get(["ONLY_EDUCATION"],!1),t,{block:s},{}).write(" ").section(t.get(["WORK_AND_EDUCATION"],!1),t,{block:n},{}).write(" </h2> ")}function o(e){return e.write(" Work\n")}function s(e){return e.write(" Education\n")}function n(e){return e.write(" Work & Education\n")}function r(e){return e.write(' <div class="inline btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"> <i class="icon ico--pencil"></i> <span class="b-link js-editable-section-toggle" data-section-type="work-education"></span> </div>')}function a(e,t){return e.write(" ").section(t.get(["_ONLY_COMPANY"],!1),t,{block:l},{}).section(t.get(["COMPANY_AND_POSITION"],!1),t,{block:_},{}).write(" ")}function l(e,t){return e.reference("company",t)}function _(e,t){return e.reference("position",t).write(" at ").reference("company",t)}function p(e,t){return e.write(" <div>").section(t.get(["_ONLY_UNIVERSITY"],!1),t,{block:c},{}).section(t.get(["UNIVERSITY_AND_YEAR"],!1),t,{block:u},{}).write("</div> ")}function c(e,t){return e.reference("university",t)}function u(e,t){return e.reference("university",t).write(", ").reference("year",t)}function d(e,t){return e.write(' <span class="profile-section__txt">').reference("company_university",t).write('</span> <span class="p-link js-profile-education-show-all">Show all</span> ')}function h(e){return e.write(' <div class="grey">Add where you went to school or university and what you do for a living, especially if you studied somewhere exciting or have a really unusual career! Get from:</div> ')}function b(e,t){return e.write(' <div class="grey"> ').section(t.get(["MALE"],!1),t,{block:E},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:g},{}).write(" ").section(t.get(["ANY"],!1),t,{block:m},{}).write(" </div> ")}function E(e,t){return e.write("You chose not to show your work and education on your profile. If you show it, you'll get more attention from guys on ").reference("PAGE_partner_name",t).write(".")}function g(e,t){return e.write("You chose not to show your work and education on your profile. If you show it, you'll get more attention from girls on ").reference("PAGE_partner_name",t).write(".")}function m(e,t){return e.write("You chose not to show your work and education on your profile. If you show it, you'll get more attention from people on ").reference("PAGE_partner_name",t).write(".")}function f(e){return e.write(' <div class="btn btn--sm btn--white btn--social js-wrap"> <i class="ico ico--color ico--facebook-sm"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="fb"></span> </i> <span class="btn-txt">Facebook</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function T(e){return e.write(' <div class="btn btn--sm btn--white btn--social js-wrap"> <i class="ico ico--color ico--vk-sm"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="vk"></span> </i> <span class="btn-txt">VKontakte</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function v(e,t){return e.write(' <div class="section-editable__edit"> <form method="post" action="').reference("form_action",t).write('" class="form"> ').section(t.get(["UPDATE"],!1),t,{block:O},{}).write(" ").section(t.get(["EDUCATION_SELECTOR"],!1),t,{block:w},{}).write(" ").section(t.get(["WORK_SELECTOR"],!1),t,{block:A},{}).write(' <div class="profile-edit__btn-right"> <button type="submit" class="btn btn--sm btn--blue js-editable-section-save" disabled> <span class="btn-txt">Save</span> </button> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-editable-section-cancel"></span> </div> </div> </form> </div> ')}function O(e,t){return e.write(' <div class="table"> <div class="table-cell"> <b>Update info from</b> </div> <div class="table-cell"> ').section(t.get(["BUTTON_FB"],!1),t,{block:y},{}).write(" ").section(t.get(["BUTTON_VK"],!1),t,{block:I},{}).write(" </div> </div> ")}function y(e){return e.write(' <div class="btn btn--sm btn--white btn--social js-wrap"> <i class="ico ico--color ico--facebook-sm"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="fb"></span> </i> <span class="btn-txt">Facebook</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function I(e){return e.write(' <div class="btn btn--sm btn--white btn--social js-wrap"> <i class="ico ico--color ico--vk-sm"> <span class="b-link js-education-import js-toggle" data-jst-class="loading" data-provider="vk"></span> </i> <span class="btn-txt">VKontakte</span> <div class="loader loader--white"><div class="loader_"></div></div> </div> ')}function w(e,t){return e.write(' <div class="table"> <div class="table-cell"><b>Your education</b></div> <div class="table-cell"> <div class="select select--sm').section(t.get(["_DISABLED"],!1),t,{block:R},{}).write('" data-control-type="select"> <input type="hidden" name="university_id" value="').reference("value",t).write('" class="select-value"> <div tabindex="0" class="select-label">').reference("option",t).write('</div> <div class="select-options"> <ul class="options"> ').section(t.get(["_ITEM"],!1),t,{block:S},{}).write(" </ul> </div> </div> </div> </div> ")}function R(e){return e.write(" disabled")}function S(e,t){return e.write('<li class="option" data-value="').reference("value",t).write('">').reference("option",t).write("</li>")}function A(e,t){return e.write(' <div class="table"> <div class="table-cell"><b>Your work</b></div> <div class="table-cell"> <div class="select select--sm').section(t.get(["_DISABLED"],!1),t,{block:P},{}).write('" data-control-type="select"> <input type="hidden" name="job_id" value="').reference("value",t).write('" class="select-value"> <div tabindex="0" class="select-label">').reference("option",t).write('</div> <div class="select-options"> <ul class="options"> ').section(t.get(["_ITEM"],!1),t,{block:N},{}).write(" </ul> </div> </div> </div> </div> ")}function P(e){return e.write(" disabled")}function N(e,t){return e.write('<li class="option" data-value="').reference("value",t).write('">').reference("option",t).write("</li>")}return $u.dust.register("profile/block.work-education",e),e.s={_EDITING:t,TITLE:i,_EDIT_BUTTON:r,WORK:a,EDUCATION:p,WORK_EDUCATION_HIDDEN:d,EMPTY_TEXT:h,HIDDEN_TEXT:b,BUTTON_FB:f,BUTTON_VK:T,EDIT_FORM:v},i.s={ONLY_WORK:o,ONLY_EDUCATION:s,WORK_AND_EDUCATION:n},a.s={_ONLY_COMPANY:l,COMPANY_AND_POSITION:_},p.s={_ONLY_UNIVERSITY:c,UNIVERSITY_AND_YEAR:u},b.s={MALE:E,FEMALE:g,ANY:m},v.s={UPDATE:O,EDUCATION_SELECTOR:w,WORK_SELECTOR:A},O.s={BUTTON_FB:y,BUTTON_VK:I},w.s={_DISABLED:R,_ITEM:S},A.s={_DISABLED:P,_ITEM:N},e}(),B.HoN_v3.Profile.EducationView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.work-education",_build_options:function(e,t,i){for(var o=0;o<e.length;o++)if(e[o].getId()===t){var s=e[o],n=s.getCurrentOptionId(),r="",a="",l={_ITEM:s.getPossibleValues().map(function(e){var t=e.getValue(),o=e.getDisplayValue();return(t===n&&!i||t!==n&&i)&&(r=o,a=t),{value:t,option:o}})};return l.value=a,l.option=r,l}return!1},set_data:function(e){var t,i,o=e.own_profile,s=this._get_profile_option(e,"work"),n=this._get_profile_option(e,"education"),r=!1;if(t=s&&s.getDisplayValue(),i=n&&n.getDisplayValue(),o)if(e.edit_form&&(s||n)){var a,l,_,p,c,u;l=e.edit_form.getOptions()||[],s&&(_=s.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION,_||(c=this._build_options(l,"work"))),n&&(p=n.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION,p||(u=this._build_options(l,"education"))),a=_&&p,r=!(!u&&!c);var d=B.HoN_v3.ExternalProvidersEducation.get_cached("vk"),h=B.HoN_v3.ExternalProvidersEducation.get_cached("facebook");this._data={TITLE:{WORK_AND_EDUCATION:!0},WORK:t&&{_ONLY_COMPANY:{company:t}},EDUCATION:i&&{_ONLY_UNIVERSITY:{university:i}},EMPTY_TEXT:a,BUTTON_FB:a&&{import_url:"",width:600,height:600},BUTTON_VK:a&&null!=d&&{import_url:"",width:600,height:600},_EDIT_BUTTON:!a&&r,EDIT_FORM:{UPDATE:{import_url:"",width:600,height:600,BUTTON_FB:null!==h,BUTTON_VK:null!==d},EDUCATION_SELECTOR:u,WORK_SELECTOR:c}};var b,E;if(!p&&""===i||!_&&""===t){switch(b=e.iht&&e.iht.getGender()||[],b=1==b.length?b[0]:$p.SexType.UNKNOWN){case $p.SexType.MALE:E="MALE";break;case $p.SexType.FEMALE:E="FEMALE";break;case $p.SexType.UNKNOWN:E="ANY"}this._data.HIDDEN_TEXT={},this._data.HIDDEN_TEXT[E]={PAGE_partner_name:B.HoN_v3.Partner.get_name()}}}else this._data=null;else if(i||t){var g=s&&s.hasRequiredAction()&&s.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION||n&&n.hasRequiredAction()&&n.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION;this._data={TITLE:{WORK_AND_EDUCATION:t&&i,ONLY_WORK:t&&!i,ONLY_EDUCATION:!t&&i},WORK:!g&&t&&{_ONLY_COMPANY:{company:t}},EDUCATION:!g&&i&&{_ONLY_UNIVERSITY:{university:i}},WORK_EDUCATION_HIDDEN:g&&{company_university:t||i}}}else this._data=null;return this}}),function(){function e(e,s){return e.write('<div class="section section--profile').section(s.get(["_EDITING"],!1),s,{block:t},{}).write(" js-editable-section\"> <h2>I'm here to</h2> ").section(s.get(["_EDIT_BUTTON"],!1),s,{block:i},{}).write(' <div class="section-editable"> <div class="section-editable__view"> ').reference("text",s,["s"]).write(" </div> ").section(s.get(["EDIT_FORM"],!1),s,{block:o},{}).write(" </div> </div>")}function t(e){return e.write(" active")}function i(e){return e.write('<div class="inline btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"><i class="icon ico--pencil"></i><span class="b-link js-editable-section-toggle" data-section-type="iht"></span></div>')}function o(e,t){return e.write(' <div class="section-editable__edit"> <form method="post" action="').reference("form_action",t).write('" class="table"> <div class="table-cell"> ').section(t.get(["_IHT_RADIO"],!1),t,{block:s},{}).write(' </div> <div class="table-cell table-cell--bottom"> <button type="submit" class="btn btn--sm btn--blue js-editable-section-save" disabled><span class="btn-txt">Save</span></button> </div> </form> </div> ')}function s(e,t){return e.write(' <div class="radio"> <input type="radio" name="iht" id="iht_id_').reference("id",t).write('" value="').reference("value",t).write('"').section(t.get(["_CHECKED"],!1),t,{block:n},{}).write('> <label for="iht_id_').reference("id",t).write('">').reference("TEXTBLOCK_iht",t,["s"]).write("</label> </div> ")}function n(e){return e.write(" checked")}return $u.dust.register("profile/block.iht",e),e.s={_EDITING:t,_EDIT_BUTTON:i,EDIT_FORM:o},o.s={_IHT_RADIO:s},s.s={_CHECKED:n},e}(),B.HoN_v3.Profile.IHTView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.iht",set_data:function(e){var t=e.iht&&e.iht.getTiwIdeas&&e.iht.getTiwIdeas(),i=e.person&&e.person.getWish();if(t){var o=e.iht.getTiwPhraseId();this._data={_EDITING:!1,_EDIT_BUTTON:!0,EDIT_FORM:{_IHT_RADIO:t.map(function(e){var t=e.getTiwPhraseId(),i=t===o;return{id:e.getTiwPhraseId(),value:e.getTiwPhraseId(),TEXTBLOCK_iht:e.getTiwPhrase(),_CHECKED:i}})},text:i}}else this._data={text:e.person&&e.person.getWish()};return this}}),function(){function e(e,n){return e.write('<div class="profile-widget"> <div class="table"> <div class="table-cell table-cell--top"><h2>').section(n.get(["TITLE_HAVE_COMMENTS"],!1),n,{block:t},{}).section(n.get(["TITLE_NO_COMMENTS"],!1),n,{block:i},{}).write('</h2></div> <div class="table-cell table-cell--top"> <i class="ico ico--xsm ico--grey ico--circle-question tooltip-wrap" data-control-type="tooltip"> <div class="tooltip"><span class="tooltip-txt">Secret comments are only visible to other girls. Guys don’t even know they exist, and no one can leave one about you!</span></div> </i> </div> </div> ').section(n.get(["SECRET_TEASER"],!1),n,{block:o},{}).write(" ").section(n.get(["SECRET_COMMENTS"],!1),n,{block:s},{}).write(" </div>")}function t(e,t){return e.reference("num_comments",t).write(" ").reference("secret_comments",t)}function i(e){return e.write("Secret comments")}function o(e,t){return e.write(' <div class="secret-comments"> <div class="inline"> <i class="ico-feature ico-feature--xxlg ico-feature--secret-comments"></i> </div><!-- --><div class="inline secret-comments__text"> Leave a secret comment about ').reference("name",t).write('!\n</div> <div class="secret-comments__btn"> <div class="btn btn--white btn--sm"> <span class="btn-txt">Leave a comment</span> <span class="b-link js-profile-show-secret-comments"></span> </div> </div> </div> ')}function s(e,t){return e.write(' <div class="secret-comments"> ').section(t.get(["SECRET_TEASER"],!1),t,{block:n},{}).write(" ").section(t.get(["COMMENT"],!1),t,{block:r},{}).write(" ").section(t.get(["ALL_COMMENTS"],!1),t,{block:a},{}).write(" </div> ")}function n(e,t){return e.write(' <div class="secret-comments__item"> <div class="inline secret-comments__teaser-ico"> <i class="ico-feature ico-feature--lg ico-feature--secret-comments"></i> </div><!-- --><div class="inline secret-comments__text secret-comments__text--long"> <span class="b p-link"> Leave a comment about ').reference("name",t).write('!\r\n<span class="b-link js-profile-show-secret-comments"></span>\n</span> </div> </div> ')}function r(e,t){return e.write(' <div class="flex secret-comments__item"> <div class="flex__item flex__item--fixed"> <div class="brick secret-comments__icon"> <div class="brick-img"> <img src="').reference("icon_img",t).write('" srcset="').reference("icon_img",t).write(" 1x, ").reference("icon_img_2x",t).write(' 2x" alt=""> </div> </div> </div><!-- --><div class="flex__item flex__item--expand secret-comments__comment"> <span class="secret-comments__comment_">').reference("comment",t).write('</span> <time class="small lgrey">').reference("time",t).write('</time> </div> <span class="b-link js-profile-show-secret-comments"></span> </div> ')}function a(e){return e.write(' <div class="secret-comments__read-all"> <span class="p-link js-profile-show-secret-comments">Read all</span> </div> ')}return $u.dust.register("profile/block.secret-comments",e),e.s={TITLE_HAVE_COMMENTS:t,TITLE_NO_COMMENTS:i,SECRET_TEASER:o,SECRET_COMMENTS:s},s.s={SECRET_TEASER:n,COMMENT:r,ALL_COMMENTS:a},e}(),B.HoN_v3.Profile.SecretCommentsView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.secret-comments",constructor:function(){$super(this,arguments)},set_data:function(e){var t=B.Features.get("ALLOW_SECRET_COMMENTS"),i=t&&t.enabled&&e.profile&&e.profile.getIsSecretCommentsEnabled()&&B.Session.getUserGender()===$p.SexType.FEMALE&&e.person.getGender()===$p.SexType.MALE,o=e.profile.getSecretCommentPreview(),s=e.profile.getSecretCommentCount();if(i){var n=this._get_img_url;this._data={TITLE_HAVE_COMMENTS:s&&{num_comments:s,secret_comments:$l.get_num_dependent("secret_comments",s)},TITLE_NO_COMMENTS:!s,SECRET_TEASER:!o||!s,SECRET_COMMENTS:o&&s&&{SECRET_TEASER:!0,COMMENT:o.map(function(e){var t={icon_img:n(e.getIconId()),icon_img_2x:n(e.getIconId()+"@2x"),comment:e.getComment(),time:e.getDate()};return t})},ALL_COMMENTS:!0,name:e.person.getName()}}else this._data=null;return this},_get_img_url:function(e){return $u.tpl($r.cdn_domain+"/big/secret-comments/{id}.png",{id:e})}}),function(){function e(e,s){return e.write('<div class="section section--profile').section(s.get(["_EDITING"],!1),s,{block:t},{}).write(' js-editable-section"> <h2>Personal info</h2> ').section(s.get(["_EDIT_BUTTON"],!1),s,{block:i},{}).write(' <div class="section-editable"> <div class="section-editable__view"> <div class="form"> ').section(s.get(["ABOUT_ME"],!1),s,{block:o},{}).write(" ").section(s.get(["FIELD"],!1),s,{block:a},{}).write(" </div> </div> ").section(s.get(["EDIT_FORM"],!1),s,{block:c},{}).write(" </div> </div>")}function t(e){return e.write(" active")}function i(e){return e.write('<div class="btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"><i class="icon ico--pencil"></i><span class="b-link js-editable-section-toggle" data-section-type="personal-info"></span></div>')}function o(e,t){return e.write(' <div class="table"> <div class="table-cell"> ').section(t.get(["_FILLED"],!1),t,{block:s},{}).write(" ").section(t.get(["MORE_INFO"],!1),t,{block:n},{}).write(" ").section(t.get(["EMPTY"],!1),t,{block:r},{}).write(" </div> </div> ")}function s(e,t){return e.write('<span class="profile-section__txt">').reference("text",t).write("</span>")}function n(e){return e.write('<span class="p-link js-profile-empty" data-type="about_me">more...</span>')}function r(e){return e.write("Write a few words about your temperament, personality, attitude to life and people. What distinguishes you from the crowd? What are your positive and negative traits?")}function a(e,t){return e.write(' <div class="table"> <div class="table-cell"><b>').reference("label",t).write(':</b></div> <div class="table-cell"> ').reference("value",t).write(" ").section(t.get(["NOT_FILLED"],!1),t,{block:l},{}).write(" ").section(t.get(["HIDE_INFO"],!1),t,{block:_},{}).write(" ").section(t.get(["HIDE_INFO_NON_AUTH"],!1),t,{block:p},{}).write(" </div> </div> ")}function l(e){return e.write('<span class="link">Add info</span>')}function _(e){return e.write('<span class="link js-profile-empty" data-type="field">Show</span>')}function p(e,t){return e.write('<a href="').reference("sign_url",t).write('" class="link">Show</a>')}function c(e,t){return e.write(' <div class="section-editable__edit"> <form method="post" action="').reference("form_action",t).write('" class="form"> ').section(t.get(["ABOUT_ME"],!1),t,{block:u},{}).write(" ").section(t.get(["EDIT_FIELD"],!1),t,{block:d},{}).write(' <div class="profile-edit__btn-right"> <button type="submit" class="btn btn--sm btn--blue js-editable-section-save" disabled><span class="btn-txt">Save</span></button> <div class="btn btn--sm btn--white"><span class="btn-txt">Cancel</span><span class="b-link js-editable-section-cancel"></span></div> </div> </form> </div> ')}function u(e,t){return e.write(' <div class="table"> <div class="table-cell table-cell--top"><b>').reference("label",t).write('</b></div> <div class="table-cell"> <textarea id="aboutme" name="').reference("name",t).write('" class="textarea js-editable-section-text" placeholder="Type about you (up to 1000 symbols)" rows="6">').reference("value",t).write("</textarea> </div> </div> ")}function d(e,t){return e.write(' <div class="table"> <div class="table-cell"><b>').reference("label",t).write('</b></div> <div class="table-cell"> <div class="select select--sm" data-drop-direction="down" data-control-type="select"> <input type="hidden" name="').reference("name",t).write('" class="select-value" value="').reference("current_value",t).write('"> <span class="select-label" tabindex="3">').reference("selector_value",t).write('</span> <div class="select-options"> <ul class="options"> ').section(t.get(["OPTIONS"],!1),t,{block:h},{}).write(" </ul> </div> </div> </div> </div> ").section(t.get(["SEPARATE"],!1),t,{block:b},{}).write(" ")}function h(e,t){return e.write(' <li class="option" data-value="').reference("value",t).write('">').reference("option",t).write("</li> ")}function b(e){return e.write(' <div class="section__separate"></div> ')}return $u.dust.register("profile/block.personal-info",e),e.s={_EDITING:t,_EDIT_BUTTON:i,ABOUT_ME:o,FIELD:a,EDIT_FORM:c},o.s={_FILLED:s,MORE_INFO:n,EMPTY:r},a.s={NOT_FILLED:l,HIDE_INFO:_,HIDE_INFO_NON_AUTH:p},c.s={ABOUT_ME:u,EDIT_FIELD:d},d.s={OPTIONS:h,SEPARATE:b},e}(),B.HoN_v3.Profile.PersonalInfoView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.personal-info",_view_fields:["PROFILE_OPTION_TYPE_RELATIONSHIP","PROFILE_OPTION_TYPE_SEXUALITY","PROFILE_OPTION_TYPE_APPEARANCE","PROFILE_OPTION_TYPE_LIVING","PROFILE_OPTION_TYPE_CHILDREN","PROFILE_OPTION_TYPE_SMOKING","PROFILE_OPTION_TYPE_DRINKING"],_edit_fields:["PROFILE_OPTION_TYPE_RELATIONSHIP","PROFILE_OPTION_TYPE_SEXUALITY","PROFILE_OPTION_TYPE_APPEARANCE_HEIGHT","PROFILE_OPTION_TYPE_APPEARANCE_WEIGHT","PROFILE_OPTION_TYPE_APPEARANCE_BODY_TYPE","PROFILE_OPTION_TYPE_APPEARANCE_EYE_COLOR","PROFILE_OPTION_TYPE_APPEARANCE_HAIR_COLOR","PROFILE_OPTION_TYPE_LIVING","PROFILE_OPTION_TYPE_CHILDREN","PROFILE_OPTION_TYPE_SMOKING","PROFILE_OPTION_TYPE_DRINKING"],_separator_after:["PROFILE_OPTION_TYPE_SEXUALITY","PROFILE_OPTION_TYPE_APPEARANCE_HAIR_COLOR","PROFILE_OPTION_TYPE_DRINKING"],_has_field:function(e,t){var i=$p.ProfileOptionType[e],o=this._get_profile_option(t,i);return null!=o},_build_field:function(e,t,i){var o=t.own_profile&&t.edit_form,s=$p.ProfileOptionType[e],n=this._get_profile_option(t,s),r=n&&n.getDisplayValue();return o?n?this._build_editable_field(t,s,e,r,i):null:this._build_static_field(t,s,e,r,i)},_build_editable_field:function(e,t,i,o,s){var n=e.edit_form.getOptions().filter(function(e){return e.getType()===t})[0],r=n.getPossibleValues(),a=n.getCurrentOptionId(),l=r.filter(function(e){return e.getValue()===a})[0],_=l?l.getDisplayValue():"";return{label:n.getName(),value:o,name:i,current_value:n.getCurrentOptionId(),selector_value:_,NOT_FILLED:!o&&!s,SEPARATE:-1!==this._separator_after.indexOf(i),HIDE_INFO:s,OPTIONS:r.map(function(e){return{option:e.getDisplayValue(),value:e.getValue()}},this)}},_build_static_field:function(e,t,i,o,s){var n=this._get_profile_option(e,t),r=!1;return s&&("PROFILE_OPTION_TYPE_ABOUT_ME"===i?(o=o.split(" ").slice(0,4),o=o.length>1?o.join(" "):o[0].substring(0,150),r=o.length):o=""),n&&{label:n.getName(),value:o,name:i,NOT_FILLED:!o&&!s,HIDE_INFO:s,MORE_INFO:r}},_get_display_value:function(e){return void 0==e?"":e.getDisplayValue()},set_data:function(e){if(e.own_profile&&!e.edit_form)return this;var t,i,o=B.Features.getFeature("ALLOW_VIEW_PERSONAL_INFO"),s=!1,n=!1,r=[],a=[];if(e.own_profile)for(var l=0;l<this._edit_fields.length;l++)this._has_field(this._edit_fields[l],e)&&r.push(this._build_field(this._edit_fields[l],e));else{s=!!o&&!o.getEnabled()&&o.getRequiredAction()===$p.ActionType.COMPLETE_PROFILE;for(var l=0;l<this._view_fields.length;l++)this._has_field(this._view_fields[l],e)&&(i=this._build_field(this._view_fields[l],e,s),i&&a.push(i))}if(this._has_field("PROFILE_OPTION_TYPE_ABOUT_ME",e)&&(t=this._build_field("PROFILE_OPTION_TYPE_ABOUT_ME",e,s)),!e.own_profile&&0==a.length&&(null==t||""==t.value))return this._data=null,this;if(e.own_profile&&(r.length||t)&&(n={ABOUT_ME:t,EDIT_FIELD:!!r.length&&r}),this._data={_EDIT_BUTTON:e.own_profile,ABOUT_ME:t,FIELD:this._view_fields.map(function(t){return this._build_field(t,e,s)},this).filter(function(e){return e}),EDIT_FORM:n,percent:e.profile.getPercentageComplete()},!t&&!this._data.FIELD.length)return this._data=null,this;if(t){var _=this._split_text(t.value);t[t.value||!e.own_profile?"_FILLED":"EMPTY"]=!0,t.text=_.full}return this},_split_text:function(e){var t="​",i=new RegExp("(\\s|"+t+")[^\\s|\\"+t+"]*$");if(e=e.replace(/(^\s+)|(\s+$)/,"").replace(/[^\s]{30}/g,function(e){return e+t}),e.length>400){var o=e.substr(0,400).search(i);return{"short":e.substr(0,o),tail:e.substr(o),full:e}}return{"short":e,full:e}}}),$u.process_coach_status||($u.process_coach_status=function(e){var t={coach_status:e};switch(e){case-4:case 23:t.coach_other=!0;break;case-3:case 24:t.coach_private=!0;break;case-2:case 25:t.coach_group=!0;break;case 0:case 22:t.coach_pending=!0;break;case 11:case 12:case 13:case 14:case 15:t.coach_status=t.coach_status-10;case 1:case 2:case 3:case 4:case 5:t.coach_star=!0}return t}),B.PhotoGalleryCoaching=$class(B.PhotoGallery,{name:"PhotoGalleryCoaching",prepare_photo:function(){var e=$super(this,arguments),t=e.video;return e=$config(e,$u.process_coach_status(e.coach_status)),e.allow_replace?(e.can_delete=!1,e.can_replace=!0):(e.can_delete=!0,e.can_replace=!1),e.allow_replace&&t&&(e.can_delete=!0),e.isVideo=t,e}}),B.Upload||(B.Upload={},B.Upload.Uploader=$class($u.Observable,{name:"Upload.Uploader",upload_url:null,max_count:1/0,max_threads:2,max_file_size:1/0,mime_types:null,extensions:null,xhr_timeout:18e5,extra_data:null,extra_validation_callback:null,scope:null,_files:null,_xhrs:null,_queue:null,_last_id:0,_active_threads:0,_completed:!1,_allowed_mime_types:null,_allowed_extensions_re:null,ERROR_TOO_LARGE:1,ERROR_BAD_FORMAT:2,ERROR_INVALID:3,ERROR_UPLOAD_ERROR:4,constructor:function(e){$super(this,arguments),$config(this,e),this._files={},this._xhrs={},this._queue=[],this.mime_types&&(this.extensions=this._get_extensions_from_mime_types(this.mime_types),this._allowed_mime_types=this.mime_types.join(",")),this.extensions&&(this._allowed_extensions_re=this._get_allowed_extensions_regexp(this.extensions)),this._recreate_input()},destroy:function(){$super(this,arguments),$e.del(this._upload_input,"change",this._add_photos,this),$el.remove(this._upload_input),this._upload_input=null,this._files=this._xhrs=this._queue=null,this._allowed_mime_types=this._allowed_extensions_re=null},_recreate_input:function(){this._upload_input&&($e.del(this._upload_input,"change",this._add_photos,this),$el.remove(this._upload_input));var e=$el.create("input",{className:"uploader_input",type:"file",multiple:1!==this.max_count,accept:this._allowed_mime_types});document.body.appendChild(e),this._upload_input=e,$e.add(this._upload_input,"change",this._add_photos,this)},choose:function(){this._upload_input&&(this._upload_input.value="",this._upload_input.click())},cancel_one:function(e){for(var t=0;t<this._queue.length;t++)if(this._queue[t]===e){delete this._queue[t];break}this._xhrs[e]&&(this._active_threads--,this._xhrs[e].abort(),delete this._xhrs[e],this._upload_next())},cancel_all:function(){var e=this._xhrs;for(var t in e)e[t].abort();this._xhrs={},this._queue=[],this._active_threads=0},_add_photos:function(){var e=this._upload_input.files;if(e.length){this._completed=!1;for(var t=0;t<e.length;t++){var i=e[t],o=this._generate_id();this._files[o]=i,this.fire("registered",o,this._files[o]);var s=this._validate(i);if(s===!0){if(this.extra_validation_callback){var n=this.extra_validation_callback.call(this.scope,o,i);if(n!==!0){this._error(o,this.ERROR_INVALID,n);continue}}this._queue.push(o)}else this._error(o,s)}for(var r=0;r<this.max_threads;r++)this._upload_next()}},_validate:function(e){return e.size>this.max_file_size?this.ERROR_TOO_LARGE:this._allowed_extensions_re.test(e.name)?!0:this.ERROR_BAD_FORMAT},_upload_next:function(){this._queue.length?this._upload_photo(this._queue.shift()):this._active_threads||this._completed||(this._completed=!0,this._recreate_input(),this.fire("queue_completed"))},_upload_photo:function(e){var t=this._files[e];if(!t)return this._upload_next(),void 0;var i=new FormData;if(i.append("Filedata",t),this.extra_data)for(var o in this.extra_data)i.append(o,this.extra_data[o]);this._xhrs[e]=new $r(this.upload_url,{method:"post",cors:!0,timeout:this.xhr_timeout,data:i,upload_progress:this._upload_progress.bind(this,e),ready:this._upload_ready.bind(this,e),error:this._upload_error.bind(this,e)}),this._active_threads++,this.fire("started",e)},_upload_ready:function(e,t){this._active_threads--,delete this._xhrs[e],this.fire("ready",e,t),this._upload_next()},_upload_error:function(e,t){this._active_threads--,this._error(e,this.ERROR_UPLOAD_ERROR,t),this._upload_next()},_upload_progress:function(e,t){this.fire("progress",e,t)},_error:function(e,t,i){delete this._xhrs[e],this.fire("error",e,t,i)},_generate_id:function(){return++this._last_id},_get_extensions_from_mime_types:function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i].replace(/^\w+\//,""));return t},_get_allowed_extensions_regexp:function(e){return new RegExp("\\.("+e.join("|").replace(/\*/g,"\\*")+")$","i")}}),B.UploaderOld||(B.UploaderOld=$class({name:"UploaderOld",el_form:null,el_input:null,constructor:function(e){e&&(this.el_form=$el.down(e,".js-uploader-old"),this.el_form&&(this.el_input=$el.down(this.el_form,".js-uploader-old-input"),$e.add(this.el_input,"change",this.change,this)))
},destroy:function(){this.el_form&&($e.del(this.el_input,"change",this.change,this),this.el_input=null,this.el_form=null)},change:function(){this.el_form.submit()}})),B.Upload.Controller=new $class($u.Observable,{name:"upload-controller",type:"plain",_instances:{},_totals:null,_files_left_default:null,_files_left:null,_files_done:0,_last_handle:0,_handles:{},_transport:null,_transport_params:null,_strings:{},register_transport:function(e){!this._transport&&e.supported()&&(this.type=e.prototype.type,this._transport=e,$el.add(document.documentElement,"upload_type_"+this.type))},create:function(e,t,i){i=i||$vars.UploadSettings,this._transport_params||(this._transport_params=(i||{})[this.type]||{}),this._files_left=this._files_left_default=t&&t.files_left||i&&i.files_left;var o=t&&t[this.type]||i&&i[this.type]||this._transport_params;return o.session=t&&t.session||i&&i.session,this._transport?new this._transport(e,o):void 0},create_im_send:function(e,t){var i=this.create(e,null,t);return i?(i.control_init(),i):null},add:function(e){this._instances[e.id]=e,e.on({state_changed:this.update},this)},del:function(e){e.un({state_changed:this.update},this),this._instances[e.id]=null},update:function(e,t,i,o){this._totals=null;var s;switch(t){case"register":this._files_left--,s=this._generate_handle(),this._handles[s]={instance_id:e,id:i};break;case"error":this._files_left++;break;case"cancel":this._files_left++;break;case"complete":this._files_done++}s||(s=this._get_handle(e,i)),this.fire("state_changed",t,s,o)},cancel:function(e){var t,i,o;if(this._totals=null,e)i=this._handles[e],t=this._get_instance(i.instance_id),t&&t.cancel(i.id);else for(o in this._instances)t=this._get_instance(o),t&&t.cancel()},reset:function(){this._handles={},this._files_done=0,this._files_left=this._files_left_default,this._totals=null},get_state:function(){var e,t,i={},o=!1;for(e in this._handles)this._handles.hasOwnProperty(e)&&(o=!0,t=this._handles[e],i[e]=this._get_instance(t.instance_id).get_state(t.id));return o?i:null},get_totals:function(){if(this._totals)return this._totals;var e=0,t=0,i=0,o=this.get_state();for(var s in o){var n=o[s];n.cancelled||(t+=n.percent,100===n.percent&&e++,i++)}var r={total:i,done:e,percent:0===i?100:Math.round(t/i)};return this._totals=r,r},set_strings:function(e){this._strings=e},string:function(e){return this._strings["er_"+e]||e},set_limit:function(e){this._files_left=e-this._files_done},get_limit:function(){return this._files_left},can_upload:function(){return!!this._files_left},_generate_handle:function(){return++this._last_handle},_get_handle:function(e,t){for(var i in this._handles){var o=this._handles[i];if(o.instance_id===e&&o.id===t)return i}},_get_instance:function(e){return this._instances[e]}}),B.Upload.Link=new $class(B.Page,{name:"upload-link",_ovl_opened:!1,ovls:{},init:function(){B.IM&&B.IM.on("destroy",this.close,this),this.$b=B.on("upload:close",this.close,this)},destroy:function(){B.IM&&B.IM.un("destroy",this.close,this),B.un(this.$b),this.im_$b&&B.un(this.im_$b)},update_status:function(e,t){switch(t){case"register":this._ovl_opened||!this.ovls[e]||B.Upload.Overlay&&B.Upload.Overlay.opened||(B.Ovl.open(this.ovls[e]),this._ovl_opened=!0);break;case"queue_complete":this._ovl_opened=!1}},close:function(){this._ovl_opened=!1},wrap:function(e,t,i){for(var o,s=$el.select(e||document.body,".js-uploader-choose"),n=[],r=0,a=s.length;a>r;r++)if(o=s[r],null===o.getAttribute("data-uploader")){var l;if(l="im-send-photo"===o.getAttribute("data-ovl-type")?B.Upload.Controller.create_im_send(o,i):B.Upload.Controller.create(o,t,null))n.push(l),B.Upload.Controller.add(l),l.on("state_changed",this.update_status,this),o.setAttribute("data-uploader",""),null===o.getAttribute("data-no-ovl")&&(this.ovls[l.id]={url:o.getAttribute("data-ovl-url"),type:o.getAttribute("data-ovl-type")||"process"});else{var _=$el.up(o,".js-upload-photo"),p=$el.up(o,".js-upload-link");_&&($el.add(_,"old-upload"),p&&$el.dom.remove(p))}}return new B.Upload.Instance(n,e)}}),B.Upload.Instance=$class({name:"B.Upload.Instance",instances:null,uploader_old:null,constructor:function(e,t){this.instances=e,this.instances.length||(this.uploader_old=new B.UploaderOld(t))},destroy:function(){this.uploader_old&&(this.uploader_old.destroy(),this.uploader_old=null);for(var e=0;e<this.instances.length;e+=1){var t=this.instances[e];t&&(t._button.removeAttribute("data-uploader"),t.un("state_changed",B.Upload.Link.update_status,B.Upload.Link),B.Upload.Controller.del(t),t.destroy())}B.Upload.Controller.reset()}}),B.Upload.TransportBase=$class($u.Observable,{name:"Upload.TransportBase",id:null,_files:{},_is_waiting:!1,_files_left:0,constructor:function(e,t){$super(this,arguments),$config(this,t),this.id=++B.Upload.TransportBase.counter,this._button=e},get_state:function(e){return this._files[e]},cancel:function(e){e?this._cancel_one(e):this._cancel_all()},cancel_upload:function(e){this._cancel_one(e.rel)},can_upload:function(){return B.Upload.Controller.can_upload()},_cancel_upload:function(e){this._files[e].cancelled=!0,this._files_left--,this._notify("cancel",e)},_cancel_one:function(e){this._cancel_upload(e)},_cancel_all:function(){for(var e in this._files)this._cancel_upload(e)},_notify:function(e,t){this.fire("state_changed",this.id,e,t,this._files[t])},_register:function(e,t,i){this._files[e]={file:i,name:$u.escapeHTML(t),percent:0,data:null,error:null,start_time:null,cancelled:!1},this._files_left++,this._notify("register",e)},_start:function(e){var t=this._files[e];t.percent=0,t.start_time=(new Date).getTime(),this._notify("start",e)},control_init:function(){this._is_waiting=!0,this.wait_$b=B.on("sendphoto:inited",this.no_wait_init,this),B.fire("sendphoto:check")},no_wait_init:function(){this._is_waiting=!1,this.wait_$b&&B.un(this.wait_$b)},_complete:function(e,t){if(this._is_waiting)return this.complete_$b=B.on("sendphoto:inited",this._complete.bind(this,e,t),this),void 0;this.complete_$b&&B.un(this.complete_$b),this._files_left--;var i=this._files[e];if(i.percent=100,i.data=t,i.result=t.photo,this._notify("complete",e),i.result){var o=(new Date).getTime()-i.start_time;this._send_stats(o,i.result)}},_error:function(e,t){this._files_left--,this._files[e].error=B.Upload.Controller.string(t),this._notify("error",e)},_queue_complete:function(){this._is_waiting?this.queue_$b=B.on("sendphoto:inited",this._queue_complete,this):(this.queue_$b&&B.un(this.queue_$b),this._notify("queue_complete"))},_upload_progress:function(e,t){e&&(this._files[e].percent=t,this._notify("progress",e))},_send_stats:function(e,t){e&&t&&t.counter_url&&new $r(t.counter_url,{params:{upload_ms:e,flash:"flash"===this.type?1:0}})}}),$config(B.Upload.TransportBase,{counter:0}),B.Upload.TransportHtml5=$class(B.Upload.TransportBase,{name:"Upload.TransportHtml5",type:"html5",max_threads:2,upload_backend:"",allowed_filesize:1/0,allowed_image_types:"",allowed_video_types:"",session:null,_uploader:null,constructor:function(){$super(this,arguments);var e={};this.session&&(e[this.session.key]=this.session.value),this._uploader=new B.Upload.Uploader({upload_url:this.upload_backend,max_count:this._button.hasAttribute("data-upload-single")?1:1/0,max_threads:this.max_threads,max_file_size:1024*this.allowed_filesize*1024,mime_types:this._allowed_mime_types(),extra_data:e,extra_validation_callback:this._extra_validation,scope:this}),this._uploader_$e=this._uploader.on({registered:this._upload_register,started:this._start,progress:this._upload_progress,ready:this._upload_ready,error:this._upload_error,queue_completed:this._queue_complete},this),$e.add(this._button,"click",this.choose,this)},destroy:function(){$e.del(this._button,"click",this.choose,this),this._cancel_all(),this._uploader.un(this._uploader_$e),this._uploader.destroy(),this._uploader=null},choose:function(){$u.rstat.manage(this._button),this._uploader.choose()},_cancel_one:function(e){$super(this,arguments),this._uploader.cancel_one(e)},_cancel_all:function(){$super(this,arguments),this._uploader.cancel_all()},_upload_ready:function(e,t){return 0!==t.errno?(this._error(e,t.errmsg),void 0):(this._complete(e,t),void 0)},_upload_error:function(e,t,i){var o;switch(t){case this._uploader.ERROR_BAD_FORMAT:o="bad_format";break;case this._uploader.ERROR_TOO_LARGE:o="file_too_large";break;case this._uploader.ERROR_INVALID:o=i;break;case this._uploader.ERROR_UPLOAD_ERROR:o="bad_format";break;default:o="unknown"}this._error(e,o)},_extra_validation:function(){return this.can_upload()?!0:"files_limit"},_upload_register:function(e,t){this._register(e,t.name,t)},_allowed_mime_types:function(){var e={image:this.allowed_image_types,video:this.allowed_video_types},t=[];for(var i in e)for(var o=e[i].split(/[;,]\s*/g),s=0;s<o.length;s++){var n=o[s].replace(/\*\./,"");n&&t.push(i+"/"+n)}return"ff"===$u.ua&&(this.allowed_image_types&&t.push("image/*"),this.allowed_video_types&&t.push("video/*")),t}}),$config(B.Upload.TransportHtml5,{supported:function(){return"FormData"in window}}),B.Upload.Controller.register_transport(B.Upload.TransportHtml5),B.Upload.TransportFlash=$class(B.Upload.TransportBase,{name:"Upload.TransportFlash",type:"flash",_callbacks:["","uploadRegisterCallback={object}._register","uploadStartCallback={object}._start","uploadProgressCallback={object}._upload_progress","uploadCompleteCallback={object}._complete","uploadGetLimitCallback={object}._get_limit","uploadErrorCallback={object}._error","uploadCancelCallback={object}._cancel","uploadQueueCompleteCallback={object}._queue_complete"].join("&"),upload_swf:"",flash_params:"",session:null,_flash_object:null,constructor:function(){if($super(this,arguments),this.upload_swf){this._adapter_name="__B_Upload_TransportFlash_"+this.id,window[this._adapter_name]=this;var e="uploader_flash_"+this.id,t=$u.tpl(this._callbacks,{object:this._adapter_name}),i=this._button.style;"absolute"!==i.position&&"relative"!==i.position&&(i.position="absolute");var o=this.flash_params+t+"&maxNumThreads=2";this.session&&(o+="&sessionKey="+this.session.key+"&sessionValue="+this.session.value),this._button.innerHTML+=$u.flash.draw(this.upload_swf,"100%","100%","",o,!0,e),this._flash_object=$(e),$config(this._flash_object.style,{position:"absolute",top:0,left:0}),this._fix_flash_timeout=setTimeout(this._fix_flash_size.bind(this),0),$e.add(this._flash_object,"mouseover",this.hover,this),$e.add(this._flash_object,"mouseout",this.hover,this)}},destroy:function(){this.upload_swf&&(this._cancel_all(),this._fix_flash_timeout&&(clearTimeout(this._fix_flash_timeout),this._fix_flash_timeout=null),$e.del(this._flash_object,"mouseover",this.hover,this),$e.del(this._flash_object,"mouseout",this.hover,this),$el.remove(this._flash_object),this._flash_object=null)},_cancel_one:function(e){$super(this,arguments),this._call_flash("cancelUpload",e)},_cancel_all:function(){$super(this,arguments),this._files_left&&this._call_flash("cancelAll")},_fix_flash_size:function(){this._fix_flash_timeout=null,this._button.offsetWidth>this._flash_object.offsetWidth&&(this._flash_object.style.width=this._button.offsetWidth+"px")},_get_limit:function(){return B.Upload.Controller.get_limit()},_complete:function(e,t){return t=JSON.parse(t),t.errno?(this._error(e,t.errmsg),void 0):($super(this,arguments),void 0)},_call_flash:function(e){try{var t=Array.prototype.slice.call(arguments,1);this._flash_object[e].apply(this._flash_object,t)}catch(i){}},hover:function(){$el.tgl(this._button,"hover")}}),$config(B.Upload.TransportFlash,{supported:function(){return $u.flash.init(9)}}),B.Upload.Controller.register_transport(B.Upload.TransportFlash)),B.HoN_v3.ExternalProvidersModel||(B.HoN_v3.ExternalProvidersModel=$class($u.Observable,{_providers:null,_state:"empty",_map:{"default":"UNKNOWN_EXTERNAL_PROVIDER_TYPE",facebook:"EXTERNAL_PROVIDER_TYPE_FACEBOOK",instagram:"EXTERNAL_PROVIDER_TYPE_INSTAGRAM",ok:"EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI",vk:"EXTERNAL_PROVIDER_TYPE_VKONTAKTE"},_context:null,get:function(e,t,i,o){var s;switch(i=i||this,this._state){case"empty":this._get(o);case"loading":if(!t)return this;this.on("load",this._wrap_callback(e,t,i));break;case"clear":if(s=this._get_val(e),!t)return s;t.call(i,s)}},get_cached:function(e,t){var i;return this._providers&&(i=e?this._get_val(e):this._providers),t&&(this._providers=null),this._get(),i},_get:function(){if("loading"!==this._state){if(!this._context)throw"No context";switch(this._state="loading",this._context){case"EXTERNAL_PROVIDER_TYPE_PHOTOS":B.HoN_v3.Models.Cache.PhotosExternalProvidersCache.fetch(this._on_data,this);break;case"EXTERNAL_PROVIDER_TYPE_VIDEOS":B.HoN_v3.Models.Cache.VideosExternalProvidersCache.fetch(this._on_data,this);break;case"EXTERNAL_PROVIDER_TYPE_WORK_EDUCATION":B.HoN_v3.Models.Cache.WorkEducationExternalProvidersCache.fetch(this._on_data,this)}}},_on_data:function(e){var t=!1,i=e.getProviders();t?(this._state="empty",this.fire("error",t)):(this._providers=i.getProviders(),this._state="clear",this.fire("load",this))},_wrap_callback:function(e,t,i){var o=this;return function(){t.call(i,o._get_val(e)),setTimeout(o._remove_subscribers.bind(o),0)}},_get_val:function(e){e=this._map[e]||e;var t=$gpb.namespace("badoo.bma").ExternalProviderType[e];if(t===+t&&this._providers)for(var i=0,o=this._providers.length;o>i;i++)if(this._providers[i].getType()==t)return this._providers[i];return null},_remove_subscribers:function(){this._subscribers={},this._providers=null,this._state="empty"}}),B.HoN_v3.ExternalProvidersPhoto=new $class(B.HoN_v3.ExternalProvidersModel,{_context:"EXTERNAL_PROVIDER_TYPE_PHOTOS"}),B.HoN_v3.ExternalProvidersVideo=new $class(B.HoN_v3.ExternalProvidersModel,{_context:"EXTERNAL_PROVIDER_TYPE_VIDEOS"}),B.HoN_v3.ExternalProvidersEducation=new $class(B.HoN_v3.ExternalProvidersModel,{_context:"EXTERNAL_PROVIDER_TYPE_WORK_EDUCATION"})),B.HoN_v3.Upload=$class($u.Observable,{name:"Upload",wrap_el:null,upload_wrap_el:null,toggle_el:null,current_el:null,total_el:null,uploaders:null,total_num:0,done_num:0,errors_tpl:"",errors:null,$e:null,upload_$e:null,provider_id:null,constructor:function(){$super(this,arguments),this.bind_events()},bind_events:function(){this.$e=$e.on({".js-upload-import":this.open_import},this)},unbind_events:function(){this.$e&&$e.un(this.$e)},destroy:function(){$super(this,arguments),this.unbind_events()},open:function(e){B.Toggle.manage(e),$e.on("__all__",this.any_click,this)},auto_open:function(){B.Upload2.Controller.get_group("photos_of_me").choose()},close:function(e){this.simple_upload||(B.Toggle.manage(e||this.toggle_el,"clear"),$e.un("__all__",this.any_click,this))},any_click:function(){var e=$e.element($e.e);$el.has(e,"uploader_input")||this.upload_wrap_el.contains(e)||this.close()},open_import:function(e){var t=e.getAttribute("data-type"),i=e.getAttribute("data-url"),o=e.getAttribute("data-context")||"photo";this.provider_id=e.getAttribute("data-provider-id");var s={photo:B.HoN_v3.ExternalProvidersPhoto,video:B.HoN_v3.ExternalProvidersVideo};return i||(i=s[o].get_cached(this.provider_id,!0),i=i&&i.getAuthData().getOauthUrl()),i?("open"===t?window.open(i,"auth","width=600,height=400"):B.UploadFbc.fb_ready_hon(i),!1):void 0},rules_closed:function(){$el.del(this.wrap_el,"photo-list--rules")},uploader_state:function(e,t,i){switch(e){case"register":this.total_num++,this.close();break;case"start":this.fire("start");break;case"progress":break;case"complete":this.done_num++,this.done(i.result);break;case"cancel":this.fire("cancel");break;case"error":this.errors.push('<b class="b">'+i.name+'</b><div class="lgrey">'+i.error+"</div>"),this.done_num++;break;case"queue_complete":this.done_all(),this.fire("done_all")}this.update()},update:function(){this.current_el.innerHTML=this.done_num+1,this.total_el.innerHTML=this.total_num,this.toggle_progress(this.total_num>0)},toggle_progress:function(e){$el.tgl(this.wrap_el,"photo-list--photo-progress",e),$el.tgl(this.wrap_el,"loading",e)},done:function(e){this.fire("uploaded",{id:e.photo_id,entry_id:e.entry_id,url:e.tb_url,width:e.size.width,height:e.size.height,coach_status:e.coach_status,coach_text:e.coach_text})},done_all:function(){this.errors.length&&(B.Ovl.open({type:"hon-v3-upload-error",errors:this.errors,list_tpl:this.errors_tpl}),this.errors=[]),this.total_num=this.done_num=0},cancel:function(){B.Upload.Controller.cancel(),this.toggle_progress(!1),this.total_num=this.done_num=0}}),B.HoN_v3.PhotoGalleryUpload=$class(B.PhotoGalleryCoaching,{name:"PhotoGalleryUpload",load_url:null,photo_url_tpl:null,replace_id:null,upload:null,upload_$e:null,$b:null,has_default_photo:!1,default_photo_index:0,is_blocking:!1,constructor:function(){$super(this,arguments),this.upload=new B.HoN_v3.Upload(this.wrap_el),this.upload_$e=this.upload.on({start:this.on_start_upload,done_all:this.on_done_upload,cancel:this.on_done_upload,uploaded:this.on_add_photo},this),B.HoN_v3.on("photo:replace",this.on_replace,this),this.$b=B.on({"import:done_all":this.on_done_upload,"import:uploaded":this.on_add_photo},this),this.replace_id&&this.on_replace(this.replace_id),B.Upload2.Controller.get_group("photos_of_me").on("queue_completed",this.on_done_upload,this)},destroy:function(){B.Upload2.Controller.get_group("photos_of_me").un("queue_completed",this.on_done_upload,this),this.upload.un(this.upload_$e),this.upload_$e=null,this.upload.destroy(),this.upload=null,B.HoN_v3.un("photo:replace",this.on_replace,this),this.$b&&B.un(this.$b),$super(this,arguments)},data_ready:function(){$super(this,arguments),this.has_default_photo=this.photos&&this.photos.length?this.photos.some(function(e,t){return e.is_default&&(this.default_photo_index=t),e.is_default},this):!1},on_replace:function(e){B.Upload2.UploadOverlayController.open("photos_of_me"),this.replace_id=e},on_start_upload:function(){this.is_blocking=!0,this.view.lock()},on_done_upload:function(){if(this.is_blocking=!1,this.view.unlock(),this.fire("photos_of_me_changed",this.entries[0].n),this.replace_id){var e=this.upload.provider_id||"";B.HoN_v3.fire("photo:uploaded",this.replace_id,e),this.replace_id=null}},on_add_photo:function(e){var t,i=this.has_default_photo?this.default_photo_index+1:0,o=null;this.photo_url_tpl&&(o=$u.tpl(this.photo_url_tpl,{photo_id:e.id})),this.entries[0].n+=1,this.client_total+=1,this.total+=1,e=$config(e,$u.process_coach_status(e.coach_status));var s=B.Features.getFeature($p.FeatureType.ALLOW_PRIVATE_PHOTOS).getEnabled();t={id:e.id,eid:this.entries[0].id,w:+e.width,h:+e.height,photo_preview_url:e.url,photo_url:o,coach_text:e.coach_text,coach_status:e.coach_status,coach_group:e.coach_group,coach_pending:e.coach_pending,coach_star:e.coach_star,is_private:e.coach_private,has_menu:s},t=this.prepare_photo(t),this.photos.splice(i,0,t),this.prevent_big_width(),this.fire("photo_added",t.id),this.fire("photos_changed",this.client_total),this.update_count(),this.update_view()},update_count:function(){switch(this.client_total){case 0:this.viewer_has_photos=!1;break;case 1:this.viewer_has_photos=!0;break;default:this.viewer_has_photos=!0}}}),B.HoN_v3.PhotoGalleryViewEdit=$class(B.PhotoGalleryView,{name:"PhotoGalleryViewEdit",edit_$e:null,delete_$e:null,photo_el:null,photo_list_grid_el:null,blocksLength:0,NUM_MIN_BLOCKS:6,constructor:function(){$super(this,arguments),this.edit_$e=$e.on({".js-gallery-default":this.on_set_default,".js-gallery-delete-toggle":this.on_delete_toggle,".js-gallery-delete":this.on_delete,".js-gallery-make-public":this.on_make_public,".js-gallery-make-private":this.on_make_private,".js-gallery-private-settings":this.on_private_photos_settings},this),B.on("photo:delete",this.on_delete,this),this.photo_list_grid_el=$el.down(document,".js-profile-photo_list_grid")},destroy:function(){B.un("photo:delete",this.on_delete,this),$e.un(this.edit_$e),this.photo_el=this.photo_list_grid_el=null,$super(this,arguments)},on_set_default:function(e){var t=this.get_item_id(e);this.fire("set_default",t)},on_delete_toggle:function(e){if($e.e.shiftKey)return this.on_delete(e),void 0;var t=this.get_item_id(e),i=B.HoN_v3.ProfileEdit.controller.gridOpened?this.photo_list_grid_el:document;this.photo_el=$el.down(i,".js-photo-"+t),$el.add(this.photo_el,"photo-list__item--delete"),this.delete_$e=$e.on("__all__",this.delete_toggle,this)},delete_toggle:function(){$el.del(this.photo_el,"photo-list__item--delete"),$e.un(this.delete_$e),this.photo_el=null},on_delete:function(e){var t="string"==typeof e?e:this.get_item_id(e);this.fire("delete",t);var i=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO),o=i.getEnabled();if(o){for(var s=!1,n=0;n<this.photos.length;++n)if(this.photos[n].video&&this.photos[n].id!=t){s=!0;break}$el.tgl(this.wrap_el,"photo-list--video",!s)}},on_make_public:function(e){this.fire("make_public",this.get_item_id(e))},on_make_private:function(e){this.fire("make_private",this.get_item_id(e))},on_private_photos_settings:function(){this.fire("open_private_photos_settings")},redraw:function(){$super(this,arguments),this._appendUploadBlocks()},_isAllowVideoUpload:function(){var e=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO),t=e.getEnabled();if(t)for(var i=0;i<this.photos.length;++i)if(this.photos[i].video){t=!1;break}return t},_countBlocksLength:function(){this.blocksLength=this.photos.length,this.blocksLength++,this._isAllowVideoUpload()&&this.blocksLength++},_appendUploadBlocks:function(){var e,t=document.createDocumentFragment(),i=0;for(this.blocksLength<this.NUM_MIN_BLOCKS&&(i=this.NUM_MIN_BLOCKS-this.blocksLength),e=0;i>e;e++){var o=this.data2image({upload_item:!0,uploadSource:$p.ClientSource.CLIENT_SOURCE_MY_PROFILE});t.appendChild(o)}this.el_slider.appendChild(t)}}),$gpb.exists("badoo.bma.ServerMovePhoto","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerMovePhoto=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerMovePhoto",t.prototype._descriptor={fields:{destination_album_id:{type:9,number:2,label:1},source_photo_id:{type:9,number:1,label:1},destination_album_type:{type:14,type_name:"badoo.bma.AlbumType",number:3,label:1}}}}(),B.HoN_v3.PhotoManager||(B.HoN_v3.PhotoManager=new $class($u.Observable,{move:function(e,t){var i=(new $p.ServerMovePhoto).setSourcePhotoId(e).setDestinationAlbumType(t);new $gpb.Rpc($p.MessageType.SERVER_MOVE_PHOTO,i).on($p.MessageType.CLIENT_ALBUM,this.onPhotoMoved.bind(this,e)).request()},onPhotoMoved:function(e,t,i){return t?(this.fire("move:error"),void 0):(this.fire("move:success",e,i),void 0)}})),$gpb.exists("badoo.bma.String","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.String=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.String",t.prototype._descriptor={fields:{value:{type:9,number:1,label:1}}}}(),$gpb.exists("badoo.bma.ServerImageAction","message")||($gpb.exists("badoo.bma.ImageAction","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ImageAction=new $gpb.Enum("badoo.bma.ImageAction");t._values=[0,1,2,3],t.IMAGE_ACTION_SET_AS_DEFAULT=0,t.IMAGE_ACTION_ROTATE_LEFT_90=1,t.IMAGE_ACTION_ROTATE_RIGHT_90=2,t.IMAGE_ACTION_ROTATE_180=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerImageAction=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerImageAction",t.prototype._descriptor={fields:{action:{type:14,type_name:"badoo.bma.ImageAction",number:1,label:2},image_id:{type:9,number:2,label:1}}}}()),$gpb.exists("badoo.bma.ClientImageAction","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientImageAction=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientImageAction",t.prototype._descriptor={fields:{update_image_id:{type:9,number:3,label:1},error_message:{type:9,number:2,label:1},success:{type:8,number:1,label:1}}}}(),B.HoN_v3.PhotoGalleryEdit=$class(B.HoN_v3.PhotoGalleryUpload,{name:"PhotoGalleryEdit",set_default_url:null,set_default_ovl:null,edit_$e:null,request_delete_photo:null,request_set_default:null,request_move_photo:null,default_photo_id:null,is_blocking:!1,view_type:B.HoN_v3.PhotoGalleryViewEdit,constructor:function(){$super(this,arguments),this.$pm=B.HoN_v3.PhotoManager.on({"move:success":this.onPhotoMoveSuccess},this)},destroy:function(){B.HoN_v3.PhotoManager.un(this.$pm),this.request_set_default&&(this.request_set_default.abort(),this.request_set_default=null),this.request_delete_photo&&(this.request_delete_photo.abort(),this.request_delete_photo=null),this.request_move_photo&&(this.request_move_photo.abort(),this.request_move_photo=null),$super(this,arguments)},bind_view_events:function(){$super(this,arguments),this.edit_$e=this.view.on({set_default:this.on_set_default,"delete":this.on_delete,make_private:this.on_make_private,make_public:this.on_make_public,open_private_photos_settings:this.on_private_photos_settings},this)},unbind_view_events:function(){$super(this,arguments),this.view.un(this.edit_$e)},get_photo_by_id:function(e){for(var t=0;t<this.client_total;t++){var i=this.photos[t];if(i&&i.id===e)return i}},_bma_delete:function(e){var t=$gpb.namespace("badoo.bma"),i=(new t.String).setValue(e);this.request_delete_photo=new $gpb.Rpc(t.MessageType.SERVER_DELETE_PHOTO,i).on(t.MessageType.CLIENT_ALBUM,this._get_delete_handler(e),this).request()},_get_delete_handler:function(e){return function(t){if(this.request_delete_photo=null,t)this.delete_error(t);else{var i={photo_id:e};B.fire("gallery:photoDeleted",i),this.delete_done(i)}}},on_delete:function(e){if(!this.is_blocking){if(this.is_blocking=!0,this.view.lock(),!this.delete_url)return this._bma_delete(e),void 0;var t=$u.tpl(this.delete_url,{photo_id:e});this.request_delete_photo=new $r(t,{ready:function(e){B.fire("gallery:photoDeleted",e),this.delete_done(e)},error:this.delete_error},this)}},delete_error:function(e){this.is_blocking=!1,this.view.unlock()},delete_done:function(e){this.is_blocking=!1,this.view.unlock(),e.errno||(e.entry_id===this.entries[0].id&&(this.entries[0].n-=1),this.delete_photo(e.photo_id.toString()),e.photo_default_id&&(this.default_photo_id=e.photo_default_id,this.set_default_done(null,!0)),this.fire("photos_of_me_changed",this.entries[0].n),this.fire("photos_changed",this.client_total))},on_make_public:function(e){this._bma_move(e,$p.AlbumType.ALBUM_TYPE_PHOTOS_OF_ME)},on_make_private:function(e){this._bma_move(e,$p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS),B.HoN_v3.show_private_photos=!0},_bma_move:function(e,t){this.view.lock();var i=(new $p.ServerMovePhoto).setSourcePhotoId(e).setDestinationAlbumType(t);this.request_move_photo=new $gpb.Rpc($p.MessageType.SERVER_MOVE_PHOTO,i).on($p.MessageType.CLIENT_ALBUM,this.on_move_done_handler.bind(this,e),this).request()},on_move_done_handler:function(e,t,i){B.fire("gallery:photoMove",[e,t,i],this),this.on_move_done(e,t,i)},on_move_done:function(e,t,i){if(this.view.unlock(),this.request_move_photo=null,!t){for(var o,s=i.getPhotos(),n=0;n<s.length;n++){var r=s[n];if(r.getId()===e){o=r;break}}var a=this.get_photo_by_id(e),l=o.getRating(),_=l&&l.getRateType(),p=!a.is_private;$config(a,{is_private:p,can_set_default:!p&&a.can_set_default,coach_private:p,coach_text:p?$l.get("uploader",["PHOTOS_COACHING","private"]):l&&l.getRateActionMessage(),coach_star:!1,coach_pending:!1,coach_other:!1,coach_group:!1,coach_status:null},$u.process_coach_status(_)),this.update_view(!0)}},on_private_photos_settings:function(){B.App.app_link("settings","/settings?edit=private_photos")},on_set_default:function(e){var t=this;if(!this.is_blocking){if(this.is_blocking=!0,this.view.lock(),this.default_photo_id=e,!this.set_default_url)return this._bma_set_default(e),void 0;var i=$u.tpl(this.set_default_url,{photo_id:e});this.request_set_default=new $r(i,{ready:function(i){B.fire("gallery:photoSetDefault",e),t.set_default_done(i)},error:this.set_default_error},this)}},delete_photo:function(e){var t,i,o;for(t=0;t<this.client_total;t+=1)if(i=this.photos[t],i.id===e){o=t,this.photos.splice(t,1);break}this.client_total-=1,this.total-=1,this.update_count(),this.update_view(!0)},_bma_set_default:function(e){var t=$gpb.namespace("badoo.bma"),i=new t.ServerImageAction;i.setAction(t.ImageAction.IMAGE_ACTION_SET_AS_DEFAULT).setImageId(e),this.request_set_default=new $gpb.Rpc(t.MessageType.SERVER_IMAGE_ACTION,i).on(t.MessageType.CLIENT_IMAGE_ACTION,this._on_set_default,this).request()},_on_set_default:function(e){this.request_set_default=null,e?this.set_default_error(e):(B.fire("gallery:photoSetDefault",this.default_photo_id),this.set_default_done(null,!0))},set_default_error:function(e){this.is_blocking=!1,this.view.unlock()},set_default_done:function(e,t){if(this.is_blocking=!1,this.view.unlock(),!e||!e.errno){var i,o,s;for(i=0;i<this.client_total;i+=1)o=this.photos[i],o&&(o.id===this.default_photo_id?(o.is_default=!0,o.active="active",s=this.photos.splice(i,1)[0]):(o.active="null",o.is_default=!1));this.photos.splice(this.default_photo_index,0,s),this.update_view(),t||B.Ovl.open(this.set_default_ovl)}},onPhotoMoveSuccess:function(e,t){this.on_move_done(e,null,t)},prevent_big_width:function(){return 0==this.photos.length?(this.update_view(!0),void 0):($super(this,arguments),void 0)}}),B.HoN_v3.PhotoReplaceBase=$class({name:"PhotoReplaceBase",photo_delete_url:null,$e:null,$b_main:null,request_delete_photo:null,provider_id:"",init:function(){this.$e=$e.on(".js-photo-replace-btn",this.replace_by_click,this),this.$b_main=B.on({"import:started":this.set_provider_id,"photo:manual_replace":this.on_replace},this)},destroy:function(){this.destroy_delete_request(),this.unbind_replace_events(),$e.un(this.$e),this.$b_main&&(B.un(this.$b_main),this.$b_main=null)},destroy_delete_request:function(){this.request_delete_photo&&(this.request_delete_photo.abort(),this.request_delete_photo=null)},bind_replace_events:function(){},unbind_replace_events:function(){},replace_by_click:function(e){var t=e.getAttribute("data-replace-id");B.fire("photo:replace"),this.on_replace(t)},on_replace:function(e){e&&(this.replace_id=e,this.bind_replace_events())},set_provider_id:function(e){this.provider_id=e},remove_photo_after_upload:function(e){if(this.replace_id){if(this.destroy_delete_request(),!this.photo_delete_url)return B.fire("photo:delete",this.replace_id),void 0;var t=$u.tpl(this.photo_delete_url,{photo_id:this.replace_id});this.request_delete_photo=new $r(t,{params:{replace_id:this.replace_id,replace_provider_id:e||""},ready:this.delete_done,error:this.delete_error},this)}},_cancel:function(){this.destroy_delete_request(),this.unbind_replace_events()},delete_done:function(e){this.destroy_delete_request(),this.unbind_replace_events(),B.fire("photo:remove",e)},delete_error:function(){this.destroy_delete_request(),this.unbind_replace_events()}}),B.HoN_v3.PhotoReplace||(B.HoN_v3.PhotoReplace=new $class(B.HoN_v3.PhotoReplaceBase,{state:["profile-edit","big-photo-view"],replace_url:null,has_gallery:!1,init:function(){$super(this,arguments),this.has_gallery=!!$("photo_list"),B.HoN_v3.on("photo:uploaded",this.on_done_upload,this)},destroy:function(){B.HoN_v3.un("photo:uploaded",this.on_done_upload,this),this.has_gallery=null,$super(this,arguments)},on_replace:function(e){$super(this,arguments);var t=B.HoN_v3.ProfileEdit&&B.HoN_v3.ProfileEdit.controller?B.HoN_v3.ProfileEdit.controller.model.album:null;!t&&B.HoN_v3.BigPhoto&&(t=B.HoN_v3.BigPhoto.View.controller.model.album);var i,o,s=[];if(t&&t[0].getPhotos()&&(t.map(function(e){o=s.concat(e.getPhotos()||[])}),o.map(function(t){t.getId();t.getId()==e&&(i=t)})),i&&i.getVideo()){var n=$el.select(".js-upload-import")[0];return n&&$e.fire(n,"click"),void 0}if(this.has_gallery)B.HoN_v3.fire("photo:replace",e);else{var r=$u.tpl(this.replace_url,{replace_id:e});B.App.app_link("profile-edit",r)}},on_done_upload:function(e,t){this.remove_photo_after_upload(t)},delete_done:function(e){$super(this,arguments),B.HoN_v3.fire("photo:replaced",e)}})),function(){function e(e,t){return e.write('<section class="profile-section__photo-list"> ').reference("HTMLBLOCK_PHOTO_LIST",t,["s"]).write(" </section>")
}return $u.dust.register("profile/block.photo-list",e),e}(),function(){function e(e,r){return e.write("<figure ").section(r.get(["_PHOTO_LIST_ID"],!1),r,{block:t},{}).write(' class="photo-list').section(r.get(["_GRID_MODE"],!1),r,{block:i},{}).section(r.get(["_VIDEO_ENABLED"],!1),r,{block:o},{}).section(r.get(["_IM_PHOTO_LIST"],!1),r,{block:s},{}).write(' js-wrap"> ').section(r.get(["UPLOAD"],!1),r,{block:n},{}).write(' <div class="photo-list__photo-bar js-gallery-photos-wrap"> <div class="photo-list__slide js-gallery-photos"> ').section(r.get(["PHOTO"],!1),r,{block:l},{}).write(" ").section(r.get(["NO_PHOTO"],!1),r,{block:c},{}).write(" </div> ").section(r.get(["_PHOTO_COUNTER"],!1),r,{block:h},{}).write(" ").section(r.get(["_NAV_BTN"],!1),r,{block:b},{}).write(" </div> ").section(r.get(["_NOT_ENOUGH_PHOTOS_GAME"],!1),r,{block:f},{}).write(" ").section(r.get(["_NOT_ENOUGH_PHOTOS_PROFILE"],!1),r,{block:T},{}).write(" </figure> ").section(r.get(["PHOTO_TPL"],!1),r,{block:v},{})}function t(e){return e.write(' id="photo_list"')}function i(e){return e.write(" photo-list--grid")}function o(e){return e.write(" photo-list--video")}function s(e){return e.write(" js-im-photo-list")}function n(e,t){return e.write(' <div class="photo-list__action-bar').section(t.get(["_APPLICATION_UPLOAD"],!1),t,{block:r},{}).write(' js-upload-wrap"> <!-- Default photo -->').section(t.get(["DEFAULT_UPLOAD"],!1),t,{block:a},{}).write('<!-- Video --><div class="photo-list__item photo-list__item--add-videos js-video-upload-button"> <div class="photo-list__action photo-list__action--add-videos"> <div class="inline"> <i class="ico ico--lg ico--white ico--video-up"> <span class="b-link js-upload-import" data-type="open" data-context="video" data-provider-id="instagram"></span> </i> <b class="photo-list__action-title">Add video</b> </div><span class="middle"></span> </div> </div><!-- --><div class="photo-list__item photo-list__item--video-progress"> <div class="photo-list__action photo-list__action--video-progress"> <div class="inline"> <div class="loader loader loader--white"><div class="loader_"></div></div> <b class="photo-list__action-title">Video processing</b> </div><span class="middle"></span> </div> <span class="blocker"></span> </div> </div> ')}function r(e){return e.write(" photo-list__action-bar--application")}function a(e,t){return e.write('<div class="photo-list__item photo-list__item--add-photos"> <div class="photo-list__action photo-list__action--add-photos"> <div class="inline"> <i class="ico ico--lg ico--white ico--photo-up"> <span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me" data-source="').reference("uploadSource",t).write('"></span> </i> <b class="photo-list__action-title">Add photos</b> </div><span class="middle"></span> </div> </div>')}function l(e,t){return e.write('<!-- --><div id="js-photo-').reference("id",t).write('" class="photo-list__item js-photo" data-id="').reference("id",t).write('"> <div class="photo-list__img_"> <img src="').reference("src",t).write('" alt="" width="').reference("width",t).write('" height="').reference("height",t).write('" class="photo-list__img js-gallery-img" data-id="').reference("id",t).write('"> ').section(t.get(["IS_FB_BLOCKED"],!1),t,{block:_},{}).write(' <a href="').reference("photo_url",t).write('" class="b-link').section(t.get(["JS_REDIRECT"],!1),t,{block:p},{}).write('"></a> </div> </div><!-- -->')}function _(e){return e.write(' <span class="photo-list__action photo-list__action--facebook"> <span class="inline photo-list__action_"> <i class="ico ico--lg ico--white ico--facebook-lg"></i> </span><span class="middle"></span> </span> ')}function p(e,t){return e.write(' js-redirect" data-redirect-url="').reference("sign_url",t)}function c(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:u},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:d},{}).write(" ")}function u(e,t){return e.write('<span class="inline xx-large photo-list__no-photos">').reference("user_name",t).write(' hasn’t got any photos yet</span><span class="middle"></span>')}function d(e,t){return e.write('<span class="inline xx-large photo-list__no-photos">').reference("user_name",t).write(' hasn’t got any photos yet</span><span class="middle"></span>')}function h(e,t){return e.write(' <span class="photo-counter photo-list__counter js-gallery-counter"><i class="icon ico--white ico--camera"></i><span class="js-gallery-photo-total">').reference("num_photos",t).write("</span></span> ")}function b(e,t){return e.write(" ").section(t.get(["_AUTH"],!1),t,{block:E},{}).write(" ").section(t.get(["_NONAUTH"],!1),t,{block:g},{}).write(" ").section(t.get(["_NONAUTH_BADOO"],!1),t,{block:m},{}).write(" ")}function E(e){return e.write(' <div class="btn btn--sm btn--transparent btn--ico photo-list__arrow-l js-gallery-prev-page-container"><i class="icon ico--white ico--arrow-l"><span class="b-link js-gallery-prev-page"></span></i></div> <div class="btn btn--sm btn--transparent btn--ico photo-list__arrow-r js-gallery-next-page-container"><i class="icon ico--white ico--arrow-r"><span class="b-link js-gallery-next-page"></span></i></div> ')}function g(e,t){return e.write(' <div class="btn btn--sm btn--transparent btn--ico photo-list__arrow-l js-gallery-prev-page-container"><i class="icon ico--white ico--arrow-l"><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("ovl_url",t).write('"></span></i></div> <div class="btn btn--sm btn--transparent btn--ico photo-list__arrow-r js-gallery-next-page-container"><i class="icon ico--white ico--arrow-r"><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("ovl_url",t).write('"></span></i></div> ')}function m(e,t){return e.write(' <div class="btn btn--sm btn--transparent btn--ico photo-list__arrow-l js-gallery-prev-page-container"><i class="icon ico--white ico--arrow-l"><a href="').reference("sign_url",t).write('" class="b-link"></a></i></div> <div class="btn btn--sm btn--transparent btn--ico photo-list__arrow-r js-gallery-next-page-container"><i class="icon ico--white ico--arrow-r"><a href="').reference("sign_url",t).write('" class="b-link"></a></i></div> ')}function f(e){return e.write('<span class="b-link js-mm-blocker-link" data-jst-target="mm_cc" data-jst-class="notenoughphotos-ovl"></span>')}function T(e){return e.write('<span class="b-link js-profile-blocker-link"></span>')}function v(e,t){return e.write(" ").section(t.get(["AUTH"],!1),t,{block:O},{}).write(" ").section(t.get(["_NONAUTH"],!1),t,{block:y},{}).write(" ")}function O(e,t){return e.write(' <div id="js-photo-').reference("id",t).write('" class="photo-list__item js-photo" data-id="').reference("id",t).write('"> <div class="photo-list__img_"><img src="').reference("photo_preview_url",t).write('" alt="" width="').reference("w",t).write('" height="').reference("h",t).write('" class="photo-list__img js-gallery-img" data-id="').reference("id",t).write('"></div> <div class="photo-list__nav js-gallery-img" data-id="').reference("id",t).write('"> <div class="photo-list__nav-action" data-id="').reference("id",t).write('"> {%if can_set_default%} <div class="photo-list__default-photo ').reference("active",t).write('" data-id="').reference("id",t).write('"> <div class="btn btn--sm btn--transparent btn--ico tooltip-wrap js-default-photo-btn" data-control-type="tooltip" data-id="').reference("id",t).write('"> <i class="icon ico--white ico--user"></i> <div class="tooltip"><span class="tooltip-txt">Set as default photo</span></div> <span class="b-link js-gallery-default" data-id="').reference("id",t).write('"></span> </div> <div class="btn btn--sm btn--transparent btn--ico tooltip-wrap active" data-control-type="tooltip" data-id="').reference("id",t).write('"> <i class="icon ico--white ico--user"></i> <div class="tooltip"><span class="tooltip-txt">Your default photo</span></div> </div> </div> {%endif%} {%if can_delete%} <div class="btn btn--sm btn--transparent btn--ico tooltip-wrap" data-control-type="tooltip"> <i class="icon ico--white ico--trash"><span class="b-link js-gallery-delete-toggle" data-class="photo-list__item--delete" data-id="').reference("id",t).write('"></span></i> <div class="tooltip"><span class="tooltip-txt">Delete photo</span></div> </div> {%endif%} {%if can_replace%} <div class="btn btn--sm btn--transparent btn--ico tooltip-wrap" data-control-type="tooltip" data-id="').reference("id",t).write('"> <i class="icon ico--white ico--refresh"></i> <div class="tooltip"><span class="tooltip-txt">Replace photo</span></div> <span class="b-link js-photo-replace-btn" data-replace-id="').reference("id",t).write('" data-id="').reference("id",t).write('"></span> </div> {%endif%} </div> </div> {%if coach_private%} <div class="photo-list__photo-coaching"> <i class="f-left ico ico--white ico--lock tooltip-wrap" data-control-type="tooltip"><span class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write('</span></span></i> </div> {%endif%} {%if coach_other%} <div class="photo-list__photo-coaching"> <i class="f-left ico ico--white ico--no-star tooltip-wrap" data-control-type="tooltip"><span class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write('</span></span></i> </div> {%endif%} {%if coach_group%} <div class="photo-list__photo-coaching"> <i class="f-left ico ico--white ico--friends tooltip-wrap" data-control-type="tooltip"><span class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write('</span></span></i> </div> {%endif%} {%if coach_pending%} <div class="photo-list__photo-coaching"> <div class="photo-coaching photo-coaching--sm photo-coaching--empty tooltip-wrap" data-control-type="tooltip" data-id="').reference("id",t).write('"> <div class="photo-coaching__star" data-id="').reference("id",t).write('"></div> <div class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write('</span></div> </div> </div> {%endif%} {%if coach_star%} <div class="photo-list__photo-coaching"> <div class="photo-coaching photo-coaching--sm tooltip-wrap" data-control-type="tooltip" data-id="').reference("id",t).write('"> <div class="photo-coaching__star photo-coaching__star--').reference("coach_status",t).write('" data-id="').reference("id",t).write('"></div> <div class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write('</span></div> </div> </div> {%endif%} {%if send%} <div class="photo-list__action photo-list__action--send"> <div class="inline"> <i class="ico ico--lg ico--white ico--send-lg"><span class="b-link js-gallery-send" data-id="').reference("id",t).write('"></span></i> <b class="photo-list__action-title">Send?</b> </div><span class="middle"></span> </div> {%endif%} {%if can_delete%} <div class="photo-list__action photo-list__action--delete"> <div class="inline"> <i class="ico ico--lg ico--white ico--trash-lg"><span class="b-link js-gallery-delete" data-id="').reference("id",t).write('"></span></i> <b class="photo-list__action-title">Delete?</b> </div><span class="middle"></span> </div> {%endif%} </div> ')}function y(e,t){return e.write(' <a href="').reference("photo_url",t).write('" class="photo-list__item js-photo"> <span class="photo-list__img_"><img src="').reference("photo_preview_url",t).write('" alt="" width="').reference("w",t).write('" height="').reference("h",t).write('" class="photo-list__img js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("ovl_url",t).write('" data-id="').reference("id",t).write('"></span> </a> ')}return $u.dust.register("photos/block.photo-list",e),e.s={_PHOTO_LIST_ID:t,_GRID_MODE:i,_VIDEO_ENABLED:o,_IM_PHOTO_LIST:s,UPLOAD:n,PHOTO:l,NO_PHOTO:c,_PHOTO_COUNTER:h,_NAV_BTN:b,_NOT_ENOUGH_PHOTOS_GAME:f,_NOT_ENOUGH_PHOTOS_PROFILE:T,PHOTO_TPL:v},n.s={_APPLICATION_UPLOAD:r,DEFAULT_UPLOAD:a},l.s={IS_FB_BLOCKED:_,JS_REDIRECT:p},c.s={MALE:u,FEMALE:d},b.s={_AUTH:E,_NONAUTH:g,_NONAUTH_BADOO:m},v.s={AUTH:O,_NONAUTH:y},e}(),function(){function e(e,a){return e.write('<div class="photo-list__item').exists(a.get(["is_private_locked"],!1),a,{block:t},{}).exists(a.get(["is_not_moderated_locked"],!1),a,{block:i},{}).exists(a.get(["upload_item"],!1),a,{block:o},{}).exists(a.get(["photo_is_lazy"],!1),a,{block:s},{}).exists(a.get(["video_processing"],!1),a,{block:n},{}).write(" js-wrap js-photo js-photo-").reference("id",a).write('" data-id="').reference("id",a).write('">\n').exists(a.get(["photo_preview_url"],!1),a,{block:r},{}).write("\n").exists(a.get(["is_private_locked"],!1),a,{block:P},{}).write("\n").exists(a.get(["is_private_unlocked"],!1),a,{block:N},{}).write("\n").exists(a.get(["is_fb_blocked"],!1),a,{block:L},{}).write("\n").exists(a.get(["is_not_moderated_locked"],!1),a,{block:C},{}).write("\n").exists(a.get(["coach_private"],!1),a,{block:$},{}).write("\n").exists(a.get(["coach_other"],!1),a,{block:M},{}).write("\n").exists(a.get(["coach_group"],!1),a,{block:k},{}).write("\n").exists(a.get(["coach_pending"],!1),a,{block:U},{}).write("\n").exists(a.get(["coach_star"],!1),a,{block:D},{}).write("\n").exists(a.get(["can_delete"],!1),a,{block:F},{}).write("\n").exists(a.get(["undo"],!1),a,{block:Y},{}).write("\n").exists(a.get(["upload_item"],!1),a,{block:G},{}).write("\n").exists(a.get(["send"],!1),a,{block:W},{}).write("\n</div>")}function t(e){return e.write(" photo-list__item--private")}function i(e){return e.write(" photo-list__item--not-moderated")}function o(e){return e.write(" photo-list__item--upload")}function s(e){return e.write(" photo-list__item--lazy")}function n(e){return e.write(" hidden")}function r(e,t){return e.write('\n<div class="photo-list__img_"><img src="').reference("photo_preview_url",t).write('" data-lazy-url="').exists(t.get(["photo_is_lazy"],!1),t,{block:a},{}).write('" alt="" width="').reference("w",t).write('" height="').reference("h",t).write('" class="photo-list__img"></div>\n<div class="photo-list__link">\n').exists(t.get(["video"],!1),t,{block:l},{}).write('\n<span class="b-link js-gallery-img" data-id="').reference("id",t).write('"></span>\n</div>\n<div class="photo-list__nav js-gallery-img" data-id="').reference("id",t).write('">\n<div class="photo-list__nav-action" data-id="').reference("id",t).write('">\n').exists(t.get(["can_set_default"],!1),t,{block:_},{}).write("\n").exists(t.get(["has_menu"],!1),t,{"else":p,block:f},{}).write("\n</div>\n</div>\n")}function a(e,t){return e.reference("photo_lazy_url",t)}function l(e){return e.write('<div class="photo-list__video"><i class="ico ico--lg ico--white ico--video-play"></i></div>')}function _(e,t){return e.write('\n<div class="photo-list__default-photo ').reference("active",t).write('">\n<div class="btn btn--sm btn--transparent btn--ico tooltip-wrap js-default-photo-btn" data-control-type="tooltip">\n<i class="icon ico--white ico--user"><span class="b-link js-gallery-default" data-id="').reference("id",t).write('"></span></i>\n<div class="tooltip" data-drop-direction="true"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/SET_DEFAULT_PHOTO"}).write('</span></div>\n</div>\n<div class="btn btn--sm btn--transparent btn--ico tooltip-wrap active" data-control-type="tooltip">\n<i class="icon ico--white ico--user"></i>\n<div class="tooltip" data-drop-direction="true"><span class="tooltip-txt">').helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DEFAULT_PHOTO"}).write("</span></div>\n</div>\n</div>\n")}function p(e,t){return e.write("\n").exists(t.get(["can_replace"],!1),t,{block:c},{}).write("\n").exists(t.get(["can_delete"],!1),t,{block:h},{}).write("\n")}function c(e,t){return e.write('\n<div class="btn btn--sm btn--transparent btn--ico tooltip-wrap" data-control-type="tooltip">\n<i class="inline icon ico--refresh"><span class="b-link js-photo-replace-btn" data-replace-id="').reference("id",t).write('" data-id="').reference("id",t).write('"></span></i><!--\n--><div class="tooltip" data-drop-direction="true"><span class="tooltip-txt">').exists(t.get(["isVideo"],!1),t,{"else":u,block:d},{}).write("</span></div>\n</div>\n")}function u(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/REPLACE_PHOTO"})}function d(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/REPLACE_VIDEO"})}function h(e,t){return e.write('\n<div class="btn btn--sm btn--transparent btn--ico tooltip-wrap" data-control-type="tooltip">\n<i class="icon ico--trash"><span class="b-link ').exists(t.get(["messenger"],!1),t,{"else":b,block:E},{}).write('" data-class="photo-list__item--delete" data-id="').reference("id",t).write('"></span></i>\n<div class="tooltip" data-drop-direction="true"><span class="tooltip-txt">').exists(t.get(["isVideo"],!1),t,{"else":g,block:m},{}).write("</span></div>\n</div>\n")}function b(e){return e.write("js-gallery-delete-toggle")}function E(e){return e.write("js-chat-gallery-delete-toggle")}function g(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DELETE_PHOTO"})}function m(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DELETE_VIDEO"})}function f(e,t){return e.write('\n<div class="btn btn--sm btn--transparent btn--ico dropdown-link" data-id="').reference("id",t).write('" data-control-type="tooltip">\n<i class="icon ico--white ico--etc" data-id="').reference("id",t).write('"></i>\n<div class="datalist bc" data-id="').reference("id",t).write('">\n<ul class="options">\n').exists(t.get(["can_replace"],!1),t,{block:T},{}).write("\n").exists(t.get(["can_delete"],!1),t,{block:y},{}).write("\n").exists(t.get(["is_private"],!1),t,{"else":R,block:A},{}).write("\n</ul>\n</div>\n</div>\n")}function T(e,t){return e.write('\n<li class="option">\n<i class="inline icon ico--refresh"><span class="b-link js-photo-replace-btn" data-replace-id="').reference("id",t).write('" data-id="').reference("id",t).write('"></span></i><!--\n--><span class="inline">').exists(t.get(["isVideo"],!1),t,{"else":v,block:O},{}).write("</span>\n</li>\n")}function v(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/REPLACE_PHOTO"})}function O(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/REPLACE_VIDEO"})}function y(e,t){return e.write('\n<li class="option">\n<i class="inline icon ico--trash"><span class="b-link js-gallery-delete-toggle" data-class="photo-list__item--delete" data-id="').reference("id",t).write('"></span></i><!--\n--><span class="inline">').exists(t.get(["isVideo"],!1),t,{"else":I,block:w},{}).write("</span>\n</li>\n")}function I(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DELETE_PHOTO"})}function w(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DELETE_VIDEO"})}function R(e,t){return e.notexists(t.get(["isVideo"],!1),t,{block:S},{})}function S(e,t){return e.write('\n<li class="option">\n<i class="inline ico ico--lock"><span class="b-link js-gallery-make-private" data-id="').reference("id",t).write('"></span></i><!--\n--><span class="inline">').helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/SET_PRIVATE_PHOTO"}).write("</span>\n</li>\n")}function A(e,t){return e.write('\n<li class="option">\n<i class="inline ico ico--photos"><span class="b-link js-gallery-make-public" data-id="').reference("id",t).write('"></span></i><!--\n--><span class="inline">').helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/SET_PUBLIC_PHOTO"}).write('</span>\n</li>\n<li class="option">\n<i class="inline ico ico--key"><span class="b-link js-gallery-private-settings"></span></i><!--\n--><span class="inline">').helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/SET_ACCESS_PHOTO"}).write("</span>\n</li>\n")}function P(e,t){return e.write('\n<div class="photo-list__action photo-list__action--private">\n<div class="inline photo-list__action_">\n<i class="ico ico--lg ico--white ico--lock-lg"></i>\n<b class="photo-list__action-title">').reference("private_text",t).write('</b>\n<span class="b-link js-gallery-img" data-id="').reference("id",t).write('"></span>\n</div><span class="middle"></span>\n</div>\n')}function N(e){return e.write('\n<div class="photo-list__private-photo">\n<i class="ico ico--white ico--lock"></i>\n</div>\n')}function L(e,t){return e.write('\n<div class="photo-list__action photo-list__action--facebook">\n<div class="inline photo-list__action_">\n<i class="ico ico--lg ico--white ico--facebook-lg"></i>\n<b class="photo-list__action-title">').reference("fb_photos_total",t).write(" ").helper("declination",t,{},{word:"photo",num:t.get(["fb_photos_total"],!1)}).write('</b>\n<span class="b-link js-gallery-img" data-id="').reference("id",t).write('"></span>\n</div><span class="middle"></span>\n</div>\n')}function C(e,t){return e.write('\n<div class="photo-list__action photo-list__action--not-moderated">\n<div class="inline photo-list__action_">\n<i class="ico ico--lg ico--white ico--hand-lg"></i>\n<b class="photo-list__action-title">').reference("not_moderated_text",t).write('</b>\n<span class="b-link js-gallery-img" data-id="').reference("id",t).write('"></span>\n</div><span class="middle"></span>\n</div>\n')}function $(e,t){return e.write('\n<div class="photo-list__photo-coaching">\n<i class="left ico ico--white ico--lock tooltip-wrap" data-control-type="tooltip">\n<span class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write("</span></span>\n</i>\n</div>\n")}function M(e,t){return e.write('\n<div class="photo-list__photo-coaching">\n<i class="left ico ico--white ico--no-star tooltip-wrap" data-control-type="tooltip">\n<span class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write("</span></span>\n</i>\n</div>\n")}function k(e,t){return e.write('\n<div class="photo-list__photo-coaching">\n<i class="left ico ico--white ico--friends tooltip-wrap" data-control-type="tooltip">\n<span class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write("</span></span>\n</i>\n</div>\n")}function U(e,t){return e.write('\n<div class="photo-list__photo-coaching">\n<div class="photo-coaching photo-coaching--sm photo-coaching--empty tooltip-wrap" data-control-type="tooltip" data-id="').reference("id",t).write('">\n<div class="photo-coaching__star" data-id="').reference("id",t).write('"></div>\n<div class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write("</span></div>\n</div>\n</div>\n")}function D(e,t){return e.write('\n<div class="photo-list__photo-coaching">\n<div class="photo-coaching photo-coaching--sm tooltip-wrap" data-control-type="tooltip" data-id="').reference("id",t).write('">\n<div class="photo-coaching__star photo-coaching__star--').reference("coach_status",t).write('" data-id="').reference("id",t).write('"></div>\n<div class="tooltip"><span class="tooltip-txt">').reference("coach_text",t).write("</span></div>\n</div>\n</div>\n")}function F(e,t){return e.write('\n<div class="photo-list__action photo-list__action--delete">\n<div class="inline">\n<i class="ico ico--lg ico--white ico--trash-lg"></i>\n<b class="photo-list__action-title">').exists(t.get(["isVideo"],!1),t,{"else":B,block:H},{}).write('</b>\n<span class="b-link ').exists(t.get(["messenger"],!1),t,{"else":x,block:V},{}).write('" data-id="').reference("id",t).write('"></span>\n</div><span class="middle"></span>\n</div>\n')}function B(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DELETE_PHOTO"})}function H(e,t){return e.helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/DELETE_VIDEO"})}function x(e){return e.write("js-gallery-delete")}function V(e){return e.write("js-chat-gallery-delete")}function Y(e,t){return e.write('\n<div class="photo-list__action photo-list__item--dark">\n<div class="inline">\n<i class="ico ico--lg ico--refresh"></i>\n<b class="photo-list__action-title">Undo</b>\n<span class="b-link js-gallery-undo" data-id="').reference("id",t).write('"></span>\n</div><span class="middle"></span>\n</div>\n')}function G(e,t){return e.write('\n<div class="photo-list__action photo-list__action--add-photos">\n<div class="inline">\n<i class="ico ico--lg ico--photo-up"></i>\n</div><span class="middle"></span>\n<span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me" data-source="').reference("uploadSource",t).write('"></span>\n</div>\n')}function W(e,t){return e.write('\n<div class="photo-list__action photo-list__action--send">\n<div class="inline">\n<i class="ico ico--lg ico--white ico--send-lg"><span class="b-link js-gallery-send" data-id="').reference("id",t).write('"></span></i>\n<b class="photo-list__action-title">').helper("lang",t,{},{group:"hon/photo_list",path:"PHOTO_NAVIGATION/SEND"}).write('</b>\n</div><span class="middle"></span>\n</div>\n')}return $u.dust.register("hotornot_v2/profile/block.photo-list",e),e.s={is_private_locked:t,is_not_moderated_locked:i,upload_item:o,photo_is_lazy:s,video_processing:n,photo_preview_url:r,is_private_locked:P,is_private_unlocked:N,is_fb_blocked:L,is_not_moderated_locked:C,coach_private:$,coach_other:M,coach_group:k,coach_pending:U,coach_star:D,can_delete:F,undo:Y,upload_item:G,send:W},r.s={photo_is_lazy:a,video:l,can_set_default:_,has_menu:p},p.s={can_replace:c,can_delete:h,can_replace:T,can_delete:y,is_private:R},c.s={isVideo:u},h.s={messenger:b,isVideo:g},T.s={isVideo:v},y.s={isVideo:I},R.s={isVideo:S},F.s={isVideo:B,messenger:x},e}(),$l.register({section:"hon/photo_list",lang:"en-us",translations:{PHOTO_NAVIGATION:{SET_DEFAULT_PHOTO:"Set as default photo",DEFAULT_PHOTO:"Your default photo",DELETE_PHOTO:"Delete photo",REPLACE_PHOTO:"Replace photo",SET_PRIVATE_PHOTO:"Make it private",SET_ACCESS_PHOTO:"Who can see it",SET_PUBLIC_PHOTO:"Make it public",PRIVATE_PHOTOS_TITLE:"{number} {private_photos}",NOT_MODERATED_PHOTOS_TITLE:"Not moderated content",REPLACE_VIDEO:"Replace video",DELETE_VIDEO:"Delete video",SEND:"Send?"}}}),B.HoN_v3.Profile.PhotoListView=$class(B.HoN_v3.Profile.BlockView,{need_photos:0,profile_upload_url:null,source:"profile",_tpl:"profile/block.photo-list",PHOTO_WIDTH:150,PHOTO_HEIGHT:150,unfolded:!1,private_enabled:!1,replace_id:null,model:null,constructor:function(e){$super(this,arguments),$config(this,e),this.private_enabled=B.Features.getFeature($p.FeatureType.ALLOW_PRIVATE_PHOTOS).getEnabled(),this.$gallery_e=B.HoN_v3.on({"im:opened":this.unbind_events,"im:closed":this.bind_events},this),this.$b=B.on({"import:video-imported":this.on_video_uploaded,"video:already_present":this.video_present},this),this.$e=$e.on({".js-profile-blocker-link":this.on_check_photos},this)},destroy:function(){B.HoN_v3.un(this.$gallery_e),B.un(this.$b),this.$e_upload_controller&&(B.Upload2.Controller.un(this.$e_upload_controller),this.$e_upload_controller=null),this.$e_current_user&&(B.HoN_v3.CurrentUser.un(this.$e_current_user),this.$e_current_user=null),$e.un(this.$e),this.$e=null,this.$e_upload_group&&B.Upload2.Controller.get_group("photos_of_me").un(this.$e_upload_group),this.$e_upload_group=null,$super(this,arguments)},is_feature_enabled:function(){var e=B.Features.getFeature("ALLOW_VIEW_PHOTOS");return e&&e.getEnabled()},on_check_photos:function(){this.is_feature_enabled()?$el.dom.remove($el.down(this._container,".js-profile-blocker-link")):(B.Upload2.UploadOverlayController.open("photos_of_me_blocker"),this.$e_upload_group||(this.$e_upload_group=B.Upload2.Controller.get_group("photos_of_me").on("queue_completed",this._on_upload_queue_completed,this)))},_on_upload_queue_completed:function(){this.is_feature_enabled()&&(B.Upload2.Controller.get_group("photos_of_me").un(this.$e_upload_group),this.$e_upload_group=null,$el.remove($el.down(this._container,".js-profile-blocker-link")))},set_data:function(e){this.model=e;var t=e._data||e,i=e.album||[],o=B.HoN_v3.Partner.get_type(),s=[],n="fb"==o,r="ok"==o,a="vk"==o,l=this.need_photos,_={fb_import:!a&&!r,instagram_import:!a&&!r,video_import:!1,ok_import:r,vk_import:a};this.own_profile=t.own_profile;var p=0;i.map(function(e){var t=e.getPhotos()||[];s=s.concat(t),e.getAlbumType()!==$p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS&&(p+=t.length)}),p+=this.model.private_photos_count;for(var c,u,d=B.Features.getFeature($p.FeatureType.ALLOW_VIEW_FACEBOOK_PHOTOS).getEnabled(),h=!1,b=0,E=[],g=0;g<s.length;g++){var m=s[g],f=m.getExternalProviderSource()&&m.getExternalProviderSource()==$p.ExternalProviderType.EXTERNAL_PROVIDER_TYPE_FACEBOOK;if(!d&&f&&!this.own_profile&&"profile"===this.source){if(b+=1,h)continue;h=!0,c=g}u={photo_url:t.uid+"/"+m.getId(),id:m.getId(),src:m.getPreviewUrl(),CAN_SET_DEFAULT:m.getCanSetAsProfilePhoto()&&{_ACTIVE:m.getIsProfilePhoto()},IS_FB_BLOCKED:!1,is_not_moderated_locked:m.getIsPendingModeration()&&!e._data.own_profile},!this.is_feature_enabled()&&g>0&&!this.own_profile&&(u.block="nophoto"),E.push(u)}d||!h||this.own_profile||"profile"!==this.source||(E[c].fb_photos_total=b,E[c].IS_FB_BLOCKED=!0),s=E,this.private_photos_count=e.private_photos_count;var T=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO),v=T.getEnabled();if(this.photo_list=e.album?this.__convert_to_photo_list(e.album):null,!s.length)return this._data={HTMLBLOCK_PHOTO_LIST:$u.dust.render("photos/block.photo-list",{_PHOTO_LIST_ID:{},_RULES_NEEDED:this.rules_url,_UNFOLDED:this.unfolded,_NAV_BTN:{_AUTH:!0},UPLOAD:t.own_profile&&{DEFAULT_UPLOAD:{uploadSource:$p.ClientSource.CLIENT_SOURCE_MY_PROFILE},_SINGLE_UPLOAD:!1,FACEBOOK_IMPORT:_.fb_import&&{"data-type":n?"fbc":"open",fb_url:""},INSTAGRAM_IMPORT:_.instagram_import&&{},VIDEO_IMPORT:_.video_import&&{},ODNOKLASSNIKI_IMPORT:_.ok_import&&{"data-type":r?"fbc":"open",ok_url:_.ok_import},VK_IMPORT:_.vk_import&&{"data-type":a?"fbc":"open",vk_url:_.vk_import},rules_url:this.rules_url,session_name:"",session_id:""},NO_PHOTO:{MALE:!t.own_profile&&"MALE"==t.gender&&{user_name:t.person.getName()},FEMALE:!t.own_profile&&"FEMALE"==t.gender&&{user_name:t.person.getName()}},_PHOTO_COUNTER:{num_photos:0},_VIDEO_ENABLED:v})},this;var O=null;return this._data={HTMLBLOCK_PHOTO_LIST:$u.dust.render("photos/block.photo-list",{_PHOTO_LIST_ID:{},PHOTO:s,_PHOTO_COUNTER:{num_photos:p},_NAV_BTN:{_AUTH:!0},_NOT_ENOUGH_PHOTOS_GAME:"encounters"===this.source&&l,NOT_ENOUGH_PHOTOS_OVL:O,_RULES_NEEDED:this.rules_url,_VIDEO_ENABLED:v,_UNFOLDED:this.unfolded,UPLOAD:t.own_profile&&{_SINGLE_UPLOAD:!1,DEFAULT_UPLOAD:{uploadSource:$p.ClientSource.CLIENT_SOURCE_MY_PROFILE},FACEBOOK_IMPORT:_.fb_import&&{"data-type":n?"fbc":"open"},INSTAGRAM_IMPORT:_.instagram_import,VIDEO_IMPORT:_.video_import,ODNOKLASSNIKI_IMPORT:_.ok_import&&{"data-type":r?"fbc":"open",ok_url:_.ok_import},VK_IMPORT:_.vk_import&&{"data-type":a?"fbc":"open",vk_url:_.vk_import},rules_url:this.rules_url,session_name:"",session_id:""},REPLACE_PHOTO:!0})},this},__convert_to_photo_list:function(e){var t,i,o=$gpb.namespace("badoo.bma"),s=this.private_photos_count,n=this.own_profile,r=[],a=[],l=0,_={$gpb:"Hotornot.PhotoList.PhotoList",entries:e.map(function(e){return l=e.getOwnerId()||l,r=r.concat(e.getPhotos()||[]),a=a.concat((e.getPhotos()||[]).map(function(){return e})),{$gpb:"Hotornot.PhotoList.Entry",id:e.getUid(),n:e.getCountOfPhotos(),is_personal:!1}}),photo_url_tpl:"/0"+l+"/{photo_id}"+location.search},p=B.Features.getFeature($p.FeatureType.ALLOW_VIEW_FACEBOOK_PHOTOS).getEnabled(),c=!1,u=0,d=[],h=this.model._data.skip_unmoderated_photo,b=0;e.map(function(e){var t=e.getPhotos()||[];e.getAlbumType()!==$p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS&&(b+=t.length)}),b+=this.model.private_photos_count;for(var E=0;E<r.length;E++){var g,m=r[E],f=a[E],T=f.getAlbumType()===$p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS,v=T&&!f.getAccessable(),O=m.getExternalProviderSource()&&m.getExternalProviderSource()==$p.ExternalProviderType.EXTERNAL_PROVIDER_TYPE_FACEBOOK;if(!p&&O&&!this.own_profile&&"profile"===this.source){if(u+=1,c)continue;c=!0,t=E}var y,I,w=m.getRating(),R=w&&w.getRateType(),S=R===o.PhotoRateType.PHOTO_RATE_TYPE_STAR_ONE||R===o.PhotoRateType.PHOTO_RATE_TYPE_STAR_TWO;g=T?$l.get("uploader",["PHOTOS_COACHING","private"]):w&&w.getRateActionMessage(),m.getVideo()?(y=m.getVideo().getUrl(),I=m.getVideo().getIsProcessing()):y=!1,i={$gpb:"Hotornot.PhotoList.Photo",id:m.getId(),eid:a[E].getUid(),w:this.PHOTO_WIDTH,h:this.PHOTO_HEIGHT,can_set_default:!T&&m.getCanSetAsProfilePhoto(),allow_replace:S,photo_preview_url:m.getPreviewUrl(),ovl_url:"/invite/"+l+"/"+m.getId(),coach_private:n&&T&&!v,coach_status:w&&R,coach_text:g,video:y&&{url:y},video_processing:y&&I,has_menu:this.private_enabled&&n&&!v,is_own:n,is_default:m.getIsProfilePhoto(),is_personal:m.getIsPhotoOfMe(),is_private:T,is_private_locked:v,is_private_unlocked:T&&!n&&!v,private_text:v&&$u.tpl($l.get("hon/photo_list",["PHOTO_NAVIGATION","PRIVATE_PHOTOS_TITLE"]),{number:s,private_photos:$l.get_num_dependent("private_photo",s)}),is_not_moderated_locked:m.getIsPendingModeration()&&!n&&!h,not_moderated_text:$l.get("hon/photo_list",["PHOTO_NAVIGATION","NOT_MODERATED_PHOTOS_TITLE"])},!this.is_feature_enabled()&&E>0&&!n&&(i.block="nophoto"),d.push(i)
}return p||!c||this.own_profile||"profile"!==this.source||(d[t].fb_photos_total=u,d[t].is_fb_blocked=!0),r=d,_.photos=r,_.total=b,_},render:function(){var e=$super(this,arguments);return this.reinit_gallery(),e},reinit_gallery:function(){this.gallery&&(this.$e_upload_controller&&(B.Upload2.Controller.get_group("photos_of_me").un(this.$e_upload_controller),B.Upload2.Controller.un(this.$e_upload_controller),this.$e_upload_controller=null),this.$e_current_user&&(B.HoN_v3.CurrentUser.un(this.$e_current_user),this.$e_current_user=null),this.gallery.un("photo_clicked",this.photo_clicked,this),this.gallery.destroy(),this.gallery=null);var e=this.photo_list;if(e){var t=$config(e,{wrap_el:$("photo_list"),image_min_width:95,photo_tpl:"hotornot_v2/profile/block.photo-list",dust:!0});this.own_profile?(this.gallery=new B.HoN_v3.PhotoGalleryEdit(t),B.HoN_v3.PhotoReplace.has_gallery=!!$("photo_list"),this.replace_id&&(this.gallery.replace_id=this.replace_id,B.HoN_v3.PhotoReplace.replace_id=this.replace_id,this.replace_id=null),this.$e_upload_controller=B.Upload2.Controller.get_group("photos_of_me").on({ready:this._on_upload_photo},this),this.$e_current_user=B.HoN_v3.CurrentUser.on({photo_removed:this._on_photo_removed},this)):this.gallery=new B.PhotoGallery(t),this.gallery.on("photo_clicked",this.photo_clicked,this)}},bind_events:function(){this.gallery.upload&&this.gallery.upload.bind_events(),this.gallery.view.bind_events()},unbind_events:function(){this.gallery.upload&&this.gallery.upload.unbind_events(),this.gallery.view.unbind_events()},photo_clicked:function(e){this.fire("photo_clicked",e)},_on_upload_photo:function(e,t){var i={id:t.photo_id,url:t.preview_url,width:this.PHOTO_WIDTH,height:this.PHOTO_HEIGHT};t.is_private&&(i.coach_status=-3,i.coach_text=$l.get("uploader",["PHOTOS_COACHING","private"])),this.gallery.on_add_photo(i)},_on_photo_removed:function(e){this.gallery.delete_photo(e)},on_video_uploaded:function(){$el.add($("photo_list"),"photo-list--video-progress"),$el.add($("photo_list"),"photo-list--video"),$el.add($("photo_list"),"loading"),setTimeout(function(){if(this.gallery.photos.length){var e=this.gallery.photos[0];if(e.video){var t={photo_id:this.gallery.photos[0].id,entry_id:this.gallery.entries[0].id};this.gallery.delete_done(t)}}}.bind(this),300)},video_present:function(){$el.del($("photo_list"),"photo-list--video")}}),function(){function e(e,s){return e.write('<div class="section section--profile').section(s.get(["_EDITING"],!1),s,{block:t},{}).write(' js-editable-section"> <h2>Languages</h2> ').section(s.get(["_EDIT"],!1),s,{block:i},{}).write(' <div class="section-editable"> <div class="section-editable__view"><span class="js-language-label">').reference("languages",s).write('</span></div> <div class="section-editable__edit"> ').section(s.get(["EDIT_FORM"],!1),s,{block:o},{}).write(" </div> </div> </div> ").section(s.get(["ITEMS"],!1),s,{block:l},{}).write(" ").section(s.get(["SUGGEST"],!1),s,{block:u},{})}function t(e){return e.write(" active")}function i(e){return e.write('<div class="inline btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"><i class="icon ico--pencil"></i><span class="b-link js-editable-section-toggle" data-section-type="languages"></span></div>')}function o(e,t){return e.write(' <div class="js-languages-list-wrap"> ').section(t.get(["ITEM"],!1),t,{block:s},{}).write(' </div> <form method="post" action="').reference("add_url",t).write('"> <div class="search-field search-field--language js-data-list').section(t.get(["_ACTIVE"],!1),t,{block:a},{}).write(' " data-url="').reference("suggest_url",t).write('" data-control-type="data-list" data-drop-direction="up"> <div class="search-field_"> <input type="hidden" name="code" value="').reference("languages_id",t).write('"> <input id="languages" type="text" class="input input--sm" name="language" value="').reference("languages",t).write('" autocomplete="off" placeholder="Type to add a new language"> <i class="icon ico--grey ico--search"></i> <i class="icon ico--cross-sm js-control-reset"></i> </div> <div class="datalist bc"> <ul class="options">').reference("HTMLBLOCK_DEFAULT_LANGUAGE_OPTIONS",t,["s"]).write('</ul> <div class="datalist-hint"> <span class="lgrey datalist-hint__text">Enter language name</span><span class="lgrey datalist-hint__nothing">Language not found. Please try again.</span> </div> </div> </div> <div class="profile-edit__btn-right"> <div class="btn btn--sm btn--blue"><span class="btn-txt">Done</span><i class="b-link js-editable-section-toggle" data-section-type="languages"></i></div> </div> </form> ')}function s(e,t){return e.write('<span class="js-lng intr" ').section(t.get(["_FULL_NAME"],!1),t,{block:n},{}).write('> <i class="intr-ico intr-ico--language"></i><span class="intr-txt">').reference("text",t).write("</span>").section(t.get(["REMOVE_ITEM"],!1),t,{block:r},{}).write(" </span>")}function n(e,t){return e.write(' title="').reference("full_name",t).write('"')}function r(e,t){return e.write('<span class="intr-ico intr-ico--rm"><i data-code="').reference("code",t).write('" class="b-link js-rm-lng"></i></span>')}function a(e){return e.write(" active")}function l(e,t){return e.write(" ").section(t.get(["ITEM"],!1),t,{block:_},{}).write(" ")}function _(e,t){return e.write(' <span class="js-lng intr" ').section(t.get(["_FULL_NAME"],!1),t,{block:p},{}).write('> <i class="intr-ico intr-ico--language"></i> <span class="intr-txt">').reference("text",t).write("</span> ").section(t.get(["REMOVE_ITEM"],!1),t,{block:c},{}).write(" </span> ")}function p(e,t){return e.write(' title="').reference("full_name",t).write('"')}function c(e,t){return e.write('<span class="intr-ico intr-ico--rm"><i data-code="').reference("code",t).write('" class="b-link js-rm-lng"></i></span>')}function u(e,t){return e.write(" ").section(t.get(["ITEM"],!1),t,{block:d},{}).write(" ")}function d(e,t){return e.write('<li class="option').section(t.get(["_FIRST_CHILD"],!1),t,{block:h},{}).write('" data-value="').reference("value",t).write('">').reference("name",t).write("</li>")}function h(e){return e.write(" hover")}return $u.dust.register("profile/block.languages",e),e.s={_EDITING:t,_EDIT:i,EDIT_FORM:o,ITEMS:l,SUGGEST:u},o.s={ITEM:s,_ACTIVE:a},s.s={_FULL_NAME:n,REMOVE_ITEM:r},l.s={ITEM:_},_.s={_FULL_NAME:p,REMOVE_ITEM:c},u.s={ITEM:d},d.s={_FIRST_CHILD:h},e}(),!B.Controls.LanguageListBma){if(!B.Controls.Select){switch(B.Controls.Select=$class(B.Controls.BaseControl,{name:"Controls.Select",label_el:null,value_el:null,reset_el:null,drop_direction:null,expanded:!1,disabled:!1,options:null,value:"",placeholder:"",click_in_progress:!1,init:function(){$super(this,arguments),this.label_el=this.get_element(this.wrap_el,"label"),this.value_el=this.get_element(this.wrap_el,"value"),this.options_el=this.get_element(this.wrap_el,"options"),this.reset_el=this.get_element(this.wrap_el,"reset"),this.drop_direction=this.wrap_el.getAttribute("data-drop-direction"),this.value_el&&(this.value=this.value_el.value,this.toggle_value()),this.label_el&&(this.placeholder=this.label_el.hasAttribute("data-placeholder")?this.label_el.getAttribute("data-placeholder"):this.label_el.innerHTML),$el.has(this.wrap_el,"autowidth")&&this.autowidth(),$e.add(this.focus_el,"click",this.on_click,this),$e.add(this.focus_el,"keydown",this.on_keydown,this),$e.add(this.focus_el,"keypress",this.on_keypress,this),this.reset_el&&$e.add(this.reset_el,"click",this.reset,this),this.init_options(),this.is_disabled()&&this.disable(),this.is_active()&&this.expand()},destroy:function(){this.destroy_options(),$e.del(this.focus_el,"click",this.on_click,this),$e.del(this.focus_el,"keydown",this.on_keydown,this),$e.del(this.focus_el,"keypress",this.on_keypress,this),this.reset_el&&$e.del(this.reset_el,"click",this.reset,this),this.label_el=this.value_el=this.options_el=reset_el=this.drop_direction=null,$super(this,arguments)},get_element:function(e,t){switch(t){case"focus":case"label":return $el.down(e,".select-label");case"options":return $el.down(e,".select-options");case"value":return $el.down(e,".select-value");case"reset":return $el.down(e,".js-control-reset")}},create_options:function(e){return new B.Controls.SelectOptions({wrap_el:e})},init_options:function(){this.options=this.create_options(this.options_el),this.options.on({change:this.change,click:this.options_click,mousedown:this.options_mousedown,mouseup:this.options_mouseup,updated:this.correct_options_position,"raw-search":this.options_raw_search},this)},destroy_options:function(){this.options&&(this.options.destroy(),this.options=null)},enable:function(){this.disabled&&(this.disabled=!1,this.toggle_disabled(!1))},disable:function(){this.disabled||(this.expanded&&this.collapse(),this.disabled=!0,this.toggle_disabled(!0),this.toggle_focus(!1))},is_disabled:function(){return $el.has(this.wrap_el,"disabled")},is_active:function(){return $el.has(this.wrap_el,"active")},focus:function(){this.disabled||this.click_in_progress||(this.focus_el&&this.focus_el.focus(),$super(this,arguments))},blur:function(){this.click_in_progress||($super(this,arguments),this.expanded&&this.collapse(),this.fire("blur"))},expand:function(){this.expanded||this.disabled||(this.correct_options_position(),this.toggle_active(!0),this.options.expand(this.value),this.expanded=!0)},collapse:function(){this.expanded&&(this.options.collapse(),this.toggle_active(!1),this.expanded=!1)},set_selected_by_index:function(e){var t=this.options.options[e];this.set_label(t.label||t.text),this.set_value(t.value)},change:function(e){this.value!==e.value&&(this.set_label(e.label),this.set_value(e.value),this.fire("change",e.value,this.options.index_by_option(e)))},set_value:function(e){this.value!=e&&(this.value=e,this.value_el&&(this.value_el.value=e,$e.fire(this.value_el,"change")),this.toggle_value())},make_label:function(e){return null===e||void 0===e?this.placeholder:e},set_label:function(e){this.label_el.innerHTML=this.make_label(e),$el.tgl(this.label_el,"placeholder",!e)},reset:function(){this.disabled||(this.set_value(""),this.set_label(),this.options.reset(),this.fire("reset"))},search:function(e){this.options.search(e)},autowidth:function(){this.toggle_active(!0);var e,t=this.wrap_el.cloneNode(!0),i=$el.create("div",{className:"hidden_container"});document.body.appendChild(i),i.appendChild(t),e=$el.down(t,".select-options").offsetWidth,document.body.removeChild(i),this.wrap_el.style.width=e+"px",this.toggle_active(!1)},correct_options_position:function(){switch(this.drop_direction){case"down":return this.toggle_drop_up(!1);case"up":return this.toggle_drop_up(!0)}this.toggle_drop_up(!1);var e=$el.viewport_height(),t=e+$el.scroll_top(),i=this.options_el.getBoundingClientRect().top+$el.scroll_top()+this.options_el.offsetHeight,o=t-i;this.toggle_drop_up(0>o)},get_top_el:function(){return this.label_el.getBoundingClientRect().top<=this.options_el.getBoundingClientRect().top?this.label_el:this.options_el},toggle_active:function(e){$el.tgl(this.wrap_el,"active",e)},toggle_drop_up:function(e){$el.tgl(this.options_el,"bc",!e),$el.tgl(this.options_el,"tc",e)},toggle_disabled:function(e){$el.tgl(this.wrap_el,"disabled",e)},toggle_value:function(){$el.tgl(this.wrap_el,"value",!!this.value)},options_click:function(){this.collapse()},options_mousedown:function(){this.click_in_progress=!0},options_mouseup:function(){this.click_in_progress=!1,this.focus()},options_raw_search:function(){this.fire("raw-search")},on_keydown:function(){var e=$e.key($e.e);switch(e){case 13:if(this.expanded)return this.options.enter(),this.collapse(),!1;break;case 27:if(this.expanded)return this.collapse(),!1;break;case 32:return this.expanded||this.expand(),!0;case 38:return this.options.up(this.value,this.expanded),!1;case 40:return this.options.down(this.value,this.expanded),!1}return!0},on_keypress:function(){var e=$e.key($e.e),t=0===$e.e.charCode,i=32==e;return!t||i?(this.search(String.fromCharCode(e)),!1):!0},on_click:function(){this.disabled||(this.expanded?this.collapse():this.expand())}}),B.Controls.SelectOptions_Base=$class($u.Observable,{name:"Controls.SelectOptions_Base",wrap_el:null,scroll_el:null,options_el:null,options:null,hovered_option:null,selected_option:null,selected_index:-1,letter_mode:null,expanded:!1,search_reset_t:null,search_str:"",scrollbar:null,constructor:function(e){$super(this,arguments),$config(this,e),this.init()},init:function(){this.options_el=$el.down(this.wrap_el,".options"),$el.down(this.wrap_el,".scroll")||B.Controls.Scrollbar.wrap_block(this.options_el),this.scroll_el=$el.down(this.wrap_el,".scroll"),this.options=this.get_options(),this.search_reset_t=new $t(this.search_reset,this,1200)},destroy:function(){this.search_reset_t.clear(),this.wrap_el=this.scroll_el=this.options=this.search_reset_t=null,this.options_el=null},get_option_text:function(e){return e.innerHTML},get_options:function(){for(var e,t,i,o=[],s=$el.select(this.options_el,".option"),n=0;n<s.length;n++)e=s[n],i=this.get_option_text(e),t={el:e,value:e.getAttribute("data-value"),text:i,text_lower:i.toLowerCase(),label:e.getAttribute("data-label")||i,disabled:$el.has(e,"disabled")},o.push(t);return o},set_options:function(e){this.options_el.innerHTML=e,this.options=this.get_options()},expand:function(e){this.collapse_transition&&(this.collapse_transition.clear(),this.collapse_cleanup()),this.expanded=!0,this.scrollbar=new B.Controls.Scrollbar(this.scroll_el),$e.add(this.wrap_el,"mouseover",this.on_mousemove,this),$e.add(this.wrap_el,"mousedown",this.on_mousedown,this);var t;t=e?this.option_by_value(e):this.option_by_class("hover"),t&&(this.hover(t),this.select(t),this.scroll_to(t)),this.render()},collapse:function(){this.hovered_option=this.selected_option=null,this.render(),$e.del(this.wrap_el,"mouseover",this.on_mousemove,this),$e.del(this.wrap_el,"mousedown",this.on_mousedown,this),this.collapse_transition=$u.transition.wait(this.wrap_el,this.collapse_cleanup,this),this.expanded=!1},collapse_cleanup:function(){this.scrollbar&&(this.scrollbar.destroy(),this.scrollbar=this.collapse_transition=null)},reset:function(){this.hovered_option=this.selected_option=null,this.render()},search:function(e){var t=e.toLowerCase();this.search_str+=t,this.letter_mode=null==this.letter_mode||this.letter_mode&&this.search_str[0]==t?!0:!1;var i,o,s=this.options,n=s.length;this.letter_mode?(i=this.selected_index+1,i=n>i?i:0,o=function(e,t){return e[0]==t[0]}):(i=this.selected_index,o=function(e,t){return 0===t.indexOf(e)}),i&&(s=s.slice(i).concat(s.slice(0,i)));for(var r=0;n>r;r++)if(o(this.search_str,s[r].text_lower)){this.search_done((i+r)%n);break}this.search_reset_t.set()},search_done:function(e){var t=this.options[e];this.selected_index=e,this.hover(t),this.select(t),this.render(),this.scroll_to(t),this.change(t)},search_reset:function(){this.letter_mode=null,this.search_str=""},enter:function(){this.hovered_option?this.change(this.hovered_option):this.fire("raw-search")},up:function(e,t){this[t?"move":"move_and_change"](e,-1)},down:function(e,t){this[t?"move":"move_and_change"](e,1)},shift_index:function(e,t){return e+=t,0>e&&(e=0),e>=this.options.length&&(e=this.options.length-1),e},find_next_option:function(e,t){var i;if(1==this.options.length)return i=this.options[0],i.disabled?null:i;e=this.shift_index(e,t);for(var o=t>0?this.options.length-1:0;;){if(i=this.options[e],!i.disabled)return i;if(e=this.shift_index(e,t),t>0){if(e>o)break}else if(o>e)break}},move:function(e,t){if(this.options.length){var i;i=this.hovered_option?this.index_by_option(this.hovered_option):e?this.index_by_option(this.option_by_value(e)):-1;var o=this.find_next_option(i,t);return o&&(this.hover(o),this.select(o),this.render(),this.scroll_to(o)),o}},move_and_change:function(e,t){var i=this.move(e,t);i&&this.change(i)},scroll_to:function(e){var t=$el.down(this.wrap_el,".scroll_"),i=t.scrollTop,o=i+t.offsetHeight,s=e.el.offsetTop,n=s+e.el.offsetHeight;i>s?t.scrollTop=s:n>o&&(t.scrollTop+=n-o)},option_by_value:function(e){for(var t,i=0;i<this.options.length;i++)if(t=this.options[i],t.value==e)return t},option_by_el:function(e){$el.has(e,"option")||(e=$el.up(e,".option"));for(var t,i=0;i<this.options.length;i++)if(t=this.options[i],t.el==e)return t},option_by_class:function(e){for(var t,i=0;i<this.options.length;i++)if(t=this.options[i],$el.has(t.el,e))return t},index_by_option:function(e){for(var t=0;t<this.options.length;t++)if(this.options[t]==e)return t;return-1},hover:function(e){e&&!e.disabled&&(this.hovered_option=e)},select:function(e){this.selected_option=e},click:function(e){this.fire("click",e)},change:function(e){this.fire("change",e)},render:function(){for(var e,t=0;t<this.options.length;t++)e=this.options[t],$el.tgl(e.el,"hover",e==this.hovered_option),$el.tgl(e.el,"selected",e==this.selected_option),$el.tgl(e.el,"disabled",e.disabled)},on_mousedown:function(){return $e.add(document.body,"mouseup",this.on_mouseup,this),this.fire("mousedown"),!0},on_mouseup:function(e){$e.del(document.body,"mouseup",this.on_mouseup,this),this.fire("mouseup");var t=this.option_by_el(e);return t&&(t.disabled||(this.change(t),this.click())),!0},on_mousemove:function(e){this.hover(this.option_by_el(e)),this.render()}}),B.Controls.SelectOptions_IE=$class(B.Controls.SelectOptions_Base,{name:"Controls.SelectItems_IE",expand:function(){$super(this,arguments),$e.add(this.wrap_el,"selectstart",this.on_selectstart,this)},collapse:function(){$e.del(this.wrap_el,"selectstart",this.on_selectstart,this),$super(this,arguments)},on_selectstart:function(){return!1}}),$u.ua){case"ie10":case"ie11":B.Controls.SelectOptions=B.Controls.SelectOptions_IE;break;default:B.Controls.SelectOptions=B.Controls.SelectOptions_Base}$c.register("select",B.Controls.Select)}if(!B.Controls.DataList){switch(B.Controls.DataListOptions=$class(B.Controls.SelectOptions,{name:"Controls.DataListOptions",url:"",transport:null,request_timer:null,cache:null,constructor:function(){$super(this,arguments),this.request_timer=new $t(this.try_request,this,250),this.cache={"":{q:"",locations:this.options_el.innerHTML,default_item:!0}}},destroy:function(){this.destroy_transport(),this.request_timer.clear(),this.request_timer=this.cache=null,$super(this,arguments)},destroy_transport:function(){this.transport&&(this.transport.abort(),this.transport=null)},collapse:function(){this.request_timer.clear(),$super(this,arguments)},get_option_text:function(e){return e.innerText||e.textContent},reset:function(){this.ready(this.cache[""],!0)},set_options:function(e){this.cache[""].locations=e,$super(this,arguments),this.reset()},select:function(){},search:function(e){var t=e.length<2;return t?(this.ready(this.cache[""]),void 0):(this.search_str=e,this.request_timer.set(),void 0)},move_and_change:function(e,t){this.move(e,t)},try_request:function(){var e=this.cache[this.search_str];e?this.ready(e):(this.destroy_transport(),this.request(this.search_str))},request:function(e){this.transport=new $r(this.url,{auto:!1,ready:this.ready,error:this.error},this),this.transport.request({q:e})},ready:function(e,t){this.cache[e.q]=e;var i=!1;this.expanded&&(this.collapse(),i=!0),this.options_el.innerHTML=e.locations,this.options=this.get_options(),i&&this.expand(),t||this.fire("updated",this.options.length,e.default_item)},error:function(){}}),B.Controls.DataList=$class(B.Controls.Select,{name:"Controls.DataList",input_el:null,expand_if_empty:!0,init:function(){this.input_el=this.get_element(this.wrap_el,"input"),$super(this,arguments),this.options.on({updated:this.options_updated},this),this.toggle_default(!this.value),$e.add(this.input_el,"input",this.input_change,this)},destroy:function(){$e.del(this.input_el,"input",this.input_change,this),this.input_el=null,$super(this,arguments)},reset:function(){$super(this,arguments),this.toggle_empty(!1),this.toggle_default(!0),this.toggle_can_reset(!1)},toggle_disabled:function(e){$super(this,arguments),this.input_el.disabled=e},get_element:function(e,t){switch(t){case"input":case"focus":case"label":return $el.down(e,".input");case"options":return $el.down(e,".datalist");case"value":for(var i=$el.select(e,"input"),o=0;o<i.length;o++)if("hidden"==i[o].type)return i[o];break;case"hint":return $el.down(e,".datalist-hint")}return $super(this,arguments)},create_options:function(e){return new B.Controls.DataListOptions({wrap_el:e,url:this.wrap_el.getAttribute("data-url")})},set_label:function(e){this.input_el.value=this.make_label(e)},autowidth:function(){},on_keydown:function(){var e=$e.key($e.e);switch(e){case 32:return!0;case 38:return this.expanded?$super(this,arguments):(this.expand(),!1);case 40:return this.expanded?$super(this,arguments):(this.expand(),!1)}return $super(this,arguments)},on_keypress:function(){return!0},search:function(){$super(this,arguments),this.toggle_can_reset(!!this.input_el.value)},input_change:function(e){this.search(e.value),this.value&&(this.set_value(""),this.fire("change",null,-1))},options_updated:function(e,t){this.after_search(!!e),this.toggle_empty(!e),this.toggle_default(t),this.fire("options_updated",e)},after_search:function(e){this.expand_if_empty?this.expanded||this.expand():this.expanded?e||this.collapse():e&&this.expand()},toggle_empty:function(e){$el.tgl(this.wrap_el,"empty",e)},toggle_default:function(e){$el.tgl(this.wrap_el,"default",e)},toggle_can_reset:function(e){$el.tgl(this.wrap_el,"reset",e)}}),$u.ua){case"ie10":case"ie11":B.Controls.DataList=$class(B.Controls.DataList,{name:"Controls.DataList_IE10_IE11",_skip_input_change:!1,_blur_t:0,init:function(){this._skip_input_change=!0,$super(this,arguments),setTimeout(this._input_event_hack.bind(this),250)},destroy:function(){this._reset_blur_t(),$super(this,arguments)},focus:function(){$super(this,arguments),this.input_el.placeholder&&(this._skip_input_change=!0)},blur:function(){$super(this,arguments),this._reset_blur_t()},input_change:function(){return this._skip_input_change?(this._skip_input_change=!1,void 0):(this._reset_blur_t(),this._blur_t=setTimeout(function(e,t){e(this,t),this._reset_blur_t()}.bind(this,$super,arguments),50),void 0)},_reset_blur_t:function(){this._blur_t&&clearTimeout(this._blur_t),this._blur_t=0},_input_event_hack:function(){this._skip_input_change=!1}})}$c.register("data-list",B.Controls.DataList)}$gpb.exists("badoo.bma.ServerGetLanguages","message")||($gpb.exists("badoo.bma.LanguageListType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.LanguageListType=new $gpb.Enum("badoo.bma.LanguageListType");t._values=[1,2,3,4],t.LANGUAGE_LIST_TYPE_SPOKEN=1,t.LANGUAGE_LIST_TYPE_INTERFACE=2,t.LANGUAGE_LIST_TYPE_SPOKEN_MULTILANGUAGE=3,t.LANGUAGE_LIST_TYPE_INTERFACE_MULTILANGUAGE=4}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetLanguages=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetLanguages",t.prototype._descriptor={fields:{query:{type:9,number:2,label:1},language_list_type:{type:14,type_name:"badoo.bma.LanguageListType",number:1,label:2}}}}()),$gpb.exists("badoo.bma.ClientLanguages","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientLanguages=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientLanguages",t.prototype._descriptor={fields:{languages:{type:11,type_name:"badoo.bma.Language",number:1,label:3}}}}(),B.Controls.LanguageListBmaOptions=$class(B.Controls.DataListOptions,{name:"Controls.LanguageListBmaOptions",__filter:null,constructor:function(){$super(this,arguments),this.__filter={},delete this.cache[""],this.request("")},request:function(e){if(B.Controls.LanguageListBmaOptions.languages)this.__ready(e);else{var t=$gpb.namespace("badoo.bma"),i=new t.ServerGetLanguages;i.setLanguageListType(t.LanguageListType.LANGUAGE_LIST_TYPE_SPOKEN_MULTILANGUAGE),this.transport=new $gpb.Rpc(t.MessageType.SERVER_GET_LANGUAGES,i).on(t.MessageType.CLIENT_LANGUAGES,this.__on_languages_ready.bind(this,e),this),this.transport.request()}},__on_languages_ready:function(e,t,i){this.transport=null,B.Controls.LanguageListBmaOptions.languages=i.getLanguages();var o=$el.select(document,".js-rm-lng").map(function(e){return e.getAttribute("data-code")});this.__apply_filter(o)},__fill_default_item:function(){var e=B.Controls.LanguageListBmaOptions.languages.filter(function(e){return!this.__filter[e.getUid()]}.bind(this)),t=$u.dust.render("profile/block.languages",{ITEM:e.map(function(e,t){return{value:e.getUid(),name:e.getName(),_FIRST_CHILD:0==t}})},"SUGGEST");this.ready({q:"",locations:t,default_item:!0},!0)},__ready:function(e){var t=B.Controls.LanguageListBmaOptions.languages.filter(function(e){return!this.__filter[e.getUid()]}.bind(this)),i=$u.dust.render("profile/block.languages",{ITEM:t.filter(function(t){return 0==t.getName().toLowerCase().indexOf(e.toLowerCase())}).map(function(e,t){return{value:e.getUid(),name:e.getName(),_FIRST_CHILD:0==t}})},"SUGGEST");this.ready({q:e,locations:i,default_item:!1})},__apply_filter:function(e){this.__filter={};for(var t=0;t<e.length;t++)this.__filter[e[t]]=1;this.__fill_default_item()}}),B.Controls.LanguageListBma=$class(B.Controls.DataList,{name:"Controls.LanguageListBma",create_options:function(e){return new B.Controls.LanguageListBmaOptions({wrap_el:e})}}),$c.register("language-list",B.Controls.LanguageListBma)}B.HoN_v3.Profile.LanguagesView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.languages",set_data:function(e){var t=this._get_profile_option(e,"languages"),i=t&&t.getDisplayValue();return this._data=i||e.own_profile?e.own_profile?$config({languages:i,_EDIT:{},EDIT_FORM:{languages:"",ITEM:(e.profile.getSpokenLanguage()||[]).map(function(e){return{REMOVE_ITEM:{code:e.getUid()},text:e.getName()}}),languages_id:0}}):$config({languages:i}):null,this},get_result:function(){var e=$super(this,arguments);return e&&(e=e.replace('data-control-type="data-list"','data-control-type="language-list"')),e},get_response:function(){return $u.dust.render(this._tpl,{languages:this._data.languages})}}),function(){function e(e,c){return e.write('<div class="section section--profile js-editable-section js-wrap').section(c.get(["_EDITING"],!1),c,{block:t},{}).section(c.get(["_HIDE_MAP"],!1),c,{block:i},{}).write('"> <h2>Location</h2> ').section(c.get(["_EDIT_BUTTON"],!1),c,{block:o},{}).write(" ").section(c.get(["SHOW_HIDE_MAP_BUTTON"],!1),c,{block:s},{}).write(' <div class="section-editable"> <div class="section-editable__view"> <span class="js-location-label"> ').section(c.get(["_LOCATION"],!1),c,{block:n},{}).write(" ").section(c.get(["CITY"],!1),c,{block:r},{}).write(" ").section(c.get(["CITY_REGION"],!1),c,{block:a},{}).write(" ").section(c.get(["REGION_COUNTRY"],!1),c,{block:l},{}).write(" ").section(c.get(["DISTANCE"],!1),c,{block:_},{}).write(" </span> ").section(c.get(["CACHED_MAP"],!1),c,{block:p},{}).write(" </div> ").section(c.get(["EDIT_FORM"],!1),c,{block:T},{}).write(" </div> </div> ").section(c.get(["MAP_TOOLTIP"],!1),c,{block:S},{})}function t(e){return e.write(" active")}function i(e){return e.write(" hide")}function o(e){return e.write(' <div class="inline btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"> <i class="icon ico--pencil"></i> <span class="b-link js-editable-section-toggle" data-section-type="location"></span> </div> ')}function s(e){return e.write(' <div class="section__expand"> <span class="p-link section__expand-lnk section__expand-lnk--show js-toggle js-show-map" data-jst-class="hide">Show map</span> <span class="p-link section__expand-lnk section__expand-lnk--hide js-toggle" data-jst-class="hide">Hide map</span> </div> ')}function n(e,t){return e.reference("location",t)}function r(e,t){return e.write("<b>").reference("city",t).write("</b>")}function a(e,t){return e.write("<b>").reference("city",t).write("</b>, ").reference("region",t)}function l(e,t){return e.reference("region",t).write(", ").reference("country",t)}function _(e,t){return e.write(" (").reference("distance",t).write(" away)")}function p(e,t){return e.write(' <div class="location-map location-map--static"> <div class="location-map__cached"><img src="').reference("src",t).write('" alt="" class="js-map"></div> ').section(t.get(["VIEWER"],!1),t,{block:c},{}).write(" ").section(t.get(["OWNER"],!1),t,{block:g},{}).write(" </div> ")}function c(e,t){return e.write(" ").section(t.get(["RADIUS"],!1),t,{block:u},{}).write(" ").section(t.get(["ENABLE_BUTTON"],!1),t,{block:d},{}).write(" ")}function u(e){return e.write(' <div class="location-map__radius"></div> ')}function d(e,t){return e.write(' <div class="location-map__layer"> <b> ').section(t.get(["MALE"],!1),t,{block:h},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:b},{}).write(' </b> <div class="location-map__btn"> <div class="btn btn--sm btn--blue"> <i class="ico ico--xsm ico--white ico--location"> <span class="b-link js-location-distance-open"></span> ').section(t.get(["NON_AUTH"],!1),t,{block:E},{}).write(' </i><span class="btn-txt">Show on map</span> </div> </div> </div><span class="middle"></span> ')}function h(e,t){return e.write("See how close ").reference("name",t).write(" is to you")}function b(e,t){return e.write("See how close ").reference("name",t).write(" is to you")}function E(e,t){return e.write('<a href="').reference("sign_url",t).write('" class="b-link"></a>')}function g(e,t){return e.write(" ").section(t.get(["PIN"],!1),t,{block:m},{}).write(" ").section(t.get(["ENABLE_BUTTON"],!1),t,{block:f},{}).write(" ")}function m(e,t){return e.write(' <div class="location-map__pin"> <i class="ico ico--xxlg ico--color ico--location-xxlg"></i> <div class="tooltip tc active"> <span class="tooltip-txt">').reference("location_source",t).write("</span> </div> </div> ")}function f(e){return e.write(' <div class="location-map__layer"> <b>Set your location and see how close other users are to you!</b> <div class="location-map__btn"> <div class="btn btn--sm btn--blue"> <i class="ico ico--xsm ico--white ico--location"><span class="b-link js-location-distance-open"></span></i><span class="btn-txt">Set location</span> </div> </div> </div><span class="middle"></span> ')}function T(e,t){return e.write(' <div class="section-editable__edit"> <form method="post" action="').reference("form_action",t).write('" class="table"> ').section(t.get(["_SHOW_REAL_MAP"],!1),t,{block:v},{}).write(' <div class="table-cell"> ').reference("HTMLBLOCK_DATALIST_LOCATION",t,["s"]).write(' </div> <div class="table-cell"> <button type="submit" class="btn btn--sm btn--blue js-datalist-save" disabled> <span class="btn-txt">Save</span> </button> <div class="btn btn--sm btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-editable-section-cancel"></span> </div> </div> </form> ').section(t.get(["REAL_MAP"],!1),t,{block:O},{}).write(" ").section(t.get(["STATIC_MAP"],!1),t,{block:I},{}).write(" </div> ")}function v(e,t){return e.write(' <input type="hidden" name="lat" value="').reference("lat",t).write('"> <input type="hidden" name="lon" value="').reference("lon",t).write('"> ')}function O(e,t){return e.write(' <div class="location-map"> <div class="location-map__real"> <div class="map-zoom"> <div class="map-zoom__slider"> <a href="').reference("zoom_in",t).write('" id="zoom_in" class="map-zoom__in"></a> <div class="map-zoom__dash"> ').section(t.get(["_AREA"],!1),t,{block:y},{}).write(' </div> <div id="scale" class="map-zoom__scale"> <div id="slide_me" class="map-zoom__scale-me tooltip-no-js-wrap" style="top:').reference("pos",t).write('%"><span class="tooltip lc"><span id="slider_tooltip" class="tooltip-txt">').reference("area_tooltip",t).write('</span></span></div> </div> <a href="').reference("zoom_out",t).write('" id="zoom_out" class="map-zoom__out"></a> </div> </div> <div id="m_map" class="map-canvas"></div> </div> </div> ')}function y(e,t){return e.write('<i class="map-zoom__dash-it" style="top:').reference("i",t).write('%"></i>')}function I(e,t){return e.write(' <div class="location-map location-map--static"> <div class="location-map__cached"><img class="js-map" src="').reference("src",t).write('" alt=""></div> ').section(t.get(["PIN"],!1),t,{block:w},{}).write(" ").section(t.get(["ENABLE_BUTTON"],!1),t,{block:R},{}).write(" </div> ")
}function w(e,t){return e.write(' <div class="location-map__pin"> <i class="ico ico--xxlg ico--color ico--location-xxlg"></i> <div class="tooltip tc active"> <span class="tooltip-txt">').reference("location_source",t).write("</span> </div> </div> ")}function R(e){return e.write(' <div class="location-map__layer"> <b>Set your location and see how close other users are to you!</b> <div class="location-map__btn"> <div class="btn btn--sm btn--blue"> <i class="ico ico--xsm ico--white ico--location"><span class="b-link js-location-distance-open"></span></i><span class="btn-txt">Set location</span> </div> </div> </div><span class="middle"></span> ')}function S(e){return e.write(' <div class="tooltip-no-js-wrap map-tooltip"> <div id="locationTooltipHTML" class="tooltip tc active"> <span class="tooltip-txt">Drag the pin to adjust your location</span> </div> </div> ')}return $u.dust.register("profile/block.location",e),e.s={_EDITING:t,_HIDE_MAP:i,_EDIT_BUTTON:o,SHOW_HIDE_MAP_BUTTON:s,_LOCATION:n,CITY:r,CITY_REGION:a,REGION_COUNTRY:l,DISTANCE:_,CACHED_MAP:p,EDIT_FORM:T,MAP_TOOLTIP:S},p.s={VIEWER:c,OWNER:g},c.s={RADIUS:u,ENABLE_BUTTON:d},d.s={MALE:h,FEMALE:b,NON_AUTH:E},g.s={PIN:m,ENABLE_BUTTON:f},T.s={_SHOW_REAL_MAP:v,REAL_MAP:O,STATIC_MAP:I},O.s={_AREA:y},I.s={PIN:w,ENABLE_BUTTON:R},e}(),function(){function e(e,i){return e.section(i.get(["DATALIST_LOCATION"],!1),i,{block:t},{}).write(" ").section(i.get(["LIST"],!1),i,{block:f},{})}function t(e,t){return e.write(" ").section(t.get(["SIGNUP_ISOLATED_HINT"],!1),t,{block:i},{}).write(" ").section(t.get(["UPDATE_ISOLATED_HINT"],!1),t,{block:o},{}).write(' <div class="search-field').section(t.get(["_ACTIVE"],!1),t,{block:s},{}).section(t.get(["_ERROR"],!1),t,{block:n},{}).section(t.get(["_EMPTY"],!1),t,{block:r},{}).write(' js-location-list" ').section(t.get(["_CLIENT_SIDE"],!1),t,{block:a},{}).write(' data-url="').reference("url",t).write('" data-control-type="location-list"> <div class="search-field_"> <input type="hidden" name="location_id" value="').reference("location_id",t).write('"> <input type="text" id="location_field').reference("id",t).write('" class="input').section(t.get(["_SMALL"],!1),t,{block:_},{}).write('" value="').reference("location",t).write('" autocomplete="off" ').section(t.get(["_AUTOFOCUS"],!1),t,{block:p},{}).write(' placeholder="').reference("placeholder",t).write('" tabindex="').reference("tabindex",t).write('" ').section(t.get(["_DISABLE"],!1),t,{block:c},{}).write('> <i class="icon ico--grey ico--search"></i> <i class="icon ico--grey ico--cross-sm js-control-reset"></i> </div> ').section(t.get(["HINT"],!1),t,{block:u},{}).write(" ").section(t.get(["ERROR"],!1),t,{block:b},{}).write(' <div class="datalist bc"> <ul class="options"> ').reference("HTMLBLOCK_LIST",t,["s"]).write(' </ul> <div class="datalist-hint"> ').section(t.get(["MANUAL_SELECT_ENABLED"],!1),t,{block:E},{}).write(" ").section(t.get(["MANUAL_SELECT_DISABLED"],!1),t,{block:m},{}).write(" </div> </div> </div> ")}function i(e){return e.write("Your location is set automatically")}function o(e){return e.write("In this country, you can only use your actual location.")}function s(e){return e.write(" active")}function n(e){return e.write(" error")}function r(e){return e.write(" empty")}function a(e,t){return e.write(" data-client-side").section(t.get(["_SEARCH_COUNTRIES"],!1),t,{block:l},{})}function l(e){return e.write(" data-search-countries")}function _(e){return e.write(" input--sm")}function p(e){return e.write(" autofocus")}function c(e){return e.write(" disabled")}function u(e,t){return e.write(' <div class="input-hint"> ie:\n').section(t.get(["LINK"],!1),t,{block:d},{}).write(" ").section(t.get(["NO_LINK"],!1),t,{block:h},{}).write(" </div> ")}function d(e,t){return e.write(' <span tabindex="-1" class="p-link js-location-list-hint" data-value="').reference("location_id",t).write('" data-label="').reference("location_name",t).write('">').reference("location",t).write("</span> ")}function h(e,t){return e.write(" <span>").reference("location",t).write("</span> ")}function b(e,t){return e.write(' <div class="input-error">').reference("error",t).write("</div> ")}function E(e,t){return e.write(' <span class="lgrey datalist-hint__text">Enter a city name or</span><span class="lgrey datalist-hint__nothing">City not found. Try again or</span> ').section(t.get(["PLACE_DEFAULT"],!1),t,{block:g},{}).write(" ")}function g(e,t){return e.write(' <a href="').reference("more_location_url",t).write('" class="p-link js-ovl-open" data-ovl-url="').reference("more_location_url",t).write('" data-ovl-type="').reference("ovl_type",t).write('" tabindex="-1">select from the list</a> ')}function m(e){return e.write(' <span class="lgrey datalist-hint__text">Enter city name</span><span class="lgrey datalist-hint__nothing">City not found. Please try again.</span> ')}function f(e,t){return e.write(" ").section(t.get(["ITEM"],!1),t,{block:T},{}).write(" ")}function T(e,t){return e.write('<li class="option').section(t.get(["_FIRST_CHILD"],!1),t,{block:v},{}).write('" data-value="').reference("value",t).write('">').reference("HTMLBLOCK_CITY",t,["s"]).write("</li>")}function v(e){return e.write(" hover selected")}return $u.dust.register("components/block.datalist-location",e),e.s={DATALIST_LOCATION:t,LIST:f},t.s={SIGNUP_ISOLATED_HINT:i,UPDATE_ISOLATED_HINT:o,_ACTIVE:s,_ERROR:n,_EMPTY:r,_CLIENT_SIDE:a,_SMALL:_,_AUTOFOCUS:p,_DISABLE:c,HINT:u,ERROR:b,MANUAL_SELECT_ENABLED:E,MANUAL_SELECT_DISABLED:m},a.s={_SEARCH_COUNTRIES:l},u.s={LINK:d,NO_LINK:h},E.s={PLACE_DEFAULT:g},f.s={ITEM:T},T.s={_FIRST_CHILD:v},e}(),B.Controls.LocationList||(B.Controls.LocationList=$class(B.Controls.DataList,{name:"Controls.LocationList",global_collapse_time:0,local_collpase_time:0,hint_el:null,supress_expand:!1,init:function(){this.hint_el=this.get_element(this.wrap_el,"hint"),$super(this,arguments),B.on("hack:loc-ovl:done",this.on_ovl_done,this),B.on("hack:loc-ovl:closed",this.on_ovl_closed,this),this.hint_el&&this.hint_el.getAttribute("data-value")&&$e.add(this.hint_el,"click",this.hint_click,this)},destroy:function(){this.hint_el&&(this.hint_el.getAttribute("data-value")&&$e.del(this.hint_el,"click",this.hint_click,this),this.hint_el=null),B.un("hack:loc-ovl:done",this.on_ovl_done,this),B.un("hack:loc-ovl:closed",this.on_ovl_closed,this),$super(this,arguments)},set_options:function(e){this.options.set_options(e)},set_hint:function(e){this.hint_el.innerHTML=e},get_element:function(e,t){switch(t){case"hint":var i=$el.down(e,".js-location-list-hint");if(i)return i}return $super(this,arguments)},focus:function(){$super(this,arguments),$el.select_all(this.input_el)},collapse:function(){var e=+new Date;B.Controls.LocationList.global_collapse_time=e,this.local_collpase_time=e,this.supress_expand=!1,$super(this,arguments)},on_ovl_done:function(e,t){this.local_collpase_time==B.Controls.LocationList.global_collapse_time&&(this.input_el.focus(),this.change({value:e,text:t,label:t}),this.search(t),this.supress_expand=!0)},on_ovl_closed:function(){this.local_collpase_time==B.Controls.LocationList.global_collapse_time&&this.input_el.focus()},after_search:function(){return this.supress_expand?(this.supress_expand=!1,void 0):($super(this,arguments),void 0)},hint_click:function(e){this.change({value:e.getAttribute("data-value"),label:e.getAttribute("data-label")})}}),$c.register("location-list",B.Controls.LocationList)),B.Controls.LocationListBma||($gpb.exists("badoo.bma.Cities","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.Cities=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Cities",t.prototype._descriptor={fields:{cities:{type:11,type_name:"badoo.bma.City",number:1,label:3}}}}(),$gpb.exists("badoo.bma.ServerSearchLocations","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerSearchLocations=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerSearchLocations",t.prototype._descriptor={fields:{query:{type:9,number:1,label:1},with_regions:{type:8,number:3,label:1},limit:{type:5,number:2,label:1},with_countries:{type:8,number:4,label:1}}}}(),$gpb.exists("badoo.bma.ClientLocations","message")||($gpb.exists("badoo.bma.Location","message")||($gpb.exists("badoo.bma.LocationType","enum")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.LocationType=new $gpb.Enum("badoo.bma.LocationType");t._values=[1,2,3],t.LOCATION_TYPE_COUNTRY=1,t.LOCATION_TYPE_REGION=2,t.LOCATION_TYPE_CITY=3}(),function(){var e=$gpb.namespace("badoo.bma"),t=e.Location=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.Location",t.prototype._descriptor={fields:{country:{type:11,type_name:"badoo.bma.Country",number:2,label:1},region:{type:11,type_name:"badoo.bma.Region",number:3,label:1},type:{type:14,type_name:"badoo.bma.LocationType",number:1,label:1},city:{type:11,type_name:"badoo.bma.City",number:4,label:1}}}}()),function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientLocations=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientLocations",t.prototype._descriptor={fields:{locations:{type:11,type_name:"badoo.bma.Location",number:1,label:3}}}}()),B.Controls.LocationListBmaOptions=$class(B.Controls.DataListOptions,{name:"Controls.LocationListBmaOptions",search_countries:null,constructor:function(){$super(this,arguments),delete this.cache[""],this.request("")},request:function(e){var t=$gpb.namespace("badoo.bma"),i=this.__ready.bind(this,e);if(this.search_countries){var o=(new t.ServerSearchLocations).setWithCountries(!0).setQuery(e);this.transport=new $gpb.Rpc(t.MessageType.SERVER_SEARCH_LOCATIONS,o).on(t.MessageType.CLIENT_LOCATIONS,i,this)}else this.transport=new $gpb.Rpc(t.MessageType.SERVER_SEARCH_CITIES,(new t.String).setValue(e)).on(t.MessageType.CLIENT_FOUND_CITIES,i,this);this.transport.request()},__ready:function(e,t,i){var o=[];this.transport=null,i instanceof $p.Cities&&i.hasCities()?o=i.getCities().map(function(e){return{value:e.getId(),HTMLBLOCK_CITY:e.getName()}}):i instanceof $p.ClientLocations&&i.getLocations()&&(o=i.getLocations().map(function(e){var t=[],i=e.getCity(),o=i&&i.getId()||0,s=e.getRegion(),n=s&&s.getId()||0,r=e.getCountry(),a=r&&r.getId()||0;return i&&t.push(i.getName()),s&&t.push(s.getName()),r&&t.push(r.getName()),{value:[a,n,o].join("_"),HTMLBLOCK_CITY:t.join(", "),country_id:a,region_id:n,city_id:o,location_type:e.getType()}}));var s=$u.dust.render("components/block.datalist-location",{LIST:{ITEM:o.length?o:""}});this.ready({q:e,locations:s,default_item:!1},!0)}}),B.Controls.LocationListBma=$class(B.Controls.LocationList,{name:"Controls.LocationListBma",create_options:function(e){var t=void 0!=this.config.client_side;return t?new B.Controls.LocationListBmaOptions({search_countries:void 0!=this.config.search_countries,wrap_el:e}):$super(this,arguments)},on_ovl_done:function(e,t,i){var o=void 0!=this.config.search_countries?i:e;this.local_collpase_time==B.Controls.LocationList.global_collapse_time&&(this.input_el.focus(),this.change({value:o,text:t,label:t}),this.search(t),this.supress_expand=!0)}}),$c.register("location-list",B.Controls.LocationListBma)),B.HoN_v3.Profile.LocationView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.location",USE_MAPS:!0,USE_DYNAMIC_MAPS:!1,FULL_DISTANCE:"{city} ({distance})",get_full_distance:function(e,t){return e&&t?$u.tpl(this.FULL_DISTANCE,{city:e,distance:t}):t||e},set_data:function(e){var t=this._get_profile_option(e,"location"),i=e.person.getLocation(),o=e.status.getLocationKnown(),s=e.status.getDistanceShort(),n=e.status.getDistanceLong(),r=this.get_full_distance(n,s),a=this._getGeoLocation(e),l=this._isPositionAvailable(e.profile.getLocation()),_=B.Features.get("ALLOW_EDIT_LOCATION"),p=e.own_profile,c=e.distanceAllowed||!p,u=_&&_.enabled,d=p&&u,h=this._isPositionAvailable(a),b=o&&h,E=this._getStaticMap(e),g=E&&(p||!h||b),m=a&&_&&_.enabled&&h;return this.USE_MAPS||(m=E=g=!1),(!this.USE_DYNAMIC_MAPS||"edge"==$u.ua&&"rtl"===$el.dir())&&(m=!1),t=t&&t.getDisplayValue(),this._data=t||p?{_LOCATION:{location:r},_HIDE_MAP:h,SHOW_HIDE_MAP_BUTTON:h&&(o||p)&&l,CACHED_MAP:(g||h)&&c&&{src:!h&&E,ENABLE_BUTTON:!h&&{name:e.person.getName(),MALE:e.person.getGender()==$p.SexType.MALE,FEMALE:e.person.getGender()==$p.SexType.FEMALE},VIEWER:!e.own_profile&&(o||!h)&&{RADIUS:b},OWNER:p&&{PIN:h&&{location_source:a.getSource()}}},_EDIT_BUTTON:d,EDIT_FORM:d&&{REAL_MAP:m&&{pos:14},_SHOW_REAL_MAP:m&&{lon:a.getLongitude(),lat:a.getLatitude()},STATIC_MAP:!m&&g&&c&&{src:!h&&E,ENABLE_BUTTON:!h&&{name:e.person.getName(),MALE:e.person.getGender==$p.SexType.MALE,FEMALE:e.person.getGender==$p.SexType.FEMALE},PIN:p&&h&&{location_source:a.getSource()}},form_action:"/profile/"+e.user_id+"/ws/location/change",HTMLBLOCK_DATALIST_LOCATION:$u.dust.render("components/block.datalist-location",{_CLIENT_SIDE:!0,_SMALL:{},DATALIST_LOCATION:{location_id:i,location:t,place_holder:"location",tabindex:-1,MANUAL_SELECT_ENABLED:{PLACE_DEFAULT:{ovl_type:"hon-v3-location-bma"}},HTMLBLOCK_LIST:"",ERROR:{error:""}}})}}:null,this},_isPositionAvailable:function(e){return e&&e.getLatitude()},_getGeoLocation:function(e){return e.own_profile?e.profile.getLocation():e.curr_user.profile.getLocation()},_getStaticMap:function(e){var t=e.profile.getLocation();return t&&t.getDisplayImage()}}),function(){function e(e,i){return e.write('<div id="profile_score" class="profile-widget"><!-- -->').section(i.get(["CONTENT"],!1),i,{block:t},{}).write("<!-- --></div>")}function t(e,t){return e.write(' <h2>Score</h2> <div class="score-user"> ').section(t.get(["HAVE_SCORE"],!1),t,{block:i},{}).write(" ").section(t.get(["EMPTY_SCORE"],!1),t,{block:d},{}).write(" </div> ")}function i(e,t){return e.write(' <div class="inline"> ').reference("HTMLBLOCK_RATING",t,["s"]).write(' </div> <div class="inline score-user__txt"> ').section(t.get(["_DESCRIPTION"],!1),t,{block:o},{}).write(" ").section(t.get(["OTHER_PROFILE"],!1),t,{block:s},{}).write(" ").section(t.get(["SELF_PROFILE"],!1),t,{block:a},{}).write(' </div> <div class="btn-group btn-group--block score-user__btns"> ').section(t.get(["BUTTON_INCREASE"],!1),t,{block:p},{}).write(" ").section(t.get(["BUTTON_INCREASE_REQUEST"],!1),t,{block:c},{}).write(" ").section(t.get(["BUTTON_SHARE"],!1),t,{block:u},{}).write(" </div> ")}function o(e,t){return e.reference("description",t,["s"])}function s(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:n},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:r},{}).write(" ")}function n(e,t){return e.write("<b>").reference("people_rated_hot",t).write("</b> out of <b>").reference("people_rated_total",t).write("</b> ").reference("people",t).write(" ").reference("rated",t).write(" ").reference("name",t).write(" <b>Hot</b>")}function r(e,t){return e.write("<b>").reference("people_rated_hot",t).write("</b> out of <b>").reference("people_rated_total",t).write("</b> ").reference("people",t).write(" ").reference("rated",t).write(" ").reference("name",t).write(" <b>Hot</b>")}function a(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:l},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:_},{}).write(" ")}function l(e,t){return e.write("<b>").reference("people_rated_hot",t).write("</b> out of <b>").reference("people_rated_total",t).write("</b> ").reference("people",t).write(" ").reference("rated",t).write(" me <b>Hot</b>")}function _(e,t){return e.write("<b>").reference("people_rated_hot",t).write("</b> out of <b>").reference("people_rated_total",t).write("</b> ").reference("people",t).write(" ").reference("rated",t).write(" me <b>Hot</b>")}function p(e,t){return e.write('<div class="btn btn--sm btn--white"><span class="btn-txt">Increase</span><span class="b-link js-ovl-open" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("ovl_url",t).write('"></span></div>')}function c(e,t){return e.write('<div class="btn btn--sm btn--white"><span class="btn-txt">Increase</span><span class="b-link ').reference("js_profile_dialog_class",t).write('" data-control-type="').reference("control_type",t).write('" data-control-name="').reference("control_name",t).write('" tabindex="-1"></span></div>')}function u(e,t){return e.write('<div class="btn btn--sm btn--white"><span class="btn-txt">Share</span><span class="b-link js-ovl-open" data-ovl-type="hon-v3-score" data-ovl-url="').reference("url",t).write('"></span></div>')}function d(e,t){return e.write(' <div class="inline"> ').reference("HTMLBLOCK_RATING",t,["s"]).write(" </div> ").section(t.get(["NO_PHOTO"],!1),t,{block:h},{}).write(" ").section(t.get(["CALCULATING_OWN"],!1),t,{block:w},{}).write(" ").section(t.get(["CALCULATING_OTHER_FEMALE"],!1),t,{block:R},{}).write(" ").section(t.get(["CALCULATING_OTHER_MALE"],!1),t,{block:S},{}).write(" ").section(t.get(["_CALCULATING_BMA"],!1),t,{block:A},{}).write(" ")}function h(e,t){return e.write(' <div class="inline score-user__txt score-user__txt--top"> ').section(t.get(["_DESCRIPTION"],!1),t,{block:b},{}).write(" ").section(t.get(["ADD_THREE_PHOTOS"],!1),t,{block:E},{}).write(" ").section(t.get(["ADD_TWO_PHOTOS"],!1),t,{block:f},{}).write(" ").section(t.get(["ADD_ONE_PHOTO"],!1),t,{block:O},{}).write(' </div> <div class="score-user__btns"> <div class="btn btn--sm btn--block btn--white"> <span class="btn-txt">Add photos</span> <span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me"></span> </div> </div> ')}function b(e,t){return e.write('<span class="grey">').reference("description",t,["s"]).write("</span>")}function E(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:g},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:m},{}).write(" ")}function g(e){return e.write('<span class="grey"><b>Add 3 photos showing only you</b> and find out how Hot you are!</span>')}function m(e){return e.write('<span class="grey"><b>Add 3 photos showing only you</b> and find out how Hot you are!</span>')}function f(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:T},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:v},{}).write(" ")}function T(e){return e.write('<span class="grey"><b>Add 2 more photos showing only you</b> and find out how Hot you are!</span>')}function v(e){return e.write('<span class="grey"><b>Add 2 more photos showing only you</b> and find out how Hot you are!</span>')}function O(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:y},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:I},{}).write(" ")}function y(e){return e.write('<span class="grey"><b>Add just 1 more photos showing only you</b> and find out how Hot you are!</span>')}function I(e){return e.write('<span class="grey"><b>Add just 1 more photos showing only you</b> and find out how Hot you are!</span>')}function w(e){return e.write(' <div class="inline score-user__txt"> <span class="grey"><b>Your new photos are being rated.</b> Rate other people and get rated back!</span> </div> ')}function R(e,t){return e.write(' <div class="inline score-user__txt"> <span class="grey">').reference("name",t).write(" doesn't have her score yet</span> </div> ")}function S(e,t){return e.write(' <div class="inline score-user__txt"> <span class="grey">').reference("name",t).write(" doesn't have his score yet</span> </div> ")}function A(e,t){return e.write(' <div class="inline score-user__txt"> ').section(t.get(["_DESCRIPTION"],!1),t,{block:P},{}).write(" </div> ")}function P(e,t){return e.write('<span class="grey">').reference("description",t,["s"]).write("</span>")}return $u.dust.register("profile/block.score",e),e.s={CONTENT:t},t.s={HAVE_SCORE:i,EMPTY_SCORE:d},i.s={_DESCRIPTION:o,OTHER_PROFILE:s,SELF_PROFILE:a,BUTTON_INCREASE:p,BUTTON_INCREASE_REQUEST:c,BUTTON_SHARE:u},s.s={MALE:n,FEMALE:r},a.s={MALE:l,FEMALE:_},d.s={NO_PHOTO:h,CALCULATING_OWN:w,CALCULATING_OTHER_FEMALE:R,CALCULATING_OTHER_MALE:S,_CALCULATING_BMA:A},h.s={_DESCRIPTION:b,ADD_THREE_PHOTOS:E,ADD_TWO_PHOTOS:f,ADD_ONE_PHOTO:O},E.s={MALE:g,FEMALE:m},f.s={MALE:T,FEMALE:v},O.s={MALE:y,FEMALE:I},A.s={_DESCRIPTION:P},e}(),function(){function e(e,s){return e.write('<div class="scale').section(s.get(["_LARGE"],!1),s,{block:t},{}).section(s.get(["_SMALL"],!1),s,{block:i},{}).write(' js-profile-score" data-control-type="score" data-score="').reference("rating",s).write('" data-delimiter="').reference("delimiter",s).write('" data-digits-count="').reference("digits_count",s).write('" data-line-width="').reference("line_width",s).write('" data-size="').reference("size",s).write('" data-style="').reference("style",s).write('" ').section(s.get(["_ANIMATION"],!1),s,{block:o},{}).write(' data-background="').helper("version",s,{},{url:"/v2/-/-/i/hotornot_v2/ui/scale.5.png"}).write('"> <b class="scale-value">').reference("rating",s).write("</b> </div>")}function t(e){return e.write(" scale--lg")}function i(e){return e.write(" scale--sm")}function o(e,t){return e.write('data-timing="').reference("animation_time",t).write('" ')}return $u.dust.register("components/block.score",e),e.s={_LARGE:t,_SMALL:i,_ANIMATION:o},e}(),B.HoN_v3.Profile.ScoreView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.score",_score_tpl:"components/block.score",set_data:function(e){var t=e.profile.getProfileScore(),i=t&&t.getScore(),o=B.Features.get("ALLOW_PROFILE_RATING"),s=B.HoN_v3.Partner.match("vk");if(this._data={CONTENT:{}},e.own_profile){if(i)this._data.CONTENT.HAVE_SCORE={HTMLBLOCK_RATING:this._build_block_rating(i),BUTTON_INCREASE:!s&&{ovl_type:"hon-import-overlay",ovl_url:"/import/score.phtml"},BUTTON_SHARE:!s&&{url:"/ws/hotornot/new-score-rating.phtml?from_profile=1"},BUTTON_INCREASE_REQUEST:!1},this._data.CONTENT._DESCRIPTION={description:t.getDescription()};else if(o.enabled===!1){var n=2==o.required_action,r=o.display_message;this._data.EMPTY_SCORE={HTMLBLOCK_RATING:this._build_block_rating(0),_DESCRIPTION:{description:r}},n?this._data.EMPTY_SCORE.NO_PHOTO={_DESCRIPTION:{description:r}}:this._data.EMPTY_SCORE._CALCULATING_BMA={_DESCRIPTION:{description:r}}}}else i?this._data.CONTENT={HAVE_SCORE:{HTMLBLOCK_RATING:this._build_block_rating(i)},_DESCRIPTION:{description:t.getDescription()}}:this._data=null;return this},_build_block_rating:function(e){return $u.dust.render(this._score_tpl,{rating:e/100,delimiter:$l.decimal_mark,digits_count:2,line_width:7,size:70,style:"LIGHT",_ANIMATION:{animation_time:0},_SMALL:!0})}}),function(){function e(e,i){return e.write('<div class="section section--profile"> <h2>Interests</h2> <div id="js-profile-interests" class="profile-friends"> ').section(i.get(["INTERESTS"],!1),i,{block:t},{}).write(" </div> </div>")}function t(e,t){return e.write("<!-- -->").section(t.get(["_INTEREST"],!1),t,{block:i},{}).write("<!-- -->").section(t.get(["MORE"],!1),t,{block:s},{}).write(" ")}function i(e,t){return e.write('<div class="brick-wrap').section(t.get(["_HIDDEN"],!1),t,{block:o},{}).write('"> <div class="brick brick--xlg disabled tooltip-wrap" data-control-type="tooltip"> <div class="brick-img"><img src="').reference("interest_pic",t).write('" alt="" width="90" height="90"></div> <div class="tooltip"><span class="tooltip-txt">').reference("title",t).write('</span></div> </div> <div class="brick-txt"><span class="brick-txt_">').reference("title",t).write("</span></div> </div>")}function o(e){return e.write(" hidden")}function s(e){return e.write('<div class="brick-wrap profile-interests__more js-profile-interests-tgl-wrap"> <div class="brick brick--xlg brick--grey"> <i class="ico ico--lg ico--white ico--etc-lg"></i> </div> <div class="grey brick-txt">Show more</div> <span class="b-link js-profile-interests-toggle"></span> </div>')}return $u.dust.register("profile/block.facebook-interests",e),e.s={INTERESTS:t},t.s={_INTEREST:i,MORE:s},i.s={_HIDDEN:o},e}(),B.HoN_v3.Profile.FacebookInterestsView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.facebook-interests",constructor:function(){$super(this,arguments),this.interests=new B.HoN_v3.MoreInterests},destroy:function(){$super(this,arguments),this.interests.destroy()},set_data:function(e){var t=e.profile.getExperimentalExternalInterests();if(t&&t.length){var i=5,o=t.length>i;this._data={INTERESTS:{_INTEREST:t.map(function(e,t){return{_HIDDEN:o&&t>i-2,interest_pic:e.getPictureUrl(),title:e.getTitle()}}),MORE:o}}}else this._data=null;return this}}),function(){function e(e,l){return e.write('<div class="section section--profile').section(l.get(["_EDITING"],!1),l,{block:t},{}).write(' js-editable-section"> <h2 class="js-interests-board" data-interests-type="header">').reference("header",l).write("</h2> ").section(l.get(["_EDIT"],!1),l,{block:i},{}).write(' <div class="section-editable"> <div class="js-interests-list-wrap js-interests-board js-wrap" data-interests-type="hon-all"> ').reference("HTMLBLOCK_INTERESTS_LIST",l,["s"]).write(" ").section(l.get(["_SHOW_ALL"],!1),l,{block:o},{}).write(" ").section(l.get(["_MORE"],!1),l,{block:s},{}).write(" ").section(l.get(["_MORE_UNAUTH"],!1),l,{block:n},{}).write(" ").section(l.get(["_MORE_UNAUTH_BADOO"],!1),l,{block:r},{}).write(" </div> ").section(l.get(["EDIT_FORM"],!1),l,{block:a},{}).write(" </div> </div>")}function t(e){return e.write(" active")}function i(e){return e.write('<div class="btn btn--sm btn--white btn--ico btn-edit js-editable-section-btn"><i class="icon ico--pencil"></i><a class="b-link js-editable-section-toggle" data-section-type="interests"></a></div>')}function o(e){return e.write('<div class="btn btn--sm btn--white btn--ico show"><i class="icon ico--etc"><a class="b-link js-toggle" data-jst-class="is-shown"></a></i></div>')}function s(e,t){return e.write('<div class="btn btn--sm btn--white btn--ico"><i class="icon ico--etc"><a class="b-link js-interests-showall" data-interests-all_url="').reference("more_link",t).write('"></a></i></div>')}function n(e,t){return e.write('<div class="btn btn--sm btn--white btn--ico"><i class="icon ico--etc"><span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("ovl_url",t).write('"></span></i></div>')}function r(e,t){return e.write('<div class="btn btn--sm btn--white btn--ico"><i class="icon ico--etc"><a href="').reference("sign_url",t).write('" class="b-link"></a></i></div>')}function a(e,t){return e.write(' <div class="section-editable__edit"> <form method="post" action="').reference("form_action",t).write('"> ').reference("HTMLBLOCK_DATALIST_INTERESTS",t,["s"]).write(' <div class="interests-choose js-interests-mostpop"> ').section(t.get(["CHOOSE_LINK"],!1),t,{block:l},{}).write(' <div id="interests-mostpop-list" class="profile-intr-list js-fx-wrap').section(t.get(["_CHOOSE"],!1),t,{block:_},{}).write('"> <div class="js-fx-content js-interests-chooser_wrap"> ').reference("HTMLBLOCK_INTEREST_CHOOSE",t,["s"]).write(' </div> </div> </div> <div class="profile-edit__btn-right"> <div class="btn btn--sm btn--blue"><span class="btn-txt">Done</span><i class="b-link js-editable-section-toggle" data-section-type="interests"></i></div> </div> </form> </div> ')}function l(e,t){return e.write(' <span class="interests-choose__title"> Or choose from the list<i class="icon ico--grey ico--arrow-r"></i>\r\n<span class="b-link js-interests-toggle" data-fx-wrap="interests-mostpop-list" data-interests-chooser_url="').reference("choose_url",t).write('"></span>\n</span> ')}function _(e){return e.write(" fx")}return $u.dust.register("profile/block.interests",e),e.s={_EDITING:t,_EDIT:i,_SHOW_ALL:o,_MORE:s,_MORE_UNAUTH:n,_MORE_UNAUTH_BADOO:r,EDIT_FORM:a},a.s={CHOOSE_LINK:l,_CHOOSE:_},e}(),function(){function e(e,i){return e.section(i.get(["ITEM"],!1),i,{block:t},{})}function t(e,t){return e.write('<span class="js-intr intr').section(t.get(["_HIDDEN"],!1),t,{block:i},{}).section(t.get(["_MATCH"],!1),t,{block:o},{}).section(t.get(["_COPY"],!1),t,{block:s},{}).section(t.get(["_NEW"],!1),t,{block:n},{}).section(t.get(["_WRONG"],!1),t,{block:r},{}).write('" ').section(t.get(["_TOOLTIP"],!1),t,{block:a},{}).write("> ").reference("HTMLBLOCK_INTEREST_ICON",t,["s"]).write('<!-- --><span class="intr-txt').section(t.get(["_THIRD"],!1),t,{block:l},{}).write('">').reference("text",t).write("</span>").section(t.get(["REMOVE_ITEM"],!1),t,{block:_},{}).write(" ").section(t.get(["NEW_TOOLTIP"],!1),t,{block:p},{}).write(" ").section(t.get(["WRONG_TOOLTIP"],!1),t,{block:c},{}).write(" </span>")}function i(e){return e.write(" hidden")}function o(e){return e.write(" intr--match")}function s(e){return e.write(" intr--copy")}function n(e){return e.write(" intr--new")}function r(e){return e.write(" intr--wrong")}function a(e){return e.write(' data-control-type="tooltip"')}function l(e){return e}function _(e,t){return e.write('<!-- --><span class="intr-ico intr-ico--rm"> <a data-interests-id="').reference("id",t).write('" class="b-link js-interests-remove"></a> </span>')}function p(e){return e.write(' <span class="tooltip"> <span class="tooltip-txt">This interest will appear on your profile once we\'ve reviewed it.</span> </span> ')}function c(e,t){return e.write(' <span class="tooltip"> <span class="tooltip-txt">This interest does not comply with ').reference("PAGE_partner_name",t).write(" Guidelines and cannot be added to your profile.</span> </span> ")}return $u.dust.register("interests/block.interest-item",e),e.s={ITEM:t},t.s={_HIDDEN:i,_MATCH:o,_COPY:s,_NEW:n,_WRONG:r,_TOOLTIP:a,_THIRD:l,REMOVE_ITEM:_,NEW_TOOLTIP:p,WRONG_TOOLTIP:c},e}(),function(){function e(e,i){return e.section(i.get(["ITEM"],!1),i,{block:t},{})}function t(e,t){return e.write('<span class="intr intr--stub">').reference("HTMLBLOCK_INTEREST_ICON",t,["s"]).write('<span class="intr-txt">Interest ').reference("num",t).write("</span></span>")}return $u.dust.register("interests/block.interest-item-stub",e),e.s={ITEM:t},e}(),function(){function e(e,h){return e.write('<i class="intr-ico').section(h.get(["_FOOD"],!1),h,{block:t},{}).section(h.get(["_MUSIC"],!1),h,{block:i},{}).section(h.get(["_CINEMA"],!1),h,{block:o},{}).section(h.get(["_FASHION"],!1),h,{block:s},{}).section(h.get(["_SPORTS"],!1),h,{block:n},{}).section(h.get(["_TRAVEL"],!1),h,{block:r},{}).section(h.get(["_JOBS"],!1),h,{block:a},{}).section(h.get(["_GAMES"],!1),h,{block:l},{}).section(h.get(["_HOBBY"],!1),h,{block:_},{}).section(h.get(["_BOOKS"],!1),h,{block:p},{}).section(h.get(["_OTHER"],!1),h,{block:c},{}).section(h.get(["_NEW"],!1),h,{block:u},{}).section(h.get(["_WRONG"],!1),h,{block:d},{}).write('"></i>')}function t(e){return e.write(" intr-ico--food")}function i(e){return e.write(" intr-ico--music")}function o(e){return e.write(" intr-ico--cinema")}function s(e){return e.write(" intr-ico--fashion")}function n(e){return e.write(" intr-ico--sports")}function r(e){return e.write(" intr-ico--travel")}function a(e){return e.write(" intr-ico--jobs")}function l(e){return e.write(" intr-ico--games")}function _(e){return e.write(" intr-ico--hobby")}function p(e){return e.write(" intr-ico--books")}function c(e){return e.write(" intr-ico--other")}function u(e){return e.write(" intr-ico--new")}function d(e){return e.write(" intr-ico--wrong")}return $u.dust.register("interests/block.interests-icons",e),e.s={_FOOD:t,_MUSIC:i,_CINEMA:o,_FASHION:s,_SPORTS:n,_TRAVEL:r,_JOBS:a,_GAMES:l,_HOBBY:_,_BOOKS:p,_OTHER:c,_NEW:u,_WRONG:d},e}(),function(){function e(e,r){return e.write('<div class="search-field').section(r.get(["_DISABLED_BLOCK"],!1),r,{block:t},{}).write(' js-interests-list" data-suggest-url="').reference("url",r).write('" ').section(r.get(["_CLIENT_SIDE"],!1),r,{block:i},{}).write(' data-control-type="interests-list"> <div class="search-field_"> <input type="hidden" name="interest_id" value=""> <input type="text" name="interest" value="" maxlength="50" autocomplete="off" ').section(r.get(["_AUTOFOCUS"],!1),r,{block:o},{}).write(' placeholder="').reference("placeholder",r).write('" ').section(r.get(["_DISABLED"],!1),r,{block:s},{}).write(' class="input input--sm"> <i class="icon ico--grey ico--search"></i> <div class="datalist bc"> <ul class="options"> ').reference("HTMLBLOCK_LIST",r,["s"]).write(' </ul> <div class="datalist-hint"> <span class="datalist-hint__text lgrey">').reference("hint",r).write('</span> <span class="datalist-hint__add lgrey">Add &quot;<a href="#" class="p-link js-ovl-open js-interests-list-ovl-link" data-ovl-type="hon-v3-add-interest" data-ovl-url="" tabindex="1"></a>&quot; as new interest</span> </div> </div> </div> ').section(r.get(["LIST"],!1),r,{block:n},{}).write(" </div>")
}function t(e){return e.write(" disabled")}function i(e){return e.write(" data-client-side")}function o(e){return e.write(" autofocus")}function s(e){return e.write(" disabled")}function n(e,t){return e.write(" ").section(t.get(["ITEM"],!1),t,{block:r},{}).write(" ")}function r(e,t){return e.write(' <li class="option').section(t.get(["_FIRST_CHILD"],!1),t,{block:a},{}).section(t.get(["_DISABLED"],!1),t,{block:l},{}).write('" data-value="').reference("value",t).write('">').reference("HTMLBLOCK_INTEREST_ICON",t,["s"]).reference("name",t).write("</li> ")}function a(e){return e.write(" hover selected")}function l(e){return e.write(" disabled")}return $u.dust.register("interests/block.datalist-interests",e),e.s={_DISABLED_BLOCK:t,_CLIENT_SIDE:i,_AUTOFOCUS:o,_DISABLED:s,LIST:n},n.s={ITEM:r},r.s={_FIRST_CHILD:a,_DISABLED:l},e}(),B.Controls.InterestsList||(B.Controls.InterestsList=$class(B.Controls.DataList,{name:"Controls.InterestsList",link_el:null,data_block_el:null,suggest_url:"",search_mode:!1,init:function(){this.link_el=this.get_element(this.wrap_el,"link"),this.data_block_el=this.get_element(this.wrap_el,"hint"),this.suggest_url=this.wrap_el.getAttribute("data-suggest-url"),this.search_mode=this.wrap_el.hasAttribute("data-search-mode"),$super(this,arguments),this.options.on({"ovl-url-updated":this.ovl_url_updated,addable:this.show_add_block,"not-addable":this.hide_add_block},this),this.$b=B.on({"interests-refresh":this.reset},this)},destroy:function(){this.link_el=this.data_block_el=null,B.un(this.$b),$super(this,arguments)},set_value:function(e){$super(this,arguments),""===e&&this.collapse(),e&&(this.search_mode?B.fire("search:interest-add",e):B.fire("interests-add",e),this.reset(),this.focus())},get_element:function(e,t){switch(t){case"link":return $el.down(e,".js-interests-list-ovl-link")}return $super(this,arguments)},create_options:function(e){return new B.Controls.InterestsListOptions({wrap_el:e,url:this.suggest_url})},ovl_url_updated:function(e,t){this.link_el.setAttribute("data-ovl-url",e),this.link_el.innerHTML=t,this.show_add_block()},hide_add_block:function(){$el.add(this.data_block_el,"hidden")},show_add_block:function(){$el.del(this.data_block_el,"hidden")}}),B.Controls.InterestsListOptions=$class(B.Controls.DataListOptions,{name:"Controls.InterestsListOptions",ready:function(e){"add_interest_ovl_url"in e?this.fire("ovl-url-updated",e.add_interest_ovl_url,e.text):"default_item"in e?this.fire("addable"):this.fire("not-addable"),$super(this,arguments),e.q&&delete this.cache[e.q]}}),$c.register("interests-list",B.Controls.InterestsList)),B.Controls.InterestsListBma||($gpb.exists("badoo.bma.ClientInterests","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ClientInterests=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ClientInterests",t.prototype._descriptor={fields:{interests:{type:11,type_name:"badoo.bma.Interest",number:2,label:3},total:{type:5,number:3,label:1},search_filter:{type:9,number:6,label:1},summary:{type:9,number:5,label:1},is_rejected:{type:8,number:9,label:1},offset:{type:5,number:8,label:1},user_id:{type:9,number:1,label:1},group_id:{type:5,number:4,label:1},order:{type:14,type_name:"badoo.bma.InterestSortOrder",number:7,label:1}}}}(),B.Controls.InterestsListBmaOptions=$class(B.Controls.InterestsListOptions,{name:"Controls.InterestsListBmaOptions",constructor:function(){$super(this,arguments),delete this.cache[""],this.request("")},request:function(e){var t=$gpb.namespace("badoo.bma"),i=new t.String;i.setValue(e),this.transport=new $gpb.Rpc(t.MessageType.SERVER_INTERESTS_SUGGEST,i).on(t.MessageType.CLIENT_INTERESTS,this.__ready.bind(this,e),this),this.transport.request()},__ready:function(e,t,i){this.transport=null;var o=$u.dust.render("components/block.datalist-location",{LIST:{ITEM:i.hasInterests()?i.getInterests().map(function(e){return{value:1,name:e.getName()}}):""}});this.ready({q:e,locations:o,default_item:!1})}}),B.Controls.InterestsListBma=$class(B.Controls.InterestsList,{name:"Controls.InterestsListBma",create_options:function(e){var t=void 0!=this.config.client_side;return t?new B.Controls.InterestsListBmaOptions({wrap_el:e}):$super(this,arguments)}}),$c.register("interests-list",B.Controls.InterestsListBma)),$l.register({section:"hon/interests",lang:"en-us",translations:{TIP_START_TYPE_HERE:"Search for interests"}}),B.HoN_v3.Profile.InterestsView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.interests",_item_tpl:"interests/block.interest-item",_api_url_tpl:"/profile/0{user_id}/ws/interests/{command}",_groups_map:{10:"_FOOD",11:"_MUSIC",12:"_CINEMA",13:"_FASHION",14:"_SPORTS",15:"_TRAVEL",16:"_JOBS",17:"_GAMES",18:"_HOBBY",19:"_BOOKS",20:"_OTHER"},_interests_stubs_length:8,_get_items:function(e,t){var i=this._groups_map,o=e.length>13;return $u.dust.render(this._item_tpl,{ITEM:e.map(function(e,s){var n={};return n[i[e.getGroupId()]]=!0,n._NEW=e.getIsHidden(),n._WRONG=e.getIsRejected(),{_MATCH:e.getIsMatched(),_COPY:!1,_NEW:n._NEW,_WRONG:n._WRONG,_TOOLTIP:n._NEW||n._WRONG,_HIDDEN:o&&s>=12,HTMLBLOCK_INTEREST_ICON:$u.dust.render("interests/block.interests-icons",n),REMOVE_ITEM:t&&{id:e.getInterestId()},NEW_TOOLTIP:n._NEW&&!n._WRONG,WRONG_TOOLTIP:n._WRONG,PAGE_partner_name:$l.get("partner","title"),text:e.getName()}})})},_check_feature:function(){var e=B.Features.get("ALLOW_INTERESTS");return e&&e.enabled},_get_stubs:function(e){var t=this._groups,i=0,o="";if(t&&t.length)for(;e>i;i++){var s={};s[this._groups_map[t[i].getGroupId()]]=!0,o+=$u.dust.render("interests/block.interest-item-stub",{HTMLBLOCK_INTEREST_ICON:$u.dust.render("interests/block.interests-icons",s),num:this._interests_stubs_length-e+i+1},"ITEM")}return o},set_groups:function(e){return this._groups=e,this},set_data:function(e){var t=B.Features.get("ALLOW_INTERESTS"),i=e.profile.getInterests(),o=null,s=t&&t.enabled&&e.own_profile;if((!i||!i.length)&&!s||o&&o.length)this._data=null;else{i=i||[];var n=i.length>13;this._data={_SHOW_ALL:n,header:i.length?i.length+" "+$l.get_num_dependent("interest",i.length):$l.get("hon/profile","HON_CATEGORY").NO_INTERESTS,HTMLBLOCK_INTERESTS_LIST:this._get_items(i,e.own_profile),_EDIT:s,EDIT_FORM:s&&{form_action:"",HTMLBLOCK_DATALIST_INTERESTS:this._get_datalist(e.uid),CHOOSE_LINK:{choose_url:this._get_api_url(e.uid,"choose")},HTMLBLOCK_INTEREST_CHOOSE:""},interests:i},s&&!i.length&&(this._data.HTMLBLOCK_INTERESTS_LIST=this._get_stubs(this._interests_stubs_length))}return this},_get_datalist:function(e){return $u.dust.render("interests/block.datalist-interests",{_DISABLED_BLOCK:!1,_AUTOFOCUS:!1,_DISABLED:!1,HTMLBLOCK_LIST:"",url:this._get_api_url(e,"suggest"),placeholder:$l.get("hon/interests","TIP_START_TYPE_HERE"),hint:$l.get("hon/interests","TIP_START_TYPE_HERE")})},_get_api_url:function(e,t){return $u.tpl(this._api_url_tpl,{user_id:e,command:t})}}),function(){function e(e,o){return e.write('<div class="profile-widget').section(o.get(["_HIDE"],!1),o,{block:t},{}).write(' js-wrap"> ').section(o.get(["HAVE_AWARD"],!1),o,{block:i},{}).write(" ").section(o.get(["EMPTY_AWARD"],!1),o,{block:b},{}).write(" </div>")}function t(e){return e.write(" hide")}function i(e,t){return e.write(" <h2>").reference("num_awards",t).write(" ").reference("awards",t).write("</h2> ").section(t.get(["SHOW_ALL"],!1),t,{block:o},{}).write(' <div class="profile-widget__items awards-list').section(t.get(["_COMPACT"],!1),t,{block:s},{}).write('"> ').section(t.get(["AWARD"],!1),t,{block:n},{}).write(" </div> ").section(t.get(["MORE_AWARDS"],!1),t,{block:d},{}).write(" ").section(t.get(["GET_AWARDS"],!1),t,{block:h},{}).write(" ")}function o(e){return e.write(' <div class="profile-widget__expand"> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--show js-toggle" data-jst-class="hide">Show all</span> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--hide js-toggle" data-jst-class="hide">Hide all</span> </div> ')}function s(e){return e.write(" awards-list--compact")}function n(e,t){return e.write('<div class="profile-widget__item awards-item"> <div class="inline award').section(t.get(["_ACTIVE"],!1),t,{block:r},{}).section(t.get(["_INACTIVE"],!1),t,{block:a},{}).write(' tooltip-wrap" data-control-type="tooltip"> ').section(t.get(["_AWARD_IMG"],!1),t,{block:l},{}).write(" ").section(t.get(["_POPUP"],!1),t,{block:_},{}).write(" ").section(t.get(["_NONAUTH_POPUP"],!1),t,{block:p},{}).write(" ").section(t.get(["_NONAUTH_POPUP_BADOO"],!1),t,{block:c},{}).write(' <div class="tooltip"><span class="tooltip-txt">').reference("tooltip_text",t).write('</span></div> </div> <div class="inline awards-item__txt"> <b>').reference("award_text",t).write("</b> ").section(t.get(["AWARD_DATE"],!1),t,{block:u},{}).write(" </div> </div>")}function r(e){return e.write(" active")}function a(e){return e.write(" inactive")}function l(e,t){return e.write('<img src="').reference("award_src",t).write('" alt="" width="70" height="70">')}function _(e,t){return e.write('<span class="b-link js-award-show" data-award-id="').reference("award_id",t).write('"></span>')}function p(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("ovl_url",t).write('"></span>')}function c(e,t){return e.write('<a href="').reference("sign_url",t).write('" class="b-link"></a>')}function u(e,t){return e.write(' <div><span class="grey">').reference("award_date",t).write("</span></div> ")}function d(e,t){return e.write(' <div class="btn btn--sm btn--white btn--block"><span class="btn-txt">Get more awards</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div> ')}function h(e,t){return e.write(' <div class="btn btn--sm btn--white btn--block"><span class="btn-txt">Get awards</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div> ')}function b(e,t){return e.write(' <h2>Awards</h2> <div class="awards-item awards-item--empty"> <i class="inline award"></i> <div class="inline awards-item__txt"> <p class="grey">You don\'t have any awards yet. Start playing the game to earn awards.</p> </div> ').section(t.get(["GET_AWARDS"],!1),t,{block:E},{}).write(" </div> ")}function E(e,t){return e.write(' <div> <div class="btn btn--sm btn--block btn--white"><span class="btn-txt">Get awards</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div> </div> ')}return $u.dust.register("profile/block.awards",e),e.s={_HIDE:t,HAVE_AWARD:i,EMPTY_AWARD:b},i.s={SHOW_ALL:o,_COMPACT:s,AWARD:n,MORE_AWARDS:d,GET_AWARDS:h},n.s={_ACTIVE:r,_INACTIVE:a,_AWARD_IMG:l,_POPUP:_,_NONAUTH_POPUP:p,_NONAUTH_POPUP_BADOO:c,AWARD_DATE:u},b.s={GET_AWARDS:E},e}(),function(){function e(e,i){return e.write('<div class="ovl-body"> <div class="ovl-promo"> ').section(i.get(["AWARD"],!1),i,{block:t},{}).write(" ").section(i.get(["_AWARD"],!1),i,{block:T},{}).write(" </div> ").section(i.get(["SELF_EXISTING_AWARD"],!1),i,{block:v},{}).write(" ").section(i.get(["SELF_EARNED_AWARD"],!1),i,{block:R},{}).write(" ").section(i.get(["VIEWER_AWARD"],!1),i,{block:N},{}).write(' <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(' <i class="award award--full ').section(t.get(["_ACTIVE"],!1),t,{block:i},{}).write(" ").section(t.get(["_MATCHED"],!1),t,{block:o},{}).write(" ").section(t.get(["_HOTTEST"],!1),t,{block:s},{}).write(" ").section(t.get(["_PICKY"],!1),t,{block:n},{}).write(" ").section(t.get(["_VOTER"],!1),t,{block:r},{}).write(" ").section(t.get(["_CHATTY"],!1),t,{block:a},{}).write(" ").section(t.get(["_CHECKED"],!1),t,{block:l},{}).write(" ").section(t.get(["_FRIENDLY"],!1),t,{block:_},{}).write(" ").section(t.get(["_LIKED"],!1),t,{block:p},{}).write(" ").section(t.get(["_PROFILE_COMPLETE"],!1),t,{block:c},{}).write(" ").section(t.get(["_FB_STAR"],!1),t,{block:u},{}).write(" ").section(t.get(["_TW_STAR"],!1),t,{block:d},{}).write(" ").section(t.get(["_GLOBE"],!1),t,{block:h},{}).write(" ").section(t.get(["_INVITER"],!1),t,{block:b},{}).write(" ").section(t.get(["_LANGUAGE"],!1),t,{block:E},{}).write(" ").section(t.get(["_SCORE"],!1),t,{block:g},{}).write(" ").section(t.get(["_VIP"],!1),t,{block:m},{}).write(" ").section(t.get(["_PHOTO_OF_THE_DAY"],!1),t,{block:f},{}).write(' "></i> ')}function i(e){return e.write("award--active")}function o(e){return e.write("award--matched")}function s(e){return e.write("award--hottest")}function n(e){return e.write("award--picky")}function r(e){return e.write("award--voter")}function a(e){return e.write("award--chatty")}function l(e){return e.write("award--checked")}function _(e){return e.write("award--friendly")}function p(e){return e.write("award--liked")}function c(e){return e.write("award--profile-complete")}function u(e){return e.write("award--fb-star")}function d(e){return e.write("award--tw-star")}function h(e){return e.write("award--globe")}function b(e){return e.write("award--inviter")}function E(e){return e.write("award--language")}function g(e){return e.write("award--score")}function m(e){return e.write("award--vip")}function f(e){return e.write("award--photo")}function T(e,t){return e.write(' <img src="').reference("img_src",t).write('" alt="" width="320" height="320"> ')}function v(e,t){return e.write(' <div class="ovl-content"> <h1>').reference("award_name",t).write('</h1> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:O},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:y},{}).write(' </p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_ACTIVATE_AWARDS"],!1),t,{block:I},{}).write(" ").section(t.get(["BUTTON_SHARE_AWARDS"],!1),t,{block:w},{}).write(" </div> ")}function O(e,t){return e.write("You got this award on <span>").reference("award_date",t).write("</span>")}function y(e,t){return e.write("You got this award on <span>").reference("award_date",t).write("</span>")}function I(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Activate your award</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}function w(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Share your award</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}function R(e,t){return e.write(' <div class="ovl-content"> <h1>Congratulations</h1> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:S},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:A},{}).write(' </p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_ACTIVATE_AWARDS"],!1),t,{block:P},{}).write(" </div> ")}function S(e,t){return e.write("You've earned an award:<br><b>").reference("award_name",t).write("</b> on ").reference("PAGE_partner_name",t).write("!")}function A(e,t){return e.write("You've earned an award:<br><b>").reference("award_name",t).write("</b> on ").reference("PAGE_partner_name",t).write("!")}function P(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Activate your award</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}function N(e,t){return e.write(' <div class="ovl-content"> <h1>').reference("award_name",t).write('</h1> <p class="x-large"> ').section(t.get(["MALE"],!1),t,{block:L},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:C},{}).write(' </p> </div> <div class="ovl-buttons"> ').section(t.get(["BUTTON_GET_YOURS"],!1),t,{block:$},{}).write(" </div> ")}function L(e,t){return e.reference("user_name",t).write(" got this award on <span>").reference("award_date",t).write("</span>")}function C(e,t){return e.reference("user_name",t).write(" got this award on <span>").reference("award_date",t).write("</span>")}function $(e,t){return e.write('<div class="btn btn--blue"><span class="btn-txt">Find out how to get yours</span><span class="b-link js-ovl-open" data-ovl-type="').reference("type",t).write('" data-ovl-url="').reference("url",t).write('"></span></div>')}return $u.dust.register("awards/popup.awards-show",e),e.s={AWARD:t,_AWARD:T,SELF_EXISTING_AWARD:v,SELF_EARNED_AWARD:R,VIEWER_AWARD:N},t.s={_ACTIVE:i,_MATCHED:o,_HOTTEST:s,_PICKY:n,_VOTER:r,_CHATTY:a,_CHECKED:l,_FRIENDLY:_,_LIKED:p,_PROFILE_COMPLETE:c,_FB_STAR:u,_TW_STAR:d,_GLOBE:h,_INVITER:b,_LANGUAGE:E,_SCORE:g,_VIP:m,_PHOTO_OF_THE_DAY:f},v.s={MALE:O,FEMALE:y,BUTTON_ACTIVATE_AWARDS:I,BUTTON_SHARE_AWARDS:w},R.s={MALE:S,FEMALE:A,BUTTON_ACTIVATE_AWARDS:P},N.s={MALE:L,FEMALE:C,BUTTON_GET_YOURS:$},e}(),B.HoN_v3.Profile.AwardsView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"profile/block.awards",set_data:function(e){var t=B.Features.get("ALLOW_AWARDS"),i=3;if(!t||!t.enabled)return this._data=null,this;var o=(e.profile.getAwards()||[]).filter(function(e){return 100==e.getProgress()}),s=o?o.length:0,n={type:"ovl",url:"/ws/awards/list.phtml?user_id="+B.Session.getUserId()};if(s)this._data={_HIDE:s>i,HAVE_AWARD:{num_awards:s,awards:$l.get_num_dependent("awards",s),_COMPACT:s>1,SHOW_ALL:s>i,AWARD:o.map(function(t){var i=t.getPromoBlock();return{tooltip_text:t.getDescription(),award_id:t.getAwardId(),award_text:t.getTitle(),AWARD_DATE:{award_date:i.getHeader()},_INACTIVE:e.own_profile&&!t.getShared(),_ACTIVE:t.getShared(),_AWARD_IMG:{award_src:t.getThumbnail()},_POPUP:{type:"ovl",url:"/ws/awards/info.phtml?user_id="+e.uid+"&award_id="+t.getAwardId().match(/^\d+/)}}})}},this._data.HAVE_AWARD[e.own_profile?"MORE_AWARDS":"GET_AWARDS"]=n;else{if(!e.own_profile)return this._data=null,this;this._data={EMPTY_AWARD:{GET_AWARDS:n}}}return this},render_popup:function(e,t){var i={_AWARD:{img_src:e.getPromoBlock().getImageId()[0]}},o=e.getShared(),s=t.own_profile?"SELF_EXISTING_AWARD":"VIEWER_AWARD";return i[s]={award_name:e.getTitle(),user_name:t.person.getName(),award_date:e.getPromoBlock().getHeader(),BUTTON_GET_YOURS:!t.own_profile&&{type:"ovl",url:"/ws/awards/list.phtml?user_id="+B.Session.getUserId()},BUTTON_ACTIVATE_AWARDS:t.own_profile&&!o&&{type:"hon-v3-badges-sharing",url:"/ws/awards/share.phtml?award_id="+e.getAwardId()},BUTTON_SHARE_AWARDS:t.own_profile&&o&&{type:"hon-v3-badges-sharing",url:"/ws/awards/share.phtml?award_id="+e.getAwardId()}},i[s][t.gender]=!0,$u.dust.render("awards/popup.awards-show",i)}}),function(){function e(e,o){return e.write('<div id="gifts" class="profile-widget js-wrap js-gifts-container').section(o.get(["_HIDE"],!1),o,{block:t},{}).write('"> ').section(o.get(["GIFTS"],!1),o,{block:i},{}).write(" </div>")}function t(e){return e.write(" hide")}function i(e,t){return e.write(" <h2> ").section(t.get(["COMMON_HEAD"],!1),t,{block:o},{}).write(" ").section(t.get(["ENCOUNTERS_HEAD"],!1),t,{block:r},{}).write(" </h2> ").section(t.get(["SHOW_ALL"],!1),t,{block:_},{}).write(" ").section(t.get(["ADD_GIFT"],!1),t,{block:d},{}).write(" ").section(t.get(["GIFTS_LIST"],!1),t,{block:m},{}).write(" ")}function o(e,t){return e.write(" ").section(t.get(["EMPTY_TITLE"],!1),t,{block:s},{}).write(" ").section(t.get(["TITLE"],!1),t,{block:n},{}).write(" ")}function s(e){return e.write("Gifts")}function n(e,t){return e.reference("num",t).write(" ").reference("gifts",t)}function r(e,t){return e.write(" ").section(t.get(["FEMALE"],!1),t,{block:a},{}).write(" ").section(t.get(["MALE"],!1),t,{block:l},{}).write(" ")}function a(e){return e.write("Chat to her now!")}function l(e){return e.write("Chat to him now!")}function _(e,t){return e.write(' <div class="profile-widget__expand"> ').section(t.get(["SHOW_LINK"],!1),t,{block:p},{}).write(" ").section(t.get(["REQUEST_LINK"],!1),t,{block:c},{}).write(" ").section(t.get(["UNAUTH_LINK"],!1),t,{block:u},{}).write(' <div class="loader loader--sm"><div class="loader_"></div></div> </div> ')}function p(e){return e.write(' <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--show js-toggle" data-jst-class="hide">Show all</span> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--hide js-toggle" data-jst-class="hide">Hide all</span> ')}function c(e,t){return e.write('<a href="#" rev="').reference("url_gifts",t).write('" id="more_gifts" class="p-link profile-widget__expand-lnk">Show all</a>')}function u(e,t){return e.write('<a href="').reference("sign_url",t).write('" class="p-link profile-widget__expand-lnk">Show all</a>')}function d(e,t){return e.write(' <div class="gift-add"> <div class="inline gift gift--border"> <img src="').reference("gift_url",t).write('" width="60" height="60" alt=""> <mark class="brick brick--xsm brick--lblue"><i class="ico ico--white ico--plus-sm"></i></mark> </div> <b class="inline gift-add__txt"> ').section(t.get(["COMMON_TITLE"],!1),t,{block:h},{}).write(" ").section(t.get(["ENCOUNTERS_TITLE"],!1),t,{block:g},{}).write(' </b> <span class="b-link js-ovl-open" data-ovl-type="gifts" data-ovl-url="').reference("ovl_url",t).write('"></span> </div> ')}function h(e,t){return e.write(" ").section(t.get(["MALE"],!1),t,{block:b},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:E},{}).write(" ")}function b(e){return e.write("Grab his attention with a gift!")}function E(e){return e.write("Grab her attention with a gift!")}function g(e){return e.write(" You can chat straight away when you send a gift.\n")}function m(e,t){return e.write(' <div class="profile-widget__items gifts-list"> ').section(t.get(["GIFT"],!1),t,{block:f},{}).write(" </div> ")}function f(e,t){return e.write(' <div id="gift_a_').reference("gift_id",t).write('" class="profile-widget__item gift gift--border gift--hover').section(t.get(["_GIFT_PHOTO"],!1),t,{block:T},{}).section(t.get(["_INVISIBLE"],!1),t,{block:v},{}).write('" ').section(t.get(["_TOOLTIP"],!1),t,{block:O},{}).write('> <img id="gift').reference("gift_id",t).write('" src="').reference("gift_url",t).write('" width="60" height="60" alt=""> ').reference("HTMLBLOCK_GIFTS_TOOLTIP",t,["s"]).write(" ").section(t.get(["LINK"],!1),t,{block:y},{}).write(" ").section(t.get(["DELETE_GIFT"],!1),t,{block:I},{}).write(" </div> ")}function T(e){return e.write(" gift--framed")}function v(e){return e.write(" gift--invisible")}function O(e){return e.write(' data-control-type="tooltip"')}function y(e,t){return e.write('<a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a>')}function I(e,t){return e.write(' <div class="btn btn--white btn--xsm btn--ico btn-').reference("gift_id",t).write(' dropdown-btn" data-control-type="dropdown-btn" tabindex="-1"> <i class="icon ico--trash"></i> <div class="datalist tc js-dropdown-btn-tooltip" data-control-type="tooltip-clickable"> <div class="confirm"> <b class="confirm__title">Delete this gift?</b> <div class="btn btn--sm btn--blue"><span class="btn-txt">Delete</span><a href="#" rev="').reference("url",t).write('" class="b-link js-switch-gift-visibility"></a></div> <div class="btn btn--sm btn--white"><span class="btn-txt">Cancel</span></div> </div> </div> </div> ')}return $u.dust.register("gifts/block.gifts",e),e.s={_HIDE:t,GIFTS:i},i.s={COMMON_HEAD:o,ENCOUNTERS_HEAD:r,SHOW_ALL:_,ADD_GIFT:d,GIFTS_LIST:m},o.s={EMPTY_TITLE:s,TITLE:n},r.s={FEMALE:a,MALE:l},_.s={SHOW_LINK:p,REQUEST_LINK:c,UNAUTH_LINK:u},d.s={COMMON_TITLE:h,ENCOUNTERS_TITLE:g},h.s={MALE:b,FEMALE:E},m.s={GIFT:f},f.s={_GIFT_PHOTO:T,_INVISIBLE:v,_TOOLTIP:O,LINK:y,DELETE_GIFT:I},e}(),function(){function e(e,s){return e.write('<div class="tooltip tooltip--delayed-hide"><div class="tooltip-txt"> ').section(s.get(["_USER"],!1),s,{block:t},{}).write(" ").section(s.get(["DELETED_USER"],!1),s,{block:i},{}).write(' <div class="inline tooltip-txt_"> ').section(s.get(["TEXT"],!1),s,{block:o},{}).write(" ").section(s.get(["TEXT_WITH_COMMENTS"],!1),s,{block:r},{}).write(" </div> ").section(s.get(["DELETE_TEXT"],!1),s,{block:_},{}).write(" </div></div>")}function t(e,t){return e.write(' <div class="brick brick--hover"> <div class="brick-img"><img src="').reference("photo_url",t).write('" alt=""></div> <a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a> </div> ')}function i(e,t){return e.write(' <div class="brick"> <div class="brick-img"><img src="').reference("photo_url",t).write('" alt=""></div> </div> ')}function o(e,t){return e.write(" ").section(t.get(["NAME"],!1),t,{block:s},{}).write(" ").section(t.get(["DELETED_NAME"],!1),t,{block:n},{}).write(' <span class="small lgrey">').reference("time",t).write("</span> ")}function s(e,t){return e.write('<a href="').reference("url",t).write('" rel="').reference("state",t).write('" class="app">').reference("name",t).write("</a><br>")}function n(e){return e.write("<del>Deleted</del><br>")}function r(e,t){return e.write(" ").section(t.get(["NAME"],!1),t,{block:a},{}).write(" ").section(t.get(["DELETED_NAME"],!1),t,{block:l},{}).write(' <span class="small lgrey">').reference("time",t).write("</span><br> <span>").reference("text",t).write("</span> ")}function a(e,t){return e.write('<a href="').reference("url",t).write('" rel="').reference("state",t).write('" class="app">').reference("name",t).write("</a>")}function l(e){return e.write("<del>Deleted</del>")}function _(e,t){return e.write('<i class="ico ico--white ico--trash"><a href="#" rev="').reference("note_clear_url",t).write('" class="b-link js-gift-del"></a></i>')}return $u.dust.register("gifts/block.gifts-tooltip",e),e.s={_USER:t,DELETED_USER:i,TEXT:o,TEXT_WITH_COMMENTS:r,DELETE_TEXT:_},o.s={NAME:s,DELETED_NAME:n},r.s={NAME:a,DELETED_NAME:l},e}(),B.HoN_v3.Profile.GiftsView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"gifts/block.gifts",$e:null,constructor:function(){$super(this,arguments),this.$e=$e.on({".js-switch-gift-visibility":this._delete_gift,".js-gift-del":this._delete_message},this)},destroy:function(){$e.un(this.$e),$super(this,arguments)},_delete_gift:function(e){this.fire("delete",e.rev,"gift")},_delete_message:function(e){this.fire("delete",e.rev,"message")},set_data:function(e){var t=e.profile.getExperimentalGifts()||[],i=t&&t.length,o=e.profile.getReceivedGifts().getSuggestedGift(),s=e.profile.getAllowSendGift();if(o)var n=o.getThumbUrl();if(!(s||i||!e.own_profile&&n))return this._data=null,this;e.own_profile||(default_gift_id=o.getProductId());var r,a,l="mm"==B.App.state;l?(r={MALE:"MALE"==e.gender,FEMALE:"FEMALE"==e.gender},a={}):(r={TITLE:i&&{num:i,gifts:$l.get_num_dependent("gift",i)},EMPTY_TITLE:!i},a={MALE:"MALE"==e.gender,FEMALE:"FEMALE"==e.gender});var _=$r.images_root+"/v2/-/-/i/hotornot_v2/72_nophoto.1.png";return this._data={_HIDE:!0,GIFTS:{ENCOUNTERS_HEAD:l&&r,COMMON_HEAD:!l&&r,SHOW_ALL:{SHOW_LINK:i>3},ADD_GIFT:!e.own_profile&&{gift_url:o.getThumbUrl(),ovl_url:"/billing/gifts.phtml?to_user_id="+e.uid+"&gift_default_type="+default_gift_id+"&activation_place=128",ENCOUNTERS_TITLE:l&&a,COMMON_TITLE:!l&&a},GIFTS_LIST:{GIFT:t.map(function(t){var i=t.getDate(),o=t.getIsSenderDeleted(),s=t.getSenderPhotoUrl()||_,n=t.getSenderName(),r=t.getSenderUid(),a=t.getText(),l="/0"+r+"?"+(e.own_profile?"from_my_profile=1":"from_other_profile=1"),p=t.getId(),c=t.getAllowedActions()||[],u=-1!==c.indexOf($gpb.namespace("badoo.bma").ExperimentalGiftAction.GIFT_ACTION_DELETE),d=-1!==c.indexOf($gpb.namespace("badoo.bma").ExperimentalGiftAction.GIFT_ACTION_REMOVE_TEXT);return{gift_id:p,_GIFT_PHOTO:t.getType()===$gpb.namespace("badoo.bma").ExperimentalGiftType.GIFT_TYPE_PHOTO,_INVISIBLE:t.getIsHidden(),gift_url:t.getImageUrl(),MESSENGER_LINK:!1,_TOOLTIP:!0,HTMLBLOCK_GIFTS_TOOLTIP:$u.dust.render("gifts/block.gifts-tooltip",{_USER:!o&&{photo_url:s,url:l,state:"big-photo-view"},DELETED_USER:o&&{photo_url:s},TEXT:!a&&{NAME:!o&&{url:l,state:"big-photo-view",name:n},DELETED_NAME:o,time:i},TEXT_WITH_COMMENTS:a&&{NAME:!o&&{url:l,state:"big-photo-view",name:n},DELETED_NAME:o,time:i,text:a},DELETE_TEXT:a&&d&&{note_clear_url:p}}),LINK:!o&&{url:l,state:"big-photo-view"},DELETE_GIFT:u&&{gift_id:p,url:p}}})}}},this}}),function(){function e(e,i){return e.write('<header id="profile-header" class="section-header section-header--medium">\n<div class="flex flex--middle profile-header">\n').section(i.get(["vote_buttons"],!1),i,{block:t},{}).write("\n").section(i.get(["vote_result"],!1),i,{block:r},{}).write('\n<div class="flex__item flex__item--expand profile-header__txt">\n<div class="flex flex--middle name-wrap">\n').section(i.get(["online_status"],!1),i,{block:_},{}).write("\n").section(i.get(["basic_info"],!1),i,{block:p},{}).write('\n<div class="flex__item flex__item--fixed profile-header__icons">').reference("icons_html",i,["s"]).write('</div>\n</div>\n<div class="flex flex--middle common-info-wrap').section(i.get(["hide_common_info"],!1),i,{block:h},{}).write('">\n<div class="flex__item flex__item--fixed common-info-wrap_">\n').section(i.get(["friends"],!1),i,{block:b},{}).write("<!--\n-->").section(i.get(["secret_comments"],!1),i,{block:w},{}).write("<!--\n-->").section(i.get(["interests"],!1),i,{block:R},{}).write("<!--\n--></div>\n").section(i.get(["social_connect"],!1),i,{block:$},{}).write("\n").section(i.get(["add_secret_comments"],!1),i,{block:M},{}).write("\n").section(i.get(["add_interests"],!1),i,{block:k},{}).write("\n").section(i.get(["work_education"],!1),i,{block:U},{}).write('\n</div>\n</div>\n<div class="flex__item flex__item--fixed profile-menu js-wrap">\n').reference("user_menu",i,["s"]).write("\n</div>\n</div>\n</header>")}function t(e,t){return e.write('\n<div class="flex__item flex__item--fixed profile-header__btn js-profile-header-buttons').exists(t.get(["hint"],!1),t,{block:i},{}).write('">\n<div class="btn-game btn-game--hot').exists(t.get(["disabled"],!1),t,{block:o},{}).write(' js-profile-header-vote-yes">\n<i class="btn-game__ico"></i><span class="middle"></span>\n<span class="b-link js-profile-header-vote" data-choice="yes"></span>\n</div>\n<div class="btn-game btn-game--not').exists(t.get(["disabled"],!1),t,{block:s},{}).write(' js-profile-header-vote-no">\n<i class="btn-game__ico"></i><span class="middle"></span>\n<span class="b-link js-profile-header-vote" data-choice="no"></span>\n</div>\n').exists(t.get(["hint"],!1),t,{block:n},{}).write('\n<mark class="mark mark--red mark--fixed btn-game__mark-hot js-profile-header-rush-hour-wrap hidden">\n<span class="js-profile-header-rush-hour-num">').reference("rush_hour_num",t).write('</span>\n<span class="b-link js-ovl-open" data-ovl-type="ovl" data-ovl-url="').reference("info_ovl_url",t).write('"></span>\n</mark>\n</div>\n')}function i(e){return e.write(' tooltip-wrap" data-control-type="tooltip')}function o(e){return e.write(" disabled")}function s(e){return e.write(" disabled")}function n(e,t){return e.write('<div class="tooltip bc"><span class="tooltip-txt">').reference("hint",t).write("</span></div>")}function r(e,t){return e.write('\n<div class="flex__item flex__item--fixed profile-header__btn tooltip-wrap" data-control-type="tooltip">\n<div class="btn-game').exists(t.get(["yes"],!1),t,{"else":a,block:l},{}).write(' active">\n<i class="btn-game__ico"></i><span class="middle"></span>\n</div>\n<div class="tooltip"><span class="tooltip-txt center">').reference("message",t,["s"]).write("</span></div>\n</div>\n")}function a(e){return e.write(" btn-game--not")}function l(e){return e.write(" btn-game--hot")}function _(e,t){return e.write('\n<i class="online-status online-status--').reference("status",t).write(' tooltip-wrap" data-control-type="tooltip">\n<span class="tooltip"><span class="tooltip-txt">').reference("active_long",t).write("</span></span>\n</i>\n")}function p(e,t){return e.write('\n<h1 class="flex__item flex__item--dynamic profile-header__name">\n').reference("name",t).exists(t.get(["age"],!1),t,{block:c},{}).write("\n").section(t.get(["has_photo"],!1),t,{block:u},{}).write("\n").section(t.get(["no_photo"],!1),t,{block:d},{}).write("\n</h1>\n")
}function c(e,t){return e.write('<span class="profile-header__age">, ').reference("age",t).write("</span>")}function u(e,t){return e.write('\n<a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a>\n')}function d(e,t){return e.write('\n<span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me" data-source="').reference("uploadSource",t).write('"></span>\n')}function h(e){return e.write(" common-info-wrap--hide")}function b(e,t){return e.write('\n<div class="common-info">\n').exists(t.get(["hottest"],!1),t,{"else":E,block:O},{}).write("\n").section(t.get(["has_photo"],!1),t,{block:y},{}).write("\n").section(t.get(["no_photo"],!1),t,{block:I},{}).write("\n</div>\n")}function E(e,t){return e.write('\n<div class="common-info__count ').exists(t.get(["loading"],!1),t,{block:g},{}).write('">\n<div class="loader loader--sm"><div class="loader_"></div></div>\n<span class="common-info__count-cnt js-profile-header-shared-friends-num">').reference("count",t).write("</span>\n</div>\n<span>\n").exists(t.get(["own_friends"],!1),t,{"else":m,block:f},{}).write("\n</span>\n")}function g(e){return e.write(" loading")}function m(e,t){return e.write("\n").helper("declination",t,{},{word:"shared_friend_br",num:t.get(["count"],!1)}).write("\n")}function f(e,t){return e.write("\n").exists(t.get(["is_user_male"],!1),t,{"else":T,block:v},{}).write("\n")}function T(e,t){return e.write("\n").helper("lang",t,{},{group:"hon/profile_header2",path:"HON_HEADER/YOUR_FRIENDS_FEMALE"}).write("\n")}function v(e,t){return e.write("\n").helper("lang",t,{},{group:"hon/profile_header2",path:"HON_HEADER/YOUR_FRIENDS_MALE"}).write("\n")}function O(e,t){return e.write('\n<div class="common-info__count">\n<span class="common-info__count-cnt">').reference("count",t).write("</span>\n</div>\n<span>").helper("declination",t,{},{word:"hottest_friend_br",num:t.get(["count"],!1)}).write("</span>\n")}function y(e,t){return e.write('\n<a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a>\n')}function I(e,t){return e.write('\n<span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me" data-source="').reference("uploadSource",t).write('"></span>\n')}function w(e,t){return e.write('\n<div class="common-info common-info--hide">\n<div class="common-info__count">\n<span class="common-info__count-cnt js-profile-header-secret-comments-num">').reference("count",t).write('</span>\n</div>\n<span class="js-profile-header-secret-comments-label">').helper("declination",t,{},{word:"secret_comments_br",num:t.get(["count"],!1)}).write('</span>\n<span class="b-link js-profile-header-secret-comments"></span>\n</div>\n')}function R(e,t){return e.write('\n<div class="common-info common-info--hide">\n<div class="common-info__count">\n<span class="common-info__count-cnt js-interests-board" data-interests-type="count">').reference("count",t).write("</span>\n</div>\n<span>\n").exists(t.get(["own_interests"],!1),t,{"else":S,block:A},{}).write("\n</span>\n").section(t.get(["has_photo"],!1),t,{block:L},{}).write("\n").section(t.get(["no_photo"],!1),t,{block:C},{}).write("\n</div>\n")}function S(e,t){return e.write("\n").helper("declination",t,{},{word:"interest_in_common_br",num:t.get(["count"],!1)}).write("\n")}function A(e,t){return e.write("\n").exists(t.get(["is_user_male"],!1),t,{"else":P,block:N},{}).write("\n")}function P(e,t){return e.write("\n").helper("lang",t,{},{group:"hon/profile_header2",path:"HON_HEADER/YOUR_INTERESTS_FEMALE"}).write("\n")}function N(e,t){return e.write("\n").helper("lang",t,{},{group:"hon/profile_header2",path:"HON_HEADER/YOUR_INTERESTS_MALE"}).write("\n")}function L(e,t){return e.write('\n<a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a>\n')}function C(e,t){return e.write('\n<span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me" data-source="').reference("uploadSource",t).write('"></span>\n')}function $(e,t){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--').reference("external_provider",t).write('-sm"></i>\n<span class="inline lgrey link"></span>\n</div>\n')}function M(e){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--secret-comments"></i>\n<span class="inline lgrey link"></span>\n</div>\n')}function k(e){return e.write('\n<div class="common-info">\n<i class="inline ico ico--color ico--add-interests"></i>\n<span class="inline lgrey link"></span>\n</div>\n')}function U(e,t){return e.write('\n<div class="common-info common-info--work-education">\n<span class="inline ellipsis">\n').section(t.get(["work"],!1),t,{block:D},{}).write("\n").section(t.get(["education"],!1),t,{block:F},{}).write("\n").section(t.get(["show_link"],!1),t,{block:B},{}).write('\n</span><span class="middle"></span>\n</div>\n')}function D(e,t){return e.write("\n").reference("work",t).write("<br>\n")}function F(e,t){return e.write("\n").reference("education",t).write("\n")}function B(e,t){return e.write('\n<span class="p-link js-profile-education-show-all">').helper("lang",t,{},{group:"hon/profile_header",path:"HON_HEADER/SHOW_WORKANDEDUCATION"}).write("</span>\n")}return $u.dust.register("hotornot_v2/profile/block.header",e),e.s={vote_buttons:t,vote_result:r,online_status:_,basic_info:p,hide_common_info:h,friends:b,secret_comments:w,interests:R,social_connect:$,add_secret_comments:M,add_interests:k,work_education:U},t.s={hint:i,disabled:o,disabled:s,hint:n},r.s={yes:a},p.s={age:c,has_photo:u,no_photo:d},b.s={hottest:E,has_photo:y,no_photo:I},E.s={loading:g,own_friends:m},m.s={is_user_male:T},R.s={own_interests:S,has_photo:L,no_photo:C},S.s={is_user_male:P},U.s={work:D,education:F,show_link:B},e}(),function(){function e(e,n){return e.section(n.get(["SCORE_SHARED"],!1),n,{block:t},{}).write(" ").section(n.get(["HOT_LIST_SHARED"],!1),n,{block:i},{}).write(" ").section(n.get(["INTEREST_ADDED"],!1),n,{block:o},{}).write(" ").section(n.get(["ABUSE_REPORTED"],!1),n,{block:s},{}).write(" ").section(n.get(["ABUSE_BLOCKED"],!1),n,{block:a},{}).write(" ").section(n.get(["ABUSE_UNBLOCKED"],!1),n,{block:p},{}).write(" ").section(n.get(["PHOTO_REPORTED"],!1),n,{block:d},{}).write(" ").section(n.get(["DEFAULT_PHOTO"],!1),n,{block:h},{}).write(" ").section(n.get(["SETTINGS_SOCIAL_CONNECTED"],!1),n,{block:b},{}).write(" ").section(n.get(["SETTINGS_SOCIAL_DISCONNECTED"],!1),n,{block:m},{}).write(" ").section(n.get(["SETTINGS_SOCIAL_ERROR"],!1),n,{block:v},{}).write(" ").section(n.get(["VERIFIED"],!1),n,{block:O},{}).write(" ").section(n.get(["DONE"],!1),n,{block:w},{}).write(" ").section(n.get(["SENT"],!1),n,{block:A},{}).write(" ").section(n.get(["CONGRATULATIONS"],!1),n,{block:P},{}).write(" ").section(n.get(["PRIVATE_PHOTOS"],!1),n,{block:N},{}).write(" ").section(n.get(["ADDED"],!1),n,{block:L},{}).write(" ").section(n.get(["REMOVED"],!1),n,{block:M},{})}function t(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Shared\n</b> ')}function i(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Shared\n</b> ')}function o(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').reference("added",t).write(" </b> ")}function s(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:n},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:r},{}).write(" </b> ")}function n(e){return e.write("Reported")}function r(e){return e.write("Reported")}function a(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:l},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:_},{}).write(" </b> ")}function l(e){return e.write("Blocked")}function _(e){return e.write("Blocked")}function p(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:c},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:u},{}).write(" </b> ")}function c(e){return e.write("Unblocked")}function u(e){return e.write("Unblocked")}function d(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Reported\n</b> ')}function h(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Set as default photo\n</b> ')}function b(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:E},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:g},{}).write(" </b> ")}function E(e){return e.write("Linked")}function g(e){return e.write("Linked")}function m(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:f},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:T},{}).write(" </b> ")}function f(e){return e.write("Disconnected")}function T(e){return e.write("Disconnected")}function v(e,t){return e.write(' <b class="confirmation__txt"> ').reference("error",t).write(" </b> ")}function O(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:y},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:I},{}).write(" </b> ")}function y(e){return e.write("Verified")}function I(e){return e.write("Verified")}function w(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:R},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:S},{}).write(" </b> ")}function R(e){return e.write("Done")}function S(e){return e.write("Done")}function A(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Sent!\n</b> ')}function P(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Congratulations!\n</b> ')}function N(e){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> Request sent\n</b> ')}function L(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:C},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:$},{}).write(" </b> ")}function C(e){return e.write("Added")}function $(e){return e.write("Added")}function M(e,t){return e.write(' <i class="confirmation-ico confirmation-ico--grant"></i> <b class="confirmation__txt"> ').section(t.get(["MALE"],!1),t,{block:k},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:U},{}).write(" </b> ")}function k(e){return e.write("Removed")}function U(e){return e.write("Removed")}return $u.dust.register("overlays/popup.confirmation",e),e.s={SCORE_SHARED:t,HOT_LIST_SHARED:i,INTEREST_ADDED:o,ABUSE_REPORTED:s,ABUSE_BLOCKED:a,ABUSE_UNBLOCKED:p,PHOTO_REPORTED:d,DEFAULT_PHOTO:h,SETTINGS_SOCIAL_CONNECTED:b,SETTINGS_SOCIAL_DISCONNECTED:m,SETTINGS_SOCIAL_ERROR:v,VERIFIED:O,DONE:w,SENT:A,CONGRATULATIONS:P,PRIVATE_PHOTOS:N,ADDED:L,REMOVED:M},s.s={MALE:n,FEMALE:r},a.s={MALE:l,FEMALE:_},p.s={MALE:c,FEMALE:u},b.s={MALE:E,FEMALE:g},m.s={MALE:f,FEMALE:T},O.s={MALE:y,FEMALE:I},w.s={MALE:R,FEMALE:S},L.s={MALE:C,FEMALE:$},M.s={MALE:k,FEMALE:U},e}(),$l.register({section:"hon/profile_header2",lang:"en-us",translations:{HON_HEADER:{HIS_INTERESTS:"his<br>interests",HER_INTERESTS:"her<br>interests",HIS_FRIENDS:"his<br>friends",HER_FRIENDS:"her<br>friends",YOUR_FRIENDS_MALE:"your<br>friends",YOUR_FRIENDS_FEMALE:"your<br>friends",YOUR_INTERESTS_MALE:"your<br>interests",YOUR_INTERESTS_FEMALE:"your<br>interests"},OTHERS_PROFILE_IS_VERIFIED:{MALE:"Profile is verified",FEMALE:"Profile is verified"},MY_PROFILE_IS_VERIFIED:{MALE:"Profile is verified",FEMALE:"Profile is verified"}}}),B.HoN_v3.ProfileHeaderButtons||(B.HoN_v3.ProfileHeaderButtons={},function(){function e(e,o){return e.section(o.get(["PLAIN_BUTTONS"],!1),o,{block:t},{}).write(" ").section(o.get(["DATALIST_BUTTONS"],!1),o,{block:i},{}).write(" ").section(o.get(["DL_FAVORITE_BUTTON"],!1),o,{block:s},{}).write(" ").section(o.get(["DL_GIFT_BUTTON"],!1),o,{block:r},{}).write(" ").section(o.get(["DL_FACEBOOK_SHARE_BUTTON"],!1),o,{block:a},{}).write(" ").section(o.get(["DL_OK_SHARE_BUTTON"],!1),o,{block:l},{}).write(" ").section(o.get(["DL_BLOCK_BUTTON"],!1),o,{block:_},{}).write(" ").section(o.get(["SETTINGS_BUTTON"],!1),o,{block:b},{}).write(" ").section(o.get(["SMILE_BUTTON"],!1),o,{block:E},{}).write(" ").section(o.get(["CHAT_BUTTON"],!1),o,{block:g},{}).write(" ").section(o.get(["FAVORITE_BUTTON"],!1),o,{block:T},{}).write(" ").section(o.get(["GIFT_BUTTON"],!1),o,{block:O},{}).write(" ").section(o.get(["FACEBOOK_SHARE_BUTTON"],!1),o,{block:y},{}).write(" ").section(o.get(["OK_SHARE_BUTTON"],!1),o,{block:I},{}).write(" ").section(o.get(["BLOCK_BUTTON"],!1),o,{block:w},{}).write(" ").section(o.get(["PROFILE_BUTTON"],!1),o,{block:L},{}).write(" ").section(o.get(["GRID_BUTTON"],!1),o,{block:U},{})}function t(e,t){return e.write(" ").reference("buttons",t,["s"]).write(" ")}function i(e,t){return e.write(' <div class="btn btn--white btn--ico dropdown-link" data-control-type="tooltip"> <i class="icon ico--etc"></i> <div class="datalist bc"> <ul class="options"> ').section(t.get(["DLBUTTONS"],!1),t,{block:o},{}).write(" </ul> </div> </div> ")}function o(e,t){return e.write(" ").reference("buttons",t,["s"]).write(" ")}function s(e,t){return e.write(' <li class="option profile-menu__item').section(t.get(["_ACTIVE"],!1),t,{block:n},{}).write(' js-profile-header-btn"> <span class="show"> <i class="inline ico ico--star"><span class="b-link js-profile-header-favorite"></span></i> <span class="inline">Add to favorites</span> </span> <span class="hidden"> <i class="inline ico ico--color ico--star"><span class="b-link js-profile-header-favorite"></span></i> <span class="inline">Remove from favorites</span> </span> </li> ')}function n(e){return e.write(" is-shown active")}function r(e,t){return e.write(' <li class="option"> <i class="inline ico ico--gift-sm"><span class="b-link js-ovl-open" data-ovl-type="gifts" data-ovl-url="').reference("url",t).write('"></span></i> <span class="inline">Give a gift</span> </li> ')}function a(e,t){return e.write(' <li class="option"> <i class="icon ico--share"><span class="b-link js-fb-ui-dialog" data-fb-ui-dlg-id="').reference("dialog_id",t).write('"></span></i>\r\nShare\n</li> ')}function l(e,t){return e.write(' <li class="option"> <i class="icon ico--share"><span class="b-link" data-control-type="popup" data-url-tpl="').reference("url_tpl",t).write('" data-width="800" data-height="700" tabindex="-1"></span></i>\r\nShare\n</li> ')}function _(e,t){return e.write(' <li class="option"> <i class="icon').section(t.get(["_ACTIVE"],!1),t,{block:p},{}).write(' ico--block"> ').section(t.get(["BLOCK_REPORT_LINK"],!1),t,{block:c},{}).write(" ").section(t.get(["UNBLOCK_LINK"],!1),t,{block:u},{}).write(" </i> ").section(t.get(["BLOCK_REPORT_BTN"],!1),t,{block:d},{}).write(" ").section(t.get(["UNBLOCK_BTN"],!1),t,{block:h},{}).write(" </li> ")}function p(e){return e.write(" ico--red")}function c(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="hon-v3-abuse" data-ovl-url="').reference("url",t).write('"></span>')}function u(e){return e.write('<span class="b-link js-profile-unblock"></span>')}function d(e){return e.write("Block or report")}function h(e){return e.write("Unblock")}function b(e,t){return e.write(' <div class="btn btn--white btn--ico" data-control-type="tooltip"> <i class="icon ico--cog"><a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a></i> <div class="tooltip bc"><span class="tooltip-txt">Settings</span></div> </div> ')}function E(e){return e.write(' <div class="btn btn--white btn--ico js-profile-header-send-smile-wrap" data-control-type="tooltip"> <i class="icon ico--smile"><span class="b-link js-profile-header-send-smile"></span></i> <div class="tooltip bc"><span class="tooltip-txt">Smile</span></div> </div> ')}function g(e,t){return e.write(' <div class="btn btn--white profile-menu__chat-btn"> <i class="icon ico--blue ico--chat"><a href="').reference("url",t).write('" class="b-link im-open-user" rel="').reference("state",t).write('"></a></i> <span class="btn-txt"> ').section(t.get(["MALE"],!1),t,{block:m},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:f},{}).write(" </span> </div> ")}function m(e){return e.write("Chat now")}function f(e){return e.write("Chat")}function T(e,t){return e.write(' <div class="btn btn--gold btn--ico').section(t.get(["_ACTIVE"],!1),t,{block:v},{}).write(' js-profile-header-btn" data-control-type="tooltip"> <i class="hidden ico ico--color ico--star"><span class="b-link js-profile-header-favorite"></span></i> <i class="show ico ico--star"><span class="b-link js-profile-header-favorite"></span></i> <div class="tooltip bc"> <span class="tooltip-txt"> <span class="hidden">Remove from favorites</span> <span class="show">Add to favorites</span> </span> </div> </div> ')}function v(e){return e.write(" is-shown active")}function O(e,t){return e.write(' <div class="btn btn--white btn--ico" data-control-type="tooltip"> <i class="ico ico--gift-sm"><span class="b-link js-ovl-open" data-ovl-type="gifts" data-ovl-url="').reference("url",t).write('"></span></i> <div class="tooltip bc"><span class="tooltip-txt">Give a gift</span></div> </div> ')}function y(e,t){return e.write(' <div class="btn btn--white btn--ico" data-control-type="tooltip"> <i class="icon ico--share"><span class="b-link js-fb-ui-dialog" data-fb-ui-dlg-id="').reference("dialog_id",t).write('"></span></i> <div class="tooltip bc"><span class="tooltip-txt">Share</span></div> </div> ')}function I(e,t){return e.write(' <div class="btn btn--white btn--ico" data-control-type="tooltip"> <i class="icon ico--share"><span class="b-link" data-control-type="popup" data-url-tpl="').reference("url_tpl",t).write('" data-width="800" data-height="700" tabindex="-1"></span></i> <div class="tooltip bc"><span class="tooltip-txt">Share</span></div> </div> ')}function w(e,t){return e.write(' <div class="btn btn--white btn--ico" data-control-type="tooltip"> <i class="icon').section(t.get(["_ACTIVE"],!1),t,{block:R},{}).write(' ico--block"> ').section(t.get(["BLOCK_REPORT_LINK"],!1),t,{block:S},{}).write(" ").section(t.get(["UNBLOCK_LINK"],!1),t,{block:A},{}).write(' </i> <div class="tooltip bc"> <span class="tooltip-txt"> ').section(t.get(["BLOCK_REPORT_BTN"],!1),t,{block:P},{}).write(" ").section(t.get(["UNBLOCK_BTN"],!1),t,{block:N},{}).write(" </span> </div> </div> ")}function R(e){return e.write(" ico--red")}function S(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="hon-v3-abuse" data-ovl-url="').reference("url",t).write('"></span>')}function A(e){return e.write('<span class="b-link js-profile-unblock"></span>')}function P(e){return e.write("Block or report")}function N(e){return e.write("Unblock")}function L(e,t){return e.write(" ").section(t.get(["NO_PHOTO"],!1),t,{block:C},{}).write(" ").section(t.get(["HAS_PHOTO"],!1),t,{block:M},{}).write(" ")}function C(e,t){return e.write(' <div class="btn btn--white btn--ico').section(t.get(["_ACTIVE"],!1),t,{block:$},{}).write('" data-control-type="tooltip"> <i class="icon ico--profile"></i> <span class="b-link" data-control-type="upload-overlay" tabindex="-1" data-type="photos_of_me" data-source="').reference("uploadSource",t).write('"></span> <div class="tooltip bc"><span class="tooltip-txt">Profile</span></div> </div> ')}function $(e){return e.write(" active")}function M(e,t){return e.write(' <div class="btn btn--white btn--ico').section(t.get(["_ACTIVE"],!1),t,{block:k},{}).write('" data-control-type="tooltip"> <i class="icon ico--profile"></i> <a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a> <div class="tooltip bc"><span class="tooltip-txt">Profile</span></div> </div> ')}function k(e){return e.write(" active")}function U(e,t){return e.write(' <div class="btn btn--white btn--ico').section(t.get(["_ACTIVE"],!1),t,{block:D},{}).write('" data-control-type="tooltip"> <i class="ico ico--grid-sm"><span class="b-link js-profile-grid-toggle js-toggle" data-jst-target="profile_c profile_c" data-jst-class="profile-grid-visible profile-grid-visible-end"></span></i> <div class="tooltip bc"><span class="tooltip-txt">Gallery</span></div> </div> ')}function D(e){return e.write(" active")}return $u.dust.register("components/block.user-menu",e),e.s={PLAIN_BUTTONS:t,DATALIST_BUTTONS:i,DL_FAVORITE_BUTTON:s,DL_GIFT_BUTTON:r,DL_FACEBOOK_SHARE_BUTTON:a,DL_OK_SHARE_BUTTON:l,DL_BLOCK_BUTTON:_,SETTINGS_BUTTON:b,SMILE_BUTTON:E,CHAT_BUTTON:g,FAVORITE_BUTTON:T,GIFT_BUTTON:O,FACEBOOK_SHARE_BUTTON:y,OK_SHARE_BUTTON:I,BLOCK_BUTTON:w,PROFILE_BUTTON:L,GRID_BUTTON:U},i.s={DLBUTTONS:o},s.s={_ACTIVE:n},_.s={_ACTIVE:p,BLOCK_REPORT_LINK:c,UNBLOCK_LINK:u,BLOCK_REPORT_BTN:d,UNBLOCK_BTN:h},g.s={MALE:m,FEMALE:f},T.s={_ACTIVE:v},w.s={_ACTIVE:R,BLOCK_REPORT_LINK:S,UNBLOCK_LINK:A,BLOCK_REPORT_BTN:P,UNBLOCK_BTN:N},L.s={NO_PHOTO:C,HAS_PHOTO:M},C.s={_ACTIVE:$},M.s={_ACTIVE:k},U.s={_ACTIVE:D},e}(),B.HoN_v3.ProfileHeaderButtons.ContainerView=$class(B.DustView,{template:"components/block.user-menu",convertButtons:function(e,t){for(var i,o=[],s=0;s<e.length;s++)i=e[s],i.block="datalist"===t?"DL_"+i.block:i.block,o.push({buttons:i});return o},setPlainButtons:function(e){return this.set("PLAIN_BUTTONS",this.convertButtons(e,"plain"))},setDatalistButtons:function(e){return this.set("DATALIST_BUTTONS/DLBUTTONS",this.convertButtons(e,"datalist"))}}),B.HoN_v3.ProfileHeaderButtons.BaseButtonView=$class(B.DustView,{template:"components/block.user-menu"}),B.HoN_v3.ProfileHeaderButtons.BlockButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"BLOCK_BUTTON",setData:function(e,t){return this.set({_ACTIVE:t,active:t,url:"/abuse/"+e+"?from=profile&place=Profile"}),this.set(t?"UNBLOCK_BTN":"BLOCK_REPORT_BTN",!0),this.set(t?"UNBLOCK_LINK":"BLOCK_REPORT_LINK",!0),this}}),B.HoN_v3.ProfileHeaderButtons.ChatButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"CHAT_BUTTON",URL_TPL:"/messenger/open?contact_user_id={user_id}",constructor:function(){$super(this,arguments),this.set("state","messenger")},setData:function(e,t){return this.set({url:$u.tpl(this.URL_TPL,{user_id:t}),MALE:e==$p.SexType.MALE,FEMALE:e==$p.SexType.FEMALE})}}),B.HoN_v3.ProfileHeaderButtons.FavoriteButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"FAVORITE_BUTTON",setData:function(e){return this.set({active:e,_ACTIVE:e})}}),B.HoN_v3.ProfileHeaderButtons.FbShareButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"FACEBOOK_SHARE_BUTTON",setData:function(e){return this.set("dialog_id",e)}}),B.HoN_v3.ProfileHeaderButtons.GiftButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"GIFT_BUTTON",URL_TPL:"/billing/gifts.phtml?to_user_id={user_id}&gift_default_type={gift_id}&activation_place=128",setData:function(e,t){return this.set({url:$u.tpl(this.URL_TPL,{user_id:e,gift_id:t})})}}),B.HoN_v3.ProfileHeaderButtons.OkShareButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"OK_SHARE_BUTTON",URL_TPL:"/profile/share-stats/?from={from}&shared_user_id={user_id}&photo_id={photo_id}&action=1&rt={rt}",setData:function(e,t,i,o){var s=$u.tpl(this.URL_TPL,{from:o?"big_photo_view":i?"profile_edit":"profile_view",user_id:e,photo_id:t,rt:$r.prototype.rt});return this.set("url_tpl",s)}}),B.HoN_v3.ProfileHeaderButtons.SmileButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"SMILE_BUTTON"}),B.HoN_v3.ProfileHeaderButtons.ProfileButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"PROFILE_BUTTON",PROFILE_URL_TPL:"/profile/0{user_id}",BIG_PHOTO_URL_TPL:"/0{user_id}",setData:function(e,t,i,o,s){var n={};if(i)n={HAS_PHOTO:{state:t?"profile-edit":"profile-view",url:o,active:!1,_ACTIVE:!1}};else{if(!t&&0===e)return this;n=t&&0===e?{NO_PHOTO:{uploadSource:$p.ClientSource.CLIENT_SOURCE_MY_PROFILE,active:!s,_ACTIVE:!s}}:{HAS_PHOTO:{state:"big-photo-view",url:o,active:!s,_ACTIVE:!s}}}for(var r in n)this.set(r,n[r]);return this}}),B.HoN_v3.ProfileHeaderButtons.SettingsButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"SETTINGS_BUTTON",constructor:function(){$super(this,arguments),this.set({state:"settings",url:"/settings"})}}),B.HoN_v3.ProfileHeaderButtons.GridButtonView=$class(B.HoN_v3.ProfileHeaderButtons.BaseButtonView,{block:"GRID_BUTTON",setActive:function(){return this.set("_ACTIVE",!0)}}),B.HoN_v3.ProfileHeaderButtons.Controller=$class({user:null,buttonsList:null,constructor:function(e){this.user=e,this.buttonsList=this.buildButtonsList()},getView:function(){var e=this.buildButtonsMap(),t=(new B.HoN_v3.ProfileHeaderButtons.ContainerView).setPlainButtons(this.buildViews(e.plain));return e.datalist.length>0&&t.setDatalistButtons(this.buildViews(e.datalist)),t},buildButtonsOrder:function(){var e=["chat","add-favorite","gift","facebook_share","ok_share"],t=["smile","chat","add-favorite","gift","facebook_share","ok_share"],i=["settings","grid"];return this.user.own_profile?i:B.Session.getUserGender()===$p.SexType.MALE?e:t},buildButtonsMap:function(){for(var e,t=[],i=[],o=!1,s=this.buildButtonsOrder(),n=0;n<s.length;n++)if(e=s[n],this.buttonsList[e].present())if(t.length<2)"add-favorite"===e&&(o=!0),t.push(e);else{if("add-favorite"===e)continue;i.push(e)}return t.push("profile"),o||(this.buttonsList["add-favorite"].present()&&i.unshift("add-favorite"),this.buttonsList["remove-favorite"].present()&&i.push("remove-favorite")),this.buttonsList.block.present()&&i.push("block"),{plain:t,datalist:i}},buildButtonsList:function(){for(var e,t=[["smile",this.hasSmileButton,this.renderSmileButton],["chat",this.hasChatButton,this.renderChatButton],["add-favorite",this.hasAddFavoriteButton,this.renderAddFavoriteButton],["remove-favorite",this.hasRemoveFavoriteButton,this.renderRemoveFavoriteButton],["gift",this.hasGiftButton,this.renderGiftButton],["facebook_share",this.hasFbShareButton,this.renderFbShareButton],["ok_share",this.hasOkShareButton,this.renderOkShareButton],["block",this.hasBlockButton,this.renderBlockButton],["settings",this.hasSettingsButton,this.renderSettingsButton],["profile",this.hasProfileButton,this.renderProfileButton],["grid",this.hasGridButton,this.renderGridButton]],i={},o=0;o<t.length;o++)e=t[o],i[e[0]]={present:e[1].bind(this),getView:e[2].bind(this)};return i},buildViews:function(e){for(var t=[],i=0;i<e.length;i++)t.push(this.buttonsList[e[i]].getView());return t},hasBlockButton:function(){return!this.user.own_profile},renderBlockButton:function(){return(new B.HoN_v3.ProfileHeaderButtons.BlockButtonView).setData(this.user.person.getUid(),this.user.person.getBlocked())},hasChatButton:function(){return this.user.profile.getChatAllowed()},renderChatButton:function(){return(new B.HoN_v3.ProfileHeaderButtons.ChatButtonView).setData(B.Session.getUserGender(),this.user.person.getUid())},isFavoriteButtonEnabled:function(){var e=B.Features.getFeature("ALLOW_OPEN_FAVOURITES");return e&&e.getEnabled()&&!this.user.own_profile&&this.user.profile.getAddToFavouritesAllowed()},hasAddFavoriteButton:function(){return this.isFavoriteButtonEnabled()&&!this.user.person.getFavourite()},renderAddFavoriteButton:function(){return(new B.HoN_v3.ProfileHeaderButtons.FavoriteButtonView).setData(!1)},hasRemoveFavoriteButton:function(){return this.isFavoriteButtonEnabled()&&this.user.person.getFavourite()},renderRemoveFavoriteButton:function(){return(new B.HoN_v3.ProfileHeaderButtons.FavoriteButtonView).setData(!0)},hasFbShareButton:function(){return B.HoN_v3&&B.HoN_v3.Partner.match("ok")?!1:Boolean(this.getShareUrl())},getShareUrl:function(){var e=this.user.profile.getSocialNetworks();return e?e.length?e[0].getUrl():void 0:!1},renderFbShareButton:function(){var e="profile_view",t={user_id:this.user.person.getUid()},i={$gpb:"FB.ShareDialogConfig",link:$u.tpl(this.getShareUrl(),t),wait_for_login:!0,click_track_url:$u.tpl("/profile/share-stats?action=1&from=profile_view&shared_user_id={user_id}",t),save_result_url:$u.tpl("/profile/share-stats?action=2&from=profile_view&shared_user_id={user_id}",t)};return $u.fb.init(),B.FbUiDialogView.set_cfg(e,i),(new B.HoN_v3.ProfileHeaderButtons.FbShareButtonView).setData(e)},hasGiftButton:function(){var e=this.user.profile.getReceivedGifts();if(!this.user.profile.getAllowSendGift()||!e)return!1;var t=e.getSuggestedGift().getThumbUrl();return Boolean(t)},renderGiftButton:function(){return(new B.HoN_v3.ProfileHeaderButtons.GiftButtonView).setData(this.user.person.getUid(),B.HoN_v3.GiftsHelper.getExperimentalGiftName(this.user.profile.getExperimentalGiftTeaserUrl()))},hasOkShareButton:function(){return B.HoN_v3.Partner.match("ok")?this.getShareUrl()?this.user.album[0].getPhotos().length?!0:!1:!1:!1},renderOkShareButton:function(){for(var e,t=this.user.album[0].getPhotos(),i=0;i<t.length;i++){var o=t[i];if(o.getIsProfilePhoto()){e=o;break}}return e||(e=t[0]),(new B.HoN_v3.ProfileHeaderButtons.OkShareButtonView).setData(this.user.person.getUid(),e.getId(),this.user.is_own_profile,this.user.big_photo)},hasSmileButton:function(){var e=B.Features.getFeature($p.FeatureType.ALLOW_SMILE);return e.getEnabled()&&this.user.profile.getAllowSmile()},renderSmileButton:function(){return new B.HoN_v3.ProfileHeaderButtons.SmileButtonView},hasProfileButton:function(){return!0},renderProfileButton:function(){var e=$r.fromQueryString(window.location.search.replace(/^\?/,"")),t=this.user.person.getNumberOfPhotos()||this.user.album[0]&&this.user.album[0].getCountOfPhotos()||0;return(new B.HoN_v3.ProfileHeaderButtons.ProfileButtonView).setData(t,this.user.own_profile,this.user.big_photo,this._getLinkUrl(this.user.person.getUid(),this.user.big_photo,e),this.user.gridOpened)},_getLinkUrl:function(e,t,i){var o,s=t?"/profile/0{user_id}":"/0{user_id}",n=$u.tpl(s,{user_id:e});return i.p&&(o={},o.p=i.p),i.folder&&(o=o||{},o.folder=i.folder),o&&(n+="?"+$r.toQueryString(o)),n},hasSettingsButton:function(){return!0},renderSettingsButton:function(){return new B.HoN_v3.ProfileHeaderButtons.SettingsButtonView},hasGridButton:function(){return this.user.own_profile&&!this.user.big_photo},renderGridButton:function(){var e=new B.HoN_v3.ProfileHeaderButtons.GridButtonView;return this.user.gridOpened&&e.setActive(),e}})),B.HoN_v3.ProfileHeaderController||(B.HoN_v3.ProfileHeaderController=$class(B.HoN_v3.ProfileHeaderBase,{name:"ProfileHeader",constructor:function(){$super(this,arguments),this.wrap_el=document,this.$e=$e.on({".js-profile-header-favorite":this.on_favorite,".js-profile-grid-toggle":this.on_grid_toggle},this)},destroy:function(){$e.un(this.$e),$super(this,arguments)},on_favorite:function(){var e=$el.down(document,".js-profile-header-btn"),t=$el.has(e,"active");e&&$el.tgl(e,"active"),e&&$el.tgl(e,"is-shown"),this.fire("favorite",!t)},on_grid_toggle:function(){B.fire("gallery:gridOpen")},build_friends:function(e,t,i,o){var s,n,r,a=t.getFriendsConnections(),l=t.getHottestFriends();i?n=a?a.getTotal():0:l?(n=l?l.length:0,s=!0):(s=!1,a?a.getStatus()==$p.SocialConnectionStatus.SOCIAL_CONNECTION_STATUS_SEARCHING?r=!0:n=a.getTotal():n=0);var _={hottest:s,own_friends:i,count:n,is_user_male:this.is_current_user_male(),loading:r};if(o)$config(_,{url:this._get_link_url("profile",e.getUid()),has_photo:{url:this._get_link_url("profile",e.getUid()),state:i?"profile-edit":"profile-view"}});else{var p=!i||e.getNumberOfPhotos()>0;$config(_,{has_photo:p&&{url:this._get_link_url("big-photo",e.getUid()),state:"big-photo-view"},no_photo:!p})
}return _},update_friends_connections2:function(e){var t=e.getHottestFriends();t&&t.length||this.update_friends_connections(e.getFriendsConnections().getTotal())},_get_link_url:function(e,t){var i;switch(e){case"profile":i="/profile/0{user_id}";break;case"big-photo":i="/0{user_id}";break;default:return""}return $u.tpl(i,{user_id:t})+location.search},_get_buttons_block:function(e){return new B.HoN_v3.ProfileHeaderButtons.Controller(e).getView().toString()},get_share_url:function(e){var t=e.getSocialNetworks();return t?t.length?t[0].getUrl():void 0:!1},is_current_user_male:function(){return B.Session.getUserGender()===$p.SexType.MALE},build_interests:function(e,t,i,o){var s=t.getInterests(),n=this.is_current_user_male();if(o)return{count:(i&&s?s.length:t.getInterestsInCommon())||0,own_interests:i,is_user_male:n,has_photo:{state:i?"profile-edit":"profile-view",url:this._get_link_url("profile",e.getUid())}};var r=!i||e.getNumberOfPhotos()>0;return{count:(i&&s?s.length:t.getInterestsInCommon())||0,own_interests:i,is_user_male:n,has_photo:r&&{state:"big-photo-view",url:this._get_link_url("big-photo",e.getUid())},no_photo:!r}},build_work_and_education:function(e){var t=this._get_profile_option(e,"work"),i=this._get_profile_option(e,"education"),o=t&&t.getDisplayValue(),s=i&&i.getDisplayValue(),n=null,r=!(o||s);if(!r){var a=t&&t.hasRequiredAction()&&t.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION||i&&i.hasRequiredAction()&&i.getRequiredAction()==$p.ActionType.IMPORT_WORK_AND_EDUCATION;n=a?{work:o||s,show_link:{is_male:"MALE"===e.gender}}:{work:o&&{work:o},education:s&&{education:s}}}return n},build_secret_comments:function(e,t){var i=e.getGender()===$p.SexType.MALE&&void 0!=t.getSecretCommentCount();return i?{count:t.getSecretCommentCount()}:void 0},build_vote_buttons:function(e){return{info_ovl_url:"/ws-rush-hour-ovl-info",disabled:!e.getVotingEnabled(),hint:e.getVoteHint()}},build_vote_result:function(e){var t=!1,i=e.getVoteResult(),o=!!e.getIsMatch();return(o||i==$p.VoteResultType.YES||i==$p.VoteResultType.MAYBE)&&(t=!0),{yes:t,message:e.getMatchMessage()}},build_online_status:function(e){var t="invisible";switch(e.getOnline()){case $p.OnlineStatus.ONLINE:t="online";break;case $p.OnlineStatus.IDLE:t="away";break;case $p.OnlineStatus.OFFLINE:t="offline";break;case $p.OnlineStatus.STATUS_UNKNOWN:t="offline"}return{active_long:"invisible"!=t&&e.getActiveLong(),status:t}},build_mobile_icon:function(e){return e.getHasMobileApp()?{ovl_url:"/ws/get-app-ovl?ref=web-ovl-icon"}:void 0},build_basic_info:function(e,t,i){if(i)return{name:e.getName(),age:e.getAge(),state:t?"profile-edit":"profile-view",url:this._get_link_url("profile",e.getUid()),has_photo:!0};var o=!t||e.getNumberOfPhotos()>0;return{name:e.getName(),age:e.getAge(),has_photo:o&&{state:"big-photo-view",url:this._get_link_url("big-photo",e.getUid())},no_photo:!o}},_get_profile_option:function(e,t){var i=null,o=[];o=e.profile.getProfileFields?e.profile.getProfileFields()||[]:e.profile.getProfileField()||[];for(var s=0;s<o.length;s++)(o[s].getId()==t||o[s].getType()==t)&&(i=o[s]);return i},_render_to_html:function(e){var t={basic_info:this.build_basic_info(e.person,e.own_profile,e.big_photo),hot_icon:e.status.getIsHot(),is_verified:e.person&&e.person.getVerifiedUser(),verified_html:this._get_verify_tooltip_text(e),user_menu:this._get_buttons_block(e),own_profile:e.own_profile,person:e.person};return e.own_profile?$config(t,{interests:this.build_interests(e.person,e.profile,e.own_profile,e.big_photo),friends:this.build_friends(e.person,e.profile,e.own_profile,e.big_photo)}):($config(t,{mobile_icon:this.build_mobile_icon(e.person),online_status:this.build_online_status(e.status),secret_comments:this.build_secret_comments(e.person,e.profile),interests:this.build_interests(e.person,e.profile,e.own_profile,e.big_photo),friends:this.build_friends(e.person,e.profile,e.own_profile,e.big_photo),work_education:this.build_work_and_education(e)}),e.profile.getIsMatch()||e.profile.getVoteResult()!=$p.VoteResultType.NONE?t.vote_result=this.build_vote_result(e.profile):t.vote_buttons=this.build_vote_buttons(e.profile)),e=t,$super(this,arguments)}})),B.HoN_v3.ProfileHeaderController2||(B.HoN_v3.ProfileHeaderController2=$class(B.HoN_v3.ProfileHeaderBase,{name:"ProfileHeader",constructor:function(){$super(this,arguments),this.wrap_el=document,this.$e=$e.on({".js-profile-header-favorite":this.on_favorite,".js-profile-grid-toggle":this.on_grid_toggle},this)},destroy:function(){$e.un(this.$e),$super(this,arguments)},on_favorite:function(){var e=$el.down(document,".js-profile-header-btn"),t=$el.has(e,"active");e&&$el.tgl(e,"active"),e&&$el.tgl(e,"is-shown"),this.fire("favorite",!t)},on_grid_toggle:function(){B.fire("gallery:gridOpen")},build_friends:function(e,t,i,o,s){var n,r,a=s.getUnitedFriends();a.getState()===$p.UnitedFriendsState.UNITED_FRIENDS_STATE_SEARCHING?r=!0:n=a.getTotalCount();var l={own_friends:i,count:n,is_user_male:this.is_current_user_male(),loading:r};if(o)$config(l,{url:this._get_link_url("profile",e.getUid()),has_photo:{url:this._get_link_url("profile",e.getUid()),state:i?"profile-edit":"profile-view"}});else{var _=!i||e.getNumberOfPhotos()>0;$config(l,{has_photo:_&&{url:this._get_link_url("big-photo",e.getUid()),state:"big-photo-view"},no_photo:!_})}return l},update_friends_connections2:function(e){this.update_friends_connections(e.getUnitedFriends().getTotalCount())},_get_link_url:function(e,t){var i;switch(e){case"profile":i="/profile/0{user_id}";break;case"big-photo":i="/0{user_id}";break;default:return""}return $u.tpl(i,{user_id:t})+location.search},_get_buttons_block:function(e){return new B.HoN_v3.ProfileHeaderButtons.Controller(e).getView().toString()},get_share_url:function(e){var t=e.getSocialNetworks();return t?t.length?t[0].getUrl():void 0:!1},is_current_user_male:function(){return B.Session.getUserGender()===$p.SexType.MALE},build_interests:function(e,t,i,o){var s=t.getInterests(),n=this.is_current_user_male();if(o)return{count:(i&&s?s.length:t.getInterestsInCommon())||0,own_interests:i,is_user_male:n,has_photo:{state:i?"profile-edit":"profile-view",url:this._get_link_url("profile",e.getUid())}};var r=!i||e.getNumberOfPhotos()>0;return{count:(i&&s?s.length:t.getInterestsInCommon())||0,own_interests:i,is_user_male:n,has_photo:r&&{state:"big-photo-view",url:this._get_link_url("big-photo",e.getUid())},no_photo:!r}},build_work_and_education:function(e){var t=this._get_profile_option(e,"work"),i=this._get_profile_option(e,"education");t=t&&t.getDisplayValue(),i=i&&i.getDisplayValue();var o=null,s=e.curr_user,n=!(t||i);if(n)return o;var r=s&&s.profile;if(r){var a=this._get_profile_option(s,"work"),l=this._get_profile_option(s,"education");a=a&&a.getDisplayValue(),l=l&&l.getDisplayValue();var _=!(l||a);if(_)var p=t||i,c=Math.ceil(p.length/5),u=3,d=p.slice(0,Math.max(c,u))+"...";o=_?{work:d,show_link:{is_male:"MALE"===e.gender}}:{work:t&&{work:t},education:i&&{education:i}}}else o=!0;return o},build_secret_comments:function(e,t){var i=e.getGender()===$p.SexType.MALE&&void 0!=t.getSecretCommentCount();return i?{count:t.getSecretCommentCount()}:void 0},build_vote_buttons:function(e){return{info_ovl_url:"/ws-rush-hour-ovl-info",disabled:!e.getVotingEnabled(),hint:e.getVoteHint()}},build_vote_result:function(e){var t=!1,i=e.getVoteResult(),o=!!e.getIsMatch();return(o||i==$p.VoteResultType.YES||i==$p.VoteResultType.MAYBE)&&(t=!0),{yes:t,message:e.getMatchMessage()}},build_online_status:function(e){var t="invisible";switch(e.getOnline()){case $p.OnlineStatus.ONLINE:t="online";break;case $p.OnlineStatus.IDLE:t="away";break;case $p.OnlineStatus.OFFLINE:t="offline";break;case $p.OnlineStatus.STATUS_UNKNOWN:t="offline"}return{active_long:"invisible"!=t&&e.getActiveLong(),status:t}},build_mobile_icon:function(e){return e.getHasMobileApp()?{ovl_url:"/ws/get-app-ovl?ref=web-ovl-icon"}:void 0},build_basic_info:function(e,t,i){if(i)return{name:e.getName(),age:e.getAge(),state:t?"profile-edit":"profile-view",url:this._get_link_url("profile",e.getUid()),has_photo:!0};var o=!t||e.getNumberOfPhotos()>0;return{name:e.getName(),age:e.getAge(),has_photo:o&&{state:"big-photo-view",url:this._get_link_url("big-photo",e.getUid())},no_photo:!o}},_get_profile_option:function(e,t){var i=null,o=[];o=e.profile.getProfileFields?e.profile.getProfileFields()||[]:e.profile.getProfileField()||[];for(var s=0;s<o.length;s++)(o[s].getId()==t||o[s].getType()==t)&&(i=o[s]);return i},_render_to_html:function(e){var t={basic_info:this.build_basic_info(e.person,e.own_profile,e.big_photo),hot_icon:e.status.getIsHot(),is_verified:e.person&&e.person.getVerifiedUser(),verified_html:this._get_verify_tooltip_text(e),user_menu:this._get_buttons_block(e),own_profile:e.own_profile,person:e.person};return e.own_profile?$config(t,{interests:this.build_interests(e.person,e.profile,e.own_profile,e.big_photo),friends:this.build_friends(e.person,e.profile,e.own_profile,e.big_photo,e.user)}):($config(t,{mobile_icon:this.build_mobile_icon(e.person),online_status:this.build_online_status(e.status),secret_comments:this.build_secret_comments(e.person,e.profile),interests:this.build_interests(e.person,e.profile,e.own_profile,e.big_photo),friends:this.build_friends(e.person,e.profile,e.own_profile,e.big_photo,e.user),work_education:this.build_work_and_education(e)}),e.profile.getIsMatch()||e.profile.getVoteResult()!=$p.VoteResultType.NONE?t.vote_result=this.build_vote_result(e.profile):t.vote_buttons=this.build_vote_buttons(e.profile)),e=t,$super(this,arguments)}})),B.HoN_v3.Profile.HeaderView=$class(B.HoN_v3.Profile.BlockView,{client_source:null,profile_link_position:null,data_loaded:!1,album_loaded:!1,can_vote:!1,photo_id:null,header:null,_person:null,constructor:function(e){$super(this,arguments),$config(this,e||{}),this.data={},this.data_loaded=this.album_loaded=!1,this.header=B.Features.getFeature($p.FeatureType.ALLOW_UNITED_FRIENDS).getEnabled()?new B.HoN_v3.ProfileHeaderController2({tpl_name:"hotornot_v2/profile/block.header",globals:{},profile_link_position:this.profile_link_position}):new B.HoN_v3.ProfileHeaderController({tpl_name:"hotornot_v2/profile/block.header",globals:{},profile_link_position:this.profile_link_position}),this.header.on({secret_comments:this.show_secret_comments,vote:this.on_vote,favorite:this.on_favorite,send_smile:this.on_send_smile},this),B.on("encounters:voted",this.on_voted,this),$e.add(document.body,"keyup",this.on_keyup,this)},destroy:function(){this.header&&(this.header.destroy(),this.header=null),this.data=null,B.un("encounters:voted",this.on_voted,this),$e.del(document.body,"keyup",this.on_keyup,this),$super(this,arguments)},render:function(){var e=$super(this,arguments);return this.data.album&&B.Encounters.fire("RushHour:toggle",this.can_vote),e},show_secret_comments:function(){var e=this._person;B.OvlQueue.push({type:"hon-v3-secret-2",html:"",context:"CLIENT_SOURCE_PROFILE_HEADER",person_id:e.getUid(),username:e.getName()})},on_vote:function(e){this.can_vote=!1;var t={user_id:this._person.getUid(),choice:e,photo_id:this.photo_id,source:this.client_source};B.Encounters.Vote.vote(t)},on_voted:function(){this.fire("voted")},on_favorite:function(e){this.fire("favorite",e)},on_send_smile:function(){this.fire("send_smile")},on_keyup:function(e){if(B.Ovl.is_visible()||"INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)return!0;var t=$e.e,i=$e.key(t);if(t.shiftKey||t.ctrlKey||t.altKey)return!0;switch(i){case 49:case 97:this.can_vote&&(this.on_vote("yes"),this.highlight_button("yes"));break;case 50:case 51:case 98:case 99:this.can_vote&&(this.on_vote("no"),this.highlight_button("no"))}return!0},set_data:function(e){return this.data_loaded=!0,$config(this.data,e),this._person=e.person,this.can_vote=!e.profile.getMatchMessage()&&e.profile.getVotingEnabled(),this},set_album:function(e){return this.album_loaded=!0,this.data.album=e,this},set_photo_id:function(e){this.photo_id=e},set_profile:function(e){return this.data.profile=e,this},get_result:function(){return this.data_loaded&&this.album_loaded?this.header._render_to_html(this.data):""},highlight_button:function(e){this.header.wrap_el=$("profile-header"),this.header.highlight_button(e),this.header.disable_buttons()},toggle_smile_button:function(e){this.header.toggle_smile_button(e)},show_confirmation:function(e,t){return $u.dust.render("overlays/popup.confirmation",t,e)}}),function(){function e(e,r){return e.write('<div class="profile-widget').section(r.get(["_HIDE"],!1),r,{block:t},{}).write(' js-wrap"> <h2>Verifications <i class="ico ico--verify-tick"></i></h2> ').section(r.get(["SHOW_ALL"],!1),r,{block:i},{}).write(" ").section(r.get(["VERIFY_HIDDEN"],!1),r,{block:o},{}).write(" ").section(r.get(["OTHER_VERIFY_HIDDEN"],!1),r,{block:s},{}).write(' <ul class="profile-widget__items social-networks"> ').section(r.get(["LINK"],!1),r,{block:n},{}).write(" </ul> ").section(r.get(["BUTTON"],!1),r,{block:g},{}).write(" </div>")}function t(e){return e.write(" hide")}function i(e){return e.write(' <div class="profile-widget__expand"> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--show js-toggle" data-jst-class="hide">Show all</span> <span class="p-link profile-widget__expand-lnk profile-widget__expand-lnk--hide js-toggle" data-jst-class="hide">Hide all</span> </div> ')}function o(e){return e.write(' <p class="profile-widget__txt">Only you can see this block. Other users can\'t see it.</p> ')}function s(e,t){return e.write(' <p class="profile-widget__txt">To see other users’ verification details, you need to show <a href="').reference("url",t).write('" class="link grey app" rel="').reference("state",t).write('">your own</a>.</p> ')}function n(e,t){return e.write(" ").section(t.get(["_LINKED"],!1),t,{block:r},{}).write(" ").section(t.get(["UNLINKED"],!1),t,{block:c},{}).write(" ")}function r(e,t){return e.write(' <li class="profile-widget__item social-networks__item social-networks__item--linked"> <i class="inline ico ico--lg ico--color ico--').reference("link_type",t).write('-lg">').section(t.get(["_EXTERNAL_LINK"],!1),t,{block:a},{}).write('</i> <div class="inline social-networks__txt"> <div><b class="social-networks__title">').reference("name",t).write("</b></div> ").section(t.get(["_SOCIAL_FRIENDS"],!1),t,{block:l},{}).write(" ").section(t.get(["VERIFIED_TEXT"],!1),t,{block:_},{}).write(" ").section(t.get(["SPP_TEXT"],!1),t,{block:p},{}).write(" </div> </li> ")}function a(e,t){return e.write('<a href="').reference("url",t).write('" class="b-link" target="_blank" data-reg="hon/').reference("user_id",t).write("/socialclick/").reference("link_type",t).write('"></a>')}function l(e,t){return e.write('<span class="lgrey">').reference("num",t).write(" ").reference("friends",t).write("</span>")}function _(e){return e.write('<span class="lgrey">Verified</span>')}function p(e){return e.write('<span class="lgrey">Activated</span>')}function c(e,t){return e.write(' <li class="profile-widget__item social-networks__item"> <i class="inline ico ico--lg ico--grey ico--').reference("link_type",t).write('-lg"><!-- -->').section(t.get(["_EXTERNAL"],!1),t,{block:u},{}).write("<!-- -->").section(t.get(["_SPP"],!1),t,{block:d},{}).write("<!-- -->").section(t.get(["_PHONE"],!1),t,{block:h},{}).write('<!-- --></i> <div class="inline social-networks__txt"> <div><b class="grey social-networks__title">').reference("name",t).write('</b></div> <span class="link social-networks__connect">').section(t.get(["VERIFY_TEXT"],!1),t,{block:b},{}).section(t.get(["SPP_VERIFY_TEXT"],!1),t,{block:E},{}).write('</span> </div> <div class="social-networks__ico"> <i class="icon ico--grey ico--arrow-r"></i> </div> </li> ')}function u(e,t){return e.write('<span class="b-link js-external-link" data-url="').reference("url",t).write('" data-window-width="').reference("width",t).write('" data-window-height="').reference("height",t).write('" tabindex="-1"></span>')}function d(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="payment" data-ovl-url="').reference("url",t).write('" tabindex="-1"></span>')}function h(e,t){return e.write('<a class="b-link" href="').reference("url",t).write('" tabindex="-1"></a>')}function b(e){return e.write("Verify")}function E(e){return e.write("Activate")}function g(e,t){return e.write(' <div class="btn btn--sm btn--white btn--block"> <span class="btn-txt">Get verified</span> <span class="b-link js-verify-open" data-ovl-type="').reference("ovl_type",t).write('" data-ovl-url="').reference("ovl_url",t).write('"></span> </div> ')}return $u.dust.register("verify/block.verified",e),e.s={_HIDE:t,SHOW_ALL:i,VERIFY_HIDDEN:o,OTHER_VERIFY_HIDDEN:s,LINK:n,BUTTON:g},n.s={_LINKED:r,UNLINKED:c},r.s={_EXTERNAL_LINK:a,_SOCIAL_FRIENDS:l,VERIFIED_TEXT:_,SPP_TEXT:p},c.s={_EXTERNAL:u,_SPP:d,_PHONE:h,VERIFY_TEXT:b,SPP_VERIFY_TEXT:E},e}(),function(){function e(e,i){return e.write('<div class="ovl-body ovl-body--narrow"> <form action="#" method="post"> <div class="ovl-content"> <h1> <span class="brick brick--xsm brick--sky ovl-verified__icon">\r\n<i class="ico ico--white ico--ok-sm"></i>\r\n</span>Get verified!\n</h1> <p class="large">').reference("PAGE_partner_name",i).write(' is a no fake-zone! Prove to other users that you’re you by getting Verified status. Use <b>any 2 options</b> from this list:</p> <div class="verify-methods ovl-scroll js-control" data-control-type="scrollable"> <div class="ovl-scroll_ js-scroller"> ').section(i.get(["LINK"],!1),i,{block:t},{}).write(' </div> </div> </div> <div class="ovl-buttons"> <div class="btn btn--sm btn--white"> <span class="btn-txt">Done</span> <span class="b-link js-ovl-close"></span> </div> </div> </form> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div>')}function t(e,t){return e.write(" ").section(t.get(["_LINKED"],!1),t,{block:i},{}).write(" ").section(t.get(["UNLINKED"],!1),t,{block:a},{}).write(" ")}function i(e,t){return e.write(' <div class="verify-method"> <i class="ico ico--lg ico--color ico--').reference("link_type",t).write('-lg"> ').section(t.get(["_EXTERNAL_LINK"],!1),t,{block:o},{}).write(' </i> <div class="verify-method__txt"> <div class="verify-method__title"><b>').reference("name",t).write("</b></div> ").section(t.get(["_SOCIAL_FRIENDS"],!1),t,{block:s},{}).write(" ").section(t.get(["VERIFIED_TEXT"],!1),t,{block:n},{}).write(" ").section(t.get(["SPP_TEXT"],!1),t,{block:r},{}).write(" </div> </div> ")}function o(e,t){return e.write('<a href="').reference("url",t).write('" class="b-link" target="_blank" data-reg="hon/').reference("user_id",t).write("/socialclick/").reference("link_type",t).write('"></a>')}function s(e,t){return e.write('<span class="lgrey">').reference("num",t).write(" ").reference("friends",t).write("</span>")}function n(e){return e.write('<span class="lgrey">Verified</span>')}function r(e){return e.write('<span class="lgrey">Activated</span>')}function a(e,t){return e.write(' <div class="verify-method verify-method--unlinked"> <i class="ico ico--lg ico--grey ico--').reference("link_type",t).write('-lg"> ').section(t.get(["_EXTERNAL"],!1),t,{block:l},{}).write(" ").section(t.get(["_SPP"],!1),t,{block:_},{}).write(" ").section(t.get(["_PHONE"],!1),t,{block:p},{}).write(' </i> <div class="verify-method__txt"> <div class="verify-method__title"><b class="grey">').reference("name",t).write('</b></div> <span class="link">Verify</span> </div> </div> ')}function l(e,t){return e.write('<span class="b-link js-external-link" data-url="').reference("url",t).write('" data-window-width="').reference("width",t).write('" data-window-height="').reference("height",t).write('" tabindex="-1"></span>')}function _(e,t){return e.write('<span class="b-link js-ovl-open" data-ovl-type="payment" data-ovl-url="').reference("url",t).write('" tabindex="-1"></span>')}function p(e,t){return e.write('<a class="b-link" href="').reference("url",t).write('" tabindex="-1"></a>')}return $u.dust.register("verify/popup.verified",e),e.s={LINK:t},t.s={_LINKED:i,UNLINKED:a},i.s={_EXTERNAL_LINK:o,_SOCIAL_FRIENDS:s,VERIFIED_TEXT:n,SPP_TEXT:r},a.s={_EXTERNAL:l,_SPP:_,_PHONE:p},e}(),B.HoN_v3.Profile.VerifyView=$class(B.HoN_v3.Profile.BlockView,{_tpl:"verify/block.verified",_popup_tpl:"verify/popup.verified",ovl_type:"hon-v3-notify",map_types:{1:"facebook",2:"vk",3:"odnoklassniki",4:"google",9:"google",12:"instagram",14:"linkedin",15:"twitter"},constructor:function(){$super(this,arguments),B.HoN_v3.on("social-account:linked",this.linked,this),$e.on(".js-external-link",this.open_window,this)},destroy:function(){B.HoN_v3.un("social-account:linked",this.linked,this),$e.un(".js-external-link",this.open_window,this)},set_data:function(e,t,i,o,s){var n,r,a,l=e&&e.getMethods()||[],_=[],p=[],c={},u=0,d=3,h="",b={};if(b[$p.SexType._map[t]]=!0,this.linked_html=$u.dust.render("overlays/popup.confirmation",b,"SETTINGS_SOCIAL_CONNECTED"),!o&&!l.length)return this._data=i&&s?{OTHER_VERIFY_HIDDEN:{url:"/settings?edit=verified_status",state:"settings"}}:null,this;for(var E=0,g=l.length;g>E;E+=1){switch(n=l[E],a=n.getType(),h=n.getDisplayMessage()||"",r=null,a){case $p.UserVerificationMethodType.VERIFY_SOURCE_EXTERNAL_PROVIDER:c=n.getExternalProviderData(),u=this.map_types[c.getType()];var m=c.hasAuthData()&&c.getAuthData().hasOauthUrl();r={_SOCIAL_FRIENDS:{num:h,friends:""},VERIFY_TEXT:!0,_EXTERNAL:{url:m?c.getAuthData().getOauthUrl():null,width:600,height:750},link_type:u,name:n.getName()};break;case $p.UserVerificationMethodType.VERIFY_SOURCE_SPP:var f=B.Features.getFeature($p.FeatureType.ALLOW_SUPER_POWERS),T=f.getEnabled();if(T)continue;r={_SPP:{url:"/billing/spp-ws.phtml?activation_place=26"},SPP_TEXT:!0,SPP_VERIFY_TEXT:!0,link_type:"spp",name:n.getName()};break;case $p.UserVerificationMethodType.VERIFY_SOURCE_PHONE_NUMBER:r={_PHONE:{url:"/promo/verification.phtml"},VERIFIED_TEXT:!0,VERIFY_TEXT:!0,link_type:"phone",name:n.getName()};break;default:continue}n.getIsConfirmed()?_.push(r):p.push(r)}return this._data={PAGE_partner_name:$l.get("partner").title,LINK:{_LINKED:_,UNLINKED:p},_HIDE:l.length>d,SHOW_ALL:l.length>d,VERIFY_HIDDEN:e.getIsVerified()&&s,BUTTON:!o&&!this.viewerVerified&&{ovl_type:"verify",ovl_url:""}},this},open_window:function(e){var t=e.getAttribute("data-url"),i=e.getAttribute("data-window-width"),o=e.getAttribute("data-window-height");this._opened_window=window.open(t,"auth","width="+i+",height="+o),this._open_t=new $t(this.check_close,this),this._open_t.set(1e3)},stop_linking:function(){this._open_t.clear(),this._open_t=this._cont_el=this._btn_el=null},check_close:function(){return this._opened_window.closed?(this.stop_linking(),void 0):(this._open_t.set(),void 0)},linked:function(){B.Ovl.open({type:this.ovl_type,html:this.linked_html}),B.on("ovl:close",this.ready,this)},ready:function(e){e.type!==this.ovl_type||B.IM.opened||B.App.reload(),B.un("ovl:close",this.ready,this)},get_ovl_html:function(){return null===this._data?"":$u.dust.render(this._popup_tpl,this._data)}}),function(){function e(e,i){return e.write('<div class="section section--profile"> <div class="entry-points"> ').section(i.get(["POPULARITY"],!1),i,{block:t},{}).write(" ").section(i.get(["CREDITS"],!1),i,{block:a},{}).write(" ").section(i.get(["SPP"],!1),i,{block:p},{}).write(" ").section(i.get(["VIP"],!1),i,{block:d},{}).write(" </div> </div>")}function t(e,t){return e.write(' <div class="entry-point"> <i class="ico-popularity ico-popularity--lg ico-popularity--').section(t.get(["_VERY_LOW"],!1),t,{block:i},{}).section(t.get(["_LOW"],!1),t,{block:o},{}).section(t.get(["_AVERAGE"],!1),t,{block:s},{}).section(t.get(["_HIGH"],!1),t,{block:n},{}).section(t.get(["_VERY_HIGH"],!1),t,{block:r},{}).write(' entry-point__icon"></i> <div class="grey">Popularity</div> <i class="inline ico ico--add"></i> <b class="inline">Increase</b> <a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a> </div> ')}function i(e){return e.write("vlow")}function o(e){return e.write("low")}function s(e){return e.write("average")}function n(e){return e.write("high")}function r(e){return e.write("vhigh")}function a(e,t){return e.write(" ").section(t.get(["NO_CREDITS"],!1),t,{block:l},{}).write(" ").section(t.get(["HAVE_CREDITS"],!1),t,{block:_},{}).write(" ")}function l(e,t){return e.write(' <div class="entry-point entry-point--off"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--credits entry-point__icon"><a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a></i> <div class="grey">0 credits</div> <i class="inline ico ico--add"></i> <b class="inline">Buy</b> </div> ')}function _(e,t){return e.write(' <div class="entry-point"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--credits entry-point__icon"><a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a></i> <div class="grey">').reference("num",t).write(" ").reference("credits",t).write('</div> <i class="inline ico ico--add"></i> <b class="inline">Get more</b> </div> ')}function p(e,t){return e.write(" ").section(t.get(["OFF"],!1),t,{block:c},{}).write(" ").section(t.get(["ON"],!1),t,{block:u},{}).write(" ")}function c(e,t){return e.write(' <div class="entry-point entry-point--off"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--spp entry-point__icon"><a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a></i> <div class="grey">Super Powers</div> <i class="inline ico ico--add"></i> <b class="inline">Activate</b> </div> ')}function u(e,t){return e.write(' <div class="entry-point"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--spp entry-point__icon"><a href="').reference("url",t).write('" class="b-link app" rel="').reference("state",t).write('"></a></i> <div class="grey">Super Powers</div> <i class="inline ico ico--color ico--circle-tick"></i> <b class="inline">Activated</b> </div> ')}function d(e,t){return e.write(" ").section(t.get(["OFF"],!1),t,{block:h},{}).write(" ").section(t.get(["ON"],!1),t,{block:b},{}).write(" ")}function h(e){return e.write(' <div class="entry-point entry-point--off"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--vip entry-point__icon"><span class="b-link js-vip-button"></span></i> <div class="grey">VIP member</div> <i class="inline ico ico--add"></i> <b class="inline">Activate</b> </div> ')}function b(e){return e.write(' <div class="entry-point"> <i class="ico-feature ico-feature--xlg ico-feature--color ico-feature--vip entry-point__icon"><span class="b-link js-vip-button"></span></i> <div class="grey">VIP member</div> <i class="inline ico ico--color ico--circle-tick"></i> <b class="inline">Activated</b> </div> ')}return $u.dust.register("profile/block.entry-points",e),e.s={POPULARITY:t,CREDITS:a,SPP:p,VIP:d},t.s={_VERY_LOW:i,_LOW:o,_AVERAGE:s,_HIGH:n,_VERY_HIGH:r},a.s={NO_CREDITS:l,HAVE_CREDITS:_},p.s={OFF:c,ON:u},d.s={OFF:h,ON:b},e}(),B.HoN_v3.Profile.EntryViewController||(B.HoN_v3.Profile.EntryViewController=$class($u.Observable,{_container:null,_data:null,destroy:function(){this._container=this._data=null},set_container:function(e){return this._container=e,this},get_result:function(){var e=new B.HoN_v3.Profile.EntryView,t=B.Features.getFeature($p.FeatureType.ALLOW_SUPER_POWERS),i=t&&t.getEnabled(),o=B.Features.getFeature($p.FeatureType.ALLOW_PAID_VIP),s=o&&o.getEnabled(),n=this._data.person.getPopularityLevel(),r=this._data.person.getAvailableCredits(),a=o.getRequiredAction()!==$p.ActionType.NO_ACTION;return e.setSpp(i).setData(n,r),a&&e.setVip(s),e.toString()},render:function(){var e=this._container||document.createElement("div");return $el.dom.html(e,this.get_result()),e},set_data:function(e){return this._data=e,this}})),B.HoN_v3.Profile.EntryView||(B.HoN_v3.Profile.EntryView=$class(B.DustView,{template:"profile/block.entry-points",setSpp:function(e){var t={};return t.SPP={},t.SPP[e?"ON":"OFF"]={url:"/spp",state:"spp-promo"},this.set(t),this},setVip:function(e){var t={};return t.VIP={},t.VIP[e?"ON":"OFF"]=!0,this.set(t),this},setData:function(e,t){var i={},o={10:"_VERY_LOW",20:"_LOW",30:"_AVERAGE",40:"_HIGH",50:"_VERY_HIGH"};return i.POPULARITY={url:"/popularity",state:"popularity"},i.POPULARITY[o[e]]=!0,i.CREDITS={},i.CREDITS[t>0?"HAVE_CREDITS":"NO_CREDITS"]={url:"/credits",state:"credits",num:t,credits:$l.get_num_dependent("credits",t)},this.set(i),this}})),function(){function e(e,o){return e.write('<div class="ovl-body"> <div class="ovl-content"> <p class="x-large"> ').section(o.get(["MALE"],!1),o,{block:t},{}).write(" ").section(o.get(["FEMALE"],!1),o,{block:i},{}).write(' </p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Complete it now</span> <a href="').reference("profile_url",o).write('" class="b-link app" rel="profile-edit"></a> </div> <div class="btn btn--white"> <span class="btn-txt">Cancel</span> <span class="b-link js-ovl-close"></span> </div> </div> </div>')}function t(e,t){return e.reference("name",t).write(" has filled in more of his profile than you. Complete at least 60% of your own profile to read his.")}function i(e,t){return e.reference("name",t).write(" has filled in more of her profile than you. Complete at least 60% of your own profile to read hers.")}return $u.dust.register("profile/popup.empty-info",e),e.s={MALE:t,FEMALE:i},e}(),B.HoN_v3.Overlays||(B.HoN_v3.Overlays={}),B.HoN_v3.Overlays.ProfileEmptyView||(B.HoN_v3.Overlays.ProfileEmptyView=$class(B.DustView,{template:"profile/popup.empty-info",setData:function(e,t){var i={profile_url:"/profile/"+B.Session.getLogin()+"?edit=personal-info"};return i[$p.SexType.getKey(e)]={name:t},this.set(i)}})),B.HoN_v3.Profile.Grid=B.HoN_v3.Profile.Grid||(B.HoN_v3.Profile.Grid={}),B.HoN_v3.PhotoGalleryViewGrid=$class($u.Observable,{name:"PhotoGalleryViewGrid",NUM_PHOTOS_PER_LINE:6,NUM_MIN_BLOCKS:24,wrapEl:null,photoTpl:null,isDust:null,photos:null,photoUrlTpl:null,eventElements:null,edit_$e:null,imagesList:[],photosLength:0,blocksLength:0,constructor:function(e,t,i,o,s){$super(this,arguments),this.wrapEl=e,this.photoTpl=t,this.isDust=i,this.photos=o,this.photoUrlTpl=s,this.elPhotosList=$el.down(this.wrapEl,".js-gallery-photos"),this.photosLength=this.photos.length},destroy:function(){$super(this,arguments)},redraw:function(){this._makeImagesList();var e,t,i=document.createDocumentFragment();for(e=0;e<this.photosLength;e++)t=this.imagesList[e],i.appendChild(t);this.imagesList=[],this.elPhotosList.innerHTML="",this.elPhotosList.appendChild(i),this._appendUploadBlocks()},update:function(e){e.photos&&(this.photos=e.photos,this.photosLength=e.photos.length),this._countBlocksLength(),this.redraw()},_countBlocksLength:function(){this.blocksLength=this.photos.length,this.blocksLength++,this._isAllowVideoUpload()&&this.blocksLength++},_appendUploadBlocks:function(){var e,t=document.createDocumentFragment(),i=0;if(this.blocksLength<this.NUM_MIN_BLOCKS)i=this.NUM_MIN_BLOCKS-this.blocksLength,this.blocksLength>this.NUM_MIN_BLOCKS-this.NUM_PHOTOS_PER_LINE&&(i+=this.NUM_PHOTOS_PER_LINE);else if(this.blocksLength%this.NUM_PHOTOS_PER_LINE==0)i=this.NUM_PHOTOS_PER_LINE;else{var o=Math.ceil(this.blocksLength/this.NUM_PHOTOS_PER_LINE);i=o*this.NUM_PHOTOS_PER_LINE-this.blocksLength+this.NUM_PHOTOS_PER_LINE}for(e=0;i>e;e++){var s=this._drawImage({upload_item:!0,uploadSource:$p.ClientSource.CLIENT_SOURCE_MY_PROFILE_PHOTO_GRID});t.appendChild(s)}this.elPhotosList.appendChild(t)},_checkVideoUpload:function(){var e=this._isAllowVideoUpload();e||$el.tgl(this.wrapEl,"photo-list--video",!e)},_isAllowVideoUpload:function(){var e=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO),t=e.getEnabled();if(t)for(var i=0;i<this.photos.length;++i)if(this.photos[i].video){t=!1;break}return t},_makeImagesList:function(){var e,t;for(this.imagesList=[],e=0;e<this.photosLength;e++)t=this.photos[e],this.imagesList.push(this._drawImage(t))},_drawImage:function(e){return this.isDust?$u.tpl2el($u.dust.render(this.photoTpl,e)):$u.tpl2el_ex(this.photoTpl,e)
},_getItemId:function(e){return e.getAttribute("data-id")},_getPhotoById:function(e){var t,i;for(t=0;t<this.photosLength;t+=1)if(i=this.photos[t],i&&e===i.id)return i;return null},get_viewport_width:function(){return null},unlock:function(){},lock:function(){}}),B.HoN_v3.PhotoGalleryGrid=$class(B.HoN_v3.PhotoGalleryEdit,{name:"PhotoGalleryGrid",photo_tpl:"hotornot_v2/profile/block.photo-list",dust:!0,constructor:function(){this.view_type=B.HoN_v3.PhotoGalleryViewGrid,$super(this,arguments),this.bindEvents()},destroy:function(){this.unbindEvents(),$super(this,arguments)},bindEvents:function(){this.$b_grid=B.on({"import:video-imported":this.onVideoUploaded,"video:already_present":this.onVideoPresent,"video:removed":this.onVideoRemoved,"gallery:photoDeleted":this.onPhotoDeleted,"gallery:photoSetDefault":this.onSetDefault,"gallery:photoMove":this.onMove},this)},unbindEvents:function(){B.un(this.$b_grid)},onPhotoDeleted:function(e){this.delete_done(e)},onSetDefault:function(e){this.default_photo_id=e,this.set_default_done(e,!0)},onMove:function(){this.on_move_done.apply(this,arguments[0])},onVideoUploaded:function(){$el.add(this.wrap_el,"photo-list--video-progress"),$el.add(this.wrap_el,"photo-list--video"),$el.add(this.wrap_el,"loading"),setTimeout(function(){if(this.photos.length){var e=this.photos[0];if(e.video){var t={photo_id:this.photos[0].id,entry_id:this.entries[0].id};this.delete_done(t)}}}.bind(this),300)},onVideoPresent:function(){B.fire("gallery:gridPreloadPhotos"),$el.del(this.wrap_el,"photo-list--video")},onVideoRemoved:function(){$el.add(this.wrap_el,"photo-list--video"),B.fire("gallery:gridPreloadPhotos")},create_view:function(){this.view=new this.view_type(this.wrap_el,this.photo_tpl,this.dust,this.photos,this.photo_url_tpl)},prepare_photo:function(e){var t=e.video;return e=$config(e,$u.process_coach_status(e.coach_status)),e.allow_replace?(e.can_delete=!1,e.can_replace=!0):(e.can_delete=!0,e.can_replace=!1),e.allow_replace&&t&&(e.can_delete=!0),e.isVideo=t,e},delete_photo:function(e){var t,i;for(t=0;t<this.photos.length;t+=1)if(i=this.photos[t],i.id===e){i.video&&B.fire("video:removed",i),this.photos.splice(t,1);break}this.client_total-=1,this.total-=1,this.update_count(),this.update_view(!0)},prevent_big_width:function(){this.update_view(!0)}}),B.HoN_v3.Profile.Grid.View||(B.HoN_v3.Profile.Grid.View=$class(B.DustView,{template:"photos/block.photo-list",constructor:function(){$super(this,arguments),this.set({_GRID_MODE:{},UPLOAD:{DEFAULT_UPLOAD:{}}})},setVideoEnabled:function(){return this.set("_VIDEO_ENABLED",!0)},setUploadSource:function(e){return this.set("UPLOAD/DEFAULT_UPLOAD/uploadSource",e)}})),B.HoN_v3.Profile.Grid.ViewController||(B.HoN_v3.Profile.Grid.ViewController=$class($u.Observable,{wrap:null,debounceScroll:null,openTimer:null,gridOpened:!1,$b:null,$e_uploadController:null,$e_currentUser:null,gallery:null,uploadGroup:null,PHOTO_WIDTH:150,PHOTO_HEIGHT:150,OPEN_DELAY:190,SCROLL_ADDITIONAL_SPACE:1e3,GALLERY_CONTAINER_NAME:".photo-list--grid",constructor:function(e,t){$super(this,arguments),this.wrap=e,this.gridOpened=t,this.bindEvents()},destroy:function(){this.unbindEvents(),this.galleryDestroy(),$super(this,arguments)},bindEvents:function(){return this.debounceScroll=$t.debounce(this.showVisibleImages,30,this),this.openTimer=new $t(this.showVisibleImages,this),this.uploadGroup=B.Upload2.Controller.get_group("photos_of_me"),$e.add(window,"scroll",this.debounceScroll,this),this.$bb=B.on({"import:done_all":this.onGridPreloadPhotos,"gallery:gridOpen":this.onGridOpen,"gallery:gridPreloadPhotos":this.onGridPreloadPhotos},this),this.$e_uploadController=this.uploadGroup.on({ready:this.onUploadPhoto},this),this.$e_currentUser=B.HoN_v3.CurrentUser.on({photo_removed:this.onPhotoRemoved},this),this},unbindEvents:function(){return $e.del(window,"scroll",this.debounceScroll,this),B.un(this.$bb),this.$e_uploadController&&(this.uploadGroup.un(this.$e_uploadController),B.Upload2.Controller.un(this.$e_uploadController),this.$e_uploadController=null),this.$e_currentUser&&(B.HoN_v3.CurrentUser.un(this.$e_currentUser),this.$e_currentUser=null),this.uploadGroup=null,this.debounceScroll.clear(),this.debounceScroll=null,this.openTimer.clear(),this.openTimer=null,this},galleryInit:function(e){if(this.galleryDestroy(),e){var t=$config(e,{wrap_el:this._galleryGetContainer(this.wrap)});this.gallery=new B.HoN_v3.PhotoGalleryGrid(t)}return this},galleryDestroy:function(){return this.gallery&&(this.gallery.destroy(),this.gallery=null),this},showVisibleImages:function(e){if(!this.gridOpened&&!e)return!1;for(var t=$el.select(this.wrap,".photo-list__item--lazy",!1),i=0;i<t.length;i++){var o=t[i];this._canShowImage(o)&&this._showImage(o)}},_galleryGetContainer:function(e){return $el.down(e,this.GALLERY_CONTAINER_NAME)},_showImage:function(e){var t=$el.down(e,".photo-list__img");if(t){var i=e.getAttribute("data-id"),o=t.getAttribute("data-lazy-url");t.setAttribute("src",o),$el.del(e,"photo-list__item--lazy"),this._setPhotoIsShowed(i)}},_canShowImage:function(e){var t=e.getBoundingClientRect(),i=(window.innerHeight||document.documentElement.clientHeight)+this.SCROLL_ADDITIONAL_SPACE;return t.top>=0&&t.left>=0&&t.top<=i},onGridOpen:function(){this.gridOpened=!this.gridOpened,this.gridOpened&&(this._sendOpenStatistic(),this.openTimer.set(this.OPEN_DELAY))},onUploadPhoto:function(e,t){var i={id:t.photo_id,url:t.preview_url,width:this.PHOTO_WIDTH,height:this.PHOTO_HEIGHT};t.is_private&&(i.coach_status=-3,i.coach_text=$l.get("uploader",["PHOTOS_COACHING","private"])),this.gallery.on_add_photo(i),this.showVisibleImages(),this.fire("photo-count-updated")},onGridPreloadPhotos:function(e){this.showVisibleImages(e)},_setPhotoIsShowed:function(e){for(var t,i=this.gallery.photos,o=0;o<i.length;o++)t=i[o],t&&e==t.id&&(t.photo_is_lazy=!1,t.photo_preview_url=t.photo_lazy_url)},_sendOpenStatistic:function(){var e=$p.CommonStatsEventType.COMMON_EVENT_SHOW,t=$p.CommonStatsSource.OPEN_GRID_MODE_IN_PROFILE,i=(new $p.ServerAppStats).setCommonStats((new $p.CommonStats).setSource(t).setEvent(e));new $gpb.Rpc($p.MessageType.SERVER_APP_STATS,i).request()},onPhotoRemoved:function(e){this.gallery.delete_photo(e)}})),B.HoN_v3.Profile.Grid.Controller=$class($u.Observable,{album:null,privatePhotosCount:0,wrap:null,photoList:null,constructor:function(e,t,i,o){return $super(this,arguments),this.wrap=e,this.album=t,this.privatePhotosCount=i,this.viewController=new B.HoN_v3.Profile.Grid.ViewController(this.wrap,o),this.viewController.on({"photo-count-updated":this.onPhotoCountUpdated},this),this.photoList=this._getPhotoList(),this.gridPreloadTimer=new $t(function(){B.fire("gallery:gridPreloadPhotos")},this),this},destroy:function(){this.gridPreloadTimer.clear(),this.gridPreloadTimer=null,this.viewController&&(this.viewController.destroy(),this.viewController=null),$super(this,arguments)},onPhotoCountUpdated:function(){this.fire("photo-count-updated")},galleryInit:function(){this.viewController.galleryInit(this.photoList),this.gridPreloadTimer.set(100)},_isAllowVideoUpload:function(){var e=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO),t=e.getEnabled();if(t)for(var i=0;i<this.photoList.length;++i)if(this.photoList[i].video){t=!1;break}return t},_getPhotoList:function(){return this.album?this._convertToPhotoList(this.album):null},_convertToPhotoList:function(e){for(var t,i,o=B.Features.getFeature($p.FeatureType.ALLOW_PRIVATE_PHOTOS).getEnabled(),s=$gpb.namespace("badoo.bma"),n=this.privatePhotosCount,r=!0,a=[],l=[],_=0,p={$gpb:"Hotornot.PhotoList.PhotoList",entries:e.map(function(e){return _=e.getOwnerId()||_,a=a.concat(e.getPhotos()||[]),l=l.concat((e.getPhotos()||[]).map(function(){return e})),{$gpb:"Hotornot.PhotoList.Entry",id:e.getUid(),n:e.getCountOfPhotos(),is_personal:!1}}),photo_url_tpl:"/0"+_+"/{photo_id}"+location.search},c=B.Features.getFeature($p.FeatureType.ALLOW_VIEW_FACEBOOK_PHOTOS).getEnabled(),u=!1,d=0,h=[],b=a.length,E=0;E<a.length;E++){var g,m=a[E],f=l[E],T=f.getAlbumType()===$p.AlbumType.ALBUM_TYPE_PRIVATE_PHOTOS,v=T&&!f.getAccessable(),O=m.getExternalProviderSource()&&m.getExternalProviderSource()==$p.ExternalProviderType.EXTERNAL_PROVIDER_TYPE_FACEBOOK;if(!c&&O&&!this.own_profile&&"profile"===this.source){if(d+=1,u)continue;u=!0,t=E}var y,I,w=m.getRating(),R=w&&w.getRateType(),S=R===s.PhotoRateType.PHOTO_RATE_TYPE_STAR_ONE||R===s.PhotoRateType.PHOTO_RATE_TYPE_STAR_TWO;g=T?$l.get("uploader",["PHOTOS_COACHING","private"]):w&&w.getRateActionMessage(),m.getVideo()?(y=m.getVideo().getUrl(),I=m.getVideo().getIsProcessing()):y=!1,i={active:m.getIsProfilePhoto()?"active":null,$gpb:"Hotornot.PhotoList.Photo",id:m.getId(),eid:l[E].getUid(),w:this.viewController.PHOTO_WIDTH,h:this.viewController.PHOTO_HEIGHT,can_set_default:!T&&m.getCanSetAsProfilePhoto(),allow_replace:!T&&S,can_replace:S,photo_preview_url:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",photo_lazy_url:m.getPreviewUrl(),photo_is_lazy:!0,ovl_url:"/invite/"+_+"/"+m.getId(),coach_private:r&&T&&!v,coach_status:w&&R,coach_text:g,video:y&&{url:y},video_processing:y&&I,has_menu:o&&r&&!v,is_own:r,is_default:m.getIsProfilePhoto(),is_personal:m.getIsPhotoOfMe(),is_private:T,is_private_locked:v,is_private_unlocked:T&&!r&&!v,private_text:v&&$u.tpl($l.get("hon/photo_list",["PHOTO_NAVIGATION","PRIVATE_PHOTOS_TITLE"]),{number:n,private_photos:$l.get_num_dependent("private_photo",n)})},!this._isAllowViewPhotos()&&E>0&&!r&&(i.block="nophoto"),h.push(i)}return c||!u||r||(h[t].fbPhotosTotal=d,h[t].is_fb_blocked=!0),a=h,p.photos=a,p.total=b,p},_isAllowViewPhotos:function(){var e=B.Features.getFeature("ALLOW_VIEW_PHOTOS");return e&&e.getEnabled()},getView:function(){var e=(new B.HoN_v3.Profile.Grid.View).setUploadSource($p.ClientSource.CLIENT_SOURCE_MY_PROFILE_PHOTO_GRID);return this._isAllowVideoUpload()&&e.setVideoEnabled(),e.toString()}}),B.HoN_v3.Profile.GridView=$class(B.HoN_v3.Profile.BlockView,{model:null,isOpened:!1,controller:null,constructor:function(e){$super(this,arguments),$config(this,e)},destroy:function(){this.model=null,this.controller&&this.controller.destroy(),$super(this,arguments)},set_data:function(e,t){return this.model=e,this.isOpened=t,this},getResult:function(){return this.controller&&this.controller.destroy(),this.controller=new B.HoN_v3.Profile.Grid.Controller(this._container,this.model.album,this.model.private_photos_count,this.isOpened),this.controller.on({"photo-count-updated":this.onPhotoCountUpdated},this),this.controller.getView()},onPhotoCountUpdated:function(){this.fire("photo-count-updated")},render:function(){$super(this,arguments),this.controller.galleryInit()}}),$u.Dropzone||($u.Dropzone=$class($u.Observable,{name:"Dropzone",constructor:function(e){this._body=document.body,this._wrap=e,$super(this,arguments),$e.add(this._wrap,"dragover",this._ondragover_wrap,this),$e.add(this._wrap,"dragleave",this._ondragleave_wrap,this),$e.add(this._wrap,"drop",this._ondrop_wrap,this),$e.add(this._body,"dragover",this._ondragover_body,this),$e.add(this._body,"dragleave",this._ondragleave_body,this),$e.add(this._body,"drop",this._ondrop_body,this)},destroy:function(){$e.del(this._body,"dragover",this._ondragover_body,this),$e.del(this._body,"dragleave",this._ondragleave_body,this),$e.del(this._body,"drop",this._ondrop_body,this),$e.del(this._wrap,"dragover",this._ondragover_wrap,this),$e.del(this._wrap,"dragleave",this._ondragleave_wrap,this),$e.del(this._wrap,"drop",this._ondrop_wrap,this),this._wrap=null,$super(this,arguments)},_get_files:function(e){var t=[];if(e)for(var i=0;i<e.length;i++)""!=e[i].type&&t.push(e[i]);return t},_ondragover_wrap:function(){return $e.stop($e.e),this.fire("dragover",!0),!1},_ondragleave_wrap:function(){return $e.stop($e.e),this.fire("dragleave",!0),!1},_ondrop_wrap:function(){var e;return $e.stop($e.e),this.fire("dragleave",!0),e=this._get_files($e.e.dataTransfer.files),e&&e.length&&this.fire("drop",e),!1},_ondragover_body:function(){return this.fire("dragover",!1),!1},_ondragleave_body:function(){return this.fire("dragleave",!1),!1},_ondrop_body:function(){var e;return this.fire("dragleave",!0),e=this._get_files($e.e.dataTransfer.files),e.length&&this.fire("drop",e),!1}})),B.UploadChooseFilesBase||(B.UploadChooseFilesBase=$class($u.Observable,{name:"UploadChooseFilesBase",dragover_class_name:"hover",is_inited:!1,_import_info:null,constructor:function(e){$super(this,arguments),this.cfg=e,this.bind_events(),this._upload_group=this._create_group(e.group_name),"inited"!=this._upload_group.state&&this._upload_group.on("inited",this._on_upload_group_inited,this),this._load_imports_info(this._load_imports_info_ready,this)},destroy:function(){$e.un(this.$e),this._destroy_group(),this.$e_dropzone&&(this._dropzone.un(this.$e_dropzone),this._dropzone.destroy(),this._dropzone=this.$e_dropzone=null),this._wrap=null,this._import_info=null,this.is_inited=null,$super(this,arguments)},bind_events:function(){this.$e=$e.on({".js-upload-select-files":this._on_click_select,".js-upload-import-button":this._on_click_upload_import},this)},get_html:function(){return this._render().outerHTML},set_wrap:function(e){this._wrap=e},bind_ui:function(){this._el_drop=$el.down(this._wrap,".js-upload-link"),this._dropzone=new $u.Dropzone(this._el_drop),this.$e_dropzone=this._dropzone.on({dragover:this._on_dragover,dragleave:this._on_dragleave,drop:this._on_drop},this)},_create_group:function(){"Call abstract _create_group"},_destroy_group:function(){"Call abstract _destroy_group"},_render:function(){var e,t,i;return t=this._getBlockData(),e=$u.dust.render("upload/block.upload",t),i=$u.tpl2el(e.toString())},_on_upload_group_inited:function(){this._upload_group.un("inited",this._on_upload_group_inited,this),this._check_components()},_check_components:function(){this.is_inited&&"inited"==this._upload_group.state&&this.fire("inited")},_load_imports_info:function(){throw"Call abstract _load_imports_info"},_set_imports_info:function(e){this._import_info=e},_load_imports_info_ready:function(e){this._upload_group.cfg.disable_import||(this._set_imports_info(e),this._wrap),this.is_inited=!0,this._check_components()},_render_import_block_html:function(){return $u.dust.render("upload/block.upload",this._getImportBlocksData(),"SITES_LIST")},_get_import_buttons_render_data:function(e){var t,i;e||(e=[]),t=[];for(var o=0;o<e.length;o++)i={},i[e[o].specific]={type:e[o].type,url:e[o].url,stat_event:e[o].stat_event,social_icon:e[o].social_icon,width:e[o].width,height:e[o].height,alt:e[o].alt,path:e[o].path},t.push(i);return t},_find_import_provider:function(e){for(var t,i=0;i<this._import_info.length;i++)if(e==this._import_info[i].type){t=this._import_info[i];break}return t},_toggle_drag_over:function(e){$el.tgl(this._el_drop,this.dragover_class_name,e)},_on_dragover:function(e){e&&this._toggle_drag_over(!0)},_on_dragleave:function(e){e&&this._toggle_drag_over(!1)},_on_drop:function(e){e.length&&this._upload_group.add(e)},_on_registered_file:function(){this._next_step()},_next_step:function(){this.fire("choosen")},_on_click_select:function(){this._upload_group.choose(this.cfg.source)},_on_click_upload_import:function(e){var t,i,o;t=+e.getAttribute("data-provider-type"),i=this._find_import_provider(t),i&&(o=$u.tpl("width={width},height={height}",i),window.open(i.url,"auth",o))},_getImportBlocksData:function(){return{SITE_ITEM:this._get_import_buttons_render_data(this._import_info),TITLE:!this.cfg.hide_title}},_getBlockData:function(){var e,t=this._upload_group.get_info();return e={UPLOAD:{UPLOAD_PHOTOS:!t.allow_video,UPLOAD_PHOTOS_AND_VIDEOS:t.allow_video,photos_limit:t.files_left,group_name:t.title,max_photo_filesize:t.allowed_filesize/1024/1024}},this._import_info&&(e.UPLOAD.HTMLBLOCK_IMPORT_BUTTONS=this._render_import_block_html()),e}})),function(){function e(e,i){return e.section(i.get(["UPLOAD"],!1),i,{block:t},{}).write(" ").section(i.get(["SITES_LIST"],!1),i,{block:r},{}).write(" ").section(i.get(["IFRAME_UPLOAD"],!1),i,{block:b},{}).write(" ").section(i.get(["PROFILE_GRID_UPLOAD"],!1),i,{block:g},{})}function t(e,t){return e.write(" <div ").section(t.get(["_OLD_UPLOAD"],!1),t,{block:i},{}).write('> <div class="js-upload-import-buttons"> ').reference("HTMLBLOCK_IMPORT_BUTTONS",t,["s"]).write(' </div> <div class="upload-area"> <div class="upload-control html5 js-upload-link"> <div class="btn btn--blue btn--social"> <i class="ico ico--lg ico--white ico--arrow-up-lg"> <span class="b-link js-uploader-choose js-upload-select-files" data-ovl-type="files" data-ovl-url="').reference("upload_wizard_url",t).write('" data-reg="add_photos/click_computer"></span> </i> <span class="btn-txt"> ').section(t.get(["UPLOAD_PHOTOS"],!1),t,{block:o},{}).write(" ").section(t.get(["UPLOAD_PHOTOS_AND_VIDEOS"],!1),t,{block:s},{}).write(' </span> <div class="loader loader--lg loader--white"><div class="loader_"></div></div> </div> <div class="lgrey">Or drag them into this area</div> </div> <div class="upload-control simple js-upload-classic-wrap"> ').reference("HTMLBLOCK_CLASSIC_UPLOAD",t,["s"]).write(" </div> </div> ").section(t.get(["LINK_BY_OTHER_SITE"],!1),t,{block:n},{}).write(' <p class="grey">We accept JPG and PNG file format.<br>The file size limit is ').reference("max_photo_filesize",t).write(" MB.</p> </div> ")}function i(e){return e.write(' class="old_upload"')}function o(e){return e.write("Upload photos from your computer")}function s(e){return e.write("Upload from your computer")}function n(e,t){return e.write(' <p><span class="p-link u-open js-ovl-open" data-ovl-type="files" data-ovl-url="').reference("upload_wizard_url",t).write('">Add photos from another website</span></p> ')}function r(e,t){return e.write(" ").section(t.get(["TITLE"],!1),t,{block:a},{}).write(' <div class="upload-sites"> ').section(t.get(["SITE_ITEM"],!1),t,{block:l},{}).write(" </div> ")}function a(e){return e.write('<p class="b large">Add your photos from:</p>')}function l(e,t){return e.write('<!-- --><div class="upload-site"> ').section(t.get(["_FBC_BUTTON"],!1),t,{block:_},{}).write(" ").section(t.get(["_OAUTH_BUTTON"],!1),t,{block:p},{}).write(" ").section(t.get(["_TEST_BUTTON"],!1),t,{block:c},{}).write(" ").section(t.get(["COMPUTER_BUTTON"],!1),t,{block:u},{}).write(" </div><!-- -->")}function _(e,t){return e.write(' <div href="').reference("url",t).write('" class="inline" data-reg="').reference("stat_event",t).write('"> <i class="ico ico--xxlg ico--color ico--').reference("social_icon",t).write('-xxlg"><span class="b-link js-upload-import-button" data-provider-type="').reference("type",t).write('"></span></i> <div class="b grey upload-site__txt">').reference("alt",t).write("</div> </div> ")}function p(e,t){return e.write(' <div href="').reference("url",t).write('" class="inline" data-reg="').reference("stat_event",t).write('"> <i class="ico ico--xxlg ico--color ico--').reference("social_icon",t).write('-xxlg"><span class="b-link js-upload-import-button" data-provider-type="').reference("type",t).write('"></span></i> <div class="b grey upload-site__txt">').reference("alt",t).write("</div> </div> ")}function c(e,t){return e.write(' <div href="').reference("url",t).write('" class="inline"> <i class="ico ico--xxlg ico--color ico--').reference("social_icon",t).write('-xxlg"></i> <div class="b grey upload-site__txt js-upload-import-button" data-provider-type="').reference("type",t).write('">').reference("path",t).write("</div> </div> ")}function u(e,t){return e.write(' <div class="inline"> <i class="ico ico--xxlg ico--color ico--from-computer-xxlg upload-control html5 js-upload-link"> <span class="b-link js-uploader-choose js-upload-select-files" data-ovl-type="files" data-reg="add_photos/click_computer"></span> </i> ').section(t.get(["IFRAME_UPLOAD"],!1),t,{block:d},{}).write(' <div class="b grey upload-site__txt">From your computer</div> </div> ')}function d(e,t){return e.write(' <form action="').reference("upload_url",t).write('" method="POST" enctype="multipart/form-data" target="" class="upload-control simple js-iframe-upload-form"> <label class="ico ico--xxlg ico--color ico--from-computer-xxlg classic-upload-btn js-iframe-uploader-button-wrap"> <input class="js-iframe-uploader-input" type="file" name="file"> </label> ').section(t.get(["HIDDEN_INPUT"],!1),t,{block:h},{}).write(" </form> ")}function h(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function b(e,t){return e.write(' <form action="').reference("upload_url",t).write('" method="POST" enctype="multipart/form-data" target="" class="js-iframe-upload-form"> <label class="btn btn--blue btn--social classic-upload-btn js-iframe-uploader-button-wrap"> <input class="js-iframe-uploader-input" type="file" name="file"> <i class="ico ico--lg ico--white ico--arrow-up-lg"><span class="b-link"></span></i> <span class="btn-txt">Upload photos from your computer</span> <div class="loader loader--lg loader--white"><div class="loader_"></div></div> </label> ').section(t.get(["HIDDEN_INPUT"],!1),t,{block:E},{}).write(" </form> ")}function E(e,t){return e.write('<input type="hidden" name="').reference("name",t).write('" value="').reference("value",t).write('">')}function g(e,t){return e.write(' <div class="profile-photo-import').section(t.get(["_OLD_UPLOAD"],!1),t,{block:m},{}).write('"> <div class="inline"> <p class="large">Add more photos to raise your popularity and get more matches!</p> <div class="js-upload-import-buttons">').reference("HTMLBLOCK_IMPORT_BUTTONS",t,["s"]).write('</div> </div><span class="middle"></span> </div> ')}function m(e){return e.write(" old-upload")}return $u.dust.register("upload/block.upload",e),e.s={UPLOAD:t,SITES_LIST:r,IFRAME_UPLOAD:b,PROFILE_GRID_UPLOAD:g},t.s={_OLD_UPLOAD:i,UPLOAD_PHOTOS:o,UPLOAD_PHOTOS_AND_VIDEOS:s,LINK_BY_OTHER_SITE:n},r.s={TITLE:a,SITE_ITEM:l},l.s={_FBC_BUTTON:_,_OAUTH_BUTTON:p,_TEST_BUTTON:c,COMPUTER_BUTTON:u},u.s={IFRAME_UPLOAD:d},d.s={HIDDEN_INPUT:h},b.s={HIDDEN_INPUT:E},g.s={_OLD_UPLOAD:m},e}(),B.UploadChooseFiles||(B.UploadChooseFiles=$class(B.UploadChooseFilesBase,{name:"UploadChooseFiles",jinbaRequest:null,constructor:function(e,t){this.jinbaRequest=t,this.providers=this._get_providers(),$super(this,arguments)},destroy:function(){this.jinbaRequest=null,this.providersCacheToken&&(B.HoN_v3.Models.Cache.PhotosExternalProvidersCache.cancel(this.providersCacheToken),this.providersCacheToken=null,this._on_load_callback=this._on_load_ctx=null),$super(this,arguments)},_get_providers:function(){var e={},t=$p.ExternalProviderType;return e[t.UNKNOWN_EXTERNAL_PROVIDER_TYPE]={},e[t.EXTERNAL_PROVIDER_TYPE_FACEBOOK]={specific:"_FBC_BUTTON",social_icon:"facebook"},e[t.EXTERNAL_PROVIDER_TYPE_VKONTAKTE]={specific:"_OAUTH_BUTTON",social_icon:"vk"},e[t.EXTERNAL_PROVIDER_TYPE_ODNOKLASSNIKI]={specific:"_OAUTH_BUTTON",social_icon:"odnoklassniki"},e[t.EXTERNAL_PROVIDER_TYPE_GOOGLE_PLUS]={specific:"_OAUTH_BUTTON",social_icon:"google"},e[t.EXTERNAL_PROVIDER_TYPE_MYSPACE]={},e[t.EXTERNAL_PROVIDER_TYPE_HYVES]={},e[t.EXTERNAL_PROVIDER_TYPE_PHOTOBUCKET]={},e[t.EXTERNAL_PROVIDER_TYPE_YAHOO]={},e[t.EXTERNAL_PROVIDER_TYPE_GOOGLE]={specific:"_OAUTH_BUTTON",social_icon:"google"},e[t.EXTERNAL_PROVIDER_TYPE_AOL]={},e[t.EXTERNAL_PROVIDER_TYPE_MSN]={},e[t.EXTERNAL_PROVIDER_TYPE_INSTAGRAM]={specific:"_OAUTH_BUTTON",social_icon:"instagram"},e[t.EXTERNAL_PROVIDER_TYPE_YANDEX]={},e[t.EXTERNAL_PROVIDER_TYPE_LINKEDIN]={specific:"_OAUTH_BUTTON",social_icon:"linkedin"},e[t.EXTERNAL_PROVIDER_TYPE_TWITTER]={specific:"_OAUTH_BUTTON",social_icon:"twitter"},e[t.EXTERNAL_PROVIDER_TYPE_PAYPAL]={},e[t.EXTERNAL_PROVIDER_TYPE_PHONEBOOK]={},e[t.EXTERNAL_PROVIDER_TYPE_EMAIL]={},e[t.EXTERNAL_PROVIDER_TYPE_HOT_OR_NOT]={},e[t.EXTERNAL_PROVIDER_TYPE_BADOO]={},e},_create_group:function(e){var t;return t=B.Upload2.Controller.get_group(e),this.$e_upload=t.on({registered:this._on_registered_file},this),t},_destroy_group:function(){this._upload_group.un(this.$e_upload),this.$e_upload=null},_load_imports_info:function(e,t){this._on_load_callback=e,this._on_load_ctx=t,this.providersCacheToken=B.HoN_v3.Models.Cache.PhotosExternalProvidersCache.fetch(this._ready_external_providers,this)},_ready_external_providers:function(e){var t,i,o,s,n=!1,r=e.getProviders(),a=[];if(this.providersCacheToken=null,!n){t=r.getProviders();for(var l=0;l<t.length;l++)i=t[l],o=this.providers[i.getType()],s={type:i.getType(),specific:o.specific,url:i.getAuthData().getOauthUrl(),width:600,height:400,social_icon:o.social_icon,alt:i.getDisplayName(),path:i.getDisplayName()},a.push(s)}this._on_load_callback.call(this._on_load_ctx,a),this._on_load_callback=this._on_load_ctx=null},_on_click_upload_import:function(){$super(this,arguments),this._load_imports_info(this._set_imports_info,this)}})),B.UploadChooseFilesButtons||(B.UploadChooseFilesButtons=$class(B.UploadChooseFiles,{name:"UploadChooseFilesButtons",_getBlockData:function(){var e=$super(this,arguments);return e.PROFILE_GRID_UPLOAD=e.UPLOAD,this.is_classic_uploader&&(e.PROFILE_GRID_UPLOAD._OLD_UPLOAD=!0),delete e.UPLOAD,e},_getImportBlocksData:function(){var e=$super(this,arguments),t={COMPUTER_BUTTON:{}};return this.is_classic_uploader&&(t.COMPUTER_BUTTON=this._getClassicUploader()),e.SITE_ITEM.push(t),e}})),B.HoN_v3.Profile.GridUpload=B.HoN_v3.Profile.GridUpload||(B.HoN_v3.Profile.GridUpload={}),B.HoN_v3.Profile.GridUpload.Controller=$class($u.Observable,{upload:null,$b:null,$b_uploadGroup:null,uploadGroup:null,UPLOAD_GROUP_NAME:"photos_of_me",constructor:function(){$super(this,arguments),this.upload=new B.UploadChooseFilesButtons({group_name:this.UPLOAD_GROUP_NAME,hide_title:!0,source:$p.ClientSource.CLIENT_SOURCE_MY_PROFILE_PHOTO_GRID}),this.uploadGroup=B.Upload2.Controller.get_group(this.UPLOAD_GROUP_NAME),this.$b=B.on({"ovl:close":this.onOvlClose},this),this.$b_upload=this.upload.on({inited:this.onInited},this),this.$b_uploadGroup=this.uploadGroup.on({registered:this.onOpenProgress},this)},destroy:function(){B.un(this.$b),this.uploadGroup.un(this.$b_uploadGroup),this.upload.un(this.$b_upload),this.upload.destroy(),this.uploadGroup=null,$super(this,arguments)},onOvlClose:function(){this.upload.bind_events()},getView:function(){return this.upload.get_html()},onInited:function(){this.upload._wrap&&(this.upload._wrap.innerHTML=this.upload.get_html())},onOpenProgress:function(){B.Ovl.is_visible()||B.Ovl.open({type:"upload_progress",group_name:this.UPLOAD_GROUP_NAME})}}),B.HoN_v3.Profile.GridUploadView=$class(B.HoN_v3.Profile.BlockView,{constructor:function(e){$super(this,arguments),$config(this,e),this.controller=new B.HoN_v3.Profile.GridUpload.Controller(this._container)},destroy:function(){this.controller.destroy(),$super(this,arguments)},getResult:function(){return this.controller.getView()},render:function(){var e=$super(this,arguments);return this.controller.upload.set_wrap(this._container),this.controller.upload.bind_ui(),e}}),function(){function e(e,i){return e.write('<div class="profile-widget"> ').section(i.get(["MALE"],!1),i,{block:t},{}).write(" ").section(i.get(["FEMALE"],!1),i,{block:a},{}).write(" </div>")}function t(e,t){return e.write(" He is now at <b>").reference("pnb_place",t).write(" place</b> in search results. ").reference("visitors_today",t).write(" profile ").reference("visitors",t).write(" today, ").reference("visitors_month",t).write(' this month. His popularity: <a href="').reference("url",t).write('" class="app').section(t.get(["_VERY_LOW"],!1),t,{block:i},{}).section(t.get(["_LOW"],!1),t,{block:o},{}).section(t.get(["_AVERAGE"],!1),t,{block:s},{}).section(t.get(["_HIGH"],!1),t,{block:n},{}).section(t.get(["_VERY_HIGH"],!1),t,{block:r},{}).write('" rel="').reference("state",t).write('"><b>').reference("popularity_level",t).write("</b></a>\n")}function i(e){return e.write(" profile-widget__popularity-status--low")}function o(e){return e.write(" profile-widget__popularity-status--low")}function s(e){return e.write(" profile-widget__popularity-status--average")}function n(e){return e.write(" profile-widget__popularity-status--high")}function r(e){return e.write(" profile-widget__popularity-status--high")}function a(e,t){return e.write(" She is now at <b>").reference("pnb_place",t).write(" place</b> in search results. ").reference("visitors_today",t).write(" profile ").reference("visitors",t).write(" today, ").reference("visitors_month",t).write(' this month. Her popularity: <a href="').reference("url",t).write('" class="app').section(t.get(["_VERY_LOW"],!1),t,{block:l},{}).section(t.get(["_LOW"],!1),t,{block:_},{}).section(t.get(["_AVERAGE"],!1),t,{block:p},{}).section(t.get(["_HIGH"],!1),t,{block:c},{}).section(t.get(["_VERY_HIGH"],!1),t,{block:u},{}).write('" rel="').reference("state",t).write('"><b>').reference("popularity_level",t).write("</b></a>\n")}function l(e){return e.write(" profile-widget__popularity-status--low")}function _(e){return e.write(" profile-widget__popularity-status--low")}function p(e){return e.write(" profile-widget__popularity-status--average")}function c(e){return e.write(" profile-widget__popularity-status--high")}function u(e){return e.write(" profile-widget__popularity-status--high")}return $u.dust.register("profile/block.other-popularity",e),e.s={MALE:t,FEMALE:a},t.s={_VERY_LOW:i,_LOW:o,_AVERAGE:s,_HIGH:n,_VERY_HIGH:r},a.s={_VERY_LOW:l,_LOW:_,_AVERAGE:p,_HIGH:c,_VERY_HIGH:u},e}(),B.HoN_v3.Profile.OtherPopularityView=$class(B.DustView,{template:"profile/block.other-popularity",setPerson:function(e){var t={};t[$p.PopularityLevel.POPULARITY_LEVEL_VERY_LOW]="VERY_LOW",t[$p.PopularityLevel.POPULARITY_LEVEL_LOW]="LOW",t[$p.PopularityLevel.POPULARITY_LEVEL_AVERAGE]="AVERAGE",t[$p.PopularityLevel.POPULARITY_LEVEL_HIGH]="HIGH",t[$p.PopularityLevel.POPULARITY_LEVEL_VERY_HIGH]="VERY_HIGH";var i=e.getPopularityLevel(),o=t[i],s={pnb_place:e.getPopularityPnbPlace(),visitors_today:e.getPopularityVisitorsToday(),visitors:$l.get_num_dependent("visitors",e.getPopularityVisitorsToday()),visitors_month:e.getPopularityVisitorsMonth(),url:"/popularity",state:"popularity",popularity_level:$l.get("hon/profile","POPULARITY_LEVELS")[o]};return s["_"+o]=!0,this.set(this.getGenderBlockName(e.getGender()),s)},getGenderBlockName:function(e){return e==$p.SexType.MALE?"MALE":"FEMALE"}}),B.HoN_v3.Profile.OtherPopularityController=$class({getView:function(e){return(new B.HoN_v3.Profile.OtherPopularityView).setPerson(e.person)}}),B.HoN_v3.Profile.OtherPopularityBlockView=$class(B.HoN_v3.Profile.BlockView,{_data:null,set_data:function(e){return this._data=e,this},get_result:function(){return this._data.person.getPopularityPnbPlace()?(new B.HoN_v3.Profile.OtherPopularityController).getView(this._data).toString():""}}),$l.register({section:"people_nearby",lang:"en-us",translations:{index_new_photos:"I have {{photos_num}} {{photos_str}}",hide:"Hide",show:"Show",all_world:"worldwide",SEARCH_GENDERS:{M:"man",F:"woman",N:"anyone"},SEARCH_AREAS:{WITHIN_X_MILES:"Within {{v}} {{miles}}",WITHIN_X_YARDS:"Within {{v}} {{yards}}",WITHIN_X_KM:"Within {{v}} km",WITHIN_X_M:"Within {{v}} {{meters}}",ALL_COUNTRY:"In the whole country",ALL_CITY:"In the whole city",WITHIN_X_FEET:"Within {{v}} {{feet}}",WORLDWIDE:"Worldwide"},SEARCH_FILTERS:{ALL:"All",ONLINE:"Online now",NEW:"New",EXCLUSIVE:"Chats exclusively",TOP:"Most popular",MALE:"Guys",FEMALE:"Girls"}}}),B.defineLocationMarker=function(){B.LocationMarker=$class(google.maps.Marker,{vars:{},timer:null,constructor:function(e){$super(this,arguments),$config(this.vars,e.vars),this.tooltipInit(),google.maps.event.addListener(this,"dragstart",this.dragStart.bind(this)),google.maps.event.addListener(this,"dragend",this.dragEnd.bind(this)),google.maps.event.addListener(e.map,"dragend",this.mapDragEnd.bind(this)),google.maps.event.addListener(e.map,"click",this.mapClick.bind(this)),google.maps.event.addListener(e.map,"dblclick",this.mapDblClick.bind(this)),$e.on({".save, * .save":this.save,".cancel, * .cancel":this.cancel},this),$u.preloadImages([$r.images_root+"/v2/-/-/i/map/confirm_bl_tail.16.png",$r.images_root+"/v2/-/-/i/map/confirm_tl_tail.16.png",$r.images_root+"/v2/-/-/i/map/confirm_tr_tail.16.png",$r.images_root+"/v2/-/-/i/map/confirm_br_tail.16.png"]),this.timer=new $t(this.handleMapClick,this,100)
},save:function(){this.timer.clear(),B.Map.map_me=this.map_me=this.getPosition(),$el.add(this.tooltip.el,"el-loading");var e=this.getMap().getZoom();B.fire("location:save",{lat:this.map_me.lat(),lng:this.map_me.lng(),zoom:e}),this.saveErrorHappend=!1},saveError:function(){this.saveErrorHappend=!0,$el.del(this.tooltip.el,"el-loading"),this.tooltip.showError()},saveOk:function(){return this.saveErrorHappend?(this.saveError(),void 0):(this.vars.confirmed=!0,$el.del(this.tooltip.el,"el-loading"),this.tooltip.draw(this.vars.tooltipOK),void 0)},cancel:function(){this.timer.clear(),this.setPosition(B.Map.map_me),this.getMap().panTo(B.Map.map_me),this.tooltip.draw(this.getDefaultTooltipHtml()),this.request_position()},dragStart:function(){this.tooltip.hide()},dragEnd:function(){this.update_position()},mapClick:function(e){this.timer.set(250,e)},mapDblClick:function(){this.timer.clear()},mapDragEnd:function(){this.tooltip&&this.tooltip.draw()},handleMapClick:function(e){this.getMap().setCenter(e.latLng),this.setPosition(e.latLng),this.update_position()},tooltipInit:function(){this.tooltip=new B.LocationTooltip({marker:this,curHTML:this.getDefaultTooltipHtml()}),this.tooltip.setMap(this.getMap()),this.tooltip.show()},getDefaultTooltipHtml:function(){return this.vars.confirmed?this.vars.tooltipOK:this.vars.tooltipQuestion},update_position:function(){this.tooltip.draw(this.vars.confirmTpl,!0),this.tooltip.show(),B.HoN_v3.fire("location:moved",{lat:this.getPosition().lat(),lng:this.getPosition().lng()}),this.request_position()},request_position:function(){var e=this.getPosition();B.HoN_v3.fire("location:request",e.lat(),e.lng())}}),B.LocationTooltip=$class(google.maps.OverlayView,{el:null,w:0,h:0,posX:0,posY:0,visible:1,confirmMode:0,less10Perc:1,less002Perc:1,constructor:function(e){$super(this,arguments),e.marker.vars.marker&&$config(this,e.marker.vars.marker),this.relatedMarker=e.marker,this.curHTML=e.curHTML,this.el=$u.tpl2el(this.tpl,{html:this.curHTML,a_dir:this.classes_map[this.a_dir]}),this.locationTooltipHTML=$el.down(this.el,".cont")},onAdd:function(){this.getPanes().floatShadow.appendChild(this.el)},onRemove:function(){this.el.parentNode.removeChild(this.el),this.el=this.relatedMarker=null},draw:function(){this.offsetStatusUpdate(),this.updateArrowPosition(),this.updateCenterMapBtn()},updateHTML:function(e){this.clearError(),this.curHTML=e,this.locationTooltipHTML.innerHTML=e},updateCenterMapBtn:function(){var e=$("install_current_location");e&&(this.less002Perc?$el.add(e,"not_active"):$el.del(e,"not_active"))},offsetStatusUpdate:function(){var e=this.getMap(),t=this.relatedMarker.getPosition(),i=e.getBounds();if(i){var o=i.getNorthEast(),s=i.getSouthWest(),n=Math.abs(o.lat()-s.lat()),r=Math.abs(o.lng()-s.lng()),a=e.getCenter(),l=Math.abs(a.lat()-t.lat()),_=Math.abs(a.lng()-t.lng()),p=l/n,c=_/r;this.less10Perc=.1>=p&&.1>=c,this.less002Perc=.002>=p&&.002>=c}},updateArrowDirection:function(){var e=this.getMap().getCenter(),t=this.relatedMarker.getPosition(),i=e.lat(),o=e.lng(),s=t.lat(),n=t.lng(),r="mt_bl_tail";this.less10Perc||(r=s>i&&n>o?"mt_tr_tail":i>=s&&o>=n?"mt_bl_tail":i>s&&n>o?"mt_br_tail":"mt_tl_tail"),r!=this.a_dir&&($el.del(this.el.firstChild,this.classes_map[this.a_dir]),$el.add(this.el.firstChild,this.classes_map[r]),this.a_dir=r)},updateArrowPosition:function(){var e=this.getProjection();if(e){var t=e.fromLatLngToDivPixel(this.relatedMarker.getPosition());this.el.style.left=t.x+"px",this.el.style.top=t.y+"px"}},hide:function(){this.confirmMode||(this.visible=!1,this.hideEl())},show:function(){this.visible=!0,this.showEl()},hideEl:function(){this.el.style.visibility="hidden",this.clearError()},showEl:function(){this.visible&&(this.el.style.visibility="visible")},showError:function(){},clearError:function(){}})},window.google&&google.maps&&google.maps.Marker&&B.defineLocationMarker(),$u.Slider=$class({name:"dSlider",interactive:!1,el:null,fe:null,p:-1,pm:-1,z0:0,z1:1,z0e:null,z1e:null,z:null,onStart:function(){},onUpdate:function(){},onUpdateEnd:function(){},scope:null,dir:"x",constructor:function(e,t){this.z=[],$config(this,e),this.scope=t||this,this.el&&this.fe&&("y"==this.dir?(this.prop="top",this.propget="offsetHeight",this.propset="top",this.getpos=this.getposy):(this.prop="left",this.propget="offsetWidth",this.propset="marginLeft",this.getpos=this.getposx,"rtl"==$el.dir()&&(this.v2px=this.v2px_rtl,this.px2v=this.px2v_rtl)),this.z0e&&$e.add(this.z0e,"click",this.zoom_prev,this),this.z1e&&$e.add(this.z1e,"click",this.zoom_next,this),$e.add(this.el,"mousedown",this.start,this),this.init())},destroy:function(){this.stop(),this.z0e&&$e.del(this.z0e,"click",this.zoom_prev,this),this.z1e&&$e.del(this.z1e,"click",this.zoom_next,this),$e.del(this.el,"mousedown",this.start,this),this.el=this.fe=this.z0e=this.z1e=null},init:function(){if(this.ww=this.el[this.propget]-this.fe[this.propget]+1,-1!=this.p){var e=this.v2px(this.p);this.fe.style[this.propset]=e+"px",this.pm=this.p}},getposx:function(e){return e.clientX},getposy:function(e){return e.clientY},v2px:function(e){return this.ww*(e-this.z0)/(this.z1-this.z0)},v2px_rtl:function(e){return this.ww-this.ww*(e-this.z0)/(this.z1-this.z0)},px2v:function(e){return parseInt(1e3*(this.z0+(this.z1-this.z0)*e/this.ww))/1e3},px2v_rtl:function(e){return parseInt(1e3*(this.z0+(this.z1-this.z0)*(this.ww-e)/this.ww))/1e3},start:function(e){this.onStart.call(this.scope,this.pm),$e.add(document,"mousemove",this.drag,this),$e.add(document,"mouseup",this.stop,this);var t=this.el.getBoundingClientRect();this.wx=t[this.prop],this.ww=this.el[this.propget]-this.fe[this.propget]+1,this.drag(e)},drag:function(){var e,t=$e.e,i=this.ww,o=this.getpos(t)-this.wx;o=0>o?0:o>i?i:o,e=this.px2v(o),e!=this.pm&&(this.fe.style[this.propset]=o+"px",this.onUpdate.call(this.scope,this.pm=e))},stop:function(){$e.del(document,"mouseup",this.stop,this),$e.del(document,"mousemove",this.drag,this),this.interactive=!0,this.onUpdateEnd.call(this.scope,this.pm),this.interactive=!1},zoom_next:function(){for(var e=this.z,t=this.pm,i=0,o=e.length;o>i;i++)if(e[i]>t){t=e[i];break}this.zoom(t)},zoom_prev:function(){for(var e=this.z,t=this.pm,i=e.length-1;i>=0;i--)if(e[i]<t){t=e[i];break}this.zoom(t)},zoom:function(e){if(e!=this.pm){var t=this.v2px(e);this.fe.style[this.propset]=t+"px",this.onUpdate.call(this.scope,this.pm=e),this.onUpdateEnd.call(this.scope,this.pm)}},snapTo:function(e){new $fx.effect({wait:!1,duration:200,items:[new $fx.style({el:this.fe,prop:this.propset,from:this.v2px(this.pm),to:this.v2px(e)})]})}}),$gpb.exists("badoo.bma.ServerGetCity","message")||!function(){var e=$gpb.namespace("badoo.bma"),t=e.ServerGetCity=function(){$gpb.Message.apply(this,arguments)};$gpb.extend(t,$gpb.Message),t.prototype.$gpb="badoo.bma.ServerGetCity",t.prototype._descriptor={fields:{city_id:{type:5,number:1,label:1},latitude:{type:1,number:4,label:1},user_id:{type:9,number:2,label:1},longitude:{type:1,number:3,label:1}}}}(),B.HoN_v3.GeolocationModel||(B.HoN_v3.GeolocationModel=$class($u.Observable,{updateLocationRequest:null,destroy:function(){this.abortCityRequest(),this.updateLocationRequest&&(this.updateLocationRequest.abort(),this.updateLocationRequest=null)},save:function(e,t,i,o){this.updateLocationRequest&&this.updateLocationRequest.abort();var s=this.getUpdateQuery(e,t);this.updateLocationRequest=new $gpb.Rpc($p.MessageType.SERVER_UPDATE_LOCATION,s),i&&this.updateLocationRequest.on($gpb.Rpc.SpecialEvent.ON_REQ_DONE,i,o||window),this.updateLocationRequest.request()},saveInBackground:function(e,t,i,o){var s=new $gpb.Rpc.Batch;s.addCommand($p.MessageType.SERVER_UPDATE_LOCATION,this.getUpdateQuery(e,t));var n=new $gpb.Rpc($p.MessageType.SERVER_BACKGROUND_REQUEST,s);i&&n.on($gpb.Rpc.SpecialEvent.ON_REQ_DONE,i,o||window),n.request()},getCity:function(e,t){this.abortCityRequest();var i=(new $p.ServerGetCity).setLongitude(t).setLatitude(e);return this.cityRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_CITY,i).on($p.MessageType.CLIENT_CITY,this.onCity,this).request(),this},getCoordinates:function(e){this.abortCityRequest();var t=(new $p.ServerGetCity).setCityId(+e);return this.cityRequest=new $gpb.Rpc($p.MessageType.SERVER_GET_CITY,t).on($p.MessageType.CLIENT_CITY,this.onCity,this).request(),this},onCity:function(e,t){this.cityRequest=null,this.fire("location:coordinates",t)},abortCityRequest:function(){this.cityRequest&&(this.cityRequest.abort(),this.cityRequest=null)},getUpdateQuery:function(e,t){var i=new $p.ServerUpdateLocation,o=new $p.GeoLocation;return o.setLongitude(t).setLatitude(e),i.addLocation(o),i}})),B.Map=new $class({name:"map",my_location_lat:45,my_location_lon:45,lat:45,lon:45,zoom:0,map:null,saveUrl:"",m:null,confirmed:0,dragged:!1,tooltip:null,dragEnable:0,visible:0,init:function(e){this.vars=e,window.google&&window.google.maps?this.finishInit():(B.onMapsApiReady=this.finishInit.bind(this),$r.loader.js("https://maps.google.com/maps/api/js?sensor=false&callback=B.onMapsApiReady"))},finishInit:function(){B.defineLocationMarker(),delete B.onMapsApiReady;var e=this.vars;if($config(this,e.map),$config(this,e.map.locationSetup),this.map_me=new google.maps.LatLng(this.my_location_lat,this.my_location_lon),this.mapInit(),this.markerInit(),B.on("location:city_changed",this.onCityChanged,this),this.locked){if(!this.my_location_lat||!this.my_location_lon)return;return $el.del($("m_map_wrap"),"el-spinner"),this.map.setCenter(this.map_me),void 0}this.initComplete||(new B.MapSliderClass(e.MapSlider),this.initByServerDefaults()),B.fire("location:zoom_changed",null,this.zoom),this.initComplete=1,this.visible=1,google.maps.event.addListener(B.Map.map,"idle",this.onMapIdle.bind(this)),e.ready&&e.ready()},destroy:function(){B.un("location:city_changed",this.onCityChanged,this),this.map=this.m=this.map_me=null},show:function(){this.visible||(this.visible=1,$el.del($("m_map_wrap"),"hidden"))},hide:function(){$el.add($("m_map_wrap"),"hidden"),this.visible=0},onCityChanged:function(e){this.map_me={lat:e.getLatitude(),lng:e.getLongitude()},this.map.setCenter(this.map_me),this.m.setPosition(this.map_me)},onMapIdle:function(){var e=this.map.getZoom();this.map.getZoom()!=this.zoom&&(B.fire("location:zoom_changed",this.zoom,e),this.zoom=e)},mapInit:function(){var e=google.maps,t=$("m_map");$el.tgl(t,"google-maps",!0),this.map=new e.Map(t,{zoom:this.zoom,center:new e.LatLng(this.lat,this.lon),mapTypeId:e.MapTypeId.ROADMAP,disableDefaultUI:!0,scrollwheel:!1})},markerInit:function(){this.m=new B.LocationMarker({map:this.map,position:this.map_me,vars:this.locationSetup,draggable:!0,icon:{url:$r.images_root+"/v2/-/-/i/hotornot_v2/location/pin@2x.1.png",scaledSize:{width:26,height:36}},animation:google.maps.Animation.DROP})},unlock:function(){$el.del($("m_map_wrap"),"el-loading"),$el.del($("m_map_wrap"),"el-spinner")},initByServerDefaults:function(){this.unlock(),this.map.setCenter(this.map_me),this.m.setPosition(this.map_me)},setZoom:function(e){e!=this.map.getZoom()&&this.map.setZoom(e)}}),B.MapSliderClass=$class({name:"MapSlider",tooltips:null,zoomlevels:null,z:0,zoom:16,tooltip:null,ds:null,defaultParams:{zoom:16,tooltips:["Within 200 yards","Within 500 yards","Within 1000 yards","Within 1 miles","Within 3 miles","Within 6 miles","Within 15 miles","Within 30 miles","Within 60 miles","Within 120 miles"],zoomlevels:[16,15,14,13,12,11,10,9,8,7]},constructor:function(e){$config(this,e),this.init()},init:function(){this.zoomlevels||$config(this,this.defaultParams);var e=$("scale");if(e){this.tooltip=$("slider_tooltip");var t=$("slide_me");this.z=this._upd_z=this.getValueIndex(this.zoom),this.ds=new $u.Slider({dir:"y",el:e,fe:t,p:this.z,z0:0,z1:this.zoomlevels.length-1,onUpdate:this.update,onUpdateEnd:this.update_end,panTo:function(e){this._pan_fx=new $fx.effect({wait:!1,duration:200,items:[new $fx.style({el:this.fe,prop:this.prop,from:this.v2px(this.pm),to:this.v2px(e)})],onEnd:function(){this._pan_fx=null},scope:this})}},this),$e.on({"#zoom_in":this.zoomIn,"#zoom_out":this.zoomOut},this),B.on("location:zoom_changed",this.mapZoomHandler,this),this.ready()}},getValueIndex:function(e){for(var t=this.zoomlevels,i=0,o=t.length;o>i;i++)if(t[i]==e)return i;return-1},digitize:function(e){return.5>e%1?Math.floor(e):Math.ceil(e)},update:function(e){var t=this._upd_z=this.digitize(e),i=+this.tooltips[Math.floor(e)].v||0,o=+this.tooltips[Math.ceil(e)].v;this.setupTooltip(t,Math.round((o-i)*(e%1)+i))},setupTooltip:function(e){this.tooltip.innerHTML=this.tooltips[e]},update_end:function(e){var e=this.z=this.digitize(e);this.setupTooltip(e),this.ds.panTo(e),this.zoom=this.zoomlevels[e],B.Map.setZoom(this.zoom)},ready:function(){var e=this.getValueIndex(this.zoom);e=this.z=this.digitize(e),this.setupTooltip(e),this.ds.panTo(e),this.zoom=this.zoomlevels[e]},zoomIn:function(){var e=this.getValueIndex(this.zoom);0!=e&&(this.ds.pm=e,e--,this.update_end(e))},zoomOut:function(){var e=this.getValueIndex(this.zoom),t=this.zoomlevels;e>=t.length-1||(this.ds.pm=e,e++,this.update_end(e))},mapZoomHandler:function(){if(B.Map.map){var e=B.Map.map.getZoom();if(e!=this.zoom){var t=this.getValueIndex(e);-1!=t&&(this.ds.pm=t,this.update_end(t))}}}}),B.HereLocationMarker=$class({vars:{},timer:null,PIN:{url:$r.images_root+"/v2/-/-/i/hotornot_v2/location/pin@2x.1.png",width:26,height:36},CROSS:{url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAgklEQVR42q2PoRKAIBBEt5vpdLuZzk/YyXQ7P0HnJ91ZHQadU4ub7vbuLRx+kcdi+hMnUkZDMrBC32tTZYEbxhF1xCaWjVZQ57Cpi7goHMzJZkL2q2KXh2vE8jekDQUNI5K9sip6Vp1Ue0jDmYMV+0on0i009EQ1q/mnymNf5Zj6rR18xSVSVTMHJwAAAABJRU5ErkJggg==",width:16,height:16},constructor:function(e,t){this.map=e,this.position=t,this.pixelRatio=$u.is_hidpi()?2:1,this.pinInit(),this.crossInit(),this.map.addEventListener("dragstart",this.mapDragStart.bind(this),!1),this.map.addEventListener("dragend",this.mapDragEnd.bind(this),!1),this.map.addEventListener("drag",this.mapDrag.bind(this),!1),this.map.addEventListener("tap",this.mapClick.bind(this),!1),this.map.addEventListener("dbltap",this.mapDblClick.bind(this),!1),this.map.addEventListener("pointerdown",this.mapMouseDown.bind(this),!1),$e.on(".save, * .save",this.save,this),this.timer=new $t(this.handleMapClick,this,100)},getPosition:function(){return this.marker.getPosition()},setBehavior:function(e){this.behavior=e},setPosition:function(e){this.marker.setPosition(e),this.updatePosition()},setTooltip:function(e){var t=$u.tpl2el(e),i=new H.map.DomIcon(t);this.tooltip=new H.map.DomMarker(this.position,{icon:i}),this.map.addObject(this.tooltip)},save:function(){this.timer.clear(),this.position=this.getPosition();var e=this.map.getZoom();B.fire("location:save",{lat:this.position.lat,lng:this.position.lng,zoom:e})},mapMouseDown:function(e){e.originalEvent.preventDefault&&e.originalEvent.preventDefault()},mapDragStart:function(e){this.tooltip&&this.tooltip.setVisibility(!1),e.target instanceof H.map.Marker&&this.markerDragStart()},mapDragEnd:function(e){this.tooltip&&this.tooltip.setVisibility(!0),this.cross&&this.cross.setVisibility(!1),e.target instanceof H.map.Marker&&this.markerDragEnd()},mapDrag:function(e){e.target instanceof mapsjs.map.Marker&&this.markerDrag(e)},markerDrag:function(e){var t=e.currentPointer,i=this.map.screenToGeo(t.viewportX,t.viewportY);this.marker.setPosition(i),this.cross.setPosition(i),this.positionOnBounds(i)&&this.map.setCenter(i,!0)},markerDragStart:function(){this.behavior.disable(),this.cross&&this.cross.setVisibility(!0)},markerDragEnd:function(){this.updatePosition(),this.behavior.enable(),this.behavior.disable(H.mapevents.Behavior.WHEELZOOM)},mapClick:function(e){this.timer.set(250,e)},mapDblClick:function(){this.timer.clear()},handleMapClick:function(e){pointer=e.currentPointer;var t=this.map.screenToGeo(pointer.viewportX,pointer.viewportY);this.map.setCenter(t,!0),this.marker.setPosition(t),this.updatePosition()},pinInit:function(){var e=new H.map.Icon(this.PIN.url,{size:{w:this.PIN.width*this.pixelRatio,h:this.PIN.height*this.pixelRatio}});this.marker=new H.map.Marker(this.position,{icon:e,zIndex:10}),this.marker.draggable=!0,this.map.addObject(this.marker)},crossInit:function(){var e=this.CROSS.height*this.pixelRatio,t=this.CROSS.width*this.pixelRatio,i=new H.map.Icon(this.CROSS.url,{size:{w:t,h:e},anchor:{x:t/2,y:e/2}});this.cross=new H.map.Marker(this.position,{icon:i,zIndex:5}),this.map.addObject(this.cross),this.cross.setVisibility(!1)},positionOnBounds:function(e){var t=this.map.getViewPort().width,i=this.map.getViewPort().height,o=this.map.geoToScreen(e).x,s=this.map.geoToScreen(e).y;return 20>o||20>s||20>i-s||20>t-o},updatePosition:function(){this.tooltip&&(this.tooltip.setVisibility(!0),this.tooltip.setPosition(this.getPosition())),B.HoN_v3.fire("location:moved",this.getPosition()),this.requestPosition()},requestPosition:function(){var e=this.getPosition();B.HoN_v3.fire("location:request",e.lat,e.lng)}}),B.HereMap=new $class({name:"HereMap",APPID:"mbhhVfXVTw73DLXhrqD5",APPCODE:"1oSmL7H8Uf0EGkHDlo4ViA",PRELOAD_MARGIN:0,map:null,m:null,map_me:{lat:45,lng:45},zoom:0,tooltipTpl:"",initComplete:0,languages:{ar:"ara",zh:"chi","zh-Hant":"cht",nl:"dut",en:"eng","en-us":"eng",fr:"fre",de:"ger",ga:"gle",el:"gre",he:"heb",hi:"hin",id:"ind",it:"ita",fa:"per",pl:"pol",pt:"por","pt-pt":"por",ru:"rus",sinhalese:"sin",es:"spa","es-mx":"spa","es-ar":"spa","es-co":"spa",th:"tha",tr:"tur",uk:"ukr",ur:"urd",vi:"vie",cy:"wel"},init:function(e){this.vars=e,window.H&&window.H.service&&window.H.ui&&window.H.mapevents?this.finishInit():$r.loader.js("https://js.api.here.com/v3/3.0/mapsjs-core.js",this.onMapCoreLoaded,this)},onMapCoreLoaded:function(){this.componentsLoaded=0,$r.loader.js("https://js.api.here.com/v3/3.0/mapsjs-service.js",this.onMapComponentLoaded,this),$r.loader.js("https://js.api.here.com/v3/3.0/mapsjs-ui.js",this.onMapComponentLoaded,this),$r.loader.js("https://js.api.here.com/v3/3.0/mapsjs-mapevents.js",this.onMapComponentLoaded,this)},onMapComponentLoaded:function(){this.componentsLoaded++,this.componentsLoaded>=3&&this.finishInit()},finishInit:function(){var e=this.vars.map;this.map_me={lat:e.my_location_lat,lng:e.my_location_lon},this.zoom=e.zoom,this.tooltipTpl=e.locationSetup.marker.tpl,this.platformInit(),this.mapInit(),this.markerInit(),B.on("location:city_changed",this.onCityChanged,this),B.on("location:save",this.onLocationSave,this),this.map.getViewModel().addEventListener("sync",this.onMapSync.bind(this)),this.initComplete?B.fire("location:zoom_changed",null,this.zoom):(new B.HereMapSliderClass(this.vars.MapSlider,this),this.initByServerDefaults()),this.initComplete=1,this.vars.ready&&this.vars.ready()},destroy:function(){B.un("location:city_changed",this.onCityChanged,this),this.map=this.m=this.map_me=null},onCityChanged:function(e,t){t&&(this.map_me={lat:e.getLatitude(),lng:e.getLongitude()},this.map.setCenter(this.map_me),this.m.setPosition(this.map_me))},onLocationSave:function(e){this.map_me={lat:e.lat,lng:e.lng}},onMapSync:function(){var e=this.map.getZoom();this.map.getZoom()!=this.zoom&&(B.fire("location:zoom_changed",this.zoom,e),this.zoom=e)},platformInit:function(){this.platform=new H.service.Platform({app_id:this.APPID,app_code:this.APPCODE,useHTTPS:!0})},mapInit:function(){var e=this.platform.createDefaultLayers($u.is_hidpi()?512:256,$u.is_hidpi()?320:null,this.languages[$l.lang]),t=$("m_map");t.innerHTML="",$el.tgl(t,"here-maps",!0),this.map=new H.Map(t,e.normal.map,{zoom:this.zoom,center:this.map_me,pixelRatio:$u.is_hidpi()?2:1,renderBaseBackground:{lower:3,higher:2},margin:this.PRELOAD_MARGIN});var i=new H.mapevents.MapEvents(this.map);this.behavior=new H.mapevents.Behavior(i),this.behavior.disable(H.mapevents.Behavior.WHEELZOOM)},markerInit:function(){this.m=new B.HereLocationMarker(this.map,this.map_me),this.m.setBehavior(this.behavior),this.m.setTooltip(this.tooltipTpl)},initByServerDefaults:function(){this.map.setCenter(this.map_me)},setZoom:function(e){e!=this.map.getZoom()&&this.map.setZoom(e,!0)},getZoom:function(){return this.map.getZoom()||this.zoom}}),B.HereMapSliderClass=$class({name:"MapSlider",tooltips:null,zoomlevels:null,z:0,zoom:16,tooltip:null,ds:null,defaultParams:{zoom:16,tooltips:["Within 200 yards","Within 500 yards","Within 1000 yards","Within 1 miles","Within 3 miles","Within 6 miles","Within 15 miles","Within 30 miles","Within 60 miles","Within 120 miles"],zoomlevels:[16,15,14,13,12,11,10,9,8,7]},constructor:function(e,t){$config(this,e),this.map=t,this.init()},init:function(){this.zoomlevels||$config(this,this.defaultParams);var e=$("scale");if(e){this.tooltip=$("slider_tooltip");var t=$("slide_me");this.zoom=this.map.getZoom(),this.z=this._upd_z=this.getValueIndex(this.zoom),this.ds=new $u.Slider({dir:"y",el:e,fe:t,p:this.z,z0:0,z1:this.zoomlevels.length-1,onUpdate:this.update,onUpdateEnd:this.update_end,panTo:function(e){this._pan_fx=new $fx.effect({wait:!1,duration:200,items:[new $fx.style({el:this.fe,prop:this.prop,from:this.v2px(this.pm),to:this.v2px(e)})],onEnd:function(){this._pan_fx=null},scope:this})}},this),$e.on({"#zoom_in":this.zoomIn,"#zoom_out":this.zoomOut},this),B.on("location:zoom_changed",this.mapZoomHandler,this),this.ready()}},getValueIndex:function(e){for(var t=this.zoomlevels,i=0,o=t.length;o>i;i++)if(t[i]==e)return i;return-1},digitize:function(e){return.5>e%1?Math.floor(e):Math.ceil(e)},update:function(e){var t=this._upd_z=this.digitize(e),i=+this.tooltips[Math.floor(e)].v||0,o=+this.tooltips[Math.ceil(e)].v;this.setupTooltip(t,Math.round((o-i)*(e%1)+i))},setupTooltip:function(e){this.tooltip.innerHTML=this.tooltips[e]},update_end:function(e){var e=this.z=this.digitize(e);this.setupTooltip(e),this.ds.panTo(e),this.zoom=this.zoomlevels[e],this.map.setZoom(this.zoom)},ready:function(){var e=this.getValueIndex(this.zoom);e=this.z=this.digitize(e),this.setupTooltip(e),this.ds.panTo(e),this.zoom=this.zoomlevels[e]},zoomIn:function(){var e=this.getValueIndex(this.zoom);0!=e&&(this.ds.pm=e,e--,this.update_end(e))},zoomOut:function(){var e=this.getValueIndex(this.zoom),t=this.zoomlevels;e>=t.length-1||(this.ds.pm=e,e++,this.update_end(e))},mapZoomHandler:function(){if(this.map){var e=this.map.getZoom();if(e!=this.zoom){var t=this.getValueIndex(e);-1!=t&&(this.ds.pm=t,this.update_end(t))}}}}),B.HereMapsViewUrlBuilder=$class({name:"HereMapsViewUrlBuilder",APP_ID:"mbhhVfXVTw73DLXhrqD5",APP_CODE:"1oSmL7H8Uf0EGkHDlo4ViA",tpl:"https://image.maps.api.here.com/mia/1.6/mapview?app_id={appId}&app_code={appCode}&ctr={latitude},{longitude}&ppi={pixelsPerInch}&z={zoom}&w={width}&h={height}",setLatitude:function(e){return this.latitude=e,this},setLongitude:function(e){return this.longitude=e,this},setHiDpi:function(e){return this.isHiDpi=e,this},setZoom:function(e){return this.zoom=e,this},setWidth:function(e){return this.width=e,this},setHeight:function(e){return this.height=e,this},build:function(){return $u.tpl(this.tpl,{appId:this.APP_ID,appCode:this.APP_CODE,latitude:this.latitude,longitude:this.longitude,pixelsPerInch:this.isHiDpi?320:72,zoom:this.zoom,width:this.isHiDpi?2*this.width:this.width,height:this.isHiDpi?2*this.height:this.height})}}),B.HoN_v3.Profile.LocationViewController||(B.HoN_v3.Profile.LocationViewController=$class({map:B.HereMap,position:null,profile:null,geoLocationModel:null,_locationSelector:null,_cityId:null,_inited:!1,constructor:function(e,t){this.wrap=t,this.geoLocationModel=new B.HoN_v3.GeolocationModel,this.profile=e.profile,this.user=e,this.position=e.profile.getLocation(),this.isOwnProfile=e.own_profile,this.$b_hon=B.HoN_v3.on({"section:toggled":this.onSectionToggled,"location:moved":this.onPinMoved,"location:background":this.sendBackgroundLocation},this),B.on("location:coordinates",this.updateLocation,this),this.$e=$e.on({".js-location-distance-open":this.openDistanceOverlay,".js-show-map":this.showMap},this)},destroy:function(){$e.un(this.$e),B.un("location:coordinates",this.updateLocation,this),B.HoN_v3.un(this.$b_hon),this._deinitControls(),this.geoLocationModel.destroy(),this.geoLocationModel=null,this.wrap=null,this.position=null,this.profile=null},getCfg:function(){function e(e,t){return $u.tpl($l.get("people_nearby",["SEARCH_AREAS","WITHIN_X_"+t]),{v:e})}var t=this.position.getLatitude(),i=this.position.getLongitude();return{map:{lat:t,lon:i,my_location_lat:t,my_location_lon:i,zoom:14,locationSetup:{dragEnable:!0,confirmed:!0,confirmedOnSearch:!0,tooltipQuestion:"",tooltipOK:"",marker:{classes_map:{mt_bl_tail:"tc",mt_tr_tail:"tc",mt_br_tail:"tc",mt_tl_tail:"tc"},tpl:$u.dust.render("profile/block.location",{},"MAP_TOOLTIP")}}},mapSlider:{zoom:14,zoomlevels:[16,15,14,13,12,11,9,8,7,6],areas:["ma_200_M","ma_500_M","ma_1_Km","ma_2_Km","ma_5_Km","ma_10_Km","ma_25_Km","ma_50_Km","ma_100_Km","ma_200_Km"],tooltips:[e(200,"M"),e(500,"M"),e(1,"KM"),e(2,"KM"),e(5,"KM"),e(10,"KM"),e(25,"KM"),e(50,"KM"),e(100,"KM"),e(200,"KM")]}}},openDistanceOverlay:function(){B.Ovl.open({type:"hon-v3-share-location",user:this.user})},showMap:function(){for(var e=$el.select(this.wrap,".js-map"),t=e.length-1;t>=0;t--){var i=this.profile.getLocation(),o=(new B.HereMapsViewUrlBuilder).setWidth(520).setHeight(160).setZoom(14).setLatitude(i.getLatitude()).setLongitude(i.getLongitude()).setHiDpi($u.is_hidpi()).build();e[t].setAttribute("src",o)}},onPinMoved:function(e){var t=e.lat,i=e.lng;this.geoLocationModel.getCity(t,i),this.section.form_el.lat.value=t,this.section.form_el.lon.value=i},sendBackgroundLocation:function(e,t,i){"profile"==i?this.geoLocationModel.save(e,t,this.onSave,this):this.geoLocationModel.saveInBackground(e,t,this.onBackgroundSave,this)},onSave:function(){B.HoN_v3.Models.Cache.CurrentUserCache.invalidate(),B.App.reload()},onBackgroundSave:function(){B.fire("geo:update")},updateLocation:function(e){var t=+this._cityId,i=e.getId();if(t!==i){var o=this._locationSelector.value==i;B.fire("location:city_changed",e,o),this.section.form_el.lat&&(this.section.form_el.lat.value=e.getLatitude(),this.section.form_el.lon.value=e.getLongitude()),this._locationSelector.value!=i&&(this._locationSelector.set_value(i),this._locationSelector.set_label(e.getName())),this._cityId=i}this.section.save_btn.change(!0)},onSectionToggled:function(e){"B.HoN_v3.EditableSection.ProfileEditLocation"==e.name&&(this.section=e,e.opened?this._initControls():this._deinitControls())},_initControls:function(){this._inited||(this.$geo=this.geoLocationModel.on("location:coordinates",this.updateLocation,this),this._locationSelector=this.section.ctrl,this._locationSelector.on("change",this._getCoords,this),this._cityId=this._locationSelector.value,this.initGeoLocation(),this._inited=!0)},_deinitControls:function(){this._inited&&(this.map.destroy(),this.$geo&&this.geoLocationModel.un(this.$geo),this._locationSelector&&(this._locationSelector.un("change",this._getCoords,this),this._locationSelector=null),this._cityId=null,this._inited=!1)},_getCoords:function(e){e&&this.geoLocationModel.getCoordinates(e)},initGeoLocation:function(){$("m_map")&&this.map.init(this.getCfg())}})),function(){function e(e,o){return e.section(o.get(["TITLE"],!1),o,{block:t},{}).write(" ").section(o.get(["CONTENT"],!1),o,{block:i},{})}function t(e){return e.write("Profile")}function i(e,t){return e.write(' <div id="profile_c" class="flex flex--column profile_"> ').reference("HTMLBLOCK_HEADER",t,["s"]).write(' <div class="profile-info"> ').reference("HTMLBLOCK_PHOTO_LIST",t,["s"]).write(' <section class="section-left-side"> ').reference("HTMLBLOCK_ENTRY",t,["s"]).write(" ").reference("HTMLBLOCK_EDUCATION",t,["s"]).write(" ").reference("HTMLBLOCK_LOCATION",t,["s"]).write(" ").reference("HTMLBLOCK_IHT",t,["s"]).write(" ").reference("HTMLBLOCK_UNIVERSITY",t,["s"]).write(' <div id="js-profile-friends">').reference("HTMLBLOCK_UNITED_FRIENDS",t,["s"]).write("</div> ").reference("HTMLBLOCK_FACEBOOK_INTERESTS",t,["s"]).write(" ").reference("HTMLBLOCK_INTERESTS",t,["s"]).write(" ").reference("HTMLBLOCK_PERSONAL_INFO",t,["s"]).write(" ").reference("HTMLBLOCK_ABOUT_ME",t,["s"]).write(" ").reference("HTMLBLOCK_LANGUAGES",t,["s"]).write(' </section><!-- --><section class="section-right-side"> ').reference("HTMLBLOCK_SCORE",t,["s"]).write(" ").reference("HTMLBLOCK_SECRET_COMMENTS",t,["s"]).write(" ").reference("HTMLBLOCK_GIFTS",t,["s"]).write(" ").reference("HTMLBLOCK_VERIFY",t,["s"]).write(" ").reference("HTMLBLOCK_AWARDS",t,["s"]).write(" ").reference("HTMLBLOCK_OTHER_POPULARITY",t,["s"]).write(' </section> </div> <div class="flex__item flex__item--auto flex flex--column profile-photo-grid"> <div class="flex__item--fixed banner-container banner-container--wide hidden js-banner-slot"></div> <div class="flex__item--auto">').reference("HTMLBLOCK_PHOTO_LIST_GRID",t,["s"]).write('</div> <div class="flex__item--auto">').reference("HTMLBLOCK_UPLOAD",t,["s"]).write("</div> </div> </div> ")}return $u.dust.register("profile/block.profile",e),e.s={TITLE:t,CONTENT:i},e}(),function(){function e(e,r){return e.write('<div class="ovl-body"> <div class="ovl-content"> <h1>Add a photo of you</h1> <p class="x-large"> ').section(r.get(["COMMUNICATE"],!1),r,{block:t},{}).write(" ").section(r.get(["PLAY_GAME"],!1),r,{block:i},{}).write(" ").section(r.get(["SHARE_AWARDS"],!1),r,{block:o},{}).write(' </p> </div> <div class="ovl-buttons"> <div class="btn btn--blue"> <span class="btn-txt">Add photos</span> ').section(r.get(["_URL"],!1),r,{block:s},{}).write(" ").section(r.get(["_CLOSE"],!1),r,{block:n},{}).write(' </div> </div> <div class="ovl-close"><i class="icon ico--grey ico--cross js-ovl-close"></i></div> </div>')}function t(e){return e.write("You need a profile photo to chat. Add some great photos of yourself.")}function i(e){return e.write("You need a profile photo to play the game. Add some great photos of yourself.")}function o(e){return e.write("You need a profile photo to share your award. Add some great photos of yourself.")}function s(e,t){return e.write('<a href="').reference("profile_url",t).write('" class="b-link app" rel="').reference("profile_state",t).write('"></a>')}function n(e){return e.write('<span class="b-link js-ovl-close"></span>')}return $u.dust.register("overlays/popup.add-photo",e),e.s={COMMUNICATE:t,PLAY_GAME:i,SHARE_AWARDS:o,_URL:s,_CLOSE:n},e}(),B.HoN_v3.Profile.Controller=$class($u.Observable,{_user_id:null,_wrap:null,_cfg:null,_page_tpl:"profile/block.profile",model:null,curr_user_model:null,views:null,_extendedProfileInfo:!1,gridOpened:!1,$e_friends:null,$e_model:null,$e_header:null,$b:null,$user_request:null,_page_inited:!1,show_award_id:null,RETRY_COUNT:3,pageParams:null,AWARD_ID:"{awardId}:{userId}",constructor:function(e,t,i,o,s){this.$s=o,this.pageParams=s,$super(this,arguments),this._user_id=e,this._wrap=t,i=i||{},this._cfg=i,this._extendedProfileInfo=B.HoN_v3.Partner.Features.allowProfileEdit();var n=1==$u.sessionStorage.getItem("showPrivatePhotos")?!0:null;this.model=B.Features.getFeature($p.FeatureType.ALLOW_UNITED_FRIENDS).getEnabled()?new B.HoN_v3.Profile.Model2(this._user_id,!1,this._extendedProfileInfo,n,i.exclude_private_photos):new B.HoN_v3.Profile.Model(this._user_id,!1,this._extendedProfileInfo,n,i.exclude_private_photos),this.model.is_own()?this.init():this.currentUserRequestToken=B.HoN_v3.Models.Cache.CurrentUserCache.fetch(this.on_self_model,this)},on_self_model:function(e){var t=e.getUser();return this.model?(this.model._data.curr_user={profile:t},this.init(),void 0):(B.fire("page:fatal"),void 0)},request_user_verification:function(){this.$user_request=B.HoN_v3.Models.Cache.CurrentUserCache.fetch(this.user_verification_ready,this)},user_verification_ready:function(e){var t=e.getUser(),i=t.getVerifiedInformation(),o=t.getGender(),s=B.Session.getUserId()==t.getUserId();this.views.verify.set_data(i,o,s).render()},init:function(){var e=this._cfg;this.views={},this.pageParams.award_id&&(this.show_award_id=$u.tpl(this.AWARD_ID,{awardId:this.pageParams.award_id,userId:parseInt(this._user_id,10)})),e&&e.exclude_header||($config(this.views,{header:new B.HoN_v3.Profile.HeaderView({client_source:this.model.client_source,profile_link_position:this.pageParams.p})}),this.$e_header=this.views.header.on({voted:this.on_voted,favorite:this.on_header_favorite,send_smile:this.on_header_send_smile},this)),this.model.is_own()||$config(this.views,{other_popularity:new B.HoN_v3.Profile.OtherPopularityBlockView}),$config(this.views,{photo_list:new B.HoN_v3.Profile.PhotoListView(e&&e.photo_list||{}),location:new B.HoN_v3.Profile.LocationView,interests:new B.HoN_v3.Profile.InterestsView,facebook_interests:new B.HoN_v3.Profile.FacebookInterestsView,iht:new B.HoN_v3.Profile.IHTView,secret_comments:new B.HoN_v3.Profile.SecretCommentsView,score:new B.HoN_v3.Profile.ScoreView,awards:new B.HoN_v3.Profile.AwardsView,education:new B.HoN_v3.Profile.EducationView,languages:new B.HoN_v3.Profile.LanguagesView,verify:new B.HoN_v3.Profile.VerifyView}),this.views.united_friends=B.Features.getFeature($p.FeatureType.ALLOW_UNITED_FRIENDS).getEnabled()?new B.HoN_v3.Profile.FriendsView2:new B.HoN_v3.Profile.FriendsView,this.views.verify.viewerVerified=e&&e.viewerVerified;
var t=this.views.photo_list;t.replace_id=this.pageParams.replace_id,t.unfolded=this.pageParams.replace_id||this.pageParams.unfolded_upload||this.pageParams.messenger_photo_upload||this.pageParams.game_photo_upload,"need_photos"in e&&(t.need_photos=e.need_photos),"source"in e&&(t.source=e.source),this.pageParams.messenger_photo_upload||this.pageParams.game_photo_upload?B.Upload2.UploadOverlayController.open("photos_of_me_blocker"):this.pageParams.show_secret_comments&&(this._show_comments=!0),this._extendedProfileInfo?($config(this.views,{personal_info:new B.HoN_v3.Profile.PersonalInfoView}),this.model.is_own()&&B.HoN_v3.Partner.Features.extendedPopularity()&&$config(this.views,{entry:new B.HoN_v3.Profile.EntryViewController})):$config(this.views,{about_me:new B.HoN_v3.Profile.AboutMeView}),B.Features.getFeature("ALLOW_GIFTS").getEnabled()&&(this.views.gifts=new B.HoN_v3.Profile.GiftsView,this.views.gifts.on("delete",this.on_gift_delete,this)),B.HoN_v3.InterestsModel.get(this.on_interests_group,this),this.$e_friends=this.views.united_friends.on({filter:this._update_friends,ready:this._render_friends,rendered:this._update_connections},this);var i={"gift:purchased":this.gift_purchased,"video:converted":this.get_album,"spp:change_status":this.spp_status_changed,"credits:update_amount":this.credits_amount_updated,"vip:change_status":this.vip_status_changed,"gallery:gridOpen":this.on_grid_open,"gallery:photoDeleted":this.on_photo_count_updated};if(this.model.is_own()&&($config(this.views,{photo_list_grid:new B.HoN_v3.Profile.GridView,upload:new B.HoN_v3.Profile.GridUploadView}),B.HoN_v3.IHTModel.get().on("data",this.update_iht,this),this.$e_grid=this.views.photo_list_grid.on({"photo-count-updated":this.on_photo_count_updated},this),i["awards:updated"]=this.onAwardsUpdate),this.model._captcha_blocked)return this._on_captcha_required(),void 0;this.views.photo_list.on("photo_clicked",this.on_photo_clicked,this),this.$e_model=this.model.on({"captcha-required":this._on_captcha_required,updated:this._draw,"updated:vote":this._update_header,"updated:awards":this.onAwardsUpdated,error:this._on_data_error,album:this._on_album,"updated:gifts":this._on_gifts_updated,"form-data":this._on_form_data,unblocked:this.on_unblock,favorited:this.on_favorited,smile_sent:this.on_smile_sent},this),this._$e=$e.on({".js-award-show":this.on_show_award_popup,".js-profile-show-secret-comments":this.on_show_secret_comments,".js-profile-unblock":this.unblock_user,".js-profile-empty":this.showEmptyProfileOvl},this),this.$b=B.on(i,this);var o;this.pageParams.edit&&B.HoN_v3.ProfileEdit&&(o=B.HoN_v3.ProfileEdit.sections.cfg[this.pageParams.edit],o&&(o.expand=!0)),this.pageParams.p&&this.pageParams.folder?(B.HoN_v3.Profile.NextupController.setFolder(B.HoN_v3.FolderResultsManager.get(this.pageParams.folder)).show(+this.pageParams.p-1),this.__qs_p=this.pageParams.p,this.__qs_folder=this.pageParams.folder,$u.history.cleanUrl({p:this.pageParams.p,folder:this.pageParams.folder})):$u.history.cleanUrl(),this.model.isLoaded()&&this._draw(),this.model.album&&this._on_album(this.model.album),"upload_photo"==this.pageParams.popup&&B.Upload2.UploadOverlayController.open("photos_of_me_blocker")},showEmptyProfileOvl:function(e){if(!e)return!1;var t=(e.getAttribute("data-type"),new B.HoN_v3.Overlays.ProfileEmptyView),i=this.model._data.person;i&&B.Ovl.open({type:"ovl",html:t.setData(this.model._data.person.getGender(),this.model._data.person.getName())})},get_album:function(){this.model.get_album()},rerender_header:function(){this.model.is_own()&&(this._update_section("entry",this.views.entry,this.model._data),this.views.header&&this.views.header.render())},spp_status_changed:function(){this.rerender_header(),this.request_user_verification()},vip_status_changed:function(){this.rerender_header()},credits_amount_updated:function(e){this.model.is_own()&&(this.model._data.person.setAvailableCredits(e.raw_amount),this._update_section("entry",this.views.entry,this.model._data))},unblock_user:function(){this.model.unblock()},on_unblock:function(){var e={};e[this.model._data.gender]=!0,this._show_notification("ABUSE_UNBLOCKED",e),B.on("ovl:close",this.update_header,this)},_on_captcha_required:function(){this.captcha_blocked=!0,this.$s&&(B.fire("profile:blocked",this._user_id,this.__qs_p,this.__qs_folder),this.$s=null)},on_favorited:function(e){var t={};t[this.model._data.gender]=!0,this._show_notification(e?"ADDED":"REMOVED",t)},on_smile_sent:function(){this._show_notification("SENT"),this.views.header.toggle_smile_button(!1)},on_photo_count_updated:function(){this.model._get_full_profile()},update_header:function(){B.un("ovl:close",this.update_header,this),B.App.reload()},destroy:function(){if(this.currentUserRequestToken&&(B.HoN_v3.Models.Cache.CurrentUserCache.cancel(this.currentUserRequestToken),this.currentUserRequestToken=null),this.$b&&B.un(this.$b),this.model&&(this.$e_model&&this.model.un(this.$e_model),this.model.destroy()),this._$e&&$e.un(this._$e),this.$e_grid&&this.views.photo_list_grid.un(this.$e_grid),this.$e_header&&this.views.header.un(this.$e_header),this.$e_education&&(B.HoN_v3.un(this.$e_education),this.$e_education=null),this.locationVC&&(this.locationVC.destroy(),this.locationVC=null),this.$user_request&&(B.HoN_v3.Models.Cache.CurrentUserCache.cancel(this.$user_request),this.$user_request=null),B.HoN_v3.IHTModel.un("data",this.update_iht,this),B.HoN_v3.InterestsModel.off(this.on_interests_group,this),this.views){this.$e_friends&&this.views.united_friends.un(this.$e_friends),this.views.gifts&&this.views.gifts.un("delete",this.on_gift_delete,this),this.views.photo_list.un("photo_clicked",this.on_photo_clicked,this);for(var e in this.views)this.views[e]&&(this.views[e].destroy(),delete this.views[e])}this.$e_curr_user_model&&(this.curr_user_model.un(this.$e_curr_user_model),this.curr_user_model.destroy()),this.$b=this._$e=this.$e_header=this.views=this.model=this.$e_friends=this.$e_model=null,$super(this,arguments)},update_iht:function(e,t){this.model._data.iht=e,t&&(this.model._data.person=t),this.views.iht&&this._update_section("iht",this.views.iht,this.model._data)},on_gift_delete:function(e,t){this.model.delete_gift(e,t)},on_interests_group:function(e){this.views.interests.set_groups(e),this.model._data.profile&&this.views.interests.set_data(this.model._data).render()},_init_page:function(){if(!this._page_inited){this._show_comments&&(this._show_comments=!1,this.show_secret_comments("CLIENT_SOURCE_CLIENT_NOTIFICATION")),B.HoN_v3.ExternalProvidersPhoto.get_cached();var e=B.Features.getFeature($p.FeatureType.ALLOW_UPLOAD_VIDEO);e&&e.getEnabled()&&B.HoN_v3.ExternalProvidersVideo.get_cached();var t={};for(var i in this.views)t["HTMLBLOCK_"+i.toUpperCase()]='<div class="js-profile-'+i+'"></div>';this._wrap.innerHTML=$u.dust.render(this._page_tpl,{CONTENT:t}),this._page_inited=!0,this.locationVC=new B.HoN_v3.Profile.LocationViewController(this.model._data,this._wrap)}},_draw:function(){if(!this.captcha_blocked){var e=this.model._data.person;if(e.getDeleted())return this.model.un(this.$e_model),this.$s&&this.$s.abort(),this._on_data_error();this._init_page();for(var t in this.views){var i=this.views[t].set_container($el.down(this._wrap,".js-profile-"+t));switch(t){case"photo_list_grid":break;case"verify":var o=this.model._data.verificationHideDetails,s=this.model._data.profile.getVerifiedInformation(),n=this.model._data.person.getGender(),r=B.Session.getUserId()==this.model._data.person.getUid(),a=this.model._data.person.getVerifiedUser();i.set_data(s,n,a,r,o).render();break;default:i.set_data(this.model._data).render()}}this.model.is_own()?B.HoN_v3.Education.set_viewing_person(null):B.HoN_v3.Education.set_viewing_person({name:e.getName(),gender:e.getGender(),image:this.model._data.profile.getProfileImageId()}),this.$e_education=B.HoN_v3.on("education_updated",this._on_education_updated,this),this.$s&&(B.fire("profile:usable"),this.$s=null),this.show_award_id&&(this._show_award_popup(this.show_award_id),this.show_award_id=null)}},getTitle:function(){var e=this.model._data.person,t=e&&{name:e.getName(),num_years:e.getAge()};return $u.tpl($l.get("hon/profile",["TITLES","clientside"]),t)},_update_connections:function(){B.HoN_v3.ProfileFriends.set_friends({friends:{connection_tpl:'<div class="user">									<div class="brick brick--xlg tooltip-wrap">										<div class="brick-img"><img src="{photo_url}" alt="" width="80" height="80"></div>										<div class="tooltip"><span class="tooltip-txt">{name}</span></div>									</div>									<div class="brick-txt"><span class="brick-txt_">{name}</span></div>								</div>',connections:this.views.united_friends.get_profile_friends()}})},_update_header:function(e){e&&this.views.header.set_profile(e),this.views.header.render()},_on_album:function(){if(this.views.photo_list.set_data(this.model).render(),this.model.is_own()&&this.views.photo_list_grid.set_data(this.model,this.gridOpened).render(),this.views.header&&this.views.header.set_album(this.model.album).render(),this.fire("photos_ready"),this.model.album.length){var e=this.model.album[0].getPhotos();if(e&&e.length){for(var t=null,i=!1,o=0;o<e.length;o++)if(e[o].getVideo()){t=e[o],i=t.getVideo().getIsProcessing();break}t&&(i?B.fire("import:video-imported"):B.fire("video:already_present"))}}},_on_aboutme_updated:function(e){this.views.about_me.set_data(e)},_on_gifts_updated:function(e){this.views.gifts.set_data(e).render()},_update_section:function(e,t,i){var o,s=B.HoN_v3.ProfileEdit.sections.sections[e];t.set_data(i),o=$u.tpl2el(t.get_result()),s&&$el.down(o,"form")?s.recreate(o):(s&&(s.destroy(),delete B.HoN_v3.ProfileEdit.sections.sections[e]),t.render()),B.HoN_v3.ProfileEdit.sections.autoexpand()},_on_education_updated:function(e){var t=this.model._data;e.getOptions?t.edit_form=e:t.curr_user={profile:e},this._page_inited&&(this.model.is_own()?this.views.education&&this._update_section("work-education",this.views.education,t):(this.views.education&&this.views.education.set_data(t).render(),this.views.header&&this.views.header.set_data(t).render()))},_on_data_error:function(){B.App.app_link("mm","/game")},_update_friends:function(){this.views.united_friends.set_data(this.model._data).render()},_render_friends:function(){this.model._data.user.setUnitedFriends(this.views.united_friends.get_profile_friends()),this.views.united_friends.render(),this.friends_connections_loaded()},on_show_award_popup:function(e){var t=e.getAttribute("data-award-id");this._show_award_popup(t)},_show_award_popup:function(e){var t=this.model.get_award(e);t&&(B.Awards.Manager.__requestGenerateAwardVideo(e),B.Ovl.open({type:"ovl",html:this.views.awards.render_popup(t,this.model._data)}))},get_aboutme_response:function(e){return{$gpb:"Hotornot.Profile.AboutMeChanged",html:this.views.about_me.set_edited_block(e),value:e}},get_langs_block:function(){return{html:this.views.languages.set_data(this.model._data).get_result()}},get_langs_txt:function(){var e=this.model._get_profile_option("languages");return{str:e&&e.getDisplayValue()||""}},on_photo_clicked:function(e){this.fire("photo_clicked",e)},friends_connections_loaded:function(){this.views.header&&this.views.header.header.update_friends_connections2(this.model._data.user)},gift_purchased:function(e){this.model._user_id==e.user_id_to&&this.model._get_full_profile()},on_voted:function(){this.model.update_vote_info()},on_header_favorite:function(e){this.model.set_favorite(e)},on_header_send_smile:function(){this.model.send_smile()},on_show_secret_comments:function(){this.show_secret_comments("CLIENT_SOURCE_OTHER_PROFILE")},show_secret_comments:function(e){var t=this.model._data.person;B.OvlQueue.push({type:"hon-v3-secret-2",html:"",context:e,person_id:t.getUid(),username:t.getName()})},_show_notification:function(e,t){B.Ovl.open({type:"hon-v3-notify",html:this.views.header.show_confirmation(e,t)})},_on_form_data:function(){var e=this.views.education;e&&this._update_section("work-education",e,this.model._data),this.views.personal_info&&this._update_section("personal-info",this.views.personal_info,this.model._data)},on_grid_open:function(){this.gridOpened=!this.gridOpened,this.views.header.data.gridOpened=this.gridOpened,this._update_header()},onAwardsUpdate:function(){this.model.update_awards_list()},onAwardsUpdated:function(){this.views.awards.set_data(this.model._data).render()}}),B.HoN_v3.EncountersViewClientProfile=$class(B.HoN_v3.EncountersView,{destroy:function(){this.destroy_profile(),$super(this,arguments)},destroy_profile:function(){this.profile_controller&&(this.profile_controller.destroy(),this.profile_controller=null)},on_toggle_more_info:function(e){var t=$el.has(this.wrap_el,"loading");if(!t){if(e.hasAttribute("data-jst-class")&&B.Toggle.manage(e),this.more_info_visible=!this.more_info_visible,this.more_info_link=e,this.more_info_loaded)this.more_info_toggle(this.more_info_visible);else{this.toggle_loading("loading",!0),this.more_info_el.innerHTML="",this.destroy_profile();var i,o=this.user.getPerson().getUid(),s=this.more_info_el,n={exclude_header:!0,exclude_private_photos:!0,need_photos:this.get_num_photos_needed(),source:"encounters"};B.App.$s||(i=B.App.$s=new $s.Request("mm/profile-view",$s.TAG_WEBAPP)),this.profile_controller=new B.HoN_v3.Profile.Controller(o,s,n,i,this.pageParams),this.profile_controller.on("photos_ready",this.on_more_info_ready,this)}$el.del(this.wrap_el,"notenoughphotos-ovl")}},vote:function(){this.destroy_profile(),$super(this,arguments)},on_more_info_ready:function(){this.profile_controller.on("photo_clicked",this.set_photo,this),this.more_info_loaded=!0,this.toggle_loading("loading",!1),this.more_info_toggle(!0)},use_client_side_profile:function(){return B.App.pages["profile-view"].client_side}}),function(){function e(e,i){return e.write('<div class="undo js-undo-container"> ').section(i.get(["PREV_USER"],!1),i,{block:t},{}).write(' <div class="next__users"> <div class="next__users_ js-next-users" ').section(i.get(["_HAVE_PREV"],!1),i,{block:a},{}).write("> ").section(i.get(["USER"],!1),i,{block:l},{}).write(" </div> </div> </div>")}function t(e,t){return e.write(' <div class="undo__user"> <div class="brick-wrap tooltip-no-js-wrap"> ').section(t.get(["UNDO_INVISIBLE"],!1),t,{block:i},{}).write(" ").section(t.get(["UNDO_HOT"],!1),t,{block:o},{}).write(" ").section(t.get(["UNDO"],!1),t,{block:s},{}).write(" ").section(t.get(["UNDO_REQUIRED_ACTION"],!1),t,{block:n},{}).write(" ").section(t.get(["UNDO_DISABLED"],!1),t,{block:r},{}).write(" </div> </div> ")}function i(e,t){return e.write(' <div class="brick invisible"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> </div> <div class="brick-txt"></div> ')}function o(e,t){return e.write(' <div class="brick"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="brick brick--xsm brick--red brick--bc"> <i class="ico ico--white ico--heart-sm"></i> </div> </div> <div class="brick-txt"></div> <div class="tooltip tc"> <div class="tooltip-txt">You can\'t undo \'Yes\' vote</div> </div> ')}function s(e,t){return e.write(' <div class="brick"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="brick brick--xsm brick--bc"> <div class="btn btn--xsm btn--ico undo__btn"> <i class="ico ico--white ico--undo"> <span class="b-link js-undo-button"></span> </i> </div> </div> </div> <div class="brick-txt">Undo</div> <div class="tooltip tc"> <div class="tooltip-txt">Undo last vote</div> </div> ')}function n(e,t){return e.write(' <div class="brick"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="brick brick--xsm brick--bc"> <div class="btn btn--xsm btn--ico undo__btn"> <i class="ico ico--white ico--undo"> <span class="b-link js-undo-button"></span> </i> </div> </div> </div> <div class="brick-txt">Undo</div> <div class="tooltip tc"> <div class="tooltip-txt">Undo last vote</div> </div> ')}function r(e,t){return e.write(' <div class="brick disabled"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="brick brick--xsm brick--bc"> <div class="btn btn--white btn--xsm btn--ico disabled"> <i class="ico ico--undo"></i> </div> </div> </div> <div class="brick-txt">Undo</div> <div class="tooltip tc"> <div class="tooltip-txt">You can\'t use undo twice in a row.</div> </div> ')}function a(e,t){return e.write(' style="-webkit-transform: translate(0, -').reference("user_height",t).write("px); transform: translate(0, -").reference("user_height",t).write('px);"')}function l(e,t){return e.write(" ").section(t.get(["CURRENT"],!1),t,{block:_},{}).write(" ").section(t.get(["NORMAL"],!1),t,{block:p},{}).write(" ")}function _(e,t){return e.write(' <div> <div class="brick brick--outline undo__user--current"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> </div> </div> ')}function p(e,t){return e.write(' <div> <div class="brick undo__user" data-control-type="tooltip"> <div class="brick-img"><img src="').reference("src",t).write('" alt=""></div> <div class="tooltip"> <div class="tooltip-txt"> ').section(t.get(["MALE"],!1),t,{block:c},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:u},{}).write(" </div> </div> </div> </div> ")}function c(e){return e.write("Keep playing to see him")}function u(e){return e.write("Keep playing to see her")}return $u.dust.register("game/block.undo",e),e.s={PREV_USER:t,_HAVE_PREV:a,USER:l},t.s={UNDO_INVISIBLE:i,UNDO_HOT:o,UNDO:s,UNDO_REQUIRED_ACTION:n,UNDO_DISABLED:r},l.s={CURRENT:_,NORMAL:p},p.s={MALE:c,FEMALE:u},e}(),B.Encounters.DonkeyNextupView=$class(B.DustView,{template:"game/block.undo",listLength:7,setData:function(e,t,i,o,s,n,r){var a=n||r,l=[],_=Math.min(i.length-1,this.listLength),p=0;for(t&&l.push(this._getUser(t)),e&&l.push(this._getUser(e,!0));_>p;p++)l.push(this._getUser(i[p]));return this.set({PREV_USER:!s&&{src:t&&this._getPhoto(t),UNDO_HOT:"yes"===o,UNDO:!a&&"no"===o,UNDO_REQUIRED_ACTION:t&&n&&"no"===o,UNDO_DISABLED:t&&r&&"no"===o,UNDO_INVISIBLE:!t},_HAVE_PREV:t&&{user_height:54},USER:l})},_getUser:function(e,t){var i={},o=t?"CURRENT":"NORMAL",s=e.getPerson().getGender()===$p.SexType.MALE?"MALE":"FEMALE";return i[o]={src:e&&this._getPhoto(e)},i[o][s]=!0,i},_getPhoto:function(e){var t=e.getAlbum(),i=t&&t.getPhotos();return i&&i[0]?i[0].getPreviewUrl():e.getPreviewImageId()}}),B.Encounters.NextupController=$class($u.Observable,{_container:null,_undone:!1,currentPosition:0,userBlockHeight:54,constructor:function(e){$super(this,arguments),this._container=e},destroy:function(){this._container=null,$super(this,arguments)},animate_nextup:function(e){{var t=this.getWrapper();$el.down(this._container,".undo__user")}this._undone=e,$el.add(t,"animated");var i=e?0:this.userBlockHeight*(this.currentPosition-1),o=$el.get_prefixed_name("transform");t.style[o]="translate(0, "+i+"px)",$e.add(t,"transitionend",this.on_transition_end,this)},on_transition_end:function(){var e=this.getWrapper();$e.del(e,"transitionend",this.on_transition_end,this),this.fire("animation_end",this._undone)},getWrapper:function(){return this._wrapper&&$el.in_dom(this._wrapper)||(this._wrapper=$el.down(this._container,".js-next-users")),this._wrapper}}),B.Encounters.Undo=$class($u.Observable,{tpl_name:"game/block.undo",max_size:1,need_spp:!0,last_votes:null,in_progress:!1,payment_ovl:{type:"payment",url:"/billing/spp-ws.phtml?activation_place=115"},invite_ovl:{type:"hon-import-overlay",url:"/import/hon_game_invite.phtml?rfr=60"},constructor:function(){$super(this,arguments),this.last_votes=[],this.$b=B.on({"spp:change_status":this._on_spp_change},this),$e.on(".js-undo-button",this.undo,this)},destroy:function(){$e.un(".js-undo-button",this.undo,this),this.tpl_name=null,this.last_vote=null,this.options=null,B.un(this.$b),this.$b=null,this.payment_ovl=null},enabled:function(){return B.Features.getFeature("ALLOW_REWIND").getEnabled()},getRequiredAction:function(){return B.Features.getFeature("ALLOW_REWIND").getRequiredAction()},canEnable:function(){var e=this.getRequiredAction();return null!=e&&e!=$p.ActionType.NO_ACTION},undo:function(){if(this.enabled()){if(0===this.last_votes.length||this.in_progress)return;if(this.in_progress=!0,this.fire("encounters:undo",this.last_votes.pop()),!(this.last_votes.length>0))return;this.set_last_vote(this.last_votes.pop())}else switch(this.getRequiredAction()){case $p.ActionType.SUPER_POWERS:B.Ovl.open(this.payment_ovl);break;case $p.ActionType.OPEN_CONTACTS:B.Ovl.open(this.invite_ovl)}},set_last_vote:function(e){this.last_votes.push(e),this.last_votes.length>this.max_size+1&&(this.last_votes=this.last_votes.slice(-(this.max_size+1)))},_on_spp_change:function(e){this.get_last_vote()&&this.fire("spp",e)},get_last_vote:function(){return this.last_votes[this.last_votes.length-1]}}),function(){function e(e,i){return e.section(i.get(["SLOTS_ASK"],!1),i,{block:t},{}).write(" ").section(i.get(["SLOTS_GIVE"],!1),i,{block:s},{})}function t(e,t){return e.write(' <div class="ovl-body"> <div class="ovl-promo"> <div class="brick brick--xxxlg"> <div class="brick-img"><img src="').reference("user_pic",t).write('" alt=""></div> <mark class="brick brick--red"><i class="ico ico--white ico--heart-lg"></i></mark> </div> <h1> ').section(t.get(["MALE"],!1),t,{block:i},{}).write(" ").section(t.get(["FEMALE"],!1),t,{block:o},{}).write(" ").reference("title",t).write(' </h1> <span class="x-large">Your friends can help you connect – ask them for an extra connection slot!</span> </div> <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Ask friends</span><span class="b-link js-encounters-fb-dialog" data-control-type="fb-apprequest-dialog" data-control-name="hon_encounters_fb_reactivation"></span></div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function i(e,t){return e.reference("name",t).write("’s connection list is full!")}function o(e,t){return e.reference("name",t).write("’s connection list is full!")}function s(e,t){return e.write(' <div class="ovl-body"> <div class="ovl-promo"> ').section(t.get(["_USERS"],!1),t,{block:n},{}).write(' <h1>Help your friends out!</h1> <span class="x-large"> ').section(t.get(["ONE"],!1),t,{block:r},{}).write(" ").section(t.get(["TWO"],!1),t,{block:a},{}).write(' </span> </div> <div class="ovl-buttons"> <div class="btn btn--blue"><span class="btn-txt">Help them!</span><span class="b-link js-encounters-fb-dialog" data-control-type="fb-apprequest-dialog" data-control-name="hon_encounters_fb_reactivation"></span></div> </div> <div class="ovl-close"><i class="icon ico--white ico--cross js-ovl-close"></i></div> </div> ')}function n(e,t){return e.write(' <div class="brick brick--xlg"> <div class="brick-img"><img src="').reference("user_pic",t).write('" alt=""></div> </div> ')}function r(e,t){return e.reference("name_1",t).write(" and other friends are out of slots to make new connections. Give them free slots!")}function a(e,t){return e.reference("name_1",t).write(", ").reference("name_2",t).write(" and other friends are out of slots to make new connections. Give them free slots!")}return $u.dust.register("game/popup.possible-match",e),e.s={SLOTS_ASK:t,SLOTS_GIVE:s},t.s={MALE:i,FEMALE:o},s.s={_USERS:n,ONE:r,TWO:a},e}(),B.HoN_v3.EncountersController=$class(B.Encounters.ControllerBase,{empty_queue_tpl:"hotornot_v2/game/empty-queue",no_photos_ovl_type:"ovl",possible_match_ovl_tpl:"game/popup.possible-match",possible_match_ovl_type:"hon-v3-encounters-fb-reactivation",undo_handlers:null,open_with_photo_id:null,nextup_container:null,nextupController:null,_rendered:!1,init:function(){window.NUC=this,$super(this,arguments),this.nextup_container=$("next"),this.nextupController=new B.Encounters.NextupController(this.nextup_container),this.nextupController.on({animation_end:this.render_nextup},this)},destroy:function(){$super(this,arguments),this.open_with_photo_id=null,this.undo&&(this.undo.un(this.undo_handlers),this.undo.destroy(),this.undo=null),this.nextup_container&&(this.nextup_container.innerHTML="",this.nextup_container=null),this.nextupController&&(this.nextupController.destroy(),this.nextupController=null),this.$e_upload_group&&(B.Upload2.Controller.get_group("photos_of_me").un(this.$e_upload_group),this.$e_upload_group=null),this.last_vote=null,this._rendered=!1},init_controller:function(){$super(this,arguments),B.fire("page:unusable","encounters-photo-loaded");var e=B.Features.get("ALLOW_REWIND");(e.enabled===!0||e.required_action===$p.ActionType.SUPER_POWERS)&&(this.undo=new B.Encounters.Undo,this.undo_handlers=this.undo.on({"encounters:undo":this.on_undo,spp:this.on_spp_change},this))},request_users:function(){var e=$r.fromQueryString(B.App.url);if($u.history.cleanUrl(),e.photo_id&&(this.open_with_photo_id=e.photo_id),e.user_id){var t,i={from_search_by_name:$p.ClientSource.CLIENT_SOURCE_PROFILE_SEARCH,from_potd:$p.ClientSource.CLIENT_SOURCE_PHOTO_OF_THE_DAY};for(var o in i)if(o in e){t=i[o];break}if(t)return this.user_list.request_specific_users(this.$s,[e.user_id],t),void 0}this.user_list.request_next_users(this.$s)},on_undo:function(){this.user_list.rewind(),this.undo&&(this.last_vote=this.undo.get_last_vote(),this.last_vote=this.last_vote&&this.last_vote.choice),this.nextupController.animate_nextup(-1)},on_spp_change:function(){this.render_nextup()},on_add_users:function(e){$super(this,arguments);for(var t=[],i=0;i<e.length;i++){var o=e[i].getPerson();t.push({src:o.getPreviewImageId(),name:o.getName(),gender:o.getGender(),age:o.getAge()})}this.user_list.is_empty()&&t.shift()},on_user:function(){$super(this,arguments),this._rendered?this.nextupController.animate_nextup():this.render_nextup()},on_quota_updated:function(e){var t={};e&&(t={yes:e.getYesVotesQuota(),no:e.getNoVotesQuota()},0===this.quota.yes&&0===this.quota.no&&(t.yes>0||t.no>0)&&this.user_list.next()),this.quota=t},on_vote:function(e){$super(this,arguments),this.is_vote_enabled(e.choice)&&this.undo&&this.undo.set_last_vote(e)},render_nextup:function(e){var t,i,o,s=this.user_list.user,n=this.user_list.previous_user,r=this.user_list.users||[];this.undo?(t=this.last_vote,i=!this.undo.enabled()&&!this.undo.canEnable(),o=!this.undo.enabled()&&this.undo.canEnable()):i=!0,this.nextup_container.innerHTML=(new B.Encounters.DonkeyNextupView).setData(s,n,r,t,i,o,e),this.nextupController.currentPosition=n?-1:0,this._rendered=!!s,this.undo&&(this.undo.in_progress=!1)},on_last_user:function(){},on_no_photos:function(){B.Upload2.UploadOverlayController.open("photos_of_me_blocker"),this.$e_upload_group||(this.$e_upload_group=B.Upload2.Controller.get_group("photos_of_me").on("queue_completed",this._on_upload_queue_completed,this))},_on_upload_queue_completed:function(){B.Upload2.Controller.get_group("photos_of_me").un(this.$e_upload_group),this.$e_upload_group=null,this.request_users()}}),B.Encounters.class_map={Controller:B.HoN_v3.EncountersController,View:B.HoN_v3.EncountersViewClientProfile},B.Encounters.Photos=new(B.Encounters.get_class("Photos")),B.Encounters.Controller=new(B.Encounters.get_class("Controller")),B.HoN_v3.EncountersRootController=$class(B.HoN_v3.BaseRootController,{$b:null,init:function(e){this.$b=B.Encounters.on({usable:this.onUsable},this),B.HoN_v3.ProfileFriends.init(),B.HoN_v3.Education.init(),B.HoN_v3.ProfileInterestsExpander.init(),B.Encounters.Controller.init(e,this.pageParams)},getStubView:function(){var e=$u.dust.render("hotornot_v2/game/profile-header2",{highlight_buttons:{}});e=e.replace("js-profile-header-vote-yes","js-profile-header-vote-yes disabled").replace("js-profile-header-vote-no","js-profile-header-vote-no disabled").replace("profile-menu js-wrap","profile-menu js-wrap hidden");var t=$u.dust.render("hotornot_v2/game/block.game");return t.replace("</header>",e+"</header>")},getTitle:function(){return $l.get("hon/game",["HON_GAME","TITLE"])},destroy:function(){B.Encounters.un(this.$b),this.$b=null,B.Encounters.Controller.destroy(),B.HoN_v3.ProfileFriends.destroy(),B.HoN_v3.Education.destroy(),B.HoN_v3.ProfileInterestsExpander.destroy(),$super(this,arguments)},onUsable:function(){this.viewReady()}});